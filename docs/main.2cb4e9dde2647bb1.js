"use strict";(self.webpackChunkAuthPractice=self.webpackChunkAuthPractice||[]).push([[179],{6304:(vt,Re,F)=>{F.d(Re,{Dh:()=>Ue,GT:()=>_e,cc:()=>qe,on:()=>Oe,pX:()=>se,xv:()=>Ke});var y=F(5879),Q=F(120);vt=F.hmd(vt);const j=["ngOnDestroy"],se=(Le,je,gt,Dt={})=>new Proxy(Le,{get:(oe,De)=>gt.runOutsideAngular(()=>{var J;if(Le[De])return!(null===(J=Dt?.spy)||void 0===J)&&J.get&&Dt.spy.get(De,Le[De]),Le[De];if(j.indexOf(De)>-1)return()=>{};const he=je.toPromise().then(Ge=>{const X=Ge&&Ge[De];return"function"==typeof X?X.bind(Ge):X&&X.then?X.then(be=>gt.run(()=>be)):gt.run(()=>X)});return new Proxy(()=>{},{get:(Ge,X)=>he[X],apply:(Ge,X,be)=>he.then(Se=>{var Ot;const Fn=Se&&Se(...be);return!(null===(Ot=Dt?.spy)||void 0===Ot)&&Ot.apply&&Dt.spy.apply(De,be,Fn),Fn})})})}),_e=(Le,je)=>{je.forEach(gt=>{Object.getOwnPropertyNames(gt.prototype||gt).forEach(Dt=>{Object.defineProperty(Le.prototype,Dt,Object.getOwnPropertyDescriptor(gt.prototype||gt,Dt))})})};class Te{constructor(je){return je}}const Ue=new y.OlP("angularfire2.app.options"),Ke=new y.OlP("angularfire2.app.name");function Oe(Le,je,gt){const oe="object"==typeof gt&&gt||{};oe.name=oe.name||"string"==typeof gt&&gt||"[DEFAULT]";const J=Q.Z.apps.filter(he=>he&&he.name===oe.name)[0]||je.runOutsideAngular(()=>Q.Z.initializeApp(Le,oe));try{JSON.stringify(Le)!==JSON.stringify(J.options)&&B("error",`${J.name} Firebase App already initialized with different options${vt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Te(J)}const B=(Le,...je)=>{(0,y.X6Q)()&&typeof console<"u"&&console[Le](...je)};function qe(Le,je,gt,Dt,oe){const[,De,J]=globalThis.\u0275AngularfireInstanceCache.find(he=>he[0]===Le)||[];if(De)return function Be(Le,je){try{return Le.toString()===je.toString()}catch{return Le===je}}(oe,J)||(Me("error",`${je} was already initialized on the ${gt} Firebase App with different settings.${ut?" You may need to reload as Firebase is not HMR aware.":""}`),Me("warn",{is:oe,was:J})),De;{const he=Dt();return globalThis.\u0275AngularfireInstanceCache.push([Le,he,oe]),he}}const ut=!!vt.hot,Me=(Le,...je)=>{(0,y.X6Q)()&&typeof console<"u"&&console[Le](...je)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},9058:(vt,Re,F)=>{F.d(Re,{$s:()=>Bt,BH:()=>J,G6:()=>js,L:()=>Oe,LL:()=>He,P0:()=>Dt,Pz:()=>De,Sg:()=>he,UG:()=>be,US:()=>Te,ZB:()=>Y,ZR:()=>Fe,aH:()=>oe,b$:()=>Fn,eu:()=>ue,hl:()=>ie,jU:()=>Se,m9:()=>tn,ne:()=>ir,pd:()=>ft,q4:()=>gt,r3:()=>Tn,ru:()=>Ot,tV:()=>B,uI:()=>X,vZ:()=>Kr,w1:()=>Rn,xO:()=>Ou,xb:()=>rr,z$:()=>Ge,zI:()=>de,zd:()=>at});const se=function($){const U=[];let W=0;for(let ye=0;ye<$.length;ye++){let re=$.charCodeAt(ye);re<128?U[W++]=re:re<2048?(U[W++]=re>>6|192,U[W++]=63&re|128):55296==(64512&re)&&ye+1<$.length&&56320==(64512&$.charCodeAt(ye+1))?(re=65536+((1023&re)<<10)+(1023&$.charCodeAt(++ye)),U[W++]=re>>18|240,U[W++]=re>>12&63|128,U[W++]=re>>6&63|128,U[W++]=63&re|128):(U[W++]=re>>12|224,U[W++]=re>>6&63|128,U[W++]=63&re|128)}return U},Te={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray($,U){if(!Array.isArray($))throw Error("encodeByteArray takes an array as a parameter");this.init_();const W=U?this.byteToCharMapWebSafe_:this.byteToCharMap_,ye=[];for(let re=0;re<$.length;re+=3){const lt=$[re],At=re+1<$.length,rn=At?$[re+1]:0,Ln=re+2<$.length,bn=Ln?$[re+2]:0;let xi=(15&rn)<<2|bn>>6,es=63&bn;Ln||(es=64,At||(xi=64)),ye.push(W[lt>>2],W[(3&lt)<<4|rn>>4],W[xi],W[es])}return ye.join("")},encodeString($,U){return this.HAS_NATIVE_SUPPORT&&!U?btoa($):this.encodeByteArray(se($),U)},decodeString($,U){return this.HAS_NATIVE_SUPPORT&&!U?atob($):function($){const U=[];let W=0,ye=0;for(;W<$.length;){const re=$[W++];if(re<128)U[ye++]=String.fromCharCode(re);else if(re>191&&re<224){const lt=$[W++];U[ye++]=String.fromCharCode((31&re)<<6|63&lt)}else if(re>239&&re<365){const Ln=((7&re)<<18|(63&$[W++])<<12|(63&$[W++])<<6|63&$[W++])-65536;U[ye++]=String.fromCharCode(55296+(Ln>>10)),U[ye++]=String.fromCharCode(56320+(1023&Ln))}else{const lt=$[W++],At=$[W++];U[ye++]=String.fromCharCode((15&re)<<12|(63&lt)<<6|63&At)}}return U.join("")}(this.decodeStringToByteArray($,U))},decodeStringToByteArray($,U){this.init_();const W=U?this.charToByteMapWebSafe_:this.charToByteMap_,ye=[];for(let re=0;re<$.length;){const lt=W[$.charAt(re++)],rn=re<$.length?W[$.charAt(re)]:0;++re;const bn=re<$.length?W[$.charAt(re)]:64;++re;const sn=re<$.length?W[$.charAt(re)]:64;if(++re,null==lt||null==rn||null==bn||null==sn)throw new Ue;ye.push(lt<<2|rn>>4),64!==bn&&(ye.push(rn<<4&240|bn>>2),64!==sn&&ye.push(bn<<6&192|sn))}return ye},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $=0;$<this.ENCODED_VALS.length;$++)this.byteToCharMap_[$]=this.ENCODED_VALS.charAt($),this.charToByteMap_[this.byteToCharMap_[$]]=$,this.byteToCharMapWebSafe_[$]=this.ENCODED_VALS_WEBSAFE.charAt($),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$]]=$,$>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($)]=$,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($)]=$)}}};class Ue extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Oe=function($){return function($){const U=se($);return Te.encodeByteArray(U,!0)}($).replace(/\./g,"")},B=function($){try{return Te.decodeString($,!0)}catch(U){console.error("base64Decode failed: ",U)}return null};function Y($,U){if(!(U instanceof Object))return U;switch(U.constructor){case Date:return new Date(U.getTime());case Object:void 0===$&&($={});break;case Array:$=[];break;default:return U}for(const W in U)!U.hasOwnProperty(W)||!qe(W)||($[W]=Y($[W],U[W]));return $}function qe($){return"__proto__"!==$}const je=()=>{try{return function Be(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const $=process.env.__FIREBASE_DEFAULTS__;return $?JSON.parse($):void 0})()||(()=>{if(typeof document>"u")return;let $;try{$=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const U=$&&B($[1]);return U&&JSON.parse(U)})()}catch($){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${$}`)}},gt=$=>{var U,W;return null===(W=null===(U=je())||void 0===U?void 0:U.emulatorHosts)||void 0===W?void 0:W[$]},Dt=$=>{const U=gt($);if(!U)return;const W=U.lastIndexOf(":");if(W<=0||W+1===U.length)throw new Error(`Invalid host ${U} with no separate hostname and port!`);const ye=parseInt(U.substring(W+1),10);return"["===U[0]?[U.substring(1,W-1),ye]:[U.substring(0,W),ye]},oe=()=>{var $;return null===($=je())||void 0===$?void 0:$.config},De=$=>{var U;return null===(U=je())||void 0===U?void 0:U[`_${$}`]};class J{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((U,W)=>{this.resolve=U,this.reject=W})}wrapCallback(U){return(W,ye)=>{W?this.reject(W):this.resolve(ye),"function"==typeof U&&(this.promise.catch(()=>{}),1===U.length?U(W):U(W,ye))}}}function he($,U){if($.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ye=U||"demo-project",re=$.iat||0,lt=$.sub||$.user_id;if(!lt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const At=Object.assign({iss:`https://securetoken.google.com/${ye}`,aud:ye,iat:re,exp:re+3600,auth_time:re,sub:lt,user_id:lt,firebase:{sign_in_provider:"custom",identities:{}}},$);return[Oe(JSON.stringify({alg:"none",type:"JWT"})),Oe(JSON.stringify(At)),""].join(".")}function Ge(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function X(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ge())}function be(){var $;const U=null===($=je())||void 0===$?void 0:$.forceEnvironment;if("node"===U)return!0;if("browser"===U)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Se(){return"object"==typeof self&&self.self===self}function Ot(){const $="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof $&&void 0!==$.id}function Fn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Rn(){const $=Ge();return $.indexOf("MSIE ")>=0||$.indexOf("Trident/")>=0}function js(){return!be()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ie(){try{return"object"==typeof indexedDB}catch{return!1}}function ue(){return new Promise(($,U)=>{try{let W=!0;const ye="validate-browser-context-for-indexeddb-analytics-module",re=self.indexedDB.open(ye);re.onsuccess=()=>{re.result.close(),W||self.indexedDB.deleteDatabase(ye),$(!0)},re.onupgradeneeded=()=>{W=!1},re.onerror=()=>{var lt;U((null===(lt=re.error)||void 0===lt?void 0:lt.message)||"")}}catch(W){U(W)}})}function de(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Fe extends Error{constructor(U,W,ye){super(W),this.code=U,this.customData=ye,this.name="FirebaseError",Object.setPrototypeOf(this,Fe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,He.prototype.create)}}class He{constructor(U,W,ye){this.service=U,this.serviceName=W,this.errors=ye}create(U,...W){const ye=W[0]||{},re=`${this.service}/${U}`,lt=this.errors[U],At=lt?function ht($,U){return $.replace(mt,(W,ye)=>{const re=U[ye];return null!=re?String(re):`<${ye}?>`})}(lt,ye):"Error";return new Fe(re,`${this.serviceName}: ${At} (${re}).`,ye)}}const mt=/\{\$([^}]+)}/g;function Tn($,U){return Object.prototype.hasOwnProperty.call($,U)}function rr($){for(const U in $)if(Object.prototype.hasOwnProperty.call($,U))return!1;return!0}function Kr($,U){if($===U)return!0;const W=Object.keys($),ye=Object.keys(U);for(const re of W){if(!ye.includes(re))return!1;const lt=$[re],At=U[re];if($s(lt)&&$s(At)){if(!Kr(lt,At))return!1}else if(lt!==At)return!1}for(const re of ye)if(!W.includes(re))return!1;return!0}function $s($){return null!==$&&"object"==typeof $}function Ou($){const U=[];for(const[W,ye]of Object.entries($))Array.isArray(ye)?ye.forEach(re=>{U.push(encodeURIComponent(W)+"="+encodeURIComponent(re))}):U.push(encodeURIComponent(W)+"="+encodeURIComponent(ye));return U.length?"&"+U.join("&"):""}function at($){const U={};return $.replace(/^\?/,"").split("&").forEach(ye=>{if(ye){const[re,lt]=ye.split("=");U[decodeURIComponent(re)]=decodeURIComponent(lt)}}),U}function ft($){const U=$.indexOf("?");if(!U)return"";const W=$.indexOf("#",U);return $.substring(U,W>0?W:void 0)}function ir($,U){const W=new yo($,U);return W.subscribe.bind(W)}class yo{constructor(U,W){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=W,this.task.then(()=>{U(this)}).catch(ye=>{this.error(ye)})}next(U){this.forEachObserver(W=>{W.next(U)})}error(U){this.forEachObserver(W=>{W.error(U)}),this.close(U)}complete(){this.forEachObserver(U=>{U.complete()}),this.close()}subscribe(U,W,ye){let re;if(void 0===U&&void 0===W&&void 0===ye)throw new Error("Missing Observer.");re=function Ct($,U){if("object"!=typeof $||null===$)return!1;for(const W of U)if(W in $&&"function"==typeof $[W])return!0;return!1}(U,["next","error","complete"])?U:{next:U,error:W,complete:ye},void 0===re.next&&(re.next=Yt),void 0===re.error&&(re.error=Yt),void 0===re.complete&&(re.complete=Yt);const lt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?re.error(this.finalError):re.complete()}catch{}}),this.observers.push(re),lt}unsubscribeOne(U){void 0===this.observers||void 0===this.observers[U]||(delete this.observers[U],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(U){if(!this.finalized)for(let W=0;W<this.observers.length;W++)this.sendOne(W,U)}sendOne(U,W){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[U])try{W(this.observers[U])}catch(ye){typeof console<"u"&&console.error&&console.error(ye)}})}close(U){this.finalized||(this.finalized=!0,void 0!==U&&(this.finalError=U),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Yt(){}const hl=1e3,st=2,Ce=144e5,Je=.5;function Bt($,U=hl,W=st){const ye=U*Math.pow(W,$),re=Math.round(Je*ye*(Math.random()-.5)*2);return Math.min(Ce,ye+re)}function tn($){return $&&$._delegate?$._delegate:$}},8170:(vt,Re,F)=>{var y=F(5879);let Q=null;function j(){return Q}class _e{}const Te=new y.OlP("DocumentToken");let Ue=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:function(){return(0,y.f3M)(Oe)},providedIn:"platform"}),n})();const Ke=new y.OlP("Location Initialized");let Oe=(()=>{class n extends Ue{constructor(){super(),this._doc=(0,y.f3M)(Te),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return j().getBaseHref(this._doc)}onPopState(t){const r=j().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=j().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:function(){return new n},providedIn:"platform"}),n})();function B(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function H(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Y(n){return n&&"?"!==n[0]?"?"+n:n}let qe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:function(){return(0,y.f3M)(ut)},providedIn:"root"}),n})();const Be=new y.OlP("appBaseHref");let ut=(()=>{class n extends qe{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,y.f3M)(Te).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return B(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Y(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const a=this.prepareExternalUrl(i+Y(s));this._platformLocation.pushState(t,r,a)}replaceState(t,r,i,s){const a=this.prepareExternalUrl(i+Y(s));this._platformLocation.replaceState(t,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(Ue),y.LFG(Be,8))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Me=(()=>{class n extends qe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=B(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let a=this.prepareExternalUrl(i+Y(s));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.pushState(t,r,a)}replaceState(t,r,i,s){let a=this.prepareExternalUrl(i+Y(s));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(Ue),y.LFG(Be,8))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})(),Le=(()=>{class n{constructor(t){this._subject=new y.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function oe(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(H(Dt(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Y(r))}normalize(t){return n.stripTrailingSlash(function gt(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Dt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Y(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Y(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Y,n.joinWithSlash=B,n.stripTrailingSlash=H,n.\u0275fac=function(t){return new(t||n)(y.LFG(qe))},n.\u0275prov=y.Yz7({token:n,factory:function(){return function je(){return new Le((0,y.LFG)(qe))}()},providedIn:"root"}),n})();function Dt(n){return n.replace(/\/index.html$/,"")}let kf=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new oI,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Mg("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Mg("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(y.Y36(y.s_b),y.Y36(y.Rgc))},n.\u0275dir=y.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class oI{constructor(){this.$implicit=null,this.ngIf=null}}function Mg(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,y.AaK)(e)}'.`)}let Ni=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({}),n})();const Eo="browser";function Io(n){return"server"===n}let yd=(()=>{class n{}return n.\u0275prov=(0,y.Yz7)({token:n,providedIn:"root",factory:()=>new Ks((0,y.LFG)(Te),window)}),n})();class Ks{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Tl(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const a=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(a)return a}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ca(this.window.history)||Ca(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ca(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ad extends _e{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Zr extends Ad{static makeCurrent(){!function se(n){Q||(Q=n)}(new Zr)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Zg(){return Ma=Ma||document.querySelector("base"),Ma?Ma.getAttribute("href"):null}();return null==t?null:function ri(n){bo=bo||document.createElement("a"),bo.setAttribute("href",n);const e=bo.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ma=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function ba(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let bo,Ma=null,Zf=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();const Qf=new y.OlP("EventManagerPlugins");let Ds=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new y.vHH(5101,!1);return this._eventNameToPlugin.set(t,r),r}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(Qf),y.LFG(y.R0b))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();class Yf{constructor(e){this._doc=e}}const Hu="ng-app-id";let Xf=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Io(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${Hu}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(Hu),s;{const a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(Hu,this.appId),a}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const s=this.styleRef,a=s.get(r)?.elements;a?a.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(Te),y.LFG(y.AFp),y.LFG(y.Ojb,8),y.LFG(y.Lbi))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();const Ml={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Dd=/%COMP%/g,II=new y.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function ep(n,e){return e.map(t=>t.replace(Dd,n))}let Oi=(()=>{class n{constructor(t,r,i,s,a,c,h,g=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=h,this.nonce=g,this.rendererByCompId=new Map,this.platformIsServer=Io(c),this.defaultRenderer=new xd(t,a,h,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===y.ifc.ShadowDom&&(r={...r,encapsulation:y.ifc.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof on?i.applyToHost(t):i instanceof we&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const a=this.doc,c=this.ngZone,h=this.eventManager,g=this.sharedStylesHost,E=this.removeStylesOnCompDestroy,b=this.platformIsServer;switch(r.encapsulation){case y.ifc.Emulated:s=new on(h,g,r,this.appId,E,a,c,b);break;case y.ifc.ShadowDom:return new wI(h,g,t,r,a,c,this.nonce,b);default:s=new we(h,g,r,E,a,c,b)}s.onDestroy=()=>i.delete(r.id),i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(Ds),y.LFG(Xf),y.LFG(y.AFp),y.LFG(II),y.LFG(Te),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(y.Ojb))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();class xd{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Ml[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Yg(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Yg(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new y.vHH(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=Ml[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Ml[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(y.JOm.DashCase|y.JOm.Important)?e.style.setProperty(t,r,i&y.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&y.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=j().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function Yg(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class wI extends xd{constructor(e,t,r,i,s,a,c,h){super(e,s,a,h),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const g=ep(i.id,i.styles);for(const E of g){const b=document.createElement("style");c&&b.setAttribute("nonce",c),b.textContent=E,this.shadowRoot.appendChild(b)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class we extends xd{constructor(e,t,r,i,s,a,c,h){super(e,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.rendererUsageCount=0,this.styles=h?ep(h,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestroy&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class on extends we{constructor(e,t,r,i,s,a,c,h){const g=i+"-"+r.id;super(e,t,r,s,a,c,h,g),this.contentAttr=function Qg(n){return"_ngcontent-%COMP%".replace(Dd,n)}(g),this.hostAttr=function Jf(n){return"_nghost-%COMP%".replace(Dd,n)}(g)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let bI=(()=>{class n extends Yf{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(Te))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();const tp=["alt","control","meta","shift"],Or={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},AI={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Rd=(()=>{class n extends Yf{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>j().onAndCancel(t,s.domEventName,a))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),tp.forEach(g=>{const E=r.indexOf(g);E>-1&&(r.splice(E,1),a+=g+".")}),a+=s,0!=r.length||0===s.length)return null;const h={};return h.domEventName=i,h.fullKey=a,h}static matchEventFullKeyCode(t,r){let i=Or[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),tp.forEach(a=>{a!==i&&(0,AI[a])(t)&&(s+=a+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(Te))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();const Jg=(0,y.eFA)(y._c5,"browser",[{provide:y.Lbi,useValue:Eo},{provide:y.g9A,useValue:function Pl(){Zr.makeCurrent()},multi:!0},{provide:Te,useFactory:function ii(){return(0,y.RDi)(document),document},deps:[]}]),zu=new y.OlP(""),Ys=[{provide:y.rWj,useClass:class EI{addToWindow(e){y.dqk.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new y.vHH(5103,!1);return s},y.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),y.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),y.dqk.frameworkStabilizers||(y.dqk.frameworkStabilizers=[]),y.dqk.frameworkStabilizers.push(r=>{const i=y.dqk.getAllAngularTestabilities();let s=i.length,a=!1;const c=function(h){a=a||h,s--,0==s&&r(a)};i.forEach(h=>{h.whenStable(c)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?j().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:y.lri,useClass:y.dDg,deps:[y.R0b,y.eoX,y.rWj]},{provide:y.dDg,useClass:y.dDg,deps:[y.R0b,y.eoX,y.rWj]}],e_=[{provide:y.zSh,useValue:"root"},{provide:y.qLn,useFactory:function Md(){return new y.qLn},deps:[]},{provide:Qf,useClass:bI,multi:!0,deps:[Te,y.R0b,y.Lbi]},{provide:Qf,useClass:Rd,multi:!0,deps:[Te]},Oi,Xf,Ds,{provide:y.FYo,useExisting:Oi},{provide:class sr{},useClass:Zf,deps:[]},[]];let qu=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:y.AFp,useValue:t.appId}]}}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(zu,12))},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({providers:[...e_,...Ys],imports:[Ni,y.hGG]}),n})(),rp=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(Te))},n.\u0275prov=y.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Pd(){return new rp((0,y.LFG)(Te))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Ss=F(5592),Ao=F(4674),In=F(2459),Tt=F(2096),Js=F(5619);const{isArray:Zu}=Array,{getPrototypeOf:ap,prototype:SD,keys:NI}=Object;var Pa=F(2737),Ht=F(7398);const{isArray:Ld}=Array;var ka=F(4564);var pi=F(8251),o_=F(7103);function Yu(...n){const e=(0,ka.yG)(n),t=(0,ka.jO)(n),{args:r,keys:i}=function s_(n){if(1===n.length){const e=n[0];if(Zu(e))return{args:e,keys:null};if(function xD(n){return n&&"object"==typeof n&&ap(n)===SD}(e)){const t=NI(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,In.D)([],e);const s=new Ss.y(function a_(n,e,t=Pa.y){return r=>{xs(e,()=>{const{length:i}=n,s=new Array(i);let a=i,c=i;for(let h=0;h<i;h++)xs(e,()=>{const g=(0,In.D)(n[h],e);let E=!1;g.subscribe((0,pi.x)(r,b=>{s[h]=b,E||(E=!0,c--),c||r.next(t(s.slice()))},()=>{--a||r.complete()}))},r)},r)}}(r,e,i?a=>function Qu(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,a):Pa.y));return t?s.pipe(function Na(n){return(0,Ht.U)(e=>function kI(n,e){return Ld(e)?n(...e):n(e)}(n,e))}(t)):s}function xs(n,e,t){n?(0,o_.f)(t,n,e):e()}const Oa=(0,F(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Do=F(7537);function Xo(...n){return function l_(){return(0,Do.J)(1)}()((0,In.D)(n,(0,ka.yG)(n)))}var Fl=F(4829);function Vd(n){return new Ss.y(e=>{(0,Fl.Xf)(n()).subscribe(e)})}var u_=F(8407);function Jo(n,e){const t=(0,Ao.m)(n)?n:()=>n,r=i=>i.error(t());return new Ss.y(e?i=>e.schedule(r,0,i):r)}var rs=F(6232),Ll=F(7394),si=F(9360);function ea(){return(0,si.e)((n,e)=>{let t=null;n._refCount++;const r=(0,pi.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class is extends Ss.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,si.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ll.w0;const t=this.getSubject();e.add(this.source.subscribe((0,pi.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ll.w0.EMPTY)}return e}refCount(){return ea()(this)}}var mi=F(8645),or=F(4664);function ta(n){return n<=0?()=>rs.E:(0,si.e)((e,t)=>{let r=0;e.subscribe((0,pi.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function eo(...n){const e=(0,ka.yG)(n);return(0,si.e)((t,r)=>{(e?Xo(n,t,e):Xo(n,t)).subscribe(r)})}function ss(n,e){return(0,si.e)((t,r)=>{let i=0;t.subscribe((0,pi.x)(r,s=>n.call(e,s,i++)&&r.next(s)))})}var br=F(1631);function Fa(n){return(0,si.e)((e,t)=>{let r=!1;e.subscribe((0,pi.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function c_(n=d_){return(0,si.e)((e,t)=>{let r=!1;e.subscribe((0,pi.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function d_(){return new Oa}function os(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ss((i,s)=>n(i,s,r)):Pa.y,ta(1),t?Fa(e):c_(()=>new Oa))}function to(n,e){return(0,Ao.m)(e)?(0,br.z)(n,e,1):(0,br.z)(n,1)}function On(n,e,t){const r=(0,Ao.m)(n)||e||t?{next:n,error:e,complete:t}:n;return r?(0,si.e)((i,s)=>{var a;null===(a=r.subscribe)||void 0===a||a.call(r);let c=!0;i.subscribe((0,pi.x)(s,h=>{var g;null===(g=r.next)||void 0===g||g.call(r,h),s.next(h)},()=>{var h;c=!1,null===(h=r.complete)||void 0===h||h.call(r),s.complete()},h=>{var g;c=!1,null===(g=r.error)||void 0===g||g.call(r,h),s.error(h)},()=>{var h,g;c&&(null===(h=r.unsubscribe)||void 0===h||h.call(r)),null===(g=r.finalize)||void 0===g||g.call(r)}))}):Pa.y}function as(n){return(0,si.e)((e,t)=>{let s,r=null,i=!1;r=e.subscribe((0,pi.x)(t,void 0,void 0,a=>{s=(0,Fl.Xf)(n(a,as(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function na(n,e){return(0,si.e)(function Ud(n,e,t,r,i){return(s,a)=>{let c=t,h=e,g=0;s.subscribe((0,pi.x)(a,E=>{const b=g++;h=c?n(h,E,b):(c=!0,E),r&&a.next(h)},i&&(()=>{c&&a.next(h),a.complete()})))}}(n,e,arguments.length>=2,!0))}function ra(n){return n<=0?()=>rs.E:(0,si.e)((e,t)=>{let r=[];e.subscribe((0,pi.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function h_(n){return(0,si.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const jt="primary",Vl=Symbol("RouteTitle");class f_{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Xu(n){return new f_(n)}function p_(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const a=r[s],c=n[s];if(a.startsWith(":"))i[a.substring(1)]=c;else if(a!==c.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function no(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!LI(n[i],e[i]))return!1;return!0}function LI(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function ar(n){return n.length>0?n[n.length-1]:null}function ro(n){return function i_(n){return!!n&&(n instanceof Ss.y||(0,Ao.m)(n.lift)&&(0,Ao.m)(n.subscribe))}(n)?n:(0,y.QGY)(n)?(0,In.D)(Promise.resolve(n)):(0,Tt.of)(n)}const Ju={exact:function lp(n,e,t){if(!Fi(n.segments,e.segments)||!$l(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!lp(n.children[r],e.children[r],t))return!1;return!0},subset:jl},m_={exact:function ec(n,e){return no(n,e)},subset:function Bl(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>LI(n[t],e[t]))},ignored:()=>!0};function oi(n,e,t){return Ju[t.paths](n.root,e.root,t.matrixParams)&&m_[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function jl(n,e,t){return jd(n,e,e.segments,t)}function jd(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Fi(i,t)||e.hasChildren()||!$l(i,t,r))}if(n.segments.length===t.length){if(!Fi(n.segments,t)||!$l(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!jl(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Fi(n.segments,i)&&$l(n.segments,i,r)&&n.children[jt])&&jd(n.children[jt],e,s,r)}}function $l(n,e,t){return e.every((r,i)=>m_[t](n[i].parameters,r.parameters))}class ia{constructor(e=new vn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Xu(this.queryParams)),this._queryParamMap}toString(){return g_.serialize(this)}}class vn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Gl(this)}}class _r{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Xu(this.parameters)),this._parameterMap}toString(){return y_(this)}}function Fi(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let La=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:function(){return new cp},providedIn:"root"}),n})();class cp{parse(e){const t=new $I(e);return new ia(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${tc(e.root,!0)}`,r=function UI(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${$d(t)}=${$d(i)}`).join("&"):`${$d(t)}=${$d(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function nc(n){return encodeURI(n)}(e.fragment)}`:""}`}}const g_=new cp;function Gl(n){return n.segments.map(e=>y_(e)).join("/")}function tc(n,e){if(!n.hasChildren())return Gl(n);if(e){const t=n.children[jt]?tc(n.children[jt],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==jt&&r.push(`${i}:${tc(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function VI(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===jt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==jt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===jt?[tc(n.children[jt],!1)]:[`${i}:${tc(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[jt]?`${Gl(n)}/${t[0]}`:`${Gl(n)}/(${t.join("//")})`}}function __(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $d(n){return __(n).replace(/%3B/gi,";")}function Hl(n){return __(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Gd(n){return decodeURIComponent(n)}function zl(n){return Gd(n.replace(/\+/g,"%20"))}function y_(n){return`${Hl(n.path)}${function Va(n){return Object.keys(n).map(e=>`;${Hl(e)}=${Hl(n[e])}`).join("")}(n.parameters)}`}const v_=/^[^\/()?;#]+/;function rc(n){const e=n.match(v_);return e?e[0]:""}const Hd=/^[^\/()?;=#]+/,BI=/^[^=?&#]+/,ql=/^[^&#]+/;class $I{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new vn([],{}):new vn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[jt]=new vn(e,t)),r}parseSegment(){const e=rc(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new y.vHH(4009,!1);return this.capture(e),new _r(Gd(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function E_(n){const e=n.match(Hd);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=rc(this.remaining);i&&(r=i,this.capture(r))}e[Gd(t)]=Gd(r)}parseQueryParam(e){const t=function jI(n){const e=n.match(BI);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const a=function Ua(n){const e=n.match(ql);return e?e[0]:""}(this.remaining);a&&(r=a,this.capture(r))}const i=zl(t),s=zl(r);if(e.hasOwnProperty(i)){let a=e[i];Array.isArray(a)||(a=[a],e[i]=a),a.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=rc(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new y.vHH(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=jt);const a=this.parseChildren();t[s]=1===Object.keys(a).length?a[jt]:new vn([],a),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new y.vHH(4011,!1)}}function GI(n){return n.segments.length>0?new vn([],{[jt]:n}):n}function dp(n){const e={};for(const r of Object.keys(n.children)){const s=dp(n.children[r]);if(r===jt&&0===s.segments.length&&s.hasChildren())for(const[a,c]of Object.entries(s.children))e[a]=c;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function HI(n){if(1===n.numberOfChildren&&n.children[jt]){const e=n.children[jt];return new vn(n.segments.concat(e.segments),e.children)}return n}(new vn(n.segments,e))}function Wl(n){return n instanceof ia}function T_(n){let e;const i=GI(function t(s){const a={};for(const h of s.children){const g=t(h);a[h.outlet]=g}const c=new vn(s.url,a);return s===n&&(e=c),c}(n.root));return e??i}function w_(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return hp(i,i,i,t,r);const s=function b_(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new fp(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,a)=>{if("object"==typeof s&&null!=s){if(s.outlets){const c={};return Object.entries(s.outlets).forEach(([h,g])=>{c[h]="string"==typeof g?g.split("/"):g}),[...i,{outlets:c}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===a?(s.split("/").forEach((c,h)=>{0==h&&"."===c||(0==h&&""===c?t=!0:".."===c?e++:""!=c&&i.push(c))}),i):[...i,s]},[]);return new fp(t,e,r)}(e);if(s.toRoot())return hp(i,i,new vn([],{}),t,r);const a=function zI(n,e,t){if(n.isAbsolute)return new sc(e,!0,0);if(!t)return new sc(e,!1,NaN);if(null===t.parent)return new sc(t,!0,0);const r=Ba(n.commands[0])?0:1;return function A_(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new y.vHH(4005,!1);i=r.segments.length}return new sc(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),c=a.processChildren?zd(a.segmentGroup,a.index,s.commands):mp(a.segmentGroup,a.index,s.commands);return hp(i,a.segmentGroup,c,t,r)}function Ba(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Kl(n){return"object"==typeof n&&null!=n&&n.outlets}function hp(n,e,t,r,i){let a,s={};r&&Object.entries(r).forEach(([h,g])=>{s[h]=Array.isArray(g)?g.map(E=>`${E}`):`${g}`}),a=n===e?t:ic(n,e,t);const c=GI(dp(a));return new ia(c,s,i)}function ic(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:ic(s,e,t)}),new vn(n.segments,r)}class fp{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ba(r[0]))throw new y.vHH(4003,!1);const i=r.find(Kl);if(i&&i!==ar(r))throw new y.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class sc{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function mp(n,e,t){if(n||(n=new vn([],{})),0===n.segments.length&&n.hasChildren())return zd(n,e,t);const r=function D_(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const a=n.segments[i],c=t[r];if(Kl(c))break;const h=`${c}`,g=r<t.length-1?t[r+1]:null;if(i>0&&void 0===h)break;if(h&&g&&"object"==typeof g&&void 0===g.outlets){if(!C_(h,g,a))return s;r+=2}else{if(!C_(h,{},a))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new vn(n.segments.slice(0,r.pathIndex),{});return s.children[jt]=new vn(n.segments.slice(r.pathIndex),n.children),zd(s,0,i)}return r.match&&0===i.length?new vn(n.segments,{}):r.match&&!n.hasChildren()?qd(n,e,t):r.match?zd(n,0,i):qd(n,e,t)}function zd(n,e,t){if(0===t.length)return new vn(n.segments,{});{const r=function pp(n){return Kl(n[0])?n[0].outlets:{[jt]:n}}(t),i={};if(!r[jt]&&n.children[jt]&&1===n.numberOfChildren&&0===n.children[jt].segments.length){const s=zd(n.children[jt],e,t);return new vn(n.segments,s.children)}return Object.entries(r).forEach(([s,a])=>{"string"==typeof a&&(a=[a]),null!==a&&(i[s]=mp(n.children[s],e,a))}),Object.entries(n.children).forEach(([s,a])=>{void 0===r[s]&&(i[s]=a)}),new vn(n.segments,i)}}function qd(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Kl(s)){const h=qI(s.outlets);return new vn(r,h)}if(0===i&&Ba(t[0])){r.push(new _r(n.segments[e].path,Wd(t[0]))),i++;continue}const a=Kl(s)?s.outlets[jt]:`${s}`,c=i<t.length-1?t[i+1]:null;a&&c&&Ba(c)?(r.push(new _r(a,Wd(c))),i+=2):(r.push(new _r(a,{})),i++)}return new vn(r,{})}function qI(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=qd(new vn([],{}),0,r))}),e}function Wd(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function C_(n,e,t){return n==t.path&&no(e,t.parameters)}const oc="imperative";class io{constructor(e,t){this.id=e,this.url=t}}class Zl extends io{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Co extends io{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ac extends io{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ql extends io{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class lc extends io{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Yl extends io{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class WI extends io{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sa extends io{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Kd extends io{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zd extends io{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ls{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class KI{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class gp{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ZI{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class S_{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class uc{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class x_{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class _p{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Xl,this.attachRef=null}}let Xl=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new _p,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class R_{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=yp(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=yp(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Qr(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Qr(e,this._root).map(t=>t.value)}}function yp(n,e){if(n===e.value)return e;for(const t of e.children){const r=yp(n,t);if(r)return r}return null}function Qr(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Qr(n,t);if(r.length)return r.unshift(e),r}return[]}class Rs{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function oa(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Jl extends R_{constructor(e,t){super(e),this.snapshot=t,Qd(this,e)}toString(){return this.snapshot.toString()}}function Fr(n,e){const t=function cc(n,e){const a=new hc([],{},{},"",{},jt,e,null,{});return new fc("",new Rs(a,[]))}(0,e),r=new Js.X([new _r("",{})]),i=new Js.X({}),s=new Js.X({}),a=new Js.X({}),c=new Js.X(""),h=new so(r,i,a,c,s,jt,e,t.root);return h.snapshot=t.root,new Jl(new Rs(h,[]),t)}class so{constructor(e,t,r,i,s,a,c,h){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=a,this.component=c,this._futureSnapshot=h,this.title=this.dataSubject?.pipe((0,Ht.U)(g=>g[Vl]))??(0,Tt.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ht.U)(e=>Xu(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ht.U)(e=>Xu(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function dc(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function QI(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class hc{get title(){return this.data?.[Vl]}constructor(e,t,r,i,s,a,c,h,g){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=a,this.component=c,this.routeConfig=h,this._resolve=g}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Xu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Xu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class fc extends R_{constructor(e,t){super(t),this.url=e,Qd(this,t)}toString(){return M_(this._root)}}function Qd(n,e){e.value._routerState=n,e.children.forEach(t=>Qd(n,t))}function M_(n){const e=n.children.length>0?` { ${n.children.map(M_).join(", ")} } `:"";return`${n.value}${e}`}function Yd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,no(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),no(e.params,t.params)||n.paramsSubject.next(t.params),function Ul(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!no(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),no(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Xd(n,e){const t=no(n.params,e.params)&&function up(n,e){return Fi(n,e)&&n.every((t,r)=>no(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Xd(n.parent,e.parent))}let vp=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=jt,this.activateEvents=new y.vpe,this.deactivateEvents=new y.vpe,this.attachEvents=new y.vpe,this.detachEvents=new y.vpe,this.parentContexts=(0,y.f3M)(Xl),this.location=(0,y.f3M)(y.s_b),this.changeDetector=(0,y.f3M)(y.sBO),this.environmentInjector=(0,y.f3M)(y.lqb),this.inputBinder=(0,y.f3M)(eu,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new y.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new y.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new y.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new y.vHH(4013,!1);this._activatedRoute=t;const i=this.location,a=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,h=new Ep(t,c,i.injector);this.activated=i.createComponent(a,{index:i.length,injector:h,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=y.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[y.TTD]}),n})();class Ep{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===so?this.route:e===Xl?this.childContexts:this.parent.get(e,t)}}const eu=new y.OlP("");let P_=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=Yu([r.queryParams,r.params,r.data]).pipe((0,or.w)(([s,a,c],h)=>(c={...s,...a,...c},0===h?(0,Tt.of)(c):Promise.resolve(c)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const a=(0,y.qFp)(r.component);if(a)for(const{templateName:c}of a.inputs)t.activatedComponentRef.setInput(c,s[c]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();function pc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function N_(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return pc(n,r,i);return pc(n,r)})}(n,e,t);return new Rs(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const a=s.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(c=>pc(n,c)),a}}const r=function k_(n){return new so(new Js.X(n.url),new Js.X(n.params),new Js.X(n.queryParams),new Js.X(n.fragment),new Js.X(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>pc(n,s));return new Rs(r,i)}}const Jd="ngNavigationCancelingError";function Ip(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Wl(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=ja(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function ja(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Jd]=!0,r.cancellationCode=e,t&&(r.url=t),r}function tu(n){return mc(n)&&Wl(n.url)}function mc(n){return n&&n[Jd]}let nu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=y.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[y.jDz],decls:1,vars:0,template:function(t,r){1&t&&y._UZ(0,"router-outlet")},dependencies:[vp],encapsulation:2}),n})();function ru(n){const e=n.children&&n.children.map(ru),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==jt&&(t.component=nu),t}function Li(n){return n.outlet||jt}function vc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class $a{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Yd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=oa(t);e.children.forEach(s=>{const a=s.value.outlet;this.deactivateRoutes(s,i[a],r),delete i[a]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=oa(e);for(const a of Object.keys(s))this.deactivateRouteAndItsChildren(s[a],i);if(r&&r.outlet){const a=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=oa(e);for(const a of Object.keys(s))this.deactivateRouteAndItsChildren(s[a],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=oa(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new uc(s.value.snapshot))}),e.children.length&&this.forwardEvent(new ZI(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(Yd(i),i===s)if(i.component){const a=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const a=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(c.contexts),a.attachRef=c.componentRef,a.route=c.route.value,a.outlet&&a.outlet.attach(c.componentRef,c.route.value),Yd(c.route.value),this.activateChildRoutes(e,null,a.children)}else{const c=vc(i.snapshot);a.attachRef=null,a.route=i,a.injector=c,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(e,null,a.children)}}else this.activateChildRoutes(e,null,r)}}class wp{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ec{constructor(e,t){this.component=e,this.route=t}}function V_(n,e,t){const r=n._root;return Ga(r,e?e._root:null,t,[r.value])}function Ms(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,y.Z0I)(n)?e.get(n):n:r}function Ga(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=oa(e);return n.children.forEach(a=>{(function U_(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,a=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const h=function oo(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Fi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Fi(n.url,e.url)||!no(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Xd(n,e)||!no(n.queryParams,e.queryParams);default:return!Xd(n,e)}}(a,s,s.routeConfig.runGuardsAndResolvers);h?i.canActivateChecks.push(new wp(r)):(s.data=a.data,s._resolvedData=a._resolvedData),Ga(n,e,s.component?c?c.children:null:t,r,i),h&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new Ec(c.outlet.component,a))}else a&&ao(e,c,i),i.canActivateChecks.push(new wp(r)),Ga(n,null,s.component?c?c.children:null:t,r,i)})(a,s[a.value.outlet],t,r.concat([a.value]),i),delete s[a.value.outlet]}),Object.entries(s).forEach(([a,c])=>ao(c,t.getContext(a),i)),i}function ao(n,e,t){const r=oa(n),i=n.value;Object.entries(r).forEach(([s,a])=>{ao(a,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new Ec(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function aa(n){return"function"==typeof n}function p(n){return n instanceof Oa||"EmptyError"===n?.name}const m=Symbol("INITIAL_VALUE");function T(){return(0,or.w)(n=>Yu(n.map(e=>e.pipe(ta(1),eo(m)))).pipe((0,Ht.U)(e=>{for(const t of e)if(!0!==t){if(t===m)return m;if(!1===t||t instanceof ia)return t}return!0}),ss(e=>e!==m),ta(1)))}function yr(n){return(0,u_.z)(On(e=>{if(Wl(e))throw Ip(0,e)}),(0,Ht.U)(e=>!0===e))}class qa{constructor(e){this.segmentGroup=e||null}}class iu{constructor(e){this.urlTree=e}}function Wa(n){return Jo(new qa(n))}function Ka(n){return Jo(new iu(n))}class Dp{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new y.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,Tt.of)(r);if(i.numberOfChildren>1||!i.children[jt])return Jo(new y.vHH(4e3,!1));i=i.children[jt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new ia(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const c=s.substring(1);r[i]=t[c]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let a={};return Object.entries(t.children).forEach(([c,h])=>{a[c]=this.createSegmentGroup(e,h,r,i)}),new vn(s,a)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new y.vHH(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const ou={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Cp(n,e,t,r,i){const s=rh(n,e,t);return s.matched?(r=function gc(n,e){return n.providers&&!n._injector&&(n._injector=(0,y.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function za(n,e,t,r){const i=e.canMatch;if(!i||0===i.length)return(0,Tt.of)(!0);const s=i.map(a=>{const c=Ms(a,n);return ro(function th(n){return n&&aa(n.canMatch)}(c)?c.canMatch(e,t):n.runInContext(()=>c(e,t)))});return(0,Tt.of)(s).pipe(T(),yr())}(r,e,t).pipe((0,Ht.U)(a=>!0===a?s:{...ou}))):(0,Tt.of)(s)}function rh(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...ou}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||p_)(t,n,e);if(!i)return{...ou};const s={};Object.entries(i.posParams??{}).forEach(([c,h])=>{s[c]=h.path});const a=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function ih(n,e,t,r){return t.length>0&&function LN(n,e,t){return t.some(r=>Ro(n,e,r)&&Li(r)!==jt)}(n,t,r)?{segmentGroup:new vn(e,FN(r,new vn(t,n.children))),slicedSegments:[]}:0===t.length&&function VN(n,e,t){return t.some(r=>Ro(n,e,r))}(n,t,r)?{segmentGroup:new vn(n.segments,JI(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new vn(n.segments,n.children),slicedSegments:t}}function JI(n,e,t,r,i){const s={};for(const a of r)if(Ro(n,t,a)&&!i[Li(a)]){const c=new vn([],{});s[Li(a)]=c}return{...i,...s}}function FN(n,e){const t={};t[jt]=e;for(const r of n)if(""===r.path&&Li(r)!==jt){const i=new vn([],{});t[Li(r)]=i}return t}function Ro(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class E${constructor(e,t,r,i,s,a,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=a,this.urlSerializer=c,this.allowRedirects=!0,this.applyRedirects=new Dp(this.urlSerializer,this.urlTree)}noMatchError(e){return new y.vHH(4002,!1)}recognize(){const e=ih(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,jt).pipe(as(t=>{if(t instanceof iu)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof qa?this.noMatchError(t):t}),(0,Ht.U)(t=>{const r=new hc([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},jt,this.rootComponentType,null,{}),i=new Rs(r,t),s=new fc("",i),a=function I_(n,e,t=null,r=null){return w_(T_(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(a),this.inheritParamsAndData(s._root),{state:s,tree:a}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,jt).pipe(as(r=>{throw r instanceof qa?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=dc(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return(0,In.D)(i).pipe(to(s=>{const a=r.children[s],c=function L_(n,e){const t=n.filter(r=>Li(r)===e);return t.push(...n.filter(r=>Li(r)!==e)),t}(t,s);return this.processSegmentGroup(e,c,a,s)}),na((s,a)=>(s.push(...a),s)),Fa(null),function Bd(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ss((i,s)=>n(i,s,r)):Pa.y,ra(1),t?Fa(e):c_(()=>new Oa))}(),(0,br.z)(s=>{if(null===s)return Wa(r);const a=BN(s);return function I$(n){n.sort((e,t)=>e.value.outlet===jt?-1:t.value.outlet===jt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),(0,Tt.of)(a)}))}processSegment(e,t,r,i,s,a){return(0,In.D)(t).pipe(to(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,a).pipe(as(h=>{if(h instanceof qa)return(0,Tt.of)(null);throw h}))),os(c=>!!c),as(c=>{if(p(c))return function UN(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?(0,Tt.of)([]):Wa(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,s,a,c){return function Sp(n,e,t,r){return!!(Li(n)===r||r!==jt&&Ro(e,t,n))&&("**"===n.path||rh(e,n,t).matched)}(r,i,s,a)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,a,c):c&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,a):Wa(i):Wa(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,a){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,a):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,a)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Ka(s):this.applyRedirects.lineralizeSegments(r,s).pipe((0,br.z)(a=>{const c=new vn(a,{});return this.processSegment(e,t,c,a,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,a){const{matched:c,consumedSegments:h,remainingSegments:g,positionalParamSegments:E}=rh(t,i,s);if(!c)return Wa(t);const b=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,E);return i.redirectTo.startsWith("/")?Ka(b):this.applyRedirects.lineralizeSegments(i,b).pipe((0,br.z)(x=>this.processSegment(e,r,t,x.concat(g),a,!1)))}matchSegmentAgainstRoute(e,t,r,i,s,a){let c;if("**"===r.path){const h=i.length>0?ar(i).parameters:{},g=new hc(i,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ND(r),Li(r),r.component??r._loadedComponent??null,r,kD(r));c=(0,Tt.of)({snapshot:g,consumedSegments:[],remainingSegments:[]}),t.children={}}else c=Cp(t,r,i,e).pipe((0,Ht.U)(({matched:h,consumedSegments:g,remainingSegments:E,parameters:b})=>h?{snapshot:new hc(g,b,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ND(r),Li(r),r.component??r._loadedComponent??null,r,kD(r)),consumedSegments:g,remainingSegments:E}:null));return c.pipe((0,or.w)(h=>null===h?Wa(t):this.getChildConfig(e=r._injector??e,r,i).pipe((0,or.w)(({routes:g})=>{const E=r._loadedInjector??e,{snapshot:b,consumedSegments:x,remainingSegments:M}=h,{segmentGroup:O,slicedSegments:V}=ih(t,x,M,g);if(0===V.length&&O.hasChildren())return this.processChildren(E,g,O).pipe((0,Ht.U)(ne=>null===ne?null:[new Rs(b,ne)]));if(0===g.length&&0===V.length)return(0,Tt.of)([new Rs(b,[])]);const G=Li(r)===s;return this.processSegment(E,g,O,V,G?jt:s,!0).pipe((0,Ht.U)(ne=>[new Rs(b,ne)]))}))))}getChildConfig(e,t,r){return t.children?(0,Tt.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,Tt.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function Zt(n,e,t,r){const i=e.canLoad;if(void 0===i||0===i.length)return(0,Tt.of)(!0);const s=i.map(a=>{const c=Ms(a,n);return ro(function eh(n){return n&&aa(n.canLoad)}(c)?c.canLoad(e,t):n.runInContext(()=>c(e,t)))});return(0,Tt.of)(s).pipe(T(),yr())}(e,t,r).pipe((0,br.z)(i=>i?this.configLoader.loadChildren(e,t).pipe(On(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function nh(n){return Jo(ja(!1,3))}())):(0,Tt.of)({routes:[],injector:e})}}function T$(n){const e=n.value.routeConfig;return e&&""===e.path}function BN(n){const e=[],t=new Set;for(const r of n){if(!T$(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=BN(r.children);e.push(new Rs(r.value,i))}return e.filter(r=>!t.has(r))}function ND(n){return n.data||{}}function kD(n){return n.resolve||{}}function tT(n){return"string"==typeof n.title||null===n.title}function j_(n){return(0,or.w)(e=>{const t=n(e);return t?(0,In.D)(t).pipe((0,Ht.U)(()=>e)):(0,Tt.of)(e)})}const Rp=new y.OlP("ROUTES");let FD=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,y.f3M)(y.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,Tt.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=ro(t.loadComponent()).pipe((0,Ht.U)($_),On(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),h_(()=>{this.componentLoaders.delete(t)})),i=new is(r,()=>new mi.x).pipe(ea());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,Tt.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,Ht.U)(c=>{this.onLoadEndListener&&this.onLoadEndListener(r);let h,g;return Array.isArray(c)?g=c:(h=c.create(t).injector,g=h.get(Rp,[],y.XFs.Self|y.XFs.Optional).flat()),{routes:g.map(ru),injector:h}}),h_(()=>{this.childrenLoaders.delete(r)})),a=new is(s,()=>new mi.x).pipe(ea());return this.childrenLoaders.set(r,a),a}loadModuleFactoryOrRoutes(t){return ro(t()).pipe((0,Ht.U)($_),(0,br.z)(r=>r instanceof y.YKP||Array.isArray(r)?(0,Tt.of)(r):(0,In.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function $_(n){return function w$(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let sh=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new mi.x,this.configLoader=(0,y.f3M)(FD),this.environmentInjector=(0,y.f3M)(y.lqb),this.urlSerializer=(0,y.f3M)(La),this.rootContexts=(0,y.f3M)(Xl),this.inputBindingEnabled=null!==(0,y.f3M)(eu,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,Tt.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new KI(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new ls(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Js.X({id:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:oc,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ss(r=>0!==r.id),(0,Ht.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),(0,or.w)(r=>{let i=!1,s=!1;return(0,Tt.of)(r).pipe(On(a=>{this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,or.w)(a=>{const c=t.browserUrlTree.toString(),h=!t.navigated||a.extractedUrl.toString()!==c||c!==t.currentUrlTree.toString();if(!h&&"reload"!==(a.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const E="";return this.events.next(new Ql(a.id,t.serializeUrl(r.rawUrl),E,0)),t.rawUrlTree=a.rawUrl,a.resolve(null),rs.E}if(t.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return HN(a.source)&&(t.browserUrlTree=a.extractedUrl),(0,Tt.of)(a).pipe((0,or.w)(E=>{const b=this.transitions?.getValue();return this.events.next(new Zl(E.id,this.urlSerializer.serialize(E.extractedUrl),E.source,E.restoredState)),b!==this.transitions?.getValue()?rs.E:Promise.resolve(E)}),function $N(n,e,t,r,i,s){return(0,br.z)(a=>function v$(n,e,t,r,i,s,a="emptyOnly"){return new E$(n,e,t,r,i,a,s).recognize()}(n,e,t,r,a.extractedUrl,i,s).pipe((0,Ht.U)(({state:c,tree:h})=>({...a,targetSnapshot:c,urlAfterRedirects:h}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),On(E=>{if(r.targetSnapshot=E.targetSnapshot,r.urlAfterRedirects=E.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:E.urlAfterRedirects},"eager"===t.urlUpdateStrategy){if(!E.extras.skipLocationChange){const x=t.urlHandlingStrategy.merge(E.urlAfterRedirects,E.rawUrl);t.setBrowserUrl(x,E)}t.browserUrlTree=E.urlAfterRedirects}const b=new Yl(E.id,this.urlSerializer.serialize(E.extractedUrl),this.urlSerializer.serialize(E.urlAfterRedirects),E.targetSnapshot);this.events.next(b)}));if(h&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:E,extractedUrl:b,source:x,restoredState:M,extras:O}=a,V=new Zl(E,this.urlSerializer.serialize(b),x,M);this.events.next(V);const G=Fr(0,this.rootComponentType).snapshot;return r={...a,targetSnapshot:G,urlAfterRedirects:b,extras:{...O,skipLocationChange:!1,replaceUrl:!1}},(0,Tt.of)(r)}{const E="";return this.events.next(new Ql(a.id,t.serializeUrl(r.extractedUrl),E,1)),t.rawUrlTree=a.rawUrl,a.resolve(null),rs.E}}),On(a=>{const c=new WI(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),(0,Ht.U)(a=>r={...a,guards:V_(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),function C(n,e){return(0,br.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:a}}=t;return 0===a.length&&0===s.length?(0,Tt.of)({...t,guardsResult:!0}):function R(n,e,t,r){return(0,In.D)(n).pipe((0,br.z)(i=>function Qe(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||0===s.length)return(0,Tt.of)(!0);const a=s.map(c=>{const h=vc(e)??i,g=Ms(c,h);return ro(function Ap(n){return n&&aa(n.canDeactivate)}(g)?g.canDeactivate(n,e,t,r):h.runInContext(()=>g(n,e,t,r))).pipe(os())});return(0,Tt.of)(a).pipe(T())}(i.component,i.route,t,e,r)),os(i=>!0!==i,!0))}(a,r,i,n).pipe((0,br.z)(c=>c&&function bp(n){return"boolean"==typeof n}(c)?function L(n,e,t,r){return(0,In.D)(e).pipe(to(i=>Xo(function ve(n,e){return null!==n&&e&&e(new gp(n)),(0,Tt.of)(!0)}(i.route.parent,r),function q(n,e){return null!==n&&e&&e(new S_(n)),(0,Tt.of)(!0)}(i.route,r),function We(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(a=>function Vi(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(a)).filter(a=>null!==a).map(a=>Vd(()=>{const c=a.guards.map(h=>{const g=vc(a.node)??t,E=Ms(h,g);return ro(function B_(n){return n&&aa(n.canActivateChild)}(E)?E.canActivateChild(r,n):g.runInContext(()=>E(r,n))).pipe(os())});return(0,Tt.of)(c).pipe(T())}));return(0,Tt.of)(s).pipe(T())}(n,i.path,t),function pe(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,Tt.of)(!0);const i=r.map(s=>Vd(()=>{const a=vc(e)??t,c=Ms(s,a);return ro(function Ha(n){return n&&aa(n.canActivate)}(c)?c.canActivate(e,n):a.runInContext(()=>c(e,n))).pipe(os())}));return(0,Tt.of)(i).pipe(T())}(n,i.route,t))),os(i=>!0!==i,!0))}(r,s,n,e):(0,Tt.of)(c)),(0,Ht.U)(c=>({...t,guardsResult:c})))})}(this.environmentInjector,a=>this.events.next(a)),On(a=>{if(r.guardsResult=a.guardsResult,Wl(a.guardsResult))throw Ip(0,a.guardsResult);const c=new sa(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.events.next(c)}),ss(a=>!!a.guardsResult||(t.restoreHistory(a),this.cancelNavigationTransition(a,"",3),!1)),j_(a=>{if(a.guards.canActivateChecks.length)return(0,Tt.of)(a).pipe(On(c=>{const h=new Kd(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(h)}),(0,or.w)(c=>{let h=!1;return(0,Tt.of)(c).pipe(function GN(n,e){return(0,br.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,Tt.of)(t);let s=0;return(0,In.D)(i).pipe(to(a=>function eT(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!tT(i)&&(s[Vl]=i.title),function Za(n,e,t,r){const i=function xp(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return(0,Tt.of)({});const s={};return(0,In.D)(i).pipe((0,br.z)(a=>function OD(n,e,t,r){const i=vc(e)??r,s=Ms(n,i);return ro(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[a],e,t,r).pipe(os(),On(c=>{s[a]=c}))),ra(1),function FI(n){return(0,Ht.U)(()=>n)}(s),as(a=>p(a)?rs.E:Jo(a)))}(s,n,e,r).pipe((0,Ht.U)(a=>(n._resolvedData=a,n.data=dc(n,t).resolve,i&&tT(i)&&(n.data[Vl]=i.title),null)))}(a.route,r,n,e)),On(()=>s++),ra(1),(0,br.z)(a=>s===i.length?(0,Tt.of)(t):rs.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),On({next:()=>h=!0,complete:()=>{h||(t.restoreHistory(c),this.cancelNavigationTransition(c,"",2))}}))}),On(c=>{const h=new Zd(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(h)}))}),j_(a=>{const c=h=>{const g=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(h.routeConfig).pipe(On(E=>{h.component=E}),(0,Ht.U)(()=>{})));for(const E of h.children)g.push(...c(E));return g};return Yu(c(a.targetSnapshot.root)).pipe(Fa(),ta(1))}),j_(()=>this.afterPreactivation()),(0,Ht.U)(a=>{const c=function So(n,e,t){const r=pc(n,e._root,t?t._root:void 0);return new Jl(r,e)}(t.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return r={...a,targetRouterState:c}}),On(a=>{t.currentUrlTree=a.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),t.routerState=a.targetRouterState,"deferred"===t.urlUpdateStrategy&&(a.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,a),t.browserUrlTree=a.urlAfterRedirects)}),((n,e,t,r)=>(0,Ht.U)(i=>(new $a(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,a=>this.events.next(a),this.inputBindingEnabled),ta(1),On({next:a=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Co(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(a.targetRouterState.snapshot),a.resolve(!0)},complete:()=>{i=!0}}),h_(()=>{i||s||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),as(a=>{if(s=!0,mc(a)){tu(a)||(t.navigated=!0,t.restoreHistory(r,!0));const c=new ac(r.id,this.urlSerializer.serialize(r.extractedUrl),a.message,a.cancellationCode);if(this.events.next(c),tu(a)){const h=t.urlHandlingStrategy.merge(a.url,t.rawUrlTree),g={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||HN(r.source)};t.scheduleNavigation(h,oc,null,g,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const c=new lc(r.id,this.urlSerializer.serialize(r.extractedUrl),a,r.targetSnapshot??void 0);this.events.next(c);try{r.resolve(t.errorHandler(a))}catch(h){r.reject(h)}}return rs.E}))}))}cancelNavigationTransition(t,r,i){const s=new ac(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function HN(n){return n!==oc}let zN=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===jt);return r}getResolvedTitleForRoute(t){return t.data[Vl]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:function(){return(0,y.f3M)(LD)},providedIn:"root"}),n})(),LD=(()=>{class n extends zN{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(rp))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:function(){return(0,y.f3M)(KN)},providedIn:"root"}),n})();class WN{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let KN=(()=>{class n extends WN{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=y.n5z(n)))(r||n)}}(),n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const G_=new y.OlP("",{providedIn:"root",factory:()=>({})});let VD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:function(){return(0,y.f3M)(H_)},providedIn:"root"}),n})(),H_=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Ps=(()=>((Ps=Ps||{})[Ps.COMPLETE=0]="COMPLETE",Ps[Ps.FAILED=1]="FAILED",Ps[Ps.REDIRECTING=2]="REDIRECTING",Ps))();function z_(n,e){n.events.pipe(ss(t=>t instanceof Co||t instanceof ac||t instanceof lc||t instanceof Ql),(0,Ht.U)(t=>t instanceof Co||t instanceof Ql?Ps.COMPLETE:t instanceof ac&&(0===t.code||1===t.code)?Ps.REDIRECTING:Ps.FAILED),ss(t=>t!==Ps.REDIRECTING),ta(1)).subscribe(()=>{e()})}function ZN(n){throw n}function Ar(n,e,t){return e.parse("/")}const QN={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},YN={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ui=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,y.f3M)(y.c2e),this.isNgZoneEnabled=!1,this.options=(0,y.f3M)(G_,{optional:!0})||{},this.pendingTasks=(0,y.f3M)(y.HDt),this.errorHandler=this.options.errorHandler||ZN,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Ar,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,y.f3M)(VD),this.routeReuseStrategy=(0,y.f3M)(qN),this.titleStrategy=(0,y.f3M)(zN),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,y.f3M)(Rp,{optional:!0})?.flat()??[],this.navigationTransitions=(0,y.f3M)(sh),this.urlSerializer=(0,y.f3M)(La),this.location=(0,y.f3M)(Le),this.componentInputBindingEnabled=!!(0,y.f3M)(eu,{optional:!0}),this.isNgZoneEnabled=(0,y.f3M)(y.R0b)instanceof y.R0b&&y.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new ia,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Fr(0,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),oc,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},a=i?.navigationId?i:null;if(i){const h={...i};delete h.navigationId,delete h.\u0275routerPageId,0!==Object.keys(h).length&&(s.state=h)}const c=this.parseUrl(t);this.scheduleNavigation(c,r,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(ru),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:h}=r,g=h?this.currentUrlTree.fragment:a;let b,E=null;switch(c){case"merge":E={...this.currentUrlTree.queryParams,...s};break;case"preserve":E=this.currentUrlTree.queryParams;break;default:E=s||null}null!==E&&(E=this.removeEmptyProps(E));try{b=T_(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),b=this.currentUrlTree.root}return w_(b,t,E,g??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Wl(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,oc,null,r)}navigate(t,r={skipLocationChange:!1}){return function UD(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new y.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...QN}:!1===r?{...YN}:r,Wl(t))return oi(this.currentUrlTree,t,i);const s=this.parseUrl(t);return oi(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,a){if(this.disposed)return Promise.resolve(!1);let c,h,g;a?(c=a.resolve,h=a.reject,g=a.promise):g=new Promise((b,x)=>{c=b,h=x});const E=this.pendingTasks.add();return z_(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(E))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:c,reject:h,promise:g,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),g.catch(b=>Promise.reject(b))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const a={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",a)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,(this.browserPageId??0)+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-(this.browserPageId??this.currentPageId);0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),q_=(()=>{class n{constructor(t,r,i,s,a,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=a,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new mi.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const h=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===h||"area"===h,this.isAnchorElement?this.subscription=t.events.subscribe(g=>{g instanceof Co&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,s,a){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||s||a||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,y.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(y.Y36(Ui),y.Y36(so),y.$8M("tabindex"),y.Y36(y.Qsj),y.Y36(y.SBq),y.Y36(qe))},n.\u0275dir=y.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&y.NdJ("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&y.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",y.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",y.VuI],replaceUrl:["replaceUrl","replaceUrl",y.VuI],routerLink:"routerLink"},standalone:!0,features:[y.Xq5,y.TTD]}),n})();class BD{}let b$=(()=>{class n{constructor(t,r,i,s,a){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(ss(t=>t instanceof Co),to(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=(0,y.MMx)(s.providers,t,`Route: ${s.path}`));const a=s._injector??t,c=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(c,s.children??s._loadedRoutes))}return(0,In.D)(i).pipe((0,Do.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):(0,Tt.of)(null);const s=i.pipe((0,br.z)(a=>null===a?(0,Tt.of)(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(a.injector??t,a.routes))));if(r.loadComponent&&!r._loadedComponent){const a=this.loader.loadComponent(r);return(0,In.D)([s,a]).pipe((0,Do.J)())}return s})}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(Ui),y.LFG(y.Sil),y.LFG(y.lqb),y.LFG(BD),y.LFG(FD))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ic=new y.OlP("");let pn=(()=>{class n{constructor(t,r,i,s,a={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Zl?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Co?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Ql&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof x_&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new x_(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){y.$Z()},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();function la(n,e){return{\u0275kind:n,\u0275providers:e}}function rT(){const n=(0,y.f3M)(y.zs3);return e=>{const t=n.get(y.z2F);if(e!==t.components[0])return;const r=n.get(Ui),i=n.get(K_);1===n.get($D)&&r.initialNavigation(),n.get(sT,null,y.XFs.Optional)?.setUpPreloading(),n.get(Ic,null,y.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const K_=new y.OlP("",{factory:()=>new mi.x}),$D=new y.OlP("",{providedIn:"root",factory:()=>1}),sT=new y.OlP("");function HD(n){return la(0,[{provide:sT,useExisting:b$},{provide:BD,useExisting:n}])}const Q_=new y.OlP("ROUTER_FORROOT_GUARD"),Y_=[Le,{provide:La,useClass:cp},Ui,Xl,{provide:so,useFactory:function nT(n){return n.routerState.root},deps:[Ui]},FD,[]];function Tc(){return new y.PXZ("Router",Ui)}let X_=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Y_,[],{provide:Rp,multi:!0,useValue:t},{provide:Q_,useFactory:qD,deps:[[Ui,new y.FiY,new y.tp0]]},{provide:G_,useValue:r||{}},r?.useHash?{provide:qe,useClass:Me}:{provide:qe,useClass:ut},{provide:Ic,useFactory:()=>{const n=(0,y.f3M)(yd),e=(0,y.f3M)(y.R0b),t=(0,y.f3M)(G_),r=(0,y.f3M)(sh),i=(0,y.f3M)(La);return t.scrollOffset&&n.setOffset(t.scrollOffset),new pn(i,r,n,e,t)}},r?.preloadingStrategy?HD(r.preloadingStrategy).\u0275providers:[],{provide:y.PXZ,multi:!0,useFactory:Tc},r?.initialNavigation?ah(r):[],r?.bindToComponentInputs?la(8,[P_,{provide:eu,useExisting:P_}]).\u0275providers:[],[{provide:WD,useFactory:rT},{provide:y.tb,multi:!0,useExisting:WD}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Rp,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(Q_,8))},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({}),n})();function qD(n){return"guarded"}function ah(n){return["disabled"===n.initialNavigation?la(3,[{provide:y.ip1,multi:!0,useFactory:()=>{const e=(0,y.f3M)(Ui);return()=>{e.setUpLocationChangeListener()}}},{provide:$D,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?la(2,[{provide:$D,useValue:0},{provide:y.ip1,multi:!0,deps:[y.zs3],useFactory:e=>{const t=e.get(Ke,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Ui),s=e.get(K_);z_(i,()=>{r(!0)}),e.get(sh).afterPreactivation=()=>(r(!0),s.closed?(0,Tt.of)(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const WD=new y.OlP("");var N=F(5861),Ie=F(9058),Lr=F(4537),Vr=F(7879),R$=F(1878);class M${constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function J_(n){const e=n.getComponent();return"VERSION"===e?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const aT="@firebase/app",Qa=new Vr.Yd("@firebase/app"),lh="[DEFAULT]",ry={[aT]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},wc=new Map,kp=new Map;function mk(n,e){try{n.container.addComponent(e)}catch(t){Qa.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function cs(n){const e=n.name;if(kp.has(e))return Qa.debug(`There were multiple attempts to register component ${e}.`),!1;kp.set(e,n);for(const t of wc.values())mk(t,n);return!0}function uh(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}const Ns=new Ie.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class _k{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Lr.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ns.create("app-deleted",{appName:this._name})}}const au="10.0.0";function tC(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:lh,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw Ns.create("bad-app-name",{appName:String(i)});if(t||(t=(0,Ie.aH)()),!t)throw Ns.create("no-options");const s=wc.get(i);if(s){if((0,Ie.vZ)(t,s.options)&&(0,Ie.vZ)(r,s.config))return s;throw Ns.create("duplicate-app",{appName:i})}const a=new Lr.H0(i);for(const h of kp.values())a.addComponent(h);const c=new _k(t,r,a);return wc.set(i,c),c}function nC(n=lh){const e=wc.get(n);if(!e&&n===lh&&(0,Ie.aH)())return tC();if(!e)throw Ns.create("no-app",{appName:n});return e}function Ur(n,e,t){var r;let i=null!==(r=ry[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const c=[`Unable to register library "${i}" with version "${e}":`];return s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Qa.warn(c.join(" "))}cs(new Lr.wA(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const F$="firebase-heartbeat-database",_T=1,ua="firebase-heartbeat-store";let dh=null;function yT(){return dh||(dh=(0,R$.X3)(F$,_T,{upgrade:(n,e)=>{0===e&&n.createObjectStore(ua)}}).catch(n=>{throw Ns.create("idb-open",{originalErrorMessage:n.message})})),dh}function vT(){return(vT=(0,N.Z)(function*(n){try{return yield(yield yT()).transaction(ua).objectStore(ua).get(sC(n))}catch(e){if(e instanceof Ie.ZR)Qa.warn(e.message);else{const t=Ns.create("idb-get",{originalErrorMessage:e?.message});Qa.warn(t.message)}}})).apply(this,arguments)}function iC(n,e){return ET.apply(this,arguments)}function ET(){return(ET=(0,N.Z)(function*(n,e){try{const r=(yield yT()).transaction(ua,"readwrite");yield r.objectStore(ua).put(e,sC(n)),yield r.done}catch(t){if(t instanceof Ie.ZR)Qa.warn(t.message);else{const r=Ns.create("idb-set",{originalErrorMessage:t?.message});Qa.warn(r.message)}}})).apply(this,arguments)}function sC(n){return`${n.name}!${n.options.appId}`}class oC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new aC(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return(0,N.Z)(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=bc();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(s=>s.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(s=>{const a=new Date(s.date).valueOf();return Date.now()-a<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return(0,N.Z)(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=bc(),{heartbeatsToSend:r,unsentEntries:i}=function Ya(n,e=1024){const t=[];let r=n.slice();for(const i of n){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),Tk(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Tk(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=(0,Ie.L)(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function bc(){return(new Date).toISOString().substring(0,10)}class aC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,N.Z)(function*(){return!!(0,Ie.hl)()&&(0,Ie.eu)().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return(0,N.Z)(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function rC(n){return vT.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return(0,N.Z)(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return iC(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return(0,N.Z)(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return iC(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function Tk(n){return(0,Ie.L)(JSON.stringify({version:2,heartbeats:n})).length}!function wk(n){cs(new Lr.wA("platform-logger",e=>new M$(e),"PRIVATE")),cs(new Lr.wA("heartbeat",e=>new oC(e),"PRIVATE")),Ur(aT,"0.9.14",n),Ur(aT,"0.9.14","esm2017"),Ur("fire-js","")}("");var lC=F(7582);const uC=function TT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},$t=new Ie.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Op=new Vr.Yd("@firebase/auth");function sy(n,...e){Op.logLevel<=Vr.in.ERROR&&Op.error(`Auth (${au}): ${n}`,...e)}function Bi(n,...e){throw wT(n,...e)}function ks(n,...e){return wT(n,...e)}function cC(n,e,t){const r=Object.assign(Object.assign({},uC()),{[e]:t});return new Ie.LL("auth","Firebase",r).create(e,{appName:n.name})}function wT(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return $t.create(n,...e)}function Ze(n,e,...t){if(!n)throw wT(e,...t)}function ca(n){const e="INTERNAL ASSERTION FAILED: "+n;throw sy(e),new Error(e)}function Xa(n,e){n||ca(e)}function oy(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.href)||""}function bT(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class fh{constructor(e,t){this.shortDelay=e,this.longDelay=t,Xa(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,Ie.uI)()||(0,Ie.b$)()}get(){return function lu(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function ay(){return"http:"===bT()||"https:"===bT()}()||(0,Ie.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function AT(n,e){Xa(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class Fp{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ca("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ca("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ca("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ph={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},DT=new fh(3e4,6e4);function An(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function qn(n,e,t,r){return Lp.apply(this,arguments)}function Lp(){return(Lp=(0,N.Z)(function*(n,e,t,r,i={}){return ly(n,i,(0,N.Z)(function*(){let s={},a={};r&&("GET"===e?a=r:s={body:JSON.stringify(r)});const c=(0,Ie.xO)(Object.assign({key:n.config.apiKey},a)).slice(1),h=yield n._getAdditionalHeaders();return h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode),Fp.fetch()(dC(n,n.config.apiHost,t,c),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},s))}))})).apply(this,arguments)}function ly(n,e,t){return Vp.apply(this,arguments)}function Vp(){return(Vp=(0,N.Z)(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},ph),e);try{const i=new xk(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=yield s.json();if("needConfirmation"in a)throw Bp(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const c=s.ok?a.errorMessage:a.error.message,[h,g]=c.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===h)throw Bp(n,"credential-already-in-use",a);if("EMAIL_EXISTS"===h)throw Bp(n,"email-already-in-use",a);if("USER_DISABLED"===h)throw Bp(n,"user-disabled",a);const E=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw cC(n,E,g);Bi(n,E)}}catch(i){if(i instanceof Ie.ZR)throw i;Bi(n,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function Up(){return(Up=(0,N.Z)(function*(n,e,t,r,i={}){const s=yield qn(n,e,t,r,i);return"mfaPendingCredential"in s&&Bi(n,"multi-factor-auth-required",{_serverResponse:s}),s})).apply(this,arguments)}function dC(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?AT(n.config,i):`${n.config.apiScheme}://${i}`}class xk{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ks(this.auth,"network-request-failed")),DT.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Bp(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=ks(n,e,r);return i.customData._tokenResponse=t,i}function CT(){return(CT=(0,N.Z)(function*(n,e){return qn(n,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function uy(){return(uy=(0,N.Z)(function*(n,e){return qn(n,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function mh(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function ji(){return(ji=(0,N.Z)(function*(n,e=!1){const t=(0,Ie.m9)(n),r=yield t.getIdToken(e),i=cy(r);Ze(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:r,authTime:mh(xT(i.auth_time)),issuedAtTime:mh(xT(i.iat)),expirationTime:mh(xT(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}})).apply(this,arguments)}function xT(n){return 1e3*Number(n)}function cy(n){const[e,t,r]=n.split(".");if(void 0===e||void 0===t||void 0===r)return sy("JWT malformed, contained fewer than 3 sections"),null;try{const i=(0,Ie.tV)(t);return i?JSON.parse(i):(sy("Failed to decode base64 JWT payload"),null)}catch(i){return sy("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Mo(n,e){return dy.apply(this,arguments)}function dy(){return(dy=(0,N.Z)(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof Ie.ZR&&function Nk({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})).apply(this,arguments)}class kk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout((0,N.Z)(function*(){yield t.iteration()}),r)}iteration(){var e=this;return(0,N.Z)(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t?.code&&e.schedule(!0))}e.schedule()})()}}class fC{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=mh(this.lastLoginAt),this.creationTime=mh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function gh(n){return RT.apply(this,arguments)}function RT(){return RT=(0,N.Z)(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield Mo(n,function Mk(n,e){return uy.apply(this,arguments)}(t,{idToken:r}));Ze(i?.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const a=null!==(e=s.providerUserInfo)&&void 0!==e&&e.length?function Lk(n){return n.map(e=>{var{providerId:t}=e,r=(0,lC._T)(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}(s.providerUserInfo):[],c=function Fk(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(n.providerData,a),E=!!n.isAnonymous&&!(n.email&&s.passwordHash||c?.length),b={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new fC(s.createdAt,s.lastLoginAt),isAnonymous:E};Object.assign(n,b)}),RT.apply(this,arguments)}function jp(){return(jp=(0,N.Z)(function*(n){const e=(0,Ie.m9)(n);yield gh(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function MT(){return(MT=(0,N.Z)(function*(n,e){const t=yield ly(n,{},(0,N.Z)(function*(){const r=(0,Ie.xO)({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=dC(n,i,"/v1/token",`key=${s}`),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Fp.fetch()(a,{method:"POST",headers:c,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})).apply(this,arguments)}class $p{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ze(e.idToken,"internal-error"),Ze(typeof e.idToken<"u","internal-error"),Ze(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function U$(n){const e=cy(n);return Ze(e,"internal-error"),Ze(typeof e.exp<"u","internal-error"),Ze(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var r=this;return(0,N.Z)(function*(){return Ze(!r.accessToken||r.refreshToken,e,"user-token-expired"),t||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return(0,N.Z)(function*(){const{accessToken:i,refreshToken:s,expiresIn:a}=yield function Vk(n,e){return MT.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,s,Number(a))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new $p;return r&&(Ze("string"==typeof r,"internal-error",{appName:e}),a.refreshToken=r),i&&(Ze("string"==typeof i,"internal-error",{appName:e}),a.accessToken=i),s&&(Ze("number"==typeof s,"internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $p,this.toJSON())}_performRefresh(){return ca("not implemented")}}function ai(n,e){Ze("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class Ja{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=(0,lC._T)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new kk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new fC(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,N.Z)(function*(){const r=yield Mo(t,t.stsTokenManager.getToken(t.auth,e));return Ze(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function Pk(n){return ji.apply(this,arguments)}(this,e)}reload(){return function Ok(n){return jp.apply(this,arguments)}(this)}_assign(e){this!==e&&(Ze(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ja(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ze(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var r=this;return(0,N.Z)(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield gh(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return(0,N.Z)(function*(){const t=yield e.getIdToken();return yield Mo(e,function hC(n,e){return CT.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,a,c,h,g,E;const b=null!==(r=t.displayName)&&void 0!==r?r:void 0,x=null!==(i=t.email)&&void 0!==i?i:void 0,M=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,O=null!==(a=t.photoURL)&&void 0!==a?a:void 0,V=null!==(c=t.tenantId)&&void 0!==c?c:void 0,G=null!==(h=t._redirectEventId)&&void 0!==h?h:void 0,ne=null!==(g=t.createdAt)&&void 0!==g?g:void 0,ce=null!==(E=t.lastLoginAt)&&void 0!==E?E:void 0,{uid:me,emailVerified:Pe,isAnonymous:Ye,providerData:Xe,stsTokenManager:Nt}=t;Ze(me&&Nt,e,"internal-error");const Gn=$p.fromJSON(this.name,Nt);Ze("string"==typeof me,e,"internal-error"),ai(b,e.name),ai(x,e.name),Ze("boolean"==typeof Pe,e,"internal-error"),Ze("boolean"==typeof Ye,e,"internal-error"),ai(M,e.name),ai(O,e.name),ai(V,e.name),ai(G,e.name),ai(ne,e.name),ai(ce,e.name);const Di=new Ja({uid:me,auth:e,email:x,emailVerified:Pe,displayName:b,isAnonymous:Ye,photoURL:O,phoneNumber:M,tenantId:V,stsTokenManager:Gn,createdAt:ne,lastLoginAt:ce});return Xe&&Array.isArray(Xe)&&(Di.providerData=Xe.map(_o=>Object.assign({},_o))),G&&(Di._redirectEventId=G),Di}static _fromIdTokenResponse(e,t,r=!1){return(0,N.Z)(function*(){const i=new $p;i.updateFromServerResponse(t);const s=new Ja({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield gh(s),s})()}}const pC=new Map;function ha(n){Xa(n instanceof Function,"Expected a class definition");let e=pC.get(n);return e?(Xa(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,pC.set(n,e),e)}const PT=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,N.Z)(function*(){return!0})()}_set(t,r){var i=this;return(0,N.Z)(function*(){i.storage[t]=r})()}_get(t){var r=this;return(0,N.Z)(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return(0,N.Z)(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function Gp(n,e,t){return`firebase:${n}:${e}:${t}`}class el{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Gp(this.userKey,i.apiKey,s),this.fullPersistenceKey=Gp("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,N.Z)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?Ja._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,N.Z)(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return(0,N.Z)(function*(){if(!t.length)return new el(ha(PT),e,r);const i=(yield Promise.all(t.map(function(){var g=(0,N.Z)(function*(E){if(yield E._isAvailable())return E});return function(E){return g.apply(this,arguments)}}()))).filter(g=>g);let s=i[0]||ha(PT);const a=Gp(r,e.config.apiKey,e.name);let c=null;for(const g of t)try{const E=yield g._get(a);if(E){const b=Ja._fromJSON(e,E);g!==s&&(c=b),s=g;break}}catch{}const h=i.filter(g=>g._shouldAllowMigration);return s._shouldAllowMigration&&h.length?(s=h[0],c&&(yield s._set(a,c.toJSON())),yield Promise.all(t.map(function(){var g=(0,N.Z)(function*(E){if(E!==s)try{yield E._remove(a)}catch{}});return function(E){return g.apply(this,arguments)}}())),new el(s,e,r)):new el(s,e,r)})()}}function hy(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(kT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Uk(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(py(e))return"Blackberry";if(fa(e))return"Webos";if(fy(e))return"Safari";if((e.includes("chrome/")||NT(e))&&!e.includes("edge/"))return"Chrome";if(OT(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function Uk(n=(0,Ie.z$)()){return/firefox\//i.test(n)}function fy(n=(0,Ie.z$)()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function NT(n=(0,Ie.z$)()){return/crios\//i.test(n)}function kT(n=(0,Ie.z$)()){return/iemobile/i.test(n)}function OT(n=(0,Ie.z$)()){return/android/i.test(n)}function py(n=(0,Ie.z$)()){return/blackberry/i.test(n)}function fa(n=(0,Ie.z$)()){return/webos/i.test(n)}function my(n=(0,Ie.z$)()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function mC(n=(0,Ie.z$)()){return my(n)||OT(n)||fa(n)||py(n)||/windows phone/i.test(n)||kT(n)}function $k(n,e=[]){let t;switch(n){case"Browser":t=hy((0,Ie.z$)());break;case"Worker":t=`${hy((0,Ie.z$)())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${au}/${r}`}function Hp(n,e){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,N.Z)(function*(n,e){return qn(n,"GET","/v2/recaptchaConfig",An(n,e))})).apply(this,arguments)}function Gk(n){return void 0!==n&&void 0!==n.enterprise}class _C{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(t=>"EMAIL_PASSWORD_PROVIDER"===t.provider&&"OFF"!==t.enforcementState)}}function gy(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=ks("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",function yC(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(r)})}function vC(n){return`__${n}${Math.floor(1e6*Math.random())}`}class _h{constructor(e){this.type="recaptcha-enterprise",this.auth=Yr(e)}verify(e="verify",t=!1){var r=this;return(0,N.Z)(function*(){function s(){return s=(0,N.Z)(function*(c){if(!t){if(null==c.tenantId&&null!=c._agentRecaptchaConfig)return c._agentRecaptchaConfig.siteKey;if(null!=c.tenantId&&void 0!==c._tenantRecaptchaConfigs[c.tenantId])return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(function(){var h=(0,N.Z)(function*(g,E){Hp(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(b=>{if(void 0!==b.recaptchaKey){const x=new _C(b);return null==c.tenantId?c._agentRecaptchaConfig=x:c._tenantRecaptchaConfigs[c.tenantId]=x,g(x.siteKey)}E(new Error("recaptcha Enterprise site key undefined"))}).catch(b=>{E(b)})});return function(g,E){return h.apply(this,arguments)}}())}),s.apply(this,arguments)}function a(c,h,g){const E=window.grecaptcha;Gk(E)?E.enterprise.ready(()=>{E.enterprise.execute(c,{action:e}).then(b=>{h(b)}).catch(()=>{h("NO_RECAPTCHA")})}):g(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((c,h)=>{(function i(c){return s.apply(this,arguments)})(r.auth).then(g=>{if(!t&&Gk(window.grecaptcha))a(g,c,h);else{if(typeof window>"u")return void h(new Error("RecaptchaVerifier is only supported in browser"));gy("https://www.google.com/recaptcha/enterprise.js?render="+g).then(()=>{a(g,c,h)}).catch(E=>{h(E)})}}).catch(g=>{h(g)})})})()}}class TC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((a,c)=>{try{a(e(s))}catch(h){c(h)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return(0,N.Z)(function*(){if(t.auth.currentUser===e)return;const r=[];try{for(const i of t.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}class zk{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yh(this),this.idTokenSubscription=new yh(this),this.beforeStateQueue=new TC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$t,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=ha(t)),this._initializationPromise=this.queue((0,N.Z)(function*(){var i,s;if(!r._deleted&&(r.persistenceManager=yield el.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,N.Z)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUser(e){var t=this;return(0,N.Z)(function*(){var r;const i=yield t.assertedPersistence.getCurrentUser();let s=i,a=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const c=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,h=s?._redirectEventId,g=yield t.tryRedirectSignIn(e);(!c||c===h)&&g?.user&&(s=g.user,a=!0)}if(!s)return t.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{yield t.beforeStateQueue.runMiddleware(s)}catch(c){s=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(c))}return s?t.reloadAndSetCurrentUserOrClear(s):t.directlySetCurrentUser(null)}return Ze(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===s._redirectEventId?t.directlySetCurrentUser(s):t.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var t=this;return(0,N.Z)(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,N.Z)(function*(){try{yield gh(e)}catch(r){if("auth/network-request-failed"!==r?.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function hh(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return(0,N.Z)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,N.Z)(function*(){const r=e?(0,Ie.m9)(e):null;return r&&Ze(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e,t=!1){var r=this;return(0,N.Z)(function*(){if(!r._deleted)return e&&Ze(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),t||(yield r.beforeStateQueue.runMiddleware(e)),r.queue((0,N.Z)(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,N.Z)(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue((0,N.Z)(function*(){yield t.assertedPersistence.setPersistence(ha(e))}))}initializeRecaptchaConfig(){var e=this;return(0,N.Z)(function*(){const t=yield Hp(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new _C(t);null==e.tenantId?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.emailPasswordEnabled&&new _h(e).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ie.LL("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return(0,N.Z)(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,N.Z)(function*(){if(!t.redirectPersistenceManager){const r=e&&ha(e)||t._popupRedirectResolver;Ze(r,t,"argument-error"),t.redirectPersistenceManager=yield el.create(t,[ha(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,N.Z)(function*(){var r,i;return t._isInitialized&&(yield t.queue((0,N.Z)(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,N.Z)(function*(){if(e===t.currentUser)return t.queue((0,N.Z)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s="function"==typeof t?t:t.next.bind(t),a=this._isInitialized?Promise.resolve():this._initializationPromise;return Ze(a,this,"internal-error"),a.then(()=>s(this.currentUser)),"function"==typeof t?e.addObserver(t,r,i):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return(0,N.Z)(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ze(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$k(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return(0,N.Z)(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const s=yield e._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r})()}_getAppCheckToken(){var e=this;return(0,N.Z)(function*(){var t;const r=yield null===(t=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();return r?.error&&function L$(n,...e){Op.logLevel<=Vr.in.WARN&&Op.warn(`Auth (${au}): ${n}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}function Yr(n){return(0,Ie.m9)(n)}class yh{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,Ie.ne)(t=>this.observer=t)}get next(){return Ze(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function wC(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function bC(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}class AC{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ca("not implemented")}_getIdTokenResponse(e){return ca("not implemented")}_linkToIdToken(e,t){return ca("not implemented")}_getReauthenticationResolver(e){return ca("not implemented")}}function tl(n,e){return lo.apply(this,arguments)}function lo(){return(lo=(0,N.Z)(function*(n,e){return function da(n,e,t,r){return Up.apply(this,arguments)}(n,"POST","/v1/accounts:signInWithIdp",An(n,e))})).apply(this,arguments)}class Dr extends AC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Dr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Bi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=(0,lC._T)(t,["providerId","signInMethod"]);if(!r||!i)return null;const a=new Dr(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){return tl(e,this.buildRequest())}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,tl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,tl(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,Ie.xO)(t)}return e}}class rl{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class WT extends rl{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Sc extends WT{static credentialFromJSON(e){const t="string"==typeof e?JSON.parse(e):e;return Ze("providerId"in t&&"signInMethod"in t,"argument-error"),Dr._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Ze(e.idToken||e.accessToken,"argument-error"),Dr._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Sc.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Sc.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:a,providerId:c}=e;if(!r&&!i&&!t&&!s||!c)return null;try{return new Sc(c)._credential({idToken:t,accessToken:r,nonce:a,pendingToken:s})}catch{return null}}}class Po{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return(0,N.Z)(function*(){const s=yield Ja._fromIdTokenResponse(e,r,i),a=MC(r);return new Po({user:s,providerId:a,_tokenResponse:r,operationType:t})})()}static _forOperation(e,t,r){return(0,N.Z)(function*(){yield e._updateTokensIfNecessary(r,!0);const i=MC(r);return new Po({user:e,providerId:i,_tokenResponse:r,operationType:t})})()}}function MC(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Dy extends Ie.ZR{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Dy.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Dy(e,t,r,i)}}function PC(n,e,t,r){return("reauthenticate"===e?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw"auth/multi-factor-auth-required"===s.code?Dy._fromErrorAndOperation(n,s,e,r):s})}function xy(){return(xy=(0,N.Z)(function*(n,e,t=!1){const r=yield Mo(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Po._forOperation(n,"link",r)})).apply(this,arguments)}function Rc(){return(Rc=(0,N.Z)(function*(n,e,t=!1){const{auth:r}=n,i="reauthenticate";try{const s=yield Mo(n,PC(r,i,e,n),t);Ze(s.idToken,r,"internal-error");const a=cy(s.idToken);Ze(a,r,"internal-error");const{sub:c}=a;return Ze(n.uid===c,r,"user-mismatch"),Po._forOperation(n,i,s)}catch(s){throw"auth/user-not-found"===s?.code&&Bi(r,"user-mismatch"),s}})).apply(this,arguments)}function QT(){return(QT=(0,N.Z)(function*(n,e,t=!1){const r="signIn",i=yield PC(n,r,e),s=yield Po._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})).apply(this,arguments)}const By="__sak";class dw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(By,"1"),this.storage.removeItem(By),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const _O=(()=>{class n extends dw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function gO(){const n=(0,Ie.z$)();return fy(n)||my(n)}()&&function jk(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=mC(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key)return void this.forAllChangedKeys((c,h,g)=>{this.notifyListeners(c,g)});const i=t.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const c=this.storage.getItem(i);if(t.newValue!==c)null!==t.newValue?this.storage.setItem(i,t.newValue):this.storage.removeItem(i);else if(this.localCache[i]===t.newValue&&!r)return}const s=()=>{const c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},a=this.storage.getItem(i);!function Bk(){return(0,Ie.w1)()&&10===document.documentMode}()||a===t.newValue||t.newValue===t.oldValue?s():setTimeout(s,10)}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,r){var i=()=>super._set,s=this;return(0,N.Z)(function*(){yield i().call(s,t,r),s.localCache[t]=JSON.stringify(r)})()}_get(t){var r=()=>super._get,i=this;return(0,N.Z)(function*(){const s=yield r().call(i,t);return i.localCache[t]=JSON.stringify(s),s})()}_remove(t){var r=()=>super._remove,i=this;return(0,N.Z)(function*(){yield r().call(i,t),delete i.localCache[t]})()}}return n.type="LOCAL",n})(),hw=(()=>{class n extends dw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})();let YC=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;const i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){var r=this;return(0,N.Z)(function*(){const i=t,{eventId:s,eventType:a,data:c}=i.data,h=r.handlersMap[a];if(!h?.size)return;i.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const g=Array.from(h).map(function(){var b=(0,N.Z)(function*(x){return x(i.origin,c)});return function(x){return b.apply(this,arguments)}}()),E=yield function yO(n){return Promise.all(n.map(function(){var e=(0,N.Z)(function*(t){try{return{fulfilled:!0,value:yield t}}catch(r){return{fulfilled:!1,reason:r}}});return function(t){return e.apply(this,arguments)}}()))}(g);i.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:E})})()}_subscribe(t,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||0===this.handlersMap[t].size)&&delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return n.receivers=[],n})();function fw(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(10*Math.random());return n+t}class XC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){var i=this;return(0,N.Z)(function*(){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,c;return new Promise((h,g)=>{const E=fw("",20);s.port1.start();const b=setTimeout(()=>{g(new Error("unsupported_event"))},r);c={messageChannel:s,onMessage(x){const M=x;if(M.data.eventId===E)switch(M.data.status){case"ack":clearTimeout(b),a=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(M.data.response);break;default:clearTimeout(b),clearTimeout(a),g(new Error("invalid_response"))}}},i.handlers.add(c),s.port1.addEventListener("message",c.onMessage),i.target.postMessage({eventType:e,eventId:E,data:t},[s.port2])}).finally(()=>{c&&i.removeMessageHandler(c)})})()}}function lr(){return window}function pw(){return typeof lr().WorkerGlobalScope<"u"&&"function"==typeof lr().importScripts}function co(){return(co=(0,N.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const mw="firebaseLocalStorageDb",jy="firebaseLocalStorage",eS="fbase_key";class im{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function $y(n,e){return n.transaction([jy],e?"readwrite":"readonly").objectStore(jy)}function kc(){const n=indexedDB.open(mw,1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(jy,{keyPath:eS})}catch(i){t(i)}}),n.addEventListener("success",(0,N.Z)(function*(){const r=n.result;r.objectStoreNames.contains(jy)?e(r):(r.close(),yield function gw(){const n=indexedDB.deleteDatabase(mw);return new im(n).toPromise()}(),e(yield kc()))}))})}function tS(n,e,t){return Gy.apply(this,arguments)}function Gy(){return(Gy=(0,N.Z)(function*(n,e,t){const r=$y(n,!0).put({[eS]:e,value:t});return new im(r).toPromise()})).apply(this,arguments)}function _w(){return(_w=(0,N.Z)(function*(n,e){const t=$y(n,!1).get(e),r=yield new im(t).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function yw(n,e){const t=$y(n,!0).delete(e);return new im(t).toPromise()}const rS=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return(0,N.Z)(function*(){return t.db||(t.db=yield kc()),t.db})()}_withRetries(t){var r=this;return(0,N.Z)(function*(){let i=0;for(;;)try{const s=yield r._openDb();return yield t(s)}catch(s){if(i++>3)throw s;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return(0,N.Z)(function*(){return pw()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return(0,N.Z)(function*(){t.receiver=YC._getInstance(function ko(){return pw()?self:null}()),t.receiver._subscribe("keyChanged",function(){var r=(0,N.Z)(function*(i,s){return{keyProcessed:(yield t._poll()).includes(s.key)}});return function(i,s){return r.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var r=(0,N.Z)(function*(i,s){return["keyChanged"]});return function(i,s){return r.apply(this,arguments)}}())})()}initializeSender(){var t=this;return(0,N.Z)(function*(){var r,i;if(t.activeServiceWorker=yield function vO(){return co.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new XC(t.activeServiceWorker);const s=yield t.sender._send("ping",{},800);s&&null!==(r=s[0])&&void 0!==r&&r.fulfilled&&null!==(i=s[0])&&void 0!==i&&i.value.includes("keyChanged")&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var r=this;return(0,N.Z)(function*(){if(r.sender&&r.activeServiceWorker&&function No(){var n;return(null===(n=navigator?.serviceWorker)||void 0===n?void 0:n.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:t},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,N.Z)(function*(){try{if(!indexedDB)return!1;const t=yield kc();return yield tS(t,By,"1"),yield yw(t,By),!0}catch{}return!1})()}_withPendingWrite(t){var r=this;return(0,N.Z)(function*(){r.pendingWrites++;try{yield t()}finally{r.pendingWrites--}})()}_set(t,r){var i=this;return(0,N.Z)(function*(){return i._withPendingWrite((0,N.Z)(function*(){return yield i._withRetries(s=>tS(s,t,r)),i.localCache[t]=r,i.notifyServiceWorker(t)}))})()}_get(t){var r=this;return(0,N.Z)(function*(){const i=yield r._withRetries(s=>function EO(n,e){return _w.apply(this,arguments)}(s,t));return r.localCache[t]=i,i})()}_remove(t){var r=this;return(0,N.Z)(function*(){return r._withPendingWrite((0,N.Z)(function*(){return yield r._withRetries(i=>yw(i,t)),delete r.localCache[t],r.notifyServiceWorker(t)}))})()}_poll(){var t=this;return(0,N.Z)(function*(){const r=yield t._withRetries(a=>{const c=$y(a,!1).getAll();return new im(c).toPromise()});if(!r)return[];if(0!==t.pendingWrites)return[];const i=[],s=new Set;for(const{fbase_key:a,value:c}of r)s.add(a),JSON.stringify(t.localCache[a])!==JSON.stringify(c)&&(t.notifyListeners(a,c),i.push(a));for(const a of Object.keys(t.localCache))t.localCache[a]&&!s.has(a)&&(t.notifyListeners(a,null),i.push(a));return i})()}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(r)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval((0,N.Z)(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return n.type="LOCAL",n})();function Fc(n,e){return e?ha(e):(Ze(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}vC("rcb"),new fh(3e4,6e4);class qy extends AC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return tl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return tl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return tl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function pS(n){return function kC(n,e){return QT.apply(this,arguments)}(n.auth,new qy(n),n.bypassAuthState)}function mS(n){const{auth:e,user:t}=n;return Ze(t,e,"internal-error"),function NC(n,e){return Rc.apply(this,arguments)}(t,new qy(n),n.bypassAuthState)}function gS(n){return Wy.apply(this,arguments)}function Wy(){return(Wy=(0,N.Z)(function*(n){const{auth:e,user:t}=n;return Ze(t,e,"internal-error"),function Dh(n,e){return xy.apply(this,arguments)}(t,new qy(n),n.bypassAuthState)})).apply(this,arguments)}class Cw{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=(0,N.Z)(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(s){e.reject(s)}});return function(r,i){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return(0,N.Z)(function*(){const{urlResponse:r,sessionId:i,postBody:s,tenantId:a,error:c,type:h}=e;if(c)return void t.reject(c);const g={auth:t.auth,requestUri:r,sessionId:i,tenantId:a||void 0,postBody:s||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(h)(g))}catch(E){t.reject(E)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pS;case"linkViaPopup":case"linkViaRedirect":return gS;case"reauthViaPopup":case"reauthViaRedirect":return mS;default:Bi(this.auth,"internal-error")}}resolve(e){Xa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const _S=new fh(2e3,1e4);function Ky(){return(Ky=(0,N.Z)(function*(n,e,t){const r=Yr(n);!function Ac(n,e,t){if(!(e instanceof t))throw t.name!==e.constructor.name&&Bi(n,"argument-error"),cC(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}(n,e,rl);const i=Fc(r,t);return new xw(r,"signInViaPopup",e,i).executeNotNull()})).apply(this,arguments)}let xw=(()=>{class n extends Cw{constructor(t,r,i,s,a){super(t,r,s,a),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){var t=this;return(0,N.Z)(function*(){const r=yield t.execute();return Ze(r,t.auth,"internal-error"),r})()}onExecution(){var t=this;return(0,N.Z)(function*(){Xa(1===t.filter.length,"Popup operations only handle one event");const r=fw();t.authWindow=yield t.resolver._openPopup(t.auth,t.provider,t.filter[0],r),t.authWindow.associatedEvent=r,t.resolver._originValidation(t.auth).catch(i=>{t.reject(i)}),t.resolver._isIframeWebStorageSupported(t.auth,i=>{i||t.reject(ks(t.auth,"web-storage-unsupported"))}),t.pollUserCancellation()})()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(ks(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,i;this.pollId=null!==(i=null===(r=this.authWindow)||void 0===r?void 0:r.window)&&void 0!==i&&i.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ks(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(t,_S.get())};t()}}return n.currentPopupAction=null,n})();const Mh="pendingRedirect",Qy=new Map;class Rw extends Cw{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,t=this;return(0,N.Z)(function*(){let r=Qy.get(t.auth._key());if(!r){try{const s=(yield function cG(n,e){return Yy.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;r=()=>Promise.resolve(s)}catch(i){r=()=>Promise.reject(i)}Qy.set(t.auth._key(),r)}return t.bypassAuthState||Qy.set(t.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,r=this;return(0,N.Z)(function*(){if("signInViaRedirect"===e.type)return t().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,t().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return(0,N.Z)(function*(){})()}cleanUp(){}}function Yy(){return(Yy=(0,N.Z)(function*(n,e){const t=function IS(n){return Gp(Mh,n.config.apiKey,n.name)}(e),r=function ES(n){return ha(n._redirectPersistence)}(n);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(t));return yield r._remove(t),i})).apply(this,arguments)}function CO(n,e){Qy.set(n._key(),e)}function Nw(n,e){return ev.apply(this,arguments)}function ev(){return(ev=(0,N.Z)(function*(n,e,t=!1){const r=Yr(n),i=Fc(r,e),a=yield new Rw(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,yield r._persistUserIfCurrent(a.user),yield r._setRedirectUser(null,e)),a})).apply(this,arguments)}class om{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function PO(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return DS(n);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!DS(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(ks(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(AS(e))}saveEventToCache(e){this.cachedEventUids.add(AS(e)),this.lastProcessedEventTime=Date.now()}}function AS(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function DS({type:n,error:e}){return"unknown"===n&&"auth/no-auth-event"===e?.code}function nv(){return(nv=(0,N.Z)(function*(n,e={}){return qn(n,"GET","/v1/projects",e)})).apply(this,arguments)}const CS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,SS=/^https?/;function Lc(){return Lc=(0,N.Z)(function*(n){if(n.config.emulator)return;const{authorizedDomains:e}=yield function tv(n){return nv.apply(this,arguments)}(n);for(const t of e)try{if(am(t))return}catch{}Bi(n,"unauthorized-domain")}),Lc.apply(this,arguments)}function am(n){const e=oy(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return""===a.hostname&&""===r?"chrome-extension:"===t&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===t&&a.hostname===r}if(!SS.test(t))return!1;if(CS.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const kO=new fh(3e4,6e4);function xS(){const n=lr().___jsl;if(n?.H)for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}let lm=null;const MS=new fh(5e3,15e3),FO="__/auth/iframe",PS="emulator/auth/iframe",LO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},VO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dG(n){const e=n.config;Ze(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?AT(e,PS):`https://${n.config.authDomain}/${FO}`,r={apiKey:e.apiKey,appName:n.name,v:au},i=VO.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${(0,Ie.xO)(r).slice(1)}`}function NS(){return NS=(0,N.Z)(function*(n){const e=yield function RS(n){return lm=lm||function OO(n){return new Promise((e,t)=>{var r,i,s;function a(){xS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{xS(),t(ks(n,"network-request-failed"))},timeout:kO.get()})}if(null!==(i=null===(r=lr().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(s=lr().gapi)||void 0===s||!s.load){const c=vC("iframefcb");return lr()[c]=()=>{gapi.load?a():t(ks(n,"network-request-failed"))},gy(`https://apis.google.com/js/api.js?onload=${c}`).catch(h=>t(h))}a()}}).catch(e=>{throw lm=null,e})}(n),lm}(n),t=lr().gapi;return Ze(t,n,"internal-error"),e.open({where:document.body,url:dG(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:LO,dontclear:!0},r=>new Promise(function(){var i=(0,N.Z)(function*(s,a){yield r.restyle({setHideOnLeave:!1});const c=ks(n,"network-request-failed"),h=lr().setTimeout(()=>{a(c)},MS.get());function g(){lr().clearTimeout(h),s(r)}r.ping(g).then(g,()=>{a(c)})});return function(s,a){return i.apply(this,arguments)}}()))}),NS.apply(this,arguments)}const fG={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ow{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const $O="__/auth/handler",GO="emulator/auth/handler",HO=encodeURIComponent("fac");function zO(n,e,t,r,i,s){return Fw.apply(this,arguments)}function Fw(){return(Fw=(0,N.Z)(function*(n,e,t,r,i,s){Ze(n.config.authDomain,n,"auth-domain-config-required"),Ze(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:au,eventId:i};if(e instanceof rl){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",(0,Ie.xb)(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,b]of Object.entries(s||{}))a[E]=b}if(e instanceof WT){const E=e.getScopes().filter(b=>""!==b);E.length>0&&(a.scopes=E.join(","))}n.tenantId&&(a.tid=n.tenantId);const c=a;for(const E of Object.keys(c))void 0===c[E]&&delete c[E];const h=yield n._getAppCheckToken(),g=h?`#${HO}=${encodeURIComponent(h)}`:"";return`${function OS({config:n}){return n.emulator?AT(n,GO):`https://${n.authDomain}/${$O}`}(n)}?${(0,Ie.xO)(c).slice(1)}${g}`})).apply(this,arguments)}const Lw="webStorageSupport",cm=class qO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hw,this._completeRedirectFn=Nw,this._overrideRedirectResult=CO}_openPopup(e,t,r,i){var s=this;return(0,N.Z)(function*(){var a;Xa(null===(a=s.eventManagers[e._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()");const c=yield zO(e,t,r,oy(),i);return function um(n,e,t,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const h=Object.assign(Object.assign({},fG),{width:r.toString(),height:i.toString(),top:s,left:a}),g=(0,Ie.z$)().toLowerCase();t&&(c=NT(g)?"_blank":t),Uk(g)&&(e=e||"http://localhost",h.scrollbars="yes");const E=Object.entries(h).reduce((x,[M,O])=>`${x}${M}=${O},`,"");if(function FT(n=(0,Ie.z$)()){var e;return my(n)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(g)&&"_self"!==c)return function jO(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}(e||"",c),new Ow(null);const b=window.open(e||"",c,E);Ze(b,n,"popup-blocked");try{b.focus()}catch{}return new Ow(b)}(e,c,fw())})()}_openRedirect(e,t,r,i){var s=this;return(0,N.Z)(function*(){return yield s._originValidation(e),function ma(n){lr().location.href=n}(yield zO(e,t,r,oy(),i)),new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Xa(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){var t=this;return(0,N.Z)(function*(){const r=yield function hG(n){return NS.apply(this,arguments)}(e),i=new om(e);return r.register("authEvent",s=>(Ze(s?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:i},t.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Lw,{type:Lw},i=>{var s;const a=null===(s=i?.[0])||void 0===s?void 0:s[Lw];void 0!==a&&t(!!a),Bi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function NO(n){return Lc.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return mC()||fy()||my()}};var sv="@firebase/auth";class LS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,N.Z)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ze(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const QO=(0,Ie.Pz)("authIdTokenMaxAge")||300;let ov=null;const YO=n=>function(){var e=(0,N.Z)(function*(t){const r=t&&(yield t.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>QO)return;const s=r?.token;ov!==s&&(ov=s,yield fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))});return function(t){return e.apply(this,arguments)}}();function US(n=nC()){const e=uh(n,"auth");if(e.isInitialized())return e.getImmediate();const t=function qk(n,e){const t=uh(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if((0,Ie.vZ)(s,e??{}))return i;Bi(i,"already-initialized")}return t.initialize({options:e})}(n,{popupRedirectResolver:cm,persistence:[rS,_O,hw]}),r=(0,Ie.Pz)("authTokenSyncURL");if(r){const s=YO(r);(function Vy(n,e,t){(0,Ie.m9)(n).beforeAuthStateChanged(e,t)})(t,s,()=>s(t.currentUser)),function qC(n,e,t,r){(0,Ie.m9)(n).onIdTokenChanged(e,t,r)}(t,a=>s(a))}const i=(0,Ie.q4)("auth");return i&&function Wk(n,e,t){const r=Yr(n);Ze(r._canInitEmulator,r,"emulator-config-failed"),Ze(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!t?.disableWarnings,s=wC(e),{host:a,port:c}=function Kk(n){const e=wC(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:bC(r.substr(s.length+1))}}{const[s,a]=r.split(":");return{host:s,port:bC(a)}}}(e);r.config.emulator={url:`${s}//${a}${null===c?"":`:${c}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function Zk(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",n):n())}()}(t,`http://${i}`),t}!function KO(n){cs(new Lr.wA("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;Ze(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:a,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$k(n)},g=new zk(r,i,s,h);return function $$(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ha);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),cs(new Lr.wA("auth-internal",e=>{const t=Yr(e.getProvider("auth").getImmediate());return new LS(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ur(sv,"1.0.0",function VS(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(n)),Ur(sv,"1.0.0","esm2017")}("Browser");class XO extends Ll.w0{constructor(e,t){super()}schedule(e,t=0){return this}}const av={setInterval(n,e,...t){const{delegate:r}=av;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=av;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var JO=F(9039);class BS extends XO{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return av.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&av.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,JO.P)(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const jw={now:()=>(jw.delegate||Date).now(),delegate:void 0};class dm{constructor(e,t=dm.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}dm.now=jw.now;class jS extends dm{constructor(e,t=dm.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const $w=new jS(BS);var il=F(7592);(0,il.registerVersion)("firebase","9.23.0","app");const $S=(n,e)=>e.some(t=>n instanceof t);let GS,HS;const lv=new WeakMap,uv=new WeakMap,cv=new WeakMap,Hw=new WeakMap,zw=new WeakMap;let dv={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return uv.get(n);if("objectStoreNames"===e)return n.objectStoreNames||cv.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Vc(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function o1(n){return"function"==typeof n?function zS(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Gw(){return HS||(HS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(hm(this),e),Vc(lv.get(this))}:function(...e){return Vc(n.apply(hm(this),e))}:function(e,...t){const r=n.call(hm(this),e,...t);return cv.set(r,e.sort?e.sort():[e]),Vc(r)}}(n):(n instanceof IDBTransaction&&function s1(n){if(uv.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});uv.set(n,e)}(n),$S(n,function r1(){return GS||(GS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,dv):n)}function Vc(n){if(n instanceof IDBRequest)return function qw(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(Vc(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&lv.set(t,n)}).catch(()=>{}),zw.set(e,n),e}(n);if(Hw.has(n))return Hw.get(n);const e=o1(n);return e!==n&&(Hw.set(n,e),zw.set(e,n)),e}const hm=n=>zw.get(n),qS=["get","getKey","getAll","getAllKeys","count"],WS=["put","add","delete","clear"],Kw=new Map;function Zw(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(Kw.get(e))return Kw.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=WS.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!qS.includes(t))return;const s=function(){var a=(0,N.Z)(function*(c,...h){const g=this.transaction(c,i?"readwrite":"readonly");let E=g.store;return r&&(E=E.index(h.shift())),(yield Promise.all([E[t](...h),i&&g.done]))[0]});return function(h){return a.apply(this,arguments)}}();return Kw.set(e,s),s}!function Nh(n){dv=n(dv)}(n=>({...n,get:(e,t,r)=>Zw(e,t)||n.get(e,t,r),has:(e,t)=>!!Zw(e,t)||n.has(e,t)}));const hv="@firebase/installations",fv="0.6.4",Qw=1e4,Yw=`w:${fv}`,Xw="FIS_v2",a1="https://firebaseinstallations.googleapis.com/v1",l1=36e5,fu=new Ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Jw(n){return n instanceof Ie.ZR&&n.code.includes("request-failed")}function e0({projectId:n}){return`${a1}/projects/${n}/installations`}function ZS(n){return{token:n.token,requestStatus:2,expiresIn:d1(n.expiresIn),creationTime:Date.now()}}function QS(n,e){return t0.apply(this,arguments)}function t0(){return(t0=(0,N.Z)(function*(n,e){const r=(yield e.json()).error;return fu.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function YS({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function n0(n){return r0.apply(this,arguments)}function r0(){return(r0=(0,N.Z)(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function d1(n){return Number(n.replace("s","000"))}function s0(){return(s0=(0,N.Z)(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=e0(n),i=YS(n),s=e.getImmediate({optional:!0});if(s){const g=yield s.getHeartbeatsHeader();g&&i.append("x-firebase-client",g)}const c={method:"POST",headers:i,body:JSON.stringify({fid:t,authVersion:Xw,appId:n.appId,sdkVersion:Yw})},h=yield n0(()=>fetch(r,c));if(h.ok){const g=yield h.json();return{fid:g.fid||t,registrationStatus:2,refreshToken:g.refreshToken,authToken:ZS(g.authToken)}}throw yield QS("Create Installation",h)})).apply(this,arguments)}function JS(n){return new Promise(e=>{setTimeout(e,n)})}const m1=/^[cdef][\w-]{21}$/,Uc="";function ex(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function tx(n){return function p1(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return m1.test(t)?t:Uc}catch{return Uc}}function Bc(n){return`${n.appName}!${n.appId}`}const jc=new Map;function o0(n,e){const t=Bc(n);y1(t,e),function v1(n,e){const t=function nx(){return!$c&&"BroadcastChannel"in self&&($c=new BroadcastChannel("[Firebase] FID Change"),$c.onmessage=n=>{y1(n.data.key,n.data.fid)}),$c}();t&&t.postMessage({key:n,fid:e}),function rx(){0===jc.size&&$c&&($c.close(),$c=null)}()}(t,e)}function y1(n,e){const t=jc.get(n);if(t)for(const r of t)r(e)}let $c=null;const E1="firebase-installations-database",fm=1,Gc="firebase-installations-store";let pm=null;function ho(){return pm||(pm=function Ww(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,e),c=Vc(a);return r&&a.addEventListener("upgradeneeded",h=>{r(Vc(a.result),h.oldVersion,h.newVersion,Vc(a.transaction))}),t&&a.addEventListener("blocked",()=>t()),c.then(h=>{s&&h.addEventListener("close",()=>s()),i&&h.addEventListener("versionchange",()=>i())}).catch(()=>{}),c}(E1,fm,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Gc)}})),pm}function pv(n,e){return mm.apply(this,arguments)}function mm(){return(mm=(0,N.Z)(function*(n,e){const t=Bc(n),i=(yield ho()).transaction(Gc,"readwrite"),s=i.objectStore(Gc),a=yield s.get(t);return yield s.put(e,t),yield i.done,(!a||a.fid!==e.fid)&&o0(n,e.fid),e})).apply(this,arguments)}function Hc(n){return a0.apply(this,arguments)}function a0(){return(a0=(0,N.Z)(function*(n){const e=Bc(n),r=(yield ho()).transaction(Gc,"readwrite");yield r.objectStore(Gc).delete(e),yield r.done})).apply(this,arguments)}function gm(n,e){return l0.apply(this,arguments)}function l0(){return(l0=(0,N.Z)(function*(n,e){const t=Bc(n),i=(yield ho()).transaction(Gc,"readwrite"),s=i.objectStore(Gc),a=yield s.get(t),c=e(a);return void 0===c?yield s.delete(t):yield s.put(c,t),yield i.done,c&&(!a||a.fid!==c.fid)&&o0(n,c.fid),c})).apply(this,arguments)}function kh(n){return mv.apply(this,arguments)}function mv(){return mv=(0,N.Z)(function*(n){let e;const t=yield gm(n.appConfig,r=>{const i=function I1(n){return sx(n||{fid:ex(),registrationStatus:0})}(r),s=function T1(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(fu.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function u0(n,e){return c0.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:w1(n)}:{installationEntry:e}}(n,i);return e=s.registrationPromise,s.installationEntry});return t.fid===Uc?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}}),mv.apply(this,arguments)}function c0(){return c0=(0,N.Z)(function*(n,e){try{const t=yield function f1(n,e){return s0.apply(this,arguments)}(n,e);return pv(n.appConfig,t)}catch(t){throw Jw(t)&&409===t.customData.serverCode?yield Hc(n.appConfig):yield pv(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}),c0.apply(this,arguments)}function w1(n){return gv.apply(this,arguments)}function gv(){return(gv=(0,N.Z)(function*(n){let e=yield ix(n.appConfig);for(;1===e.registrationStatus;)yield JS(100),e=yield ix(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield kh(n);return r||t}return e})).apply(this,arguments)}function ix(n){return gm(n,e=>{if(!e)throw fu.create("installation-not-found");return sx(e)})}function sx(n){return function ox(n){return 1===n.registrationStatus&&n.registrationTime+Qw<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function d0(){return(d0=(0,N.Z)(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=function b1(n,{fid:e}){return`${e0(n)}/${e}/authTokens:generate`}(n,t),i=function XS(n,{refreshToken:e}){const t=YS(n);return t.append("Authorization",function h1(n){return`${Xw} ${n}`}(e)),t}(n,t),s=e.getImmediate({optional:!0});if(s){const g=yield s.getHeartbeatsHeader();g&&i.append("x-firebase-client",g)}const c={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:Yw,appId:n.appId}})},h=yield n0(()=>fetch(r,c));if(h.ok)return ZS(yield h.json());throw yield QS("Generate Auth Token",h)})).apply(this,arguments)}function yv(n){return vv.apply(this,arguments)}function vv(){return vv=(0,N.Z)(function*(n,e=!1){let t;const r=yield gm(n.appConfig,s=>{if(!ux(s))throw fu.create("not-registered");const a=s.authToken;if(!e&&function A1(n){return 2===n.requestStatus&&!function f0(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+l1}(n)}(a))return s;if(1===a.requestStatus)return t=function h0(n,e){return Ev.apply(this,arguments)}(n,e),s;{if(!navigator.onLine)throw fu.create("app-offline");const c=function p0(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}(s);return t=function lx(n,e){return Iv.apply(this,arguments)}(n,c),c}});return t?yield t:r.authToken}),vv.apply(this,arguments)}function Ev(){return(Ev=(0,N.Z)(function*(n,e){let t=yield ax(n.appConfig);for(;1===t.authToken.requestStatus;)yield JS(100),t=yield ax(n.appConfig);const r=t.authToken;return 0===r.requestStatus?yv(n,e):r})).apply(this,arguments)}function ax(n){return gm(n,e=>{if(!ux(e))throw fu.create("not-registered");return function cx(n){return 1===n.requestStatus&&n.requestTime+Qw<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function Iv(){return Iv=(0,N.Z)(function*(n,e){try{const t=yield function _v(n,e){return d0.apply(this,arguments)}(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield pv(n.appConfig,r),t}catch(t){if(!Jw(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield pv(n.appConfig,r)}else yield Hc(n.appConfig);throw t}}),Iv.apply(this,arguments)}function ux(n){return void 0!==n&&2===n.registrationStatus}function _m(){return(_m=(0,N.Z)(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield kh(e);return r?r.catch(console.error):yv(e).catch(console.error),t.fid})).apply(this,arguments)}function g0(){return g0=(0,N.Z)(function*(n,e=!1){const t=n;return yield function C1(n){return _0.apply(this,arguments)}(t),(yield yv(t,e)).token}),g0.apply(this,arguments)}function _0(){return(_0=(0,N.Z)(function*(n){const{registrationPromise:e}=yield kh(n);e&&(yield e)})).apply(this,arguments)}function wv(n){return fu.create("missing-app-config-values",{valueName:n})}const px="installations",x1=n=>{const e=n.getProvider("app").getImmediate(),t=function fx(n){if(!n||!n.options)throw wv("App Configuration");if(!n.name)throw wv("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw wv(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:uh(e,"heartbeat"),_delete:()=>Promise.resolve()}},$i=n=>{const t=uh(n.getProvider("app").getImmediate(),px).getImmediate();return{getId:()=>function m0(n){return _m.apply(this,arguments)}(t),getToken:i=>function D1(n){return g0.apply(this,arguments)}(t,i)}};(function Oh(){cs(new Lr.wA(px,x1,"PUBLIC")),cs(new Lr.wA("installations-internal",$i,"PRIVATE"))})(),Ur(hv,fv),Ur(hv,fv,"esm2017");const y0="@firebase/remote-config",gi=new Ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Tx{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-t,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var t=this;return(0,N.Z)(function*(){const[r,i]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(i&&t.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const s=yield t.client.fetch(e),a=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===s.status&&a.push(t.storage.setLastSuccessfulFetchResponse(s)),yield Promise.all(a),s})()}}function I0(n=navigator){return n.languages&&n.languages[0]||n.language}class TG{constructor(e,t,r,i,s,a){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=a}fetch(e){var t=this;return(0,N.Z)(function*(){const[r,i]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),a=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,c={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},h={sdk_version:t.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:t.appId,language_code:I0()},g={method:"POST",headers:c,body:JSON.stringify(h)},E=fetch(a,g),b=new Promise((ne,ce)=>{e.signal.addEventListener(()=>{const me=new Error("The operation was aborted.");me.name="AbortError",ce(me)})});let x;try{yield Promise.race([E,b]),x=yield E}catch(ne){let ce="fetch-client-network";throw"AbortError"===ne?.name&&(ce="fetch-timeout"),gi.create(ce,{originalErrorMessage:ne?.message})}let M=x.status;const O=x.headers.get("ETag")||void 0;let V,G;if(200===x.status){let ne;try{ne=yield x.json()}catch(ce){throw gi.create("fetch-client-parse",{originalErrorMessage:ce?.message})}V=ne.entries,G=ne.state}if("INSTANCE_STATE_UNSPECIFIED"===G?M=500:"NO_CHANGE"===G?M=304:("NO_TEMPLATE"===G||"EMPTY_CONFIG"===G)&&(V={}),304!==M&&200!==M)throw gi.create("fetch-status",{httpStatus:M});return{status:M,eTag:O,config:V}})()}}class L1{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return(0,N.Z)(function*(){const r=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:r}){var i=this;return(0,N.Z)(function*(){yield function F1(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(gi.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const s=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),s}catch(s){if(!function wG(n){if(!(n instanceof Ie.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(s))throw s;const a={throttleEndTimeMillis:Date.now()+(0,Ie.$s)(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(a),i.attemptFetch(e,a)}})()}}class wx{constructor(e,t,r,i,s){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function wm(n,e){const t=n.target.error||void 0;return gi.create(e,{originalErrorMessage:t&&t?.message})}const zc="app_namespace_store";class j1{constructor(e,t,r,i=function B1(){return new Promise((n,e)=>{try{const t=indexedDB.open("firebase_remote_config",1);t.onerror=r=>{e(wm(r,"storage-open"))},t.onsuccess=r=>{n(r.target.result)},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(zc,{keyPath:"compositeKey"})}}catch(t){e(gi.create("storage-open",{originalErrorMessage:t?.message}))}})}()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return(0,N.Z)(function*(){const r=yield t.openDbPromise;return new Promise((i,s)=>{const c=r.transaction([zc],"readonly").objectStore(zc),h=t.createCompositeKey(e);try{const g=c.get(h);g.onerror=E=>{s(wm(E,"storage-get"))},g.onsuccess=E=>{const b=E.target.result;i(b?b.value:void 0)}}catch(g){s(gi.create("storage-get",{originalErrorMessage:g?.message}))}})})()}set(e,t){var r=this;return(0,N.Z)(function*(){const i=yield r.openDbPromise;return new Promise((s,a)=>{const h=i.transaction([zc],"readwrite").objectStore(zc),g=r.createCompositeKey(e);try{const E=h.put({compositeKey:g,value:t});E.onerror=b=>{a(wm(b,"storage-set"))},E.onsuccess=()=>{s()}}catch(E){a(gi.create("storage-set",{originalErrorMessage:E?.message}))}})})()}delete(e){var t=this;return(0,N.Z)(function*(){const r=yield t.openDbPromise;return new Promise((i,s)=>{const c=r.transaction([zc],"readwrite").objectStore(zc),h=t.createCompositeKey(e);try{const g=c.delete(h);g.onerror=E=>{s(wm(E,"storage-delete"))},g.onsuccess=()=>{i()}}catch(g){s(gi.create("storage-delete",{originalErrorMessage:g?.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class Dx{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return(0,N.Z)(function*(){const t=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),s=yield t;s&&(e.lastFetchStatus=s);const a=yield r;a&&(e.lastSuccessfulFetchTimestampMillis=a);const c=yield i;c&&(e.activeConfig=c)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function Cx(){return Av.apply(this,arguments)}function Av(){return(Av=(0,N.Z)(function*(){if(!(0,Ie.hl)())return!1;try{return yield(0,Ie.eu)()}catch{return!1}})).apply(this,arguments)}!function $1(){cs(new Lr.wA("remote-config",function n(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw gi.create("registration-window");if(!(0,Ie.hl)())throw gi.create("indexed-db-unavailable");const{projectId:s,apiKey:a,appId:c}=r.options;if(!s)throw gi.create("registration-project-id");if(!a)throw gi.create("registration-api-key");if(!c)throw gi.create("registration-app-id");const h=new j1(c,r.name,t=t||"firebase"),g=new Dx(h),E=new Vr.Yd(y0);E.logLevel=Vr.in.ERROR;const b=new TG(i,au,t,s,a,c),x=new L1(b,h),M=new Tx(x,h,g,E),O=new wx(r,M,g,h,E);return function Ex(n){const e=(0,Ie.m9)(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(O),O},"PUBLIC").setMultipleInstances(!0)),Ur(y0,"0.4.4"),Ur(y0,"0.4.4","esm2017")}();const H1=(n,e)=>e.some(t=>n instanceof t);let Sx,z1;const q1=new WeakMap,Rx=new WeakMap,W1=new WeakMap,Mx=new WeakMap,Px=new WeakMap;let Nx={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return Rx.get(n);if("objectStoreNames"===e)return n.objectStoreNames||W1.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return sl(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function Ox(n){return"function"==typeof n?function T0(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function bG(){return z1||(z1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(Lh(this),e),sl(q1.get(this))}:function(...e){return sl(n.apply(Lh(this),e))}:function(e,...t){const r=n.call(Lh(this),e,...t);return W1.set(r,e.sort?e.sort():[e]),sl(r)}}(n):(n instanceof IDBTransaction&&function DG(n){if(Rx.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});Rx.set(n,e)}(n),H1(n,function xx(){return Sx||(Sx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,Nx):n)}function sl(n){if(n instanceof IDBRequest)return function AG(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(sl(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&q1.set(t,n)}).catch(()=>{}),Px.set(e,n),e}(n);if(Mx.has(n))return Mx.get(n);const e=Ox(n);return e!==n&&(Mx.set(n,e),Px.set(e,n)),e}const Lh=n=>Px.get(n);function Fx(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,e),c=sl(a);return r&&a.addEventListener("upgradeneeded",h=>{r(sl(a.result),h.oldVersion,h.newVersion,sl(a.transaction))}),t&&a.addEventListener("blocked",()=>t()),c.then(h=>{s&&h.addEventListener("close",()=>s()),i&&h.addEventListener("versionchange",()=>i())}).catch(()=>{}),c}function Lx(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",()=>e()),sl(t).then(()=>{})}const CG=["get","getKey","getAll","getAllKeys","count"],SG=["put","add","delete","clear"],Dv=new Map;function Vx(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(Dv.get(e))return Dv.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=SG.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!CG.includes(t))return;const s=function(){var a=(0,N.Z)(function*(c,...h){const g=this.transaction(c,i?"readwrite":"readonly");let E=g.store;return r&&(E=E.index(h.shift())),(yield Promise.all([E[t](...h),i&&g.done]))[0]});return function(h){return a.apply(this,arguments)}}();return Dv.set(e,s),s}!function kx(n){Nx=n(Nx)}(n=>({...n,get:(e,t,r)=>Vx(e,t)||n.get(e,t,r),has:(e,t)=>!!Vx(e,t)||n.has(e,t)}));const K1="/firebase-messaging-sw.js",Z1="/firebase-cloud-messaging-push-scope",Q1="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Y1="https://fcmregistrations.googleapis.com/v1",w0="google.c.a.c_id",Ux="google.c.a.c_l",xG="google.c.a.ts";var pu=(()=>((pu=pu||{}).PUSH_RECEIVED="push-received",pu.NOTIFICATION_CLICKED="notification-clicked",pu))();function mu(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Gi(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}const b0="fcm_token_details_db",A0=5,Bx="fcm_token_object_Store";function bm(){return bm=(0,N.Z)(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(b0))return null;let e=null;return(yield Fx(b0,A0,{upgrade:(r=(0,N.Z)(function*(i,s,a,c){var h;if(s<2||!i.objectStoreNames.contains(Bx))return;const g=c.objectStore(Bx),E=yield g.index("fcmSenderId").get(n);if(yield g.clear(),E)if(2===s){const b=E;if(!b.auth||!b.p256dh||!b.endpoint)return;e={token:b.fcmToken,createTime:null!==(h=b.createTime)&&void 0!==h?h:Date.now(),subscriptionOptions:{auth:b.auth,p256dh:b.p256dh,endpoint:b.endpoint,swScope:b.swScope,vapidKey:"string"==typeof b.vapidKey?b.vapidKey:mu(b.vapidKey)}}}else if(3===s){const b=E;e={token:b.fcmToken,createTime:b.createTime,subscriptionOptions:{auth:mu(b.auth),p256dh:mu(b.p256dh),endpoint:b.endpoint,swScope:b.swScope,vapidKey:mu(b.vapidKey)}}}else if(4===s){const b=E;e={token:b.fcmToken,createTime:b.createTime,subscriptionOptions:{auth:mu(b.auth),p256dh:mu(b.p256dh),endpoint:b.endpoint,swScope:b.swScope,vapidKey:mu(b.vapidKey)}}}}),function(s,a,c,h){return r.apply(this,arguments)})})).close(),yield Lx(b0),yield Lx("fcm_vapid_details_db"),yield Lx("undefined"),function jx(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}(e)?e:null;var r}),bm.apply(this,arguments)}const $x="firebase-messaging-database",eF=1,gu="firebase-messaging-store";let Cv=null;function Sv(){return Cv||(Cv=Fx($x,eF,{upgrade:(n,e)=>{0===e&&n.createObjectStore(gu)}})),Cv}function D0(n){return C0.apply(this,arguments)}function C0(){return C0=(0,N.Z)(function*(n){const e=Rv(n),r=yield(yield Sv()).transaction(gu).objectStore(gu).get(e);if(r)return r;{const i=yield function J1(n){return bm.apply(this,arguments)}(n.appConfig.senderId);if(i)return yield xv(n,i),i}}),C0.apply(this,arguments)}function xv(n,e){return S0.apply(this,arguments)}function S0(){return(S0=(0,N.Z)(function*(n,e){const t=Rv(n),i=(yield Sv()).transaction(gu,"readwrite");return yield i.objectStore(gu).put(e,t),yield i.done,e})).apply(this,arguments)}function ga(){return(ga=(0,N.Z)(function*(n){const e=Rv(n),r=(yield Sv()).transaction(gu,"readwrite");yield r.objectStore(gu).delete(e),yield r.done})).apply(this,arguments)}function Rv({appConfig:n}){return n.appId}const Br=new Ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function tF(n,e){return Gx.apply(this,arguments)}function Gx(){return(Gx=(0,N.Z)(function*(n,e){const t=yield Mv(n),r=k0(e),i={method:"POST",headers:t,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(N0(n.appConfig),i)).json()}catch(a){throw Br.create("token-subscribe-failed",{errorInfo:a?.toString()})}if(s.error)throw Br.create("token-subscribe-failed",{errorInfo:s.error.message});if(!s.token)throw Br.create("token-subscribe-no-token");return s.token})).apply(this,arguments)}function M0(){return(M0=(0,N.Z)(function*(n,e){const t=yield Mv(n),r=k0(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(`${N0(n.appConfig)}/${e.token}`,i)).json()}catch(a){throw Br.create("token-update-failed",{errorInfo:a?.toString()})}if(s.error)throw Br.create("token-update-failed",{errorInfo:s.error.message});if(!s.token)throw Br.create("token-update-no-token");return s.token})).apply(this,arguments)}function zx(n,e){return P0.apply(this,arguments)}function P0(){return(P0=(0,N.Z)(function*(n,e){const r={method:"DELETE",headers:yield Mv(n)};try{const s=yield(yield fetch(`${N0(n.appConfig)}/${e}`,r)).json();if(s.error)throw Br.create("token-unsubscribe-failed",{errorInfo:s.error.message})}catch(i){throw Br.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})).apply(this,arguments)}function N0({projectId:n}){return`${Y1}/projects/${n}/registrations`}function Mv(n){return qx.apply(this,arguments)}function qx(){return(qx=(0,N.Z)(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})})).apply(this,arguments)}function k0({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const i={web:{endpoint:t,auth:e,p256dh:n}};return r!==Q1&&(i.web.applicationPubKey=r),i}const nF=6048e5;function Kx(){return Kx=(0,N.Z)(function*(n){const e=yield function Vh(n,e){return Uh.apply(this,arguments)}(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:mu(e.getKey("auth")),p256dh:mu(e.getKey("p256dh"))},r=yield D0(n.firebaseDependencies);if(r){if(function Qx(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}(r.subscriptionOptions,t))return Date.now()>=r.createTime+nF?function Zx(n,e){return O0.apply(this,arguments)}(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield zx(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return F0(n.firebaseDependencies,t)}return F0(n.firebaseDependencies,t)}),Kx.apply(this,arguments)}function Nv(){return Nv=(0,N.Z)(function*(n){const e=yield D0(n.firebaseDependencies);e&&(yield zx(n.firebaseDependencies,e.token),yield function x0(n){return ga.apply(this,arguments)}(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()}),Nv.apply(this,arguments)}function O0(){return O0=(0,N.Z)(function*(n,e){try{const t=yield function Hx(n,e){return M0.apply(this,arguments)}(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield xv(n.firebaseDependencies,r),t}catch(t){throw yield function Pv(n){return Nv.apply(this,arguments)}(n),t}}),O0.apply(this,arguments)}function F0(n,e){return kv.apply(this,arguments)}function kv(){return(kv=(0,N.Z)(function*(n,e){const r={token:yield tF(n,e),createTime:Date.now(),subscriptionOptions:e};return yield xv(n,r),r.token})).apply(this,arguments)}function Uh(){return(Uh=(0,N.Z)(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Gi(e)})})).apply(this,arguments)}function L0(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function rF(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i);const s=e.notification.icon;s&&(n.notification.icon=s)}(e,n),function iF(n,e){e.data&&(n.data=e.data)}(e,n),function RG(n,e){var t,r,i,s,a;if(!(e.fcmOptions||null!==(t=e.notification)&&void 0!==t&&t.click_action))return;n.fcmOptions={};const c=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(s=e.notification)||void 0===s?void 0:s.click_action;c&&(n.fcmOptions.link=c);const h=null===(a=e.fcmOptions)||void 0===a?void 0:a.analytics_label;h&&(n.fcmOptions.analyticsLabel=h)}(e,n),e}function Xx(n,e){const t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function Jx(n){return Br.create("missing-app-config-values",{valueName:n})}Xx("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Xx("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class MG{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function sF(n){if(!n||!n.options)throw Jx("App Configuration Object");if(!n.name)throw Jx("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw Jx(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}function Ov(){return(Ov=(0,N.Z)(function*(n){try{n.swRegistration=yield navigator.serviceWorker.register(K1,{scope:Z1}),n.swRegistration.update().catch(()=>{})}catch(e){throw Br.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})).apply(this,arguments)}function V0(){return(V0=(0,N.Z)(function*(n,e){if(!e&&!n.swRegistration&&(yield function oF(n){return Ov.apply(this,arguments)}(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw Br.create("invalid-sw-registration");n.swRegistration=e}})).apply(this,arguments)}function eR(){return(eR=(0,N.Z)(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=Q1)})).apply(this,arguments)}function tR(){return tR=(0,N.Z)(function*(n,e){if(!navigator)throw Br.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Br.create("permission-blocked");return yield function lF(n,e){return eR.apply(this,arguments)}(n,e?.vapidKey),yield function aF(n,e){return V0.apply(this,arguments)}(n,e?.serviceWorkerRegistration),function Wx(n){return Kx.apply(this,arguments)}(n)}),tR.apply(this,arguments)}function nR(){return(nR=(0,N.Z)(function*(n,e,t){const r=function cF(n){switch(n){case pu.NOTIFICATION_CLICKED:return"notification_open";case pu.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[w0],message_name:t[Ux],message_time:t[xG],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function U0(){return U0=(0,N.Z)(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===pu.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(L0(t)):n.onMessageHandler.next(L0(t)));const r=t.data;(function Yx(n){return"object"==typeof n&&!!n&&w0 in n})(r)&&"1"===r["google.c.a.e"]&&(yield function PG(n,e,t){return nR.apply(this,arguments)}(n,t.messageType,r))}),U0.apply(this,arguments)}const rR="@firebase/messaging",qc=n=>{const e=new MG(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function Fv(n,e){return U0.apply(this,arguments)}(e,t)),e},iR=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>function uF(n,e){return tR.apply(this,arguments)}(e,r)}};function Lv(){return $0.apply(this,arguments)}function $0(){return($0=(0,N.Z)(function*(){try{yield(0,Ie.eu)()}catch{return!1}return typeof window<"u"&&(0,Ie.hl)()&&(0,Ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function j0(){cs(new Lr.wA("messaging",qc,"PUBLIC")),cs(new Lr.wA("messaging-internal",iR,"PRIVATE")),Ur(rR,"0.12.4"),Ur(rR,"0.12.4","esm2017")}();const Uv="analytics",hF="firebase_id",fF="origin",oR=6e4,aR="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Bv="https://www.googletagmanager.com/gtag/js",Xr=new Vr.Yd("@firebase/analytics"),_i=new Ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function H0(n){if(!n.startsWith(Bv)){const e=_i.create("invalid-gtag-resource",{gtagURL:n});return Xr.warn(e.message),""}return n}function mF(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function uR(){return(uR=(0,N.Z)(function*(n,e,t,r,i,s){const a=r[i];try{if(a)yield e[a];else{const h=(yield mF(t)).find(g=>g.measurementId===i);h&&(yield e[h.appId])}}catch(c){Xr.error(c)}n("config",i,s)})).apply(this,arguments)}function q0(){return(q0=(0,N.Z)(function*(n,e,t,r,i){try{let s=[];if(i&&i.send_to){let a=i.send_to;Array.isArray(a)||(a=[a]);const c=yield mF(t);for(const h of a){const g=c.find(b=>b.measurementId===h),E=g&&e[g.appId];if(!E){s=[];break}s.push(E)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),n("event",r,i||{})}catch(s){Xr.error(s)}})).apply(this,arguments)}const cR=30,hR=new class OG{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function W0(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function jv(){return(jv=(0,N.Z)(function*(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:W0(r)},s=aR.replace("{app-id}",t),a=yield fetch(s,i);if(200!==a.status&&304!==a.status){let c="";try{const h=yield a.json();null!==(e=h.error)&&void 0!==e&&e.message&&(c=h.error.message)}catch{}throw _i.create("config-fetch-failed",{httpStatus:a.status,responseMessage:c})}return a.json()})).apply(this,arguments)}function Dm(){return(Dm=(0,N.Z)(function*(n,e=hR,t){const{appId:r,apiKey:i,measurementId:s}=n.options;if(!r)throw _i.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw _i.create("no-api-key")}const a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new FG;return setTimeout((0,N.Z)(function*(){c.abort()}),void 0!==t?t:oR),pR({appId:r,apiKey:i,measurementId:s},a,c,e)})).apply(this,arguments)}function pR(n,e,t){return K0.apply(this,arguments)}function K0(){return K0=(0,N.Z)(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=hR){var s;const{appId:a,measurementId:c}=n;try{yield function mR(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(_i.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(r,e)}catch(h){if(c)return Xr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${h?.message}]`),{appId:a,measurementId:c};throw h}try{const h=yield function fR(n){return jv.apply(this,arguments)}(n);return i.deleteThrottleMetadata(a),h}catch(h){const g=h;if(!function gR(n){if(!(n instanceof Ie.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(g)){if(i.deleteThrottleMetadata(a),c)return Xr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${g?.message}]`),{appId:a,measurementId:c};throw h}const E=503===Number(null===(s=g?.customData)||void 0===s?void 0:s.httpStatus)?(0,Ie.$s)(t,i.intervalMillis,cR):(0,Ie.$s)(t,i.intervalMillis),b={throttleEndTimeMillis:Date.now()+E,backoffCount:t+1};return i.setThrottleMetadata(a,b),Xr.debug(`Calling attemptFetch again in ${E} millis`),pR(n,b,r,i)}}),K0.apply(this,arguments)}class FG{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let Z0,IR;function _R(){return(_R=(0,N.Z)(function*(n,e,t,r,i){if(i&&i.global)n("event",t,r);else{const s=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:s}))}})).apply(this,arguments)}function TR(){return(TR=(0,N.Z)(function*(){if(!(0,Ie.hl)())return Xr.warn(_i.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Ie.eu)()}catch(n){return Xr.warn(_i.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}return!0})).apply(this,arguments)}function wR(){return wR=(0,N.Z)(function*(n,e,t,r,i,s,a){var c;const h=function IF(n){return Dm.apply(this,arguments)}(n);h.then(M=>{t[M.measurementId]=M.appId,n.options.measurementId&&M.measurementId!==n.options.measurementId&&Xr.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${M.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(M=>Xr.error(M)),e.push(h);const g=function jG(){return TR.apply(this,arguments)}().then(M=>{if(M)return r.getId()}),[E,b]=yield Promise.all([h,g]);(function EF(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Bv)&&t.src.includes(n))return t;return null})(s)||function z0(n,e){const t=function lR(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}("firebase-js-sdk-policy",{createScriptURL:H0}),r=document.createElement("script"),i=`${Bv}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}(s,E.measurementId),IR&&(i("consent","default",IR),function wF(n){IR=n}(void 0)),i("js",new Date);const x=null!==(c=a?.config)&&void 0!==c?c:{};return x[fF]="firebase",x.update=!0,null!=b&&(x[hF]=b),i("config",E.measurementId,x),Z0&&(i("set",Z0),function bF(n){Z0=n}(void 0)),E.measurementId}),wR.apply(this,arguments)}class o{constructor(e){this.app=e}_delete(){return delete l[this.app.options.appId],Promise.resolve()}}let l={},u=[];const d={};let I,w,f="dataLayer",D=!1;function k(n,e,t){!function P(){const n=[];if((0,Ie.ru)()&&n.push("This is a browser extension environment."),(0,Ie.zI)()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=_i.create("invalid-analytics-context",{errorInfo:e});Xr.warn(t.message)}}();const r=n.options.appId;if(!r)throw _i.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw _i.create("no-api-key");Xr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=l[r])throw _i.create("already-exists",{id:r});if(!D){!function gF(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(f);const{wrappedGtag:s,gtagCore:a}=function vF(n,e,t,r,i){let s=function(...a){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=function yF(n,e,t,r){function s(){return s=(0,N.Z)(function*(a,...c){try{if("event"===a){const[h,g]=c;yield function kG(n,e,t,r,i){return q0.apply(this,arguments)}(n,e,t,h,g)}else if("config"===a){const[h,g]=c;yield function _F(n,e,t,r,i,s){return uR.apply(this,arguments)}(n,e,t,r,h,g)}else if("consent"===a){const[h]=c;n("consent","update",h)}else if("get"===a){const[h,g,E]=c;n("get",h,g,E)}else if("set"===a){const[h]=c;n("set",h)}else n(a,...c)}catch(h){Xr.error(h)}}),s.apply(this,arguments)}return function i(a){return s.apply(this,arguments)}}(s,n,e,t),{gtagCore:s,wrappedGtag:window[i]}}(l,u,d,f,"gtag");w=s,I=a,D=!0}return l[r]=function AF(n,e,t,r,i,s,a){return wR.apply(this,arguments)}(n,u,d,e,I,f,t),new o(n)}function ge(){return ke.apply(this,arguments)}function ke(){return(ke=(0,N.Z)(function*(){if((0,Ie.ru)()||!(0,Ie.zI)()||!(0,Ie.hl)())return!1;try{return yield(0,Ie.eu)()}catch{return!1}})).apply(this,arguments)}const bR="@firebase/analytics";!function Y7(){cs(new Lr.wA(Uv,(e,{options:t})=>k(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),cs(new Lr.wA("analytics-internal",function n(e){try{const t=e.getProvider(Uv).getImmediate();return{logEvent:(r,i,s)=>function Gv(n,e,t,r){n=(0,Ie.m9)(n),function $v(n,e,t,r,i){return _R.apply(this,arguments)}(w,l[n.app.options.appId],e,t,r).catch(i=>Xr.error(i))}(t,r,i,s)}}catch(t){throw _i.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),Ur(bR,"0.10.0"),Ur(bR,"0.10.0","esm2017")}();const e8=new class J7 extends jS{}(class X7 extends BS{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}});var AR=F(5137),X0=F(3093);const DF="__angularfire_symbol__analyticsIsSupportedValue",CF="__angularfire_symbol__analyticsIsSupported",SF="__angularfire_symbol__remoteConfigIsSupportedValue",xF="__angularfire_symbol__remoteConfigIsSupported",RF="__angularfire_symbol__messagingIsSupportedValue",MF="__angularfire_symbol__messagingIsSupported";function Hv(){}globalThis[CF]||(globalThis[CF]=ge().then(n=>globalThis[DF]=n).catch(()=>globalThis[DF]=!1)),globalThis[MF]||(globalThis[MF]=Lv().then(n=>globalThis[RF]=n).catch(()=>globalThis[RF]=!1)),globalThis[xF]||(globalThis[xF]=Cx().then(n=>globalThis[SF]=n).catch(()=>globalThis[SF]=!1));class HG{constructor(e,t=e8){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(a){i.runGuarded(()=>{e.apply(this,[a])})},t,r)}}class r8{constructor(e){this.zone=e,this.task=null}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Hv,{},Hv,Hv)),t.pipe(On({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let zG=(()=>{class n{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new HG(Zone.current)),this.insideAngular=t.run(()=>new HG(Zone.current,$w)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(y.R0b))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Cm(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function Fo(n){return Cm(),function s8(n){return function(t){return(t=t.lift(new r8(n.ngZone))).pipe((0,AR.R)(n.outsideAngular),(0,X0.Q)(n.insideAngular))}}(Cm())(n)}function NF(){return(0,si.e)((n,e)=>{let t,r=!1;n.subscribe((0,pi.x)(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var ot,a8=F(3997),ol=F(6304),l8=(F(1895),F(3399)),u8=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},al={},kF=kF||{},Kt=u8||self;function DR(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function J0(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var OF="closure_uid_"+(1e9*Math.random()>>>0),d8=0;function h8(n,e,t){return n.call.apply(n.bind,arguments)}function f8(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function ds(n,e,t){return(ds=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?h8:f8).apply(null,arguments)}function CR(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function yi(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,s){for(var a=Array(arguments.length-2),c=2;c<arguments.length;c++)a[c-2]=arguments[c];return e.prototype[i].apply(r,a)}}function Bh(){this.s=this.s,this.o=this.o}Bh.prototype.s=!1,Bh.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function c8(n){Object.prototype.hasOwnProperty.call(n,OF)&&n[OF]||(n[OF]=++d8)}(this)},Bh.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const qG=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function FF(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function WG(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(DR(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let a=0;a<s;a++)n[i+a]=r[a]}else n.push(r)}}function hs(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}hs.prototype.h=function(){this.defaultPrevented=!0};var m8=function(){if(!Kt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Kt.addEventListener("test",()=>{},e),Kt.removeEventListener("test",()=>{},e)}catch{}return n}();function eb(n){return/^[\s\xa0]*$/.test(n)}function SR(){var n=Kt.navigator;return n&&(n=n.userAgent)?n:""}function _u(n){return-1!=SR().indexOf(n)}function LF(n){return LF[" "](n),n}LF[" "]=function(){};var UF,n,_8=_u("Opera"),zv=_u("Trident")||_u("MSIE"),KG=_u("Edge"),VF=KG||zv,ZG=_u("Gecko")&&!(-1!=SR().toLowerCase().indexOf("webkit")&&!_u("Edge"))&&!(_u("Trident")||_u("MSIE"))&&!_u("Edge"),y8=-1!=SR().toLowerCase().indexOf("webkit")&&!_u("Edge");function QG(){var n=Kt.document;return n?n.documentMode:void 0}e:{var BF="",jF=(n=SR(),ZG?/rv:([^\);]+)(\)|;)/.exec(n):KG?/Edge\/([\d\.]+)/.exec(n):zv?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):y8?/WebKit\/(\S+)/.exec(n):_8?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(jF&&(BF=jF?jF[1]:""),zv){var $F=QG();if(null!=$F&&$F>parseFloat(BF)){UF=String($F);break e}}UF=BF}var v8=Kt.document&&zv&&(QG()||parseInt(UF,10))||void 0;function tb(n,e){if(hs.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(ZG){e:{try{LF(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:E8[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&tb.$.h.call(this)}}yi(tb,hs);var E8={2:"touch",3:"pen",4:"mouse"};tb.prototype.h=function(){tb.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var nb="closure_listenable_"+(1e6*Math.random()|0),I8=0;function T8(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++I8,this.fa=this.ia=!1}function xR(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function HF(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function XG(n){const e={};for(const t in n)e[t]=n[t];return e}const JG="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function eH(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<JG.length;s++)t=JG[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function RR(n){this.src=n,this.g={},this.h=0}function zF(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=qG(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(xR(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function qF(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==r)return i}return-1}RR.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var a=qF(n,e,r,i);return-1<a?(e=n[a],t||(e.ia=!1)):((e=new T8(e,this.src,s,!!r,i)).ia=t,n.push(e)),e};var WF="closure_lm_"+(1e6*Math.random()|0),KF={};function tH(n,e,t,r,i){if(r&&r.once)return rH(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)tH(n,e[s],t,r,i);return null}return t=XF(t),n&&n[nb]?n.O(e,t,J0(r)?!!r.capture:!!r,i):nH(n,e,t,!1,r,i)}function nH(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var a=J0(i)?!!i.capture:!!i,c=QF(n);if(c||(n[WF]=c=new RR(n)),(t=c.add(e,t,r,a,s)).proxy)return t;if(r=function b8(){const e=A8;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)m8||(i=a),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(sH(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function rH(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)rH(n,e[s],t,r,i);return null}return t=XF(t),n&&n[nb]?n.P(e,t,J0(r)?!!r.capture:!!r,i):nH(n,e,t,!0,r,i)}function iH(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)iH(n,e[s],t,r,i);else r=J0(r)?!!r.capture:!!r,t=XF(t),n&&n[nb]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=qF(s=n.g[e],t,r,i))&&(xR(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=QF(n))&&(e=n.g[e.toString()],n=-1,e&&(n=qF(e,t,r,i)),(t=-1<n?e[n]:null)&&ZF(t))}function ZF(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[nb])zF(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(sH(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=QF(e))?(zF(t,n),0==t.h&&(t.src=null,e[WF]=null)):xR(n)}}}function sH(n){return n in KF?KF[n]:KF[n]="on"+n}function A8(n,e){if(n.fa)n=!0;else{e=new tb(e,this);var t=n.listener,r=n.la||n.src;n.ia&&ZF(n),n=t.call(r,e)}return n}function QF(n){return(n=n[WF])instanceof RR?n:null}var YF="__closure_events_fn_"+(1e9*Math.random()>>>0);function XF(n){return"function"==typeof n?n:(n[YF]||(n[YF]=function(e){return n.handleEvent(e)}),n[YF])}function vi(){Bh.call(this),this.i=new RR(this),this.S=this,this.J=null}function zi(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new hs(e,n);else if(e instanceof hs)e.target=e.target||n;else{var i=e;eH(e=new hs(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var a=e.g=t[s];i=MR(a,r,!0,e)&&i}if(i=MR(a=e.g=n,r,!0,e)&&i,i=MR(a,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=MR(a=e.g=t[s],r,!1,e)&&i}function MR(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var a=e[s];if(a&&!a.fa&&a.capture==t){var c=a.listener,h=a.la||a.src;a.ia&&zF(n.i,a),i=!1!==c.call(h,r)&&i}}return i&&!r.defaultPrevented}yi(vi,Bh),vi.prototype[nb]=!0,vi.prototype.removeEventListener=function(n,e,t,r){iH(this,n,e,t,r)},vi.prototype.N=function(){if(vi.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)xR(t[r]);delete n.g[e],n.h--}}this.J=null},vi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},vi.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var JF=Kt.JSON.stringify;function C8(){var n=eL;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var oH=new class D8{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new x8,n=>n.reset());class x8{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function R8(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function M8(n){Kt.setTimeout(()=>{throw n},0)}let rb,ib=!1,eL=new class S8{constructor(){this.h=this.g=null}add(e,t){const r=oH.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},aH=()=>{const n=Kt.Promise.resolve(void 0);rb=()=>{n.then(P8)}};var P8=()=>{for(var n;n=C8();){try{n.h.call(n.g)}catch(t){M8(t)}var e=oH;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}ib=!1};function PR(n,e){vi.call(this),this.h=n||1,this.g=e||Kt,this.j=ds(this.qb,this),this.l=Date.now()}function tL(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function nL(n,e,t){if("function"==typeof n)t&&(n=ds(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ds(n.handleEvent,n)}return 2147483647<Number(e)?-1:Kt.setTimeout(n,e||0)}function lH(n){n.g=nL(()=>{n.g=null,n.i&&(n.i=!1,lH(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}yi(PR,vi),(ot=PR.prototype).ga=!1,ot.T=null,ot.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),zi(this,"tick"),this.ga&&(tL(this),this.start()))}},ot.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ot.N=function(){PR.$.N.call(this),tL(this),delete this.g};class N8 extends Bh{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:lH(this)}N(){super.N(),this.g&&(Kt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sb(n){Bh.call(this),this.h=n,this.g={}}yi(sb,Bh);var uH=[];function cH(n,e,t,r){Array.isArray(t)||(t&&(uH[0]=t.toString()),t=uH);for(var i=0;i<t.length;i++){var s=tH(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function dH(n){HF(n.g,function(e,t){this.g.hasOwnProperty(t)&&ZF(e)},n),n.g={}}function NR(){this.g=!0}function qv(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function L8(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var a=1;a<i.length;a++)i[a]=""}}}return JF(t)}catch{return e}}(n,t)+(r?" "+r:"")})}sb.prototype.N=function(){sb.$.N.call(this),dH(this)},sb.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},NR.prototype.Ea=function(){this.g=!1},NR.prototype.info=function(){};var xm={},hH=null;function kR(){return hH=hH||new vi}function fH(n){hs.call(this,xm.Ta,n)}function ob(n){const e=kR();zi(e,new fH(e))}function pH(n,e){hs.call(this,xm.STAT_EVENT,n),this.stat=e}function Os(n){const e=kR();zi(e,new pH(e,n))}function mH(n,e){hs.call(this,xm.Ua,n),this.size=e}function ab(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Kt.setTimeout(function(){n()},e)}xm.Ta="serverreachability",yi(fH,hs),xm.STAT_EVENT="statevent",yi(pH,hs),xm.Ua="timingevent",yi(mH,hs);var OR={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},gH={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function rL(){}function yH(){}rL.prototype.h=null;var oL,lb={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function iL(){hs.call(this,"d")}function sL(){hs.call(this,"c")}function FR(){}function ub(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new sb(this),this.P=V8,this.V=new PR(n=VF?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new vH}function vH(){this.i=null,this.g="",this.h=!1}yi(iL,hs),yi(sL,hs),yi(FR,rL),FR.prototype.g=function(){return new XMLHttpRequest},FR.prototype.i=function(){return{}},oL=new FR;var V8=45e3,aL={},LR={};function lL(n,e,t){n.L=1,n.v=jR(Wc(e)),n.s=t,n.S=!0,EH(n,null)}function EH(n,e){n.G=Date.now(),cb(n),n.A=Wc(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),RH(t.i,"t",r),n.C=0,t=n.l.J,n.h=new vH,n.g=ez(n.l,t?e:null,!n.s),0<n.O&&(n.M=new N8(ds(n.Pa,n,n.g),n.O)),cH(n.U,n.g,"readystatechange",n.nb),e=n.I?XG(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),ob(),function k8(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var a="",c=s.split("&"),h=0;h<c.length;h++){var g=c[h].split("=");if(1<g.length){var E=g[0];g=g[1];var b=E.split("_");a=2<=b.length&&"type"==b[1]?a+(E+"=")+g+"&":a+(E+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+a})}(n.j,n.u,n.A,n.m,n.W,n.s)}function IH(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function TH(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=U8(n,t),i==LR){4==e&&(n.o=4,Os(14),r=!1),qv(n.j,n.m,null,"[Incomplete Response]");break}if(i==aL){n.o=4,Os(15),qv(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}qv(n.j,n.m,i,null),uL(n,i)}IH(n)&&i!=LR&&i!=aL&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Os(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),gL(e),e.M=!0,Os(11))):(qv(n.j,n.m,t,"[Invalid Chunked Response]"),Rm(n),db(n))}function U8(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?LR:(t=Number(e.substring(t,r)),isNaN(t)?aL:(r+=1)+t>e.length?LR:(e=e.slice(r,r+t),n.C=r+t,e))}function cb(n){n.Y=Date.now()+n.P,wH(n,n.P)}function wH(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=ab(ds(n.lb,n),e)}function VR(n){n.B&&(Kt.clearTimeout(n.B),n.B=null)}function db(n){0==n.l.H||n.J||QH(n.l,n)}function Rm(n){VR(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,tL(n.V),dH(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function uL(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||cL(t.i,n)))if(!n.K&&cL(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;WR(t),zR(t)}mL(t),Os(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=ab(ds(t.ib,t),6e3));if(1>=NH(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Pm(t,11)}else if((n.K||t.g==n)&&WR(t),!eb(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let g=i[e];if(t.V=g[0],g=g[1],2==t.H)if("c"==g[0]){t.K=g[1],t.pa=g[2];const E=g[3];null!=E&&(t.ra=E,t.l.info("VER="+t.ra));const b=g[4];null!=b&&(t.Ga=b,t.l.info("SVER="+t.Ga));const x=g[5];null!=x&&"number"==typeof x&&0<x&&(t.L=r=1.5*x,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const M=n.g;if(M){const O=M.g?M.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(O){var s=r.i;s.g||-1==O.indexOf("spdy")&&-1==O.indexOf("quic")&&-1==O.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(dL(s,s.h),s.h=null))}if(r.F){const V=M.g?M.g.getResponseHeader("X-HTTP-Session-Id"):null;V&&(r.Da=V,Wn(r.I,r.F,V))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var a=n;if((r=t).wa=JH(r,r.J?r.pa:null,r.Y),a.K){kH(r.i,a);var c=a,h=r.L;h&&c.setTimeout(h),c.B&&(VR(c),cb(c)),r.g=a}else KH(r);0<t.j.length&&qR(t)}else"stop"!=g[0]&&"close"!=g[0]||Pm(t,7);else 3==t.H&&("stop"==g[0]||"close"==g[0]?"stop"==g[0]?Pm(t,7):pL(t):"noop"!=g[0]&&t.h&&t.h.Aa(g),t.A=0)}ob()}catch{}}function bH(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(DR(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function j8(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(DR(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function B8(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(DR(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(ot=ub.prototype).setTimeout=function(n){this.P=n},ot.nb=function(n){n=n.target;const e=this.M;e&&3==yu(n)?e.l():this.Pa(n)},ot.Pa=function(n){try{if(n==this.g)e:{const E=yu(this.g);var e=this.g.Ia();if(this.g.da(),!(3>E)&&(3!=E||VF||this.g&&(this.h.h||this.g.ja()||$H(this.g)))){this.J||4!=E||7==e||ob(),VR(this);var t=this.g.da();this.ca=t;t:if(IH(this)){var r=$H(this.g);n="";var i=r.length,s=4==yu(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Rm(this),db(this);var a="";break t}this.h.i=new Kt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,a=this.h.g}else a=this.g.ja();if(this.i=200==t,function O8(n,e,t,r,i,s,a){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+a})}(this.j,this.u,this.A,this.m,this.W,E,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var c,h=this.g;if((c=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!eb(c)){var g=c;break t}}g=null}if(!(t=g)){this.i=!1,this.o=3,Os(12),Rm(this),db(this);break e}qv(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,uL(this,t)}this.S?(TH(this,E,a),VF&&this.i&&3==E&&(cH(this.U,this.V,"tick",this.mb),this.V.start())):(qv(this.j,this.m,a,null),uL(this,a)),4==E&&Rm(this),this.i&&!this.J&&(4==E?QH(this.l,this):(this.i=!1,cb(this)))}else(function sZ(n){const e={};n=(n.g&&2<=yu(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(eb(n[r]))continue;var t=R8(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const s=e[i]||[];e[i]=s,s.push(t)}!function w8(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<a.indexOf("Unknown SID")?(this.o=3,Os(12)):(this.o=0,Os(13)),Rm(this),db(this)}}}catch{}},ot.mb=function(){if(this.g){var n=yu(this.g),e=this.g.ja();this.C<e.length&&(VR(this),TH(this,n,e),this.i&&4!=n&&cb(this))}},ot.cancel=function(){this.J=!0,Rm(this)},ot.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function F8(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(ob(),Os(17)),Rm(this),this.o=2,db(this)):wH(this,this.Y-n)};var AH=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Mm(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Mm){this.h=n.h,UR(this,n.j),this.s=n.s,this.g=n.g,BR(this,n.m),this.l=n.l;var e=n.i,t=new pb;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),DH(this,t),this.o=n.o}else n&&(e=String(n).match(AH))?(this.h=!1,UR(this,e[1]||"",!0),this.s=hb(e[2]||""),this.g=hb(e[3]||"",!0),BR(this,e[4]),this.l=hb(e[5]||"",!0),DH(this,e[6]||"",!0),this.o=hb(e[7]||"")):(this.h=!1,this.i=new pb(null,this.h))}function Wc(n){return new Mm(n)}function UR(n,e,t){n.j=t?hb(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function BR(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function DH(n,e,t){e instanceof pb?(n.i=e,function K8(n,e){e&&!n.j&&(jh(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(SH(this,r),RH(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=fb(e,q8)),n.i=new pb(e,n.h))}function Wn(n,e,t){n.i.set(e,t)}function jR(n){return Wn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function hb(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function fb(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,G8),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function G8(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Mm.prototype.toString=function(){var n=[],e=this.j;e&&n.push(fb(e,CH,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(fb(e,CH,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(fb(t,"/"==t.charAt(0)?z8:H8,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",fb(t,W8)),n.join("")};var CH=/[#\/\?@]/g,H8=/[#\?:]/g,z8=/[#\?]/g,q8=/[#\?@]/g,W8=/#/g;function pb(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function jh(n){n.g||(n.g=new Map,n.h=0,n.i&&function $8(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function SH(n,e){jh(n),e=Wv(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function xH(n,e){return jh(n),e=Wv(n,e),n.g.has(e)}function RH(n,e,t){SH(n,e),0<t.length&&(n.i=null,n.g.set(Wv(n,e),FF(t)),n.h+=t.length)}function Wv(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function MH(n){this.l=n||Q8,n=Kt.PerformanceNavigationTiming?0<(n=Kt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Kt.g&&Kt.g.Ka&&Kt.g.Ka()&&Kt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ot=pb.prototype).add=function(n,e){jh(this),this.i=null,n=Wv(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ot.forEach=function(n,e){jh(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},ot.ta=function(){jh(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},ot.Z=function(n){jh(this);let e=[];if("string"==typeof n)xH(this,n)&&(e=e.concat(this.g.get(Wv(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ot.set=function(n,e){return jh(this),this.i=null,xH(this,n=Wv(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ot.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},ot.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var i=s;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),n.push(i)}}return this.i=n.join("&")};var Q8=10;function PH(n){return!!n.h||!!n.g&&n.g.size>=n.j}function NH(n){return n.h?1:n.g?n.g.size:0}function cL(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function dL(n,e){n.g?n.g.add(e):n.h=e}function kH(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function OH(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return FF(n.i)}MH.prototype.cancel=function(){if(this.i=OH(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var Y8=class{stringify(n){return Kt.JSON.stringify(n,void 0)}parse(n){return Kt.JSON.parse(n,void 0)}};function X8(){this.g=new Y8}function J8(n,e,t){const r=t||"";try{bH(n,function(i,s){let a=i;J0(i)&&(a=JF(i)),e.push(r+s+"="+encodeURIComponent(a))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function $R(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function mb(n){this.l=n.fc||null,this.j=n.ob||!1}function GR(n,e){vi.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=hL,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}yi(mb,rL),mb.prototype.g=function(){return new GR(this.l,this.j)},mb.prototype.i=function(n){return function(){return n}}({}),yi(GR,vi);var hL=0;function FH(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function gb(n){n.readyState=4,n.l=null,n.j=null,n.A=null,_b(n)}function _b(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ot=GR.prototype).open=function(n,e){if(this.readyState!=hL)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,_b(this)},ot.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Kt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},ot.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,gb(this)),this.readyState=hL},ot.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,_b(this)),this.g&&(this.readyState=3,_b(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Kt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;FH(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},ot.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?gb(this):_b(this),3==this.readyState&&FH(this)}},ot.Za=function(n){this.g&&(this.response=this.responseText=n,gb(this))},ot.Ya=function(n){this.g&&(this.response=n,gb(this))},ot.ka=function(){this.g&&gb(this)},ot.setRequestHeader=function(n,e){this.v.append(n,e)},ot.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ot.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(GR.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var tZ=Kt.JSON.parse;function Cr(n){vi.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=LH,this.L=this.M=!1}yi(Cr,vi);var LH="",nZ=/^https?$/i,rZ=["POST","PUT"];function VH(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,UH(n),HR(n)}function UH(n){n.F||(n.F=!0,zi(n,"complete"),zi(n,"error"))}function BH(n){if(n.h&&typeof kF<"u"&&(!n.C[1]||4!=yu(n)||2!=n.da()))if(n.v&&4==yu(n))nL(n.La,0,n);else if(zi(n,"readystatechange"),4==yu(n)){n.h=!1;try{const a=n.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===a){var i=String(n.I).match(AH)[1]||null;!i&&Kt.self&&Kt.self.location&&(i=Kt.self.location.protocol.slice(0,-1)),r=!nZ.test(i?i.toLowerCase():"")}t=r}if(t)zi(n,"complete"),zi(n,"success");else{n.m=6;try{var s=2<yu(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",UH(n)}}finally{HR(n)}}}function HR(n,e){if(n.g){jH(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||zi(n,"ready");try{t.onreadystatechange=r}catch{}}}function jH(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Kt.clearTimeout(n.A),n.A=null)}function yu(n){return n.g?n.g.readyState:0}function $H(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case LH:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function GH(n){let e="";return HF(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function fL(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=GH(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Wn(n,e,t))}function yb(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function HH(n){this.Ga=0,this.j=[],this.l=new NR,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=yb("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=yb("baseRetryDelayMs",5e3,n),this.hb=yb("retryDelaySeedMs",1e4,n),this.eb=yb("forwardChannelMaxRetries",2,n),this.xa=yb("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new MH(n&&n.concurrentRequestLimit),this.Ja=new X8,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function pL(n){if(zH(n),3==n.H){var e=n.W++,t=Wc(n.I);if(Wn(t,"SID",n.K),Wn(t,"RID",e),Wn(t,"TYPE","terminate"),vb(n,t),(e=new ub(n,n.l,e)).L=2,e.v=jR(Wc(t)),t=!1,Kt.navigator&&Kt.navigator.sendBeacon)try{t=Kt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Kt.Image&&((new Image).src=e.v,t=!0),t||(e.g=ez(e.l,null),e.g.ha(e.v)),e.G=Date.now(),cb(e)}XH(n)}function zR(n){n.g&&(gL(n),n.g.cancel(),n.g=null)}function zH(n){zR(n),n.u&&(Kt.clearTimeout(n.u),n.u=null),WR(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Kt.clearTimeout(n.m),n.m=null)}function qR(n){if(!PH(n.i)&&!n.m){n.m=!0;var e=n.Na;rb||aH(),ib||(rb(),ib=!0),eL.add(e,n),n.C=0}}function qH(n,e){var t;t=e?e.m:n.W++;const r=Wc(n.I);Wn(r,"SID",n.K),Wn(r,"RID",t),Wn(r,"AID",n.V),vb(n,r),n.o&&n.s&&fL(r,n.o,n.s),t=new ub(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=WH(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),dL(n.i,t),lL(t,r,e)}function vb(n,e){n.na&&HF(n.na,function(t,r){Wn(e,r,t)}),n.h&&bH({},function(t,r){Wn(e,r,t)})}function WH(n,e,t){t=Math.min(n.j.length,t);var r=n.h?ds(n.h.Va,n.h,n):null;e:{var i=n.j;let s=-1;for(;;){const a=["count="+t];-1==s?0<t?(s=i[0].g,a.push("ofs="+s)):s=0:a.push("ofs="+s);let c=!0;for(let h=0;h<t;h++){let g=i[h].g;const E=i[h].map;if(g-=s,0>g)s=Math.max(0,i[h].g-100),c=!1;else try{J8(E,a,"req"+g+"_")}catch{r&&r(E)}}if(c){r=a.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function KH(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;rb||aH(),ib||(rb(),ib=!0),eL.add(e,n),n.A=0}}function mL(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=ab(ds(n.Ma,n),YH(n,n.A)),n.A++,0))}function gL(n){null!=n.B&&(Kt.clearTimeout(n.B),n.B=null)}function ZH(n){n.g=new ub(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Wc(n.wa);Wn(e,"RID","rpc"),Wn(e,"SID",n.K),Wn(e,"AID",n.V),Wn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Wn(e,"TO",n.qa),Wn(e,"TYPE","xmlhttp"),vb(n,e),n.o&&n.s&&fL(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=jR(Wc(e)),t.s=null,t.S=!0,EH(t,n)}function WR(n){null!=n.v&&(Kt.clearTimeout(n.v),n.v=null)}function QH(n,e){var t=null;if(n.g==e){WR(n),gL(n),n.g=null;var r=2}else{if(!cL(n.i,e))return;t=e.F,kH(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;zi(r=kR(),new mH(r,t)),qR(n)}else KH(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function oZ(n,e){return!(NH(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=ab(ds(n.Na,n,e),YH(n,n.C)),n.C++,0)))}(n,e)||2==r&&mL(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Pm(n,5);break;case 4:Pm(n,10);break;case 3:Pm(n,6);break;default:Pm(n,2)}}function YH(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Pm(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=ds(n.pb,n);t||(t=new Mm("//www.google.com/images/cleardot.gif"),Kt.location&&"http"==Kt.location.protocol||UR(t,"https"),jR(t)),function eZ(n,e){const t=new NR;if(Kt.Image){const r=new Image;r.onload=CR($R,t,r,"TestLoadImage: loaded",!0,e),r.onerror=CR($R,t,r,"TestLoadImage: error",!1,e),r.onabort=CR($R,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=CR($R,t,r,"TestLoadImage: timeout",!1,e),Kt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Os(2);n.H=0,n.h&&n.h.za(e),XH(n),zH(n)}function XH(n){if(n.H=0,n.ma=[],n.h){const e=OH(n.i);(0!=e.length||0!=n.j.length)&&(WG(n.ma,e),WG(n.ma,n.j),n.i.i.length=0,FF(n.j),n.j.length=0),n.h.ya()}}function JH(n,e,t){var r=t instanceof Mm?Wc(t):new Mm(t);if(""!=r.g)e&&(r.g=e+"."+r.g),BR(r,r.m);else{var i=Kt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Mm(null);r&&UR(s,r),e&&(s.g=e),i&&BR(s,i),t&&(s.l=t),r=s}return e=n.Da,(t=n.F)&&e&&Wn(r,t,e),Wn(r,"VER",n.ra),vb(n,r),r}function ez(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Cr(t&&n.Ha&&!n.va?new mb({ob:!0}):n.va)).Oa(n.J),e}function tz(){}function KR(){if(zv&&!(10<=Number(v8)))throw Error("Environmental error: no available transport.")}function Lo(n,e){vi.call(this),this.g=new HH(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!eb(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!eb(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Kv(this)}function nz(n){iL.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function rz(){sL.call(this),this.status=1}function Kv(n){this.g=n}function ll(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function _L(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var s=n.g[3],a=(e=n.g[0])+(s^(t=n.g[1])&((i=n.g[2])^s))+r[0]+3614090360&4294967295;a=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=t+(a<<7&4294967295|a>>>25))+((a=s+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=i+(t^s&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=t+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=e+(s^t&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=i+(t^s&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=t+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=e+(s^t&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=i+(t^s&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=t+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=e+(s^t&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=i+(t^s&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=t+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=e+(i^s&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=s+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=i+(e^t&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=t+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=e+(i^s&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=s+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=i+(e^t&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=t+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=e+(i^s&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=s+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=i+(e^t&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=t+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=e+(i^s&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=s+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=i+(e^t&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=t+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=e+(t^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=s+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=t+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=e+(t^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=s+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=t+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=e+(t^i^s)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=s+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=t+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=e+(t^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=s+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^e^t)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=t+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=e+(i^(t|~s))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=s+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=i+(e^(s|~t))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=t+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=e+(i^(t|~s))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=s+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=i+(e^(s|~t))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=t+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=e+(i^(t|~s))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=s+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=i+(e^(s|~t))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=t+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((s=(e=t+((a=e+(i^(t|~s))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=s+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((i=s+((a=i+(e^(s|~t))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+s&4294967295}function Dn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var s=0|n[i];r&&s==e||(t[i]=s,r=!1)}this.g=t}(ot=Cr.prototype).Oa=function(n){this.M=n},ot.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():oL.g(),this.C=function _H(n){return n.h||(n.h=n.i())}(this.u?this.u:oL),this.g.onreadystatechange=ds(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){return void VH(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=Kt.FormData&&n instanceof Kt.FormData,!(0<=qG(rZ,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of t)this.g.setRequestHeader(s,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{jH(this),0<this.B&&((this.L=function iZ(n){return zv&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ds(this.ua,this)):this.A=nL(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){VH(this,s)}},ot.ua=function(){typeof kF<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,zi(this,"timeout"),this.abort(8))},ot.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,zi(this,"complete"),zi(this,"abort"),HR(this))},ot.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),HR(this,!0)),Cr.$.N.call(this)},ot.La=function(){this.s||(this.G||this.v||this.l?BH(this):this.kb())},ot.kb=function(){BH(this)},ot.isActive=function(){return!!this.g},ot.da=function(){try{return 2<yu(this)?this.g.status:-1}catch{return-1}},ot.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},ot.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),tZ(e)}},ot.Ia=function(){return this.m},ot.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ot=HH.prototype).ra=8,ot.H=1,ot.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new ub(this,this.l,n);let s=this.s;if(this.U&&(s?(s=XG(s),eH(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=WH(this,i,e),Wn(t=Wc(this.I),"RID",n),Wn(t,"CVER",22),this.F&&Wn(t,"X-HTTP-Session-Id",this.F),vb(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(GH(s)))+"&"+e:this.o&&fL(t,this.o,s)),dL(this.i,i),this.bb&&Wn(t,"TYPE","init"),this.P?(Wn(t,"$req",e),Wn(t,"SID","null"),i.aa=!0,lL(i,t,null)):lL(i,t,e),this.H=2}}else 3==this.H&&(n?qH(this,n):0==this.j.length||PH(this.i)||qH(this))},ot.Ma=function(){if(this.u=null,ZH(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=ab(ds(this.jb,this),n)}},ot.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Os(10),zR(this),ZH(this))},ot.ib=function(){null!=this.v&&(this.v=null,zR(this),mL(this),Os(19))},ot.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Os(2)):(this.l.info("Failed to ping google.com"),Os(1))},ot.isActive=function(){return!!this.h&&this.h.isActive(this)},(ot=tz.prototype).Ba=function(){},ot.Aa=function(){},ot.za=function(){},ot.ya=function(){},ot.isActive=function(){return!0},ot.Va=function(){},KR.prototype.g=function(n,e){return new Lo(n,e)},yi(Lo,vi),Lo.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Os(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=JH(n,null,n.Y),qR(n)},Lo.prototype.close=function(){pL(this.g)},Lo.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=JF(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&qR(e)},Lo.prototype.N=function(){this.g.h=null,delete this.j,pL(this.g),delete this.g,Lo.$.N.call(this)},yi(nz,iL),yi(rz,sL),yi(Kv,tz),Kv.prototype.Ba=function(){zi(this.g,"a")},Kv.prototype.Aa=function(n){zi(this.g,new nz(n))},Kv.prototype.za=function(n){zi(this.g,new rz)},Kv.prototype.ya=function(){zi(this.g,"b")},yi(ll,function aZ(){this.blockSize=-1}),ll.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ll.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=t;)_L(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<e;)if(r[i++]=n.charCodeAt(s++),i==this.blockSize){_L(this,r),i=0;break}}else for(;s<e;)if(r[i++]=n[s++],i==this.blockSize){_L(this,r),i=0;break}}this.h=i,this.i+=e},ll.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var lZ={};function yL(n){return-128<=n&&128>n?function g8(n,e){var t=lZ;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Dn([0|e],0>e?-1:0)}):new Dn([0|n],0>n?-1:0)}function vu(n){if(isNaN(n)||!isFinite(n))return Zv;if(0>n)return qi(vu(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=vL;return new Dn(e,0)}var vL=4294967296,Zv=yL(0),EL=yL(1),sz=yL(16777216);function Kc(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function _a(n){return-1==n.h}function qi(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Dn(t,~n.h).add(EL)}function ZR(n,e){return n.add(qi(e))}function QR(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Eb(n,e){this.g=n,this.h=e}function YR(n,e){if(Kc(e))throw Error("division by zero");if(Kc(n))return new Eb(Zv,Zv);if(_a(n))return e=YR(qi(n),e),new Eb(qi(e.g),qi(e.h));if(_a(e))return e=YR(n,qi(e)),new Eb(qi(e.g),e.h);if(30<n.g.length){if(_a(n)||_a(e))throw Error("slowDivide_ only works with positive integers.");for(var t=EL,r=e;0>=r.X(n);)t=oz(t),r=oz(r);var i=Qv(t,1),s=Qv(r,1);for(r=Qv(r,2),t=Qv(t,2);!Kc(r);){var a=s.add(r);0>=a.X(n)&&(i=i.add(t),s=a),r=Qv(r,1),t=Qv(t,1)}return e=ZR(n,i.R(e)),new Eb(i,e)}for(i=Zv;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),a=(s=vu(t)).R(e);_a(a)||0<a.X(n);)a=(s=vu(t-=r)).R(e);Kc(s)&&(s=EL),i=i.add(s),n=ZR(n,a)}return new Eb(i,n)}function oz(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Dn(t,n.h)}function Qv(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],s=0;s<r;s++)i[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new Dn(i,n.h)}(ot=Dn.prototype).ea=function(){if(_a(this))return-qi(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:vL+r)*e,e*=vL}return n},ot.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Kc(this))return"0";if(_a(this))return"-"+qi(this).toString(n);for(var e=vu(Math.pow(n,6)),t=this,r="";;){var i=YR(t,e).g,s=((0<(t=ZR(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Kc(t=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},ot.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},ot.X=function(n){return _a(n=ZR(this,n))?-1:Kc(n)?0:1},ot.abs=function(){return _a(this)?qi(this):this},ot.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&n.D(i)),a=(s>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=a>>>16,t[i]=(a&=65535)<<16|(s&=65535)}return new Dn(t,-2147483648&t[t.length-1]?-1:0)},ot.R=function(n){if(Kc(this)||Kc(n))return Zv;if(_a(this))return _a(n)?qi(this).R(qi(n)):qi(qi(this).R(n));if(_a(n))return qi(this.R(qi(n)));if(0>this.X(sz)&&0>n.X(sz))return vu(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var s=this.D(r)>>>16,a=65535&this.D(r),c=n.D(i)>>>16,h=65535&n.D(i);t[2*r+2*i]+=a*h,QR(t,2*r+2*i),t[2*r+2*i+1]+=s*h,QR(t,2*r+2*i+1),t[2*r+2*i+1]+=a*c,QR(t,2*r+2*i+1),t[2*r+2*i+2]+=s*c,QR(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Dn(t,0)},ot.gb=function(n){return YR(this,n).h},ot.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Dn(t,this.h&n.h)},ot.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Dn(t,this.h|n.h)},ot.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Dn(t,this.h^n.h)},KR.prototype.createWebChannel=KR.prototype.g,Lo.prototype.send=Lo.prototype.u,Lo.prototype.open=Lo.prototype.m,Lo.prototype.close=Lo.prototype.close,OR.NO_ERROR=0,OR.TIMEOUT=8,OR.HTTP_ERROR=6,gH.COMPLETE="complete",yH.EventType=lb,lb.OPEN="a",lb.CLOSE="b",lb.ERROR="c",lb.MESSAGE="d",vi.prototype.listen=vi.prototype.O,Cr.prototype.listenOnce=Cr.prototype.P,Cr.prototype.getLastError=Cr.prototype.Sa,Cr.prototype.getLastErrorCode=Cr.prototype.Ia,Cr.prototype.getStatus=Cr.prototype.da,Cr.prototype.getResponseJson=Cr.prototype.Wa,Cr.prototype.getResponseText=Cr.prototype.ja,Cr.prototype.send=Cr.prototype.ha,Cr.prototype.setWithCredentials=Cr.prototype.Oa,ll.prototype.digest=ll.prototype.l,ll.prototype.reset=ll.prototype.reset,ll.prototype.update=ll.prototype.j,Dn.prototype.add=Dn.prototype.add,Dn.prototype.multiply=Dn.prototype.R,Dn.prototype.modulo=Dn.prototype.gb,Dn.prototype.compare=Dn.prototype.X,Dn.prototype.toNumber=Dn.prototype.ea,Dn.prototype.toString=Dn.prototype.toString,Dn.prototype.getBits=Dn.prototype.D,Dn.fromNumber=vu,Dn.fromString=function iz(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return qi(iz(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=vu(Math.pow(e,8)),r=Zv,i=0;i<n.length;i+=8){var s=Math.min(8,n.length-i),a=parseInt(n.substring(i,i+s),e);8>s?(s=vu(Math.pow(e,s)),r=r.R(s).add(vu(a))):r=(r=r.R(t)).add(vu(a))}return r};var uZ=al.createWebChannelTransport=function(){return new KR},cZ=al.getStatEventTarget=function(){return kR()},IL=al.ErrorCode=OR,dZ=al.EventType=gH,hZ=al.Event=xm,az=al.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},fZ=al.FetchXmlHttpFactory=mb,XR=al.WebChannel=yH,pZ=al.XhrIo=Cr,mZ=al.Md5=ll,Nm=al.Integer=Dn;const lz="@firebase/firestore";class Ei{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ei.UNAUTHENTICATED=new Ei(null),Ei.GOOGLE_CREDENTIALS=new Ei("google-credentials-uid"),Ei.FIRST_PARTY=new Ei("first-party-uid"),Ei.MOCK_USER=new Ei("mock-user");let Yv="9.23.0";const $h=new Vr.Yd("@firebase/firestore");function TL(){return $h.logLevel}function Ve(n,...e){if($h.logLevel<=Vr.in.DEBUG){const t=e.map(wL);$h.debug(`Firestore (${Yv}): ${n}`,...t)}}function jr(n,...e){if($h.logLevel<=Vr.in.ERROR){const t=e.map(wL);$h.error(`Firestore (${Yv}): ${n}`,...t)}}function ya(n,...e){if($h.logLevel<=Vr.in.WARN){const t=e.map(wL);$h.warn(`Firestore (${Yv}): ${n}`,...t)}}function wL(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function dt(n="Unexpected state"){const e=`FIRESTORE (${Yv}) INTERNAL ASSERTION FAILED: `+n;throw jr(e),new Error(e)}function Et(n,e){n||dt()}function rt(n,e){return n}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends Ie.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class li{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class uz{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yZ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ei.UNAUTHENTICATED))}shutdown(){}}class vZ{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class EZ{constructor(e){this.t=e,this.currentUser=Ei.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let a=new li;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new li,e.enqueueRetryable(()=>s(this.currentUser))};const c=()=>{const g=a;e.enqueueRetryable((0,N.Z)(function*(){yield g.promise,yield s(r.currentUser)}))},h=g=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.auth.addAuthTokenListener(this.o),c()};this.t.onInit(g=>h(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?h(g):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new li)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Et("string"==typeof r.accessToken),new uz(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Et(null===e||"string"==typeof e),new Ei(e)}}class IZ{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Ei.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class TZ{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new IZ(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ei.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class cz{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wZ{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=s=>{null!=s.error&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.T;return this.T=s.token,Ve("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?i(s):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Et("string"==typeof t.token),this.T=t.token,new cz(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function bZ(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class dz{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=bZ(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function zt(n,e){return n<e?-1:n>e?1:0}function Xv(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function hz(n){return n+"\0"}class cr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ae(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ae(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ae(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return cr.fromMillis(Date.now())}static fromDate(e){return cr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new cr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?zt(this.nanoseconds,e.nanoseconds):zt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class wt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new wt(e)}static min(){return new wt(new cr(0,0))}static max(){return new wt(new cr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ib{constructor(e,t,r){void 0===t?t=0:t>e.length&&dt(),void 0===r?r=e.length-t:r>e.length-t&&dt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Ib.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ib?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),a=t.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class mn extends Ib{construct(e,t,r){return new mn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ae(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new mn(t)}static emptyPath(){return new mn([])}}const AZ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Sr extends Ib{construct(e,t,r){return new Sr(e,t,r)}static isValidIdentifier(e){return AZ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Sr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Sr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Ae(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;i<e.length;){const c=e[i];if("\\"===c){if(i+1===e.length)throw new Ae(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if("\\"!==h&&"."!==h&&"`"!==h)throw new Ae(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else"`"===c?(a=!a,i++):"."!==c||a?(r+=c,i++):(s(),i++)}if(s(),a)throw new Ae(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Sr(t)}static emptyPath(){return new Sr([])}}class et{constructor(e){this.path=e}static fromPath(e){return new et(mn.fromString(e))}static fromName(e){return new et(mn.fromString(e).popFirst(5))}static empty(){return new et(mn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===mn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return mn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new et(new mn(e.slice()))}}class JR{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function bL(n){return n.fields.find(e=>2===e.kind)}function km(n){return n.fields.filter(e=>2!==e.kind)}JR.UNKNOWN_ID=-1;class eM{constructor(e,t){this.fieldPath=e,this.kind=t}}class Tb{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Tb(0,Vo.min())}}function fz(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=wt.fromTimestamp(1e9===r?new cr(t+1,0):new cr(t,r));return new Vo(i,et.empty(),e)}function pz(n){return new Vo(n.readTime,n.key,-1)}class Vo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Vo(wt.min(),et.empty(),-1)}static max(){return new Vo(wt.max(),et.empty(),-1)}}function AL(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=et.comparator(n.documentKey,e.documentKey),0!==t?t:zt(n.largestBatchId,e.largestBatchId))}const mz="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gz{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Gh(n){return DL.apply(this,arguments)}function DL(){return DL=(0,N.Z)(function*(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==mz)throw n;Ve("LocalStore","Unexpectedly lost primary lease")}),DL.apply(this,arguments)}class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&dt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ee((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ee?t:ee.resolve(t)}catch(t){return ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.reject(t)}static resolve(e){return new ee((t,r)=>{t(e)})}static reject(e){return new ee((t,r)=>{r(e)})}static waitFor(e){return new ee((t,r)=>{let i=0,s=0,a=!1;e.forEach(c=>{++i,c.next(()=>{++s,a&&s===i&&t()},h=>r(h))}),a=!0,s===i&&t()})}static or(e){let t=ee.resolve(!1);for(const r of e)t=t.next(i=>i?ee.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new ee((r,i)=>{const s=e.length,a=new Array(s);let c=0;for(let h=0;h<s;h++){const g=h;t(e[g]).next(E=>{a[g]=E,++c,c===s&&r(a)},E=>i(E))}})}static doWhile(e,t){return new ee((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class tM{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new li,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new wb(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=CL(r.target.error);this.v.reject(new wb(e,i))}}static open(e,t,r,i){try{return new tM(t,e.transaction(i,r))}catch(s){throw new wb(t,s)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Ve("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new xZ(t)}}class ul{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===ul.S((0,Ie.z$)())&&jr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ve("SimpleDb","Removing database:",e),Om(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Ie.hl)())return!1;if(ul.C())return!0;const e=(0,Ie.z$)(),t=ul.S(e),r=0<t&&t<10,i=ul.N(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,N.Z)(function*(){return t.db||(Ve("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=a=>{r(a.target.result)},s.onblocked=()=>{i(new wb(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=a=>{const c=a.target.error;i("VersionError"===c.name?new Ae(ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===c.name?new Ae(ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c):new wb(e,c))},s.onupgradeneeded=a=>{Ve("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',a.oldVersion),t.V.O(a.target.result,s.transaction,a.oldVersion,t.version).next(()=>{Ve("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,N.Z)(function*(){const a="readonly"===t;let c=0;for(;;){++c;try{s.db=yield s.$(e);const h=tM.open(s.db,e,a?"readonly":"readwrite",r),g=i(h).next(E=>(h.P(),E)).catch(E=>(h.abort(E),ee.reject(E))).toPromise();return g.catch(()=>{}),yield h.R,g}catch(h){const g=h,E="FirebaseError"!==g.name&&c<3;if(Ve("SimpleDb","Transaction failed with error:",g.message,"Retrying:",E),s.close(),!E)return Promise.reject(g)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class SZ{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Om(this.L.delete())}}class wb extends Ae{constructor(e,t){super(ae.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Hh(n){return"IndexedDbTransactionError"===n.name}class xZ{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ve("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ve("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Om(r)}add(e){return Ve("SimpleDb","ADD",this.store.name,e,e),Om(this.store.add(e))}get(e){return Om(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ve("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ve("SimpleDb","DELETE",this.store.name,e),Om(this.store.delete(e))}count(){return Ve("SimpleDb","COUNT",this.store.name),Om(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.W(i,(a,c)=>{s.push(c)}).next(()=>s)}{const i=this.store.getAll(r.range);return new ee((s,a)=>{i.onerror=c=>{a(c.target.error)},i.onsuccess=c=>{s(c.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ee((i,s)=>{r.onerror=a=>{s(a.target.error)},r.onsuccess=a=>{i(a.target.result)}})}J(e,t){Ve("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(s,a,c)=>c.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new ee((r,i)=>{t.onerror=s=>{const a=CL(s.target.error);i(a)},t.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next(c=>{c?a.continue():r()}):r()}})}W(e,t){const r=[];return new ee((i,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const c=a.target.result;if(!c)return void i();const h=new SZ(c),g=t(c.primaryKey,c.value,h);if(g instanceof ee){const E=g.catch(b=>(h.done(),ee.reject(b)));r.push(E)}h.isDone?i():null===h.K?c.continue():c.continue(h.K)}}).next(()=>ee.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Om(n){return new ee((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=CL(r.target.error);t(i)}})}let _z=!1;function CL(n){const e=ul.S((0,Ie.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ae("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return _z||(_z=!0,setTimeout(()=>{throw r},0)),r}}return n}class RZ{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Ve("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,N.Z)(function*(){t.task=null;try{Ve("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Hh(r)?Ve("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Gh(r)}yield t.et(6e4)}))}}class MZ{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,N.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,s=!0;return ee.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(null!==a&&!r.has(a))return Ve("IndexBackiller",`Processing collection: ${a}`),this.it(e,a,i).next(c=>{i-=c,r.add(a)});s=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this.rt(i,s)).next(c=>(Ve("IndexBackiller",`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,t,c))).next(()=>a.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,s)=>{const a=pz(s);AL(a,r)>0&&(r=a)}),new Vo(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Uo=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function bb(n){return null==n}function Ab(n){return 0===n&&1/n==-1/0}function yz(n){return"number"==typeof n&&Number.isInteger(n)&&!Ab(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function fs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=vz(e)),e=PZ(n.get(t),e);return vz(e)}function PZ(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function vz(n){return n+"\x01\x01"}function Eu(n){const e=n.length;if(Et(e>=2),2===e)return Et("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),mn.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const a=n.indexOf("\x01",s);switch((a<0||a>t)&&dt(),n.charAt(a+1)){case"\x01":const c=n.substring(s,a);let h;0===i.length?h=c:(i+=c,h=i,i=""),r.push(h);break;case"\x10":i+=n.substring(s,a),i+="\0";break;case"\x11":i+=n.substring(s,a+1);break;default:dt()}s=a+2}return new mn(r)}const Ez=["userId","batchId"];function nM(n,e){return[n,fs(e)]}function Iz(n,e,t){return[n,fs(e),t]}const NZ={},kZ=["prefixPath","collectionGroup","readTime","documentId"],OZ=["prefixPath","collectionGroup","documentId"],FZ=["collectionGroup","readTime","prefixPath","documentId"],LZ=["canonicalId","targetId"],VZ=["targetId","path"],UZ=["path","targetId"],BZ=["collectionId","parent"],jZ=["indexId","uid"],$Z=["uid","sequenceNumber"],GZ=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],HZ=["indexId","uid","orderedDocumentKey"],zZ=["userId","collectionPath","documentId"],qZ=["userId","collectionPath","largestBatchId"],WZ=["userId","collectionGroup","largestBatchId"],Tz=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],KZ=[...Tz,"documentOverlays"],wz=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],bz=wz,ZZ=[...bz,"indexConfiguration","indexState","indexEntries"];class SL extends gz{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Ii(n,e){const t=rt(n);return ul.M(t.ht,e)}function Az(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function zh(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Dz(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class jn{constructor(e,t){this.comparator=e,this.root=t||Wi.EMPTY}insert(e,t){return new jn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Wi.BLACK,null,null))}remove(e){return new jn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rM(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rM(this.root,e,this.comparator,!1)}getReverseIterator(){return new rM(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rM(this.root,e,this.comparator,!0)}}class rM{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wi{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Wi.RED,this.left=i??Wi.EMPTY,this.right=s??Wi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Wi(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Wi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Wi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw dt();const e=this.left.check();if(e!==this.right.check())throw dt();return e+(this.isRed()?0:1)}}Wi.EMPTY=null,Wi.RED=!0,Wi.BLACK=!1,Wi.EMPTY=new class{constructor(){this.size=0}get key(){throw dt()}get value(){throw dt()}get color(){throw dt()}get left(){throw dt()}get right(){throw dt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Wi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Kn{constructor(e){this.comparator=e,this.data=new jn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Cz(this.data.getIterator())}getIteratorFrom(e){return new Cz(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Kn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Kn(this.comparator);return t.data=e,t}}class Cz{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Jv(n){return n.hasNext()?n.getNext():void 0}class fo{constructor(e){this.fields=e,e.sort(Sr.comparator)}static empty(){return new fo([])}unionWith(e){let t=new Kn(Sr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new fo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Xv(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Sz extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ui{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Sz("Invalid base64 string: "+i):i}}(e);return new ui(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new ui(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return zt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ui.EMPTY_BYTE_STRING=new ui("");const YZ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qh(n){if(Et(!!n),"string"==typeof n){let e=0;const t=YZ.exec(n);if(Et(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xr(n.seconds),nanos:xr(n.nanos)}}function xr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Zc(n){return"string"==typeof n?ui.fromBase64String(n):ui.fromUint8Array(n)}function iM(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function sM(n){const e=n.mapValue.fields.__previous_value__;return iM(e)?sM(e):e}function Db(n){const e=qh(n.mapValue.fields.__local_write_time__.timestampValue);return new cr(e.seconds,e.nanos)}class XZ{constructor(e,t,r,i,s,a,c,h,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=g}}class Wh{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Wh("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Wh&&e.projectId===this.projectId&&e.database===this.database}}const Kh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},oM={nullValue:"NULL_VALUE"};function Zh(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?iM(n)?4:Pz(n)?9007199254740991:10:dt()}function Iu(n,e){if(n===e)return!0;const t=Zh(n);if(t!==Zh(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Db(n).isEqual(Db(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=qh(r.timestampValue),a=qh(i.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Zc(n.bytesValue).isEqual(Zc(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return xr(r.geoPointValue.latitude)===xr(i.geoPointValue.latitude)&&xr(r.geoPointValue.longitude)===xr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return xr(r.integerValue)===xr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=xr(r.doubleValue),a=xr(i.doubleValue);return s===a?Ab(s)===Ab(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Xv(n.arrayValue.values||[],e.arrayValue.values||[],Iu);case 10:return function(r,i){const s=r.mapValue.fields||{},a=i.mapValue.fields||{};if(Az(s)!==Az(a))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(void 0===a[c]||!Iu(s[c],a[c])))return!1;return!0}(n,e);default:return dt()}var i}function Cb(n,e){return void 0!==(n.values||[]).find(t=>Iu(t,e))}function Qh(n,e){if(n===e)return 0;const t=Zh(n),r=Zh(e);if(t!==r)return zt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return zt(n.booleanValue,e.booleanValue);case 2:return function(i,s){const a=xr(i.integerValue||i.doubleValue),c=xr(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return xz(n.timestampValue,e.timestampValue);case 4:return xz(Db(n),Db(e));case 5:return zt(n.stringValue,e.stringValue);case 6:return function(i,s){const a=Zc(i),c=Zc(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const a=i.split("/"),c=s.split("/");for(let h=0;h<a.length&&h<c.length;h++){const g=zt(a[h],c[h]);if(0!==g)return g}return zt(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const a=zt(xr(i.latitude),xr(s.latitude));return 0!==a?a:zt(xr(i.longitude),xr(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const a=i.values||[],c=s.values||[];for(let h=0;h<a.length&&h<c.length;++h){const g=Qh(a[h],c[h]);if(g)return g}return zt(a.length,c.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Kh.mapValue&&s===Kh.mapValue)return 0;if(i===Kh.mapValue)return 1;if(s===Kh.mapValue)return-1;const a=i.fields||{},c=Object.keys(a),h=s.fields||{},g=Object.keys(h);c.sort(),g.sort();for(let E=0;E<c.length&&E<g.length;++E){const b=zt(c[E],g[E]);if(0!==b)return b;const x=Qh(a[c[E]],h[g[E]]);if(0!==x)return x}return zt(c.length,g.length)}(n.mapValue,e.mapValue);default:throw dt()}}function xz(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return zt(n,e);const t=qh(n),r=qh(e),i=zt(t.seconds,r.seconds);return 0!==i?i:zt(t.nanos,r.nanos)}function eE(n){return xL(n)}function xL(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=qh(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Zc(n.bytesValue).toBase64():"referenceValue"in n?et.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const a of r.values||[])s?s=!1:i+=",",i+=xL(a);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",a=!0;for(const c of i)a?a=!1:s+=",",s+=`${c}:${xL(r.fields[c])}`;return s+"}"}(n.mapValue):dt();var e}function Fm(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function RL(n){return!!n&&"integerValue"in n}function Sb(n){return!!n&&"arrayValue"in n}function Rz(n){return!!n&&"nullValue"in n}function Mz(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function lM(n){return!!n&&"mapValue"in n}function xb(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return zh(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=xb(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=xb(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Pz(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function JZ(n){return"nullValue"in n?oM:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Fm(Wh.empty(),et.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:dt()}function eQ(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Fm(Wh.empty(),et.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Kh:dt()}function Nz(n,e){const t=Qh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function kz(n,e){const t=Qh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ki{constructor(e){this.value=e}static empty(){return new Ki({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!lM(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=xb(t)}setAll(e){let t=Sr.emptyPath(),r={},i=[];e.forEach((a,c)=>{if(!t.isImmediateParentOf(c)){const h=this.getFieldsMap(t);this.applyChanges(h,r,i),r={},i=[],t=c.popLast()}a?r[c.lastSegment()]=xb(a):i.push(c.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());lM(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Iu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];lM(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){zh(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Ki(xb(this.value))}}function Oz(n){const e=[];return zh(n.fields,(t,r)=>{const i=new Sr([t]);if(lM(r)){const s=Oz(r.mapValue).fields;if(0===s.length)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new fo(e)}class Zn{constructor(e,t,r,i,s,a,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=c}static newInvalidDocument(e){return new Zn(e,0,wt.min(),wt.min(),wt.min(),Ki.empty(),0)}static newFoundDocument(e,t,r,i){return new Zn(e,1,t,wt.min(),r,i,0)}static newNoDocument(e,t){return new Zn(e,2,t,wt.min(),wt.min(),Ki.empty(),0)}static newUnknownDocument(e,t){return new Zn(e,3,t,wt.min(),wt.min(),Ki.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(wt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ki.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ki.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=wt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Zn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Yh{constructor(e,t){this.position=e,this.inclusive=t}}function Fz(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],a=n.position[i];if(r=s.field.isKeyField()?et.comparator(et.fromName(a.referenceValue),t.key):Qh(a,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Lz(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Iu(n.position[t],e.position[t]))return!1;return!0}class tE{constructor(e,t="asc"){this.field=e,this.dir=t}}function tQ(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Vz{}class dn extends Vz{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new nQ(e,t,r):"array-contains"===t?new sQ(e,r):"in"===t?new Hz(e,r):"not-in"===t?new oQ(e,r):"array-contains-any"===t?new aQ(e,r):new dn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new rQ(e,r):new iQ(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Qh(t,this.value)):null!==t&&Zh(this.value)===Zh(t)&&this.matchesComparison(Qh(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return dt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Cn extends Vz{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Cn(e,t)}matches(e){return nE(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function nE(n){return"and"===n.op}function ML(n){return"or"===n.op}function PL(n){return Uz(n)&&nE(n)}function Uz(n){for(const e of n.filters)if(e instanceof Cn)return!1;return!0}function NL(n){if(n instanceof dn)return n.field.canonicalString()+n.op.toString()+eE(n.value);if(PL(n))return n.filters.map(e=>NL(e)).join(",");{const e=n.filters.map(t=>NL(t)).join(",");return`${n.op}(${e})`}}function Bz(n,e){return n instanceof dn?(t=n,(r=e)instanceof dn&&t.op===r.op&&t.field.isEqual(r.field)&&Iu(t.value,r.value)):n instanceof Cn?function(t,r){return r instanceof Cn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,s,a)=>i&&Bz(s,r.filters[a]),!0)}(n,e):void dt();var t,r}function jz(n,e){const t=n.filters.concat(e);return Cn.create(t,n.op)}function $z(n){return n instanceof dn?`${(e=n).field.canonicalString()} ${e.op} ${eE(e.value)}`:n instanceof Cn?function(e){return e.op.toString()+" {"+e.getFilters().map($z).join(" ,")+"}"}(n):"Filter";var e}class nQ extends dn{constructor(e,t,r){super(e,t,r),this.key=et.fromName(r.referenceValue)}matches(e){const t=et.comparator(e.key,this.key);return this.matchesComparison(t)}}class rQ extends dn{constructor(e,t){super(e,"in",t),this.keys=Gz(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class iQ extends dn{constructor(e,t){super(e,"not-in",t),this.keys=Gz(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Gz(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>et.fromName(r.referenceValue))}class sQ extends dn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Sb(t)&&Cb(t.arrayValue,this.value)}}class Hz extends dn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Cb(this.value.arrayValue,t)}}class oQ extends dn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Cb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Cb(this.value.arrayValue,t)}}class aQ extends dn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Sb(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Cb(this.value.arrayValue,r))}}class lQ{constructor(e,t=null,r=[],i=[],s=null,a=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=c,this.dt=null}}function kL(n,e=null,t=[],r=[],i=null,s=null,a=null){return new lQ(n,e,t,r,i,s,a)}function Lm(n){const e=rt(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>NL(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),bb(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>eE(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>eE(r)).join(",")),e.dt=t}return e.dt}function Rb(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!tQ(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Bz(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Lz(n.startAt,e.startAt)&&Lz(n.endAt,e.endAt)}function uM(n){return et.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function cM(n,e){return n.filters.filter(t=>t instanceof dn&&t.field.isEqual(e))}function zz(n,e,t){let r=oM,i=!0;for(const s of cM(n,e)){let a=oM,c=!0;switch(s.op){case"<":case"<=":a=JZ(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,c=!1;break;case"!=":case"not-in":a=oM}Nz({value:r,inclusive:i},{value:a,inclusive:c})<0&&(r=a,i=c)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];Nz({value:r,inclusive:i},{value:a,inclusive:t.inclusive})<0&&(r=a,i=t.inclusive);break}return{value:r,inclusive:i}}function qz(n,e,t){let r=Kh,i=!0;for(const s of cM(n,e)){let a=Kh,c=!0;switch(s.op){case">=":case">":a=eQ(s.value),c=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,c=!1;break;case"!=":case"not-in":a=Kh}kz({value:r,inclusive:i},{value:a,inclusive:c})>0&&(r=a,i=c)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];kz({value:r,inclusive:i},{value:a,inclusive:t.inclusive})>0&&(r=a,i=t.inclusive);break}return{value:r,inclusive:i}}class Qc{constructor(e,t=null,r=[],i=[],s=null,a="F",c=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=c,this.endAt=h,this.wt=null,this._t=null}}function Wz(n,e,t,r,i,s,a,c){return new Qc(n,e,t,r,i,s,a,c)}function rE(n){return new Qc(n)}function Kz(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function OL(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function dM(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function FL(n){return null!==n.collectionGroup}function Vm(n){const e=rt(n);if(null===e.wt){e.wt=[];const t=dM(e),r=OL(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new tE(t)),e.wt.push(new tE(Sr.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new tE(Sr.keyField(),s))}}}return e.wt}function Fs(n){const e=rt(n);if(!e._t)if("F"===e.limitType)e._t=kL(e.path,e.collectionGroup,Vm(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of Vm(e))t.push(new tE(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new Yh(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Yh(e.startAt.position,e.startAt.inclusive):null;e._t=kL(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function LL(n,e){e.getFirstInequalityField(),dM(n);const t=n.filters.concat([e]);return new Qc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function hM(n,e,t){return new Qc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Mb(n,e){return Rb(Fs(n),Fs(e))&&n.limitType===e.limitType}function Zz(n){return`${Lm(Fs(n))}|lt:${n.limitType}`}function VL(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>$z(r)).join(", ")}]`),bb(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>eE(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>eE(r)).join(",")),`Target(${t})`}(Fs(n))}; limitType=${n.limitType})`}function Pb(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):et.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Vm(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,a){const c=Fz(i,s,a);return i.inclusive?c<=0:c<0}(t.startAt,Vm(t),r)||t.endAt&&!function(i,s,a){const c=Fz(i,s,a);return i.inclusive?c>=0:c>0}(t.endAt,Vm(t),r)));var t,r}function Qz(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Yz(n){return(e,t)=>{let r=!1;for(const i of Vm(n)){const s=uQ(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function uQ(n,e,t){const r=n.field.isKeyField()?et.comparator(e.key,t.key):function(i,s,a){const c=s.data.field(i),h=a.data.field(i);return null!==c&&null!==h?Qh(c,h):dt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return dt()}}class Yc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){zh(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Dz(this.inner)}size(){return this.innerSize}}const cQ=new jn(et.comparator);function po(){return cQ}const Xz=new jn(et.comparator);function Nb(...n){let e=Xz;for(const t of n)e=e.insert(t.key,t);return e}function Jz(n){let e=Xz;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Tu(){return kb()}function eq(){return kb()}function kb(){return new Yc(n=>n.toString(),(n,e)=>n.isEqual(e))}const dQ=new jn(et.comparator),hQ=new Kn(et.comparator);function Jt(...n){let e=hQ;for(const t of n)e=e.add(t);return e}const fQ=new Kn(zt);function UL(){return fQ}function tq(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ab(e)?"-0":e}}function nq(n){return{integerValue:""+n}}function rq(n,e){return yz(e)?nq(e):tq(n,e)}class fM{constructor(){this._=void 0}}function pQ(n,e,t){return n instanceof iE?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&iM(i)&&(i=sM(i)),i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof Um?sq(n,e):n instanceof Bm?oq(n,e):function(r,i){const s=iq(r,i),a=aq(s)+aq(r.gt);return RL(s)&&RL(r.gt)?nq(a):tq(r.serializer,a)}(n,e)}function mQ(n,e,t){return n instanceof Um?sq(n,e):n instanceof Bm?oq(n,e):t}function iq(n,e){return n instanceof sE?RL(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class iE extends fM{}class Um extends fM{constructor(e){super(),this.elements=e}}function sq(n,e){const t=lq(e);for(const r of n.elements)t.some(i=>Iu(i,r))||t.push(r);return{arrayValue:{values:t}}}class Bm extends fM{constructor(e){super(),this.elements=e}}function oq(n,e){let t=lq(e);for(const r of n.elements)t=t.filter(i=>!Iu(i,r));return{arrayValue:{values:t}}}class sE extends fM{constructor(e,t){super(),this.serializer=e,this.gt=t}}function aq(n){return xr(n.integerValue||n.doubleValue)}function lq(n){return Sb(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Ob{constructor(e,t){this.field=e,this.transform=t}}class _Q{constructor(e,t){this.version=e,this.transformResults=t}}class dr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new dr}static exists(e){return new dr(void 0,e)}static updateTime(e){return new dr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pM(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class mM{}function uq(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new aE(n.key,dr.none()):new oE(n.key,n.data,dr.none());{const t=n.data,r=Ki.empty();let i=new Kn(Sr.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);null===a&&s.length>1&&(s=s.popLast(),a=t.field(s)),null===a?r.delete(s):r.set(s,a),i=i.add(s)}return new Xc(n.key,r,new fo(i.toArray()),dr.none())}}function yQ(n,e,t){n instanceof oE?function(r,i,s){const a=r.value.clone(),c=hq(r.fieldTransforms,i,s.transformResults);a.setAll(c),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Xc?function(r,i,s){if(!pM(r.precondition,i))return void i.convertToUnknownDocument(s.version);const a=hq(r.fieldTransforms,i,s.transformResults),c=i.data;c.setAll(dq(r)),c.setAll(a),i.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Fb(n,e,t,r){return n instanceof oE?function(i,s,a,c){if(!pM(i.precondition,s))return a;const h=i.value.clone(),g=fq(i.fieldTransforms,c,s);return h.setAll(g),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),null}(n,e,t,r):n instanceof Xc?function(i,s,a,c){if(!pM(i.precondition,s))return a;const h=fq(i.fieldTransforms,c,s),g=s.data;return g.setAll(dq(i)),g.setAll(h),s.convertToFoundDocument(s.version,g).setHasLocalMutations(),null===a?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(E=>E.field))}(n,e,t,r):(a=t,pM(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a);var s,a}function vQ(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=iq(r.transform,i||null);null!=s&&(null===t&&(t=Ki.empty()),t.set(r.field,s))}return t||null}function cq(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Xv(t,r,(i,s)=>function gQ(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Um&&r instanceof Um||t instanceof Bm&&r instanceof Bm?Xv(t.elements,r.elements,Iu):t instanceof sE&&r instanceof sE?Iu(t.gt,r.gt):t instanceof iE&&r instanceof iE);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class oE extends mM{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Xc extends mM{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function dq(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function hq(n,e,t){const r=new Map;Et(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],a=s.transform,c=e.data.field(s.field);r.set(s.field,mQ(a,c,t[i]))}return r}function fq(n,e,t){const r=new Map;for(const i of n){const s=i.transform,a=t.data.field(i.field);r.set(i.field,pQ(s,a,e))}return r}class aE extends mM{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class BL extends mM{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class jL{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&yQ(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Fb(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Fb(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=eq();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let c=this.applyToLocalView(a,s.mutatedFields);c=t.has(i.key)?null:c;const h=uq(a,c);null!==h&&r.set(i.key,h),a.isValidDocument()||a.convertToNoDocument(wt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Jt())}isEqual(e){return this.batchId===e.batchId&&Xv(this.mutations,e.mutations,(t,r)=>cq(t,r))&&Xv(this.baseMutations,e.baseMutations,(t,r)=>cq(t,r))}}class $L{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Et(e.mutations.length===r.length);let i=dQ;const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new $L(e,t,r,i)}}class GL{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class IQ{constructor(e,t){this.count=e,this.unchangedNames=t}}var Jr,gn;function pq(n){switch(n){default:return dt();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}function mq(n){if(void 0===n)return jr("GRPC error has no .code"),ae.UNKNOWN;switch(n){case Jr.OK:return ae.OK;case Jr.CANCELLED:return ae.CANCELLED;case Jr.UNKNOWN:return ae.UNKNOWN;case Jr.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case Jr.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case Jr.INTERNAL:return ae.INTERNAL;case Jr.UNAVAILABLE:return ae.UNAVAILABLE;case Jr.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case Jr.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case Jr.NOT_FOUND:return ae.NOT_FOUND;case Jr.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case Jr.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case Jr.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case Jr.ABORTED:return ae.ABORTED;case Jr.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case Jr.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case Jr.DATA_LOSS:return ae.DATA_LOSS;default:return dt()}}(gn=Jr||(Jr={}))[gn.OK=0]="OK",gn[gn.CANCELLED=1]="CANCELLED",gn[gn.UNKNOWN=2]="UNKNOWN",gn[gn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gn[gn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gn[gn.NOT_FOUND=5]="NOT_FOUND",gn[gn.ALREADY_EXISTS=6]="ALREADY_EXISTS",gn[gn.PERMISSION_DENIED=7]="PERMISSION_DENIED",gn[gn.UNAUTHENTICATED=16]="UNAUTHENTICATED",gn[gn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gn[gn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gn[gn.ABORTED=10]="ABORTED",gn[gn.OUT_OF_RANGE=11]="OUT_OF_RANGE",gn[gn.UNIMPLEMENTED=12]="UNIMPLEMENTED",gn[gn.INTERNAL=13]="INTERNAL",gn[gn.UNAVAILABLE=14]="UNAVAILABLE",gn[gn.DATA_LOSS=15]="DATA_LOSS";class HL{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return gM}static getOrCreateInstance(){return null===gM&&(gM=new HL),gM}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let gM=null;function gq(){return new TextEncoder}const TQ=new Nm([4294967295,4294967295],0);function _q(n){const e=gq().encode(n),t=new mZ;return t.update(e),new Uint8Array(t.digest())}function yq(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Nm([t,r],0),new Nm([i,s],0)]}class zL{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Lb(`Invalid padding: ${t}`);if(r<0)throw new Lb(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Lb(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Lb(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Nm.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(Nm.fromNumber(r)));return 1===i.compare(TQ)&&(i=new Nm([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=_q(e),[r,i]=yq(t);for(let s=0;s<this.hashCount;s++){const a=this.Et(r,i,s);if(!this.At(a))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new zL(s,i,t);return r.forEach(c=>a.insert(c)),a}insert(e){if(0===this.It)return;const t=_q(e),[r,i]=yq(t);for(let s=0;s<this.hashCount;s++){const a=this.Et(r,i,s);this.Rt(a)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Lb extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Vb{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Ub.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Vb(wt.min(),i,new jn(zt),po(),Jt())}}class Ub{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Ub(r,t,Jt(),Jt(),Jt())}}class _M{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class vq{constructor(e,t){this.targetId=e,this.Vt=t}}class Eq{constructor(e,t,r=ui.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Iq{constructor(){this.St=0,this.Dt=wq(),this.Ct=ui.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Jt(),t=Jt(),r=Jt();return this.Dt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:dt()}}),new Ub(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=wq()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class wQ{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=po(),this.zt=Tq(),this.Wt=new jn(zt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:dt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,s=this.se(r);if(s){const a=s.target;if(uM(a))if(0===i){const c=new et(a.path);this.Yt(r,c,Zn.newNoDocument(c,wt.min()))}else Et(1===i);else{const c=this.ie(r);if(c!==i){const h=this.re(e,c);0!==h&&(this.ee(r),this.Wt=this.Wt.insert(r,2===h?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=HL.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(g,E,b){var x,M,O,V,G,ne;const ce={localCacheCount:E,existenceFilterCount:b.count},me=b.unchangedNames;return me&&(ce.bloomFilter={applied:0===g,hashCount:null!==(x=me?.hashCount)&&void 0!==x?x:0,bitmapLength:null!==(V=null===(O=null===(M=me?.bits)||void 0===M?void 0:M.bitmap)||void 0===O?void 0:O.length)&&void 0!==V?V:0,padding:null!==(ne=null===(G=me?.bits)||void 0===G?void 0:G.padding)&&void 0!==ne?ne:0}),ce}(h,c,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:s="",padding:a=0},hashCount:c=0}=r;let h,g;try{h=Zc(s).toUint8Array()}catch(E){if(E instanceof Sz)return ya("Decoding the base64 bloom filter in existence filter failed ("+E.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw E}try{g=new zL(h,a,c)}catch(E){return ya(E instanceof Lb?"BloomFilter error: ":"Applying bloom filter failed: ",E),1}return 0===g.It?1:i!==t-this.oe(e.targetId,g)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(s=>{const a=this.Gt.ue(),c=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;t.vt(c)||(this.Yt(e,s,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((s,a)=>{const c=this.se(a);if(c){if(s.current&&uM(c.target)){const h=new et(c.target.path);null!==this.jt.get(h)||this.ae(a,h)||this.Yt(a,h,Zn.newNoDocument(h,e))}s.Mt&&(t.set(a,s.Ot()),s.Ft())}});let r=Jt();this.zt.forEach((s,a)=>{let c=!0;a.forEachWhile(h=>{const g=this.se(h);return!g||"TargetPurposeLimboResolution"===g.purpose||(c=!1,!1)}),c&&(r=r.add(s))}),this.jt.forEach((s,a)=>a.setReadTime(e));const i=new Vb(e,t,this.Wt,this.jt,r);return this.jt=po(),this.zt=Tq(),this.Wt=new jn(zt),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Iq,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Kn(zt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Ve("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Iq),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function Tq(){return new jn(et.comparator)}function wq(){return new jn(et.comparator)}const bQ={asc:"ASCENDING",desc:"DESCENDING"},AQ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},DQ={and:"AND",or:"OR"};class CQ{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function qL(n,e){return n.useProto3Json||bb(e)?e:{value:e}}function lE(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bq(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function SQ(n,e){return lE(n,e.toTimestamp())}function $r(n){return Et(!!n),wt.fromTimestamp(function(e){const t=qh(e);return new cr(t.seconds,t.nanos)}(n))}function WL(n,e){return(t=n,new mn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Aq(n){const e=mn.fromString(n);return Et(kq(e)),e}function Bb(n,e){return WL(n.databaseId,e.path)}function wu(n,e){const t=Aq(e);if(t.get(1)!==n.databaseId.projectId)throw new Ae(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ae(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new et(Cq(t))}function KL(n,e){return WL(n.databaseId,e)}function Dq(n){const e=Aq(n);return 4===e.length?mn.emptyPath():Cq(e)}function jb(n){return new mn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Cq(n){return Et(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Sq(n,e,t){return{name:Bb(n,e),fields:t.value.mapValue.fields}}function xq(n,e,t){const r=wu(n,e.name),i=$r(e.updateTime),s=e.createTime?$r(e.createTime):wt.min(),a=new Ki({mapValue:{fields:e.fields}}),c=Zn.newFoundDocument(r,i,s,a);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function $b(n,e){let t;if(e instanceof oE)t={update:Sq(n,e.key,e.value)};else if(e instanceof aE)t={delete:Bb(n,e.key)};else if(e instanceof Xc)t={update:Sq(n,e.key,e.data),updateMask:FQ(e.fieldMask)};else{if(!(e instanceof BL))return dt();t={verify:Bb(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const a=s.transform;if(a instanceof iE)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Um)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Bm)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof sE)return{fieldPath:s.field.canonicalString(),increment:a.gt};throw dt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:SQ(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:dt()),t;var i}function ZL(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?dr.updateTime($r(i.updateTime)):void 0!==i.exists?dr.exists(i.exists):dr.none():dr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;"setToServerValue"in a?(Et("REQUEST_TIME"===a.setToServerValue),c=new iE):"appendMissingElements"in a?c=new Um(a.appendMissingElements.values||[]):"removeAllFromArray"in a?c=new Bm(a.removeAllFromArray.values||[]):"increment"in a?c=new sE(s,a.increment):dt();const h=Sr.fromServerFormat(a.fieldPath);return new Ob(h,c)}(n,i)):[];var i;if(e.update){const i=wu(n,e.update.name),s=new Ki({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=new fo((e.updateMask.fieldPaths||[]).map(g=>Sr.fromServerFormat(g)));return new Xc(i,s,a,t,r)}return new oE(i,s,t,r)}if(e.delete){const i=wu(n,e.delete);return new aE(i,t)}if(e.verify){const i=wu(n,e.verify);return new BL(i,t)}return dt()}function Rq(n,e){return{documents:[KL(n,e.path)]}}function QL(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=KL(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=KL(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(h){if(0!==h.length)return Nq(Cn.create(h,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const s=function(h){if(0!==h.length)return h.map(g=>{return{field:Xh((E=g).field),direction:NQ(E.dir)};var E})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const a=qL(n,e.limit);var c,h;return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(c=e.startAt).inclusive,values:c.position}),e.endAt&&(t.structuredQuery.endAt={before:!(h=e.endAt).inclusive,values:h.position}),t}function Mq(n){let e=Dq(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Et(1===r);const E=t.from[0];E.allDescendants?i=E.collectionId:e=e.child(E.collectionId)}let s=[];t.where&&(s=function(E){const b=Pq(E);return b instanceof Cn&&PL(b)?b.getFilters():[b]}(t.where));let a=[];t.orderBy&&(a=t.orderBy.map(E=>{return new tE(uE((b=E).field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction));var b}));let c=null;t.limit&&(c=function(E){let b;return b="object"==typeof E?E.value:E,bb(b)?null:b}(t.limit));let h=null;var E;t.startAt&&(h=new Yh((E=t.startAt).values||[],!!E.before));let g=null;return t.endAt&&(g=function(E){return new Yh(E.values||[],!E.before)}(t.endAt)),Wz(e,i,a,s,c,"F",h,g)}function Pq(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=uE(e.unaryFilter.field);return dn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=uE(e.unaryFilter.field);return dn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=uE(e.unaryFilter.field);return dn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=uE(e.unaryFilter.field);return dn.create(s,"!=",{nullValue:"NULL_VALUE"});default:return dt()}}(n):void 0!==n.fieldFilter?dn.create(uE((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return dt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Cn.create(e.compositeFilter.filters.map(t=>Pq(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return dt()}}(e.compositeFilter.op))}(n):dt();var e}function NQ(n){return bQ[n]}function kQ(n){return AQ[n]}function OQ(n){return DQ[n]}function Xh(n){return{fieldPath:n.canonicalString()}}function uE(n){return Sr.fromServerFormat(n.fieldPath)}function Nq(n){return n instanceof dn?function(e){if("=="===e.op){if(Mz(e.value))return{unaryFilter:{field:Xh(e.field),op:"IS_NAN"}};if(Rz(e.value))return{unaryFilter:{field:Xh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Mz(e.value))return{unaryFilter:{field:Xh(e.field),op:"IS_NOT_NAN"}};if(Rz(e.value))return{unaryFilter:{field:Xh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xh(e.field),op:kQ(e.op),value:e.value}}}(n):n instanceof Cn?function(e){const t=e.getFilters().map(r=>Nq(r));return 1===t.length?t[0]:{compositeFilter:{op:OQ(e.op),filters:t}}}(n):dt()}function FQ(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function kq(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Jc{constructor(e,t,r,i,s=wt.min(),a=wt.min(),c=ui.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(e){return new Jc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Jc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Jc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Jc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Oq{constructor(e){this.fe=e}}function Fq(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:yM(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Bb(i=n.fe,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:lE(i,s.version.toTimestamp()),createTime:lE(i,s.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:jm(e.version)};else{if(!e.isUnknownDocument())return dt();r.unknownDocument={path:t.path.toArray(),version:jm(e.version)}}var i,s;return r}function yM(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function jm(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function $m(n){const e=new cr(n.seconds,n.nanoseconds);return wt.fromTimestamp(e)}function Gm(n,e){const t=(e.baseMutations||[]).map(s=>ZL(n.fe,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>ZL(n.fe,s)),i=cr.fromMillis(e.localWriteTimeMs);return new jL(e.batchId,i,t,r)}function Gb(n){const e=$m(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?$m(n.lastLimboFreeSnapshotVersion):wt.min();let r;var i;return void 0!==n.query.documents?(Et(1===(i=n.query).documents.length),r=Fs(rE(Dq(i.documents[0])))):r=Fs(Mq(n.query)),new Jc(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,ui.fromBase64String(n.resumeToken))}function Lq(n,e){const t=jm(e.snapshotVersion),r=jm(e.lastLimboFreeSnapshotVersion);let i;i=uM(e.target)?Rq(n.fe,e.target):QL(n.fe,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Lm(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function YL(n){const e=Mq({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?hM(e,e.limit,"L"):e}function XL(n,e){return new GL(e.largestBatchId,ZL(n.fe,e.overlayMutation))}function Vq(n,e){const t=e.path.lastSegment();return[n,fs(e.path.popLast()),t]}function Uq(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:jm(r.readTime),documentKey:fs(r.documentKey.path),largestBatchId:r.largestBatchId}}class VQ{getBundleMetadata(e,t){return Bq(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:$m(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return Bq(e).put({bundleId:(r=t).id,createTime:jm($r(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return jq(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:YL(i.bundledQuery),readTime:$m(i.readTime)};var i})}saveNamedQuery(e,t){return jq(e).put({name:(r=t).name,readTime:jm($r(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Bq(n){return Ii(n,"bundles")}function jq(n){return Ii(n,"namedQueries")}class vM{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new vM(e,t.uid||"")}getOverlay(e,t){return Hb(e).get(Vq(this.userId,t)).next(r=>r?XL(this.serializer,r):null)}getOverlays(e,t){const r=Tu();return ee.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,a)=>{const c=new GL(t,a);i.push(this.we(e,c))}),ee.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(a=>i.add(fs(a.getCollectionPath())));const s=[];return i.forEach(a=>{const c=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);s.push(Hb(e).J("collectionPathOverlayIndex",c))}),ee.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Tu(),s=fs(t),a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Hb(e).j("collectionPathOverlayIndex",a).next(c=>{for(const h of c){const g=XL(this.serializer,h);i.set(g.getKey(),g)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Tu();let a;const c=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Hb(e).X({index:"collectionGroupOverlayIndex",range:c},(h,g,E)=>{const b=XL(this.serializer,g);s.size()<i||b.largestBatchId===a?(s.set(b.getKey(),b),a=b.largestBatchId):E.done()}).next(()=>s)}we(e,t){return Hb(e).put(function(r,i,s){const[a,c,h]=Vq(i,s.mutation.key);return{userId:i,collectionPath:c,documentId:h,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:$b(r.fe,s.mutation)}}(this.serializer,this.userId,t))}}function Hb(n){return Ii(n,"documentOverlays")}class Hm{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(xr(e.integerValue));else if("doubleValue"in e){const r=xr(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),Ab(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Zc(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?Pz(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):dt()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),et.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function UQ(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function $q(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const s=UQ(255&t[i]);if(r+=s,8!==s)break}return r}(n);return Math.ceil(e/8)}Hm.Ve=new Hm;class BQ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=$q(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=$q(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class jQ{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class $Q{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class zb{constructor(){this.je=new BQ,this.ze=new jQ(this.je),this.We=new $Q(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class zm{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new zm(this.indexId,this.documentKey,this.arrayValue,r)}}function Jh(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Gq(n.arrayValue,e.arrayValue),0!==t?t:(t=Gq(n.directionalValue,e.directionalValue),0!==t?t:et.comparator(n.documentKey,e.documentKey)))}function Gq(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class GQ{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){Et(e.collectionGroup===this.collectionId);const t=bL(e);if(void 0!==t&&!this.en(t))return!1;const r=km(e);let i=new Set,s=0,a=0;for(;s<r.length&&this.en(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const c=r[s];if(!this.nn(this.Ze,c)||!this.sn(this.Ye[a++],c))return!1}++s}for(;s<r.length;++s)if(a>=this.Ye.length||!this.sn(this.Ye[a++],r[s]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Hq(n){var e,t;if(Et(n instanceof dn||n instanceof Cn),n instanceof dn){if(n instanceof Hz){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>dn.create(n.field,"==",s)))||[];return Cn.create(i,"or")}return n}const r=n.filters.map(i=>Hq(i));return Cn.create(r,n.op)}function HQ(n){if(0===n.getFilters().length)return[];const e=tV(Hq(n));return Et(zq(e)),JL(e)||eV(e)?[e]:e.getFilters()}function JL(n){return n instanceof dn}function eV(n){return n instanceof Cn&&PL(n)}function zq(n){return JL(n)||eV(n)||function(e){if(e instanceof Cn&&ML(e)){for(const t of e.getFilters())if(!JL(t)&&!eV(t))return!1;return!0}return!1}(n)}function tV(n){if(Et(n instanceof dn||n instanceof Cn),n instanceof dn)return n;if(1===n.filters.length)return tV(n.filters[0]);const e=n.filters.map(r=>tV(r));let t=Cn.create(e,n.op);return t=EM(t),zq(t)?t:(Et(t instanceof Cn),Et(nE(t)),Et(t.filters.length>1),t.filters.reduce((r,i)=>nV(r,i)))}function nV(n,e){let t;return Et(n instanceof dn||n instanceof Cn),Et(e instanceof dn||e instanceof Cn),t=n instanceof dn?e instanceof dn?Cn.create([n,e],"and"):qq(n,e):e instanceof dn?qq(e,n):function(r,i){if(Et(r.filters.length>0&&i.filters.length>0),nE(r)&&nE(i))return jz(r,i.getFilters());const s=ML(r)?r:i,a=ML(r)?i:r,c=s.filters.map(h=>nV(h,a));return Cn.create(c,"or")}(n,e),EM(t)}function qq(n,e){if(nE(e))return jz(e,n.getFilters());{const t=e.filters.map(r=>nV(n,r));return Cn.create(t,"or")}}function EM(n){if(Et(n instanceof dn||n instanceof Cn),n instanceof dn)return n;const e=n.getFilters();if(1===e.length)return EM(e[0]);if(Uz(n))return n;const t=e.map(i=>EM(i)),r=[];return t.forEach(i=>{i instanceof dn?r.push(i):i instanceof Cn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Cn.create(r,n.op)}class zQ{constructor(){this.rn=new rV}addToCollectionParentIndex(e,t){return this.rn.add(t),ee.resolve()}getCollectionParents(e,t){return ee.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return ee.resolve()}deleteFieldIndex(e,t){return ee.resolve()}getDocumentsMatchingTarget(e,t){return ee.resolve(null)}getIndexType(e,t){return ee.resolve(0)}getFieldIndexes(e,t){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,t){return ee.resolve(Vo.min())}getMinOffsetFromCollectionGroup(e,t){return ee.resolve(Vo.min())}updateCollectionGroup(e,t,r){return ee.resolve()}updateIndexEntries(e,t){return ee.resolve()}}class rV{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Kn(mn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Kn(mn.comparator)).toArray()}}const IM=new Uint8Array(0);class qQ{constructor(e,t){this.user=e,this.databaseId=t,this.on=new rV,this.un=new Yc(r=>Lm(r),(r,i)=>Rb(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const s={collectionId:r,parent:fs(i)};return Wq(e).put(s)}return ee.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[hz(t),""],!1,!0);return Wq(e).j(i).next(s=>{for(const a of s){if(a.collectionId!==t)break;r.push(Eu(a.parent))}return r})}addFieldIndex(e,t){const r=TM(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const a=Wb(e);return s.next(c=>{a.put(Uq(c,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=TM(e),i=Wb(e),s=qb(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=qb(e);let i=!0;const s=new Map;return ee.forEach(this.cn(t),a=>this.an(e,a).next(c=>{i&&(i=!!c),s.set(a,c)})).next(()=>{if(i){let a=Jt();const c=[];return ee.forEach(s,(h,g)=>{var E;Ve("IndexedDbIndexManager",`Using index ${E=h,`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(me=>`${me.fieldPath}:${me.kind}`).join(",")}`} to execute ${Lm(t)}`);const b=function(me,Pe){const Ye=bL(Pe);if(void 0===Ye)return null;for(const Xe of cM(me,Ye.fieldPath))switch(Xe.op){case"array-contains-any":return Xe.value.arrayValue.values||[];case"array-contains":return[Xe.value]}return null}(g,h),x=function(me,Pe){const Ye=new Map;for(const Xe of km(Pe))for(const Nt of cM(me,Xe.fieldPath))switch(Nt.op){case"==":case"in":Ye.set(Xe.fieldPath.canonicalString(),Nt.value);break;case"not-in":case"!=":return Ye.set(Xe.fieldPath.canonicalString(),Nt.value),Array.from(Ye.values())}return null}(g,h),M=function(me,Pe){const Ye=[];let Xe=!0;for(const Nt of km(Pe)){const Gn=0===Nt.kind?zz(me,Nt.fieldPath,me.startAt):qz(me,Nt.fieldPath,me.startAt);Ye.push(Gn.value),Xe&&(Xe=Gn.inclusive)}return new Yh(Ye,Xe)}(g,h),O=function(me,Pe){const Ye=[];let Xe=!0;for(const Nt of km(Pe)){const Gn=0===Nt.kind?qz(me,Nt.fieldPath,me.endAt):zz(me,Nt.fieldPath,me.endAt);Ye.push(Gn.value),Xe&&(Xe=Gn.inclusive)}return new Yh(Ye,Xe)}(g,h),V=this.hn(h,g,M),G=this.hn(h,g,O),ne=this.ln(h,g,x),ce=this.fn(h.indexId,b,V,M.inclusive,G,O.inclusive,ne);return ee.forEach(ce,me=>r.H(me,t.limit).next(Pe=>{Pe.forEach(Ye=>{const Xe=et.fromSegments(Ye.documentKey);a.has(Xe)||(a=a.add(Xe),c.push(Xe))})}))}).next(()=>c)}return ee.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:HQ(Cn.create(e.filters,"and")).map(r=>kL(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,s,a,c){const h=(null!=t?t.length:1)*Math.max(r.length,s.length),g=h/(null!=t?t.length:1),E=[];for(let b=0;b<h;++b){const x=t?this.dn(t[b/g]):IM,M=this.wn(e,x,r[b%g],i),O=this._n(e,x,s[b%g],a),V=c.map(G=>this.wn(e,x,G,!0));E.push(...this.createRange(M,O,V))}return E}wn(e,t,r,i){const s=new zm(e,et.empty(),t,r);return i?s:s.Je()}_n(e,t,r,i){const s=new zm(e,et.empty(),t,r);return i?s.Je():s}an(e,t){const r=new GQ(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let a=null;for(const c of s)r.tn(c)&&(!a||c.fields.length>a.fields.length)&&(a=c);return a})}getIndexType(e,t){let r=2;const i=this.cn(t);return ee.forEach(i,s=>this.an(e,s).next(a=>{a?0!==r&&a.fields.length<function(c){let h=new Kn(Sr.comparator),g=!1;for(const E of c.filters)for(const b of E.getFlattenedFilters())b.field.isKeyField()||("array-contains"===b.op||"array-contains-any"===b.op?g=!0:h=h.add(b.field));for(const E of c.orderBy)E.field.isKeyField()||(h=h.add(E.field));return h.size+(g?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new zb;for(const i of km(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const a=r.He(i.kind);Hm.Ve._e(s,a)}return r.Qe()}dn(e){const t=new zb;return Hm.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new zb;return Hm.Ve._e(Fm(this.databaseId,t),r.He(function(i){const s=km(i);return 0===s.length?0:s[s.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new zb);let s=0;for(const a of km(e)){const c=r[s++];for(const h of i)if(this.yn(t,a.fieldPath)&&Sb(c))i=this.pn(i,a,c);else{const g=h.He(a.kind);Hm.Ve._e(c,g)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],s=[];for(const a of r.arrayValue.values||[])for(const c of i){const h=new zb;h.seed(c.Qe()),Hm.Ve._e(a,h.He(t.kind)),s.push(h)}return s}yn(e,t){return!!e.filters.find(r=>r instanceof dn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=TM(e),i=Wb(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(s=>{const a=[];return ee.forEach(s,c=>i.get([c.indexId,this.uid]).next(h=>{a.push(function(g,E){const b=E?new Tb(E.sequenceNumber,new Vo($m(E.readTime),new et(Eu(E.documentKey)),E.largestBatchId)):Tb.empty(),x=g.fields.map(([M,O])=>new eM(Sr.fromServerFormat(M),O));return new JR(g.indexId,g.collectionGroup,x,b)}(c,h))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:zt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=TM(e),s=Wb(e);return this.Tn(e).next(a=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(c=>ee.forEach(c,h=>s.put(Uq(h.indexId,this.user,a,r)))))}updateIndexEntries(e,t){const r=new Map;return ee.forEach(t,(i,s)=>{const a=r.get(i.collectionGroup);return(a?ee.resolve(a):this.getFieldIndexes(e,i.collectionGroup)).next(c=>(r.set(i.collectionGroup,c),ee.forEach(c,h=>this.En(e,i,h).next(g=>{const E=this.An(s,h);return g.isEqual(E)?ee.resolve():this.vn(e,s,h,g,E)}))))})}Rn(e,t,r,i){return qb(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return qb(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=qb(e);let s=new Kn(Jh);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(a,c)=>{s=s.add(new zm(r.indexId,t,c.arrayValue,c.directionalValue))}).next(()=>s)}An(e,t){let r=new Kn(Jh);const i=this.mn(t,e);if(null==i)return r;const s=bL(t);if(null!=s){const a=e.data.field(s.fieldPath);if(Sb(a))for(const c of a.arrayValue.values||[])r=r.add(new zm(t.indexId,e.key,this.dn(c),i))}else r=r.add(new zm(t.indexId,e.key,IM,i));return r}vn(e,t,r,i,s){Ve("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const a=[];return function(c,h,g,E,b){const x=c.getIterator(),M=h.getIterator();let O=Jv(x),V=Jv(M);for(;O||V;){let G=!1,ne=!1;if(O&&V){const ce=g(O,V);ce<0?ne=!0:ce>0&&(G=!0)}else null!=O?ne=!0:G=!0;G?(E(V),V=Jv(M)):ne?(b(O),O=Jv(x)):(O=Jv(x),V=Jv(M))}}(i,s,Jh,c=>{a.push(this.Rn(e,t,r,c))},c=>{a.push(this.Pn(e,t,r,c))}),ee.waitFor(a)}Tn(e){let t=1;return Wb(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((a,c)=>Jh(a,c)).filter((a,c,h)=>!c||0!==Jh(a,h[c-1]));const i=[];i.push(e);for(const a of r){const c=Jh(a,e),h=Jh(a,t);if(0===c)i[0]=e.Je();else if(c>0&&h<0)i.push(a),i.push(a.Je());else if(h>0)break}i.push(t);const s=[];for(let a=0;a<i.length;a+=2){if(this.bn(i[a],i[a+1]))return[];s.push(IDBKeyRange.bound([i[a].indexId,this.uid,i[a].arrayValue,i[a].directionalValue,IM,[]],[i[a+1].indexId,this.uid,i[a+1].arrayValue,i[a+1].directionalValue,IM,[]]))}return s}bn(e,t){return Jh(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Kq)}getMinOffset(e,t){return ee.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||dt())).next(Kq)}}function Wq(n){return Ii(n,"collectionParents")}function qb(n){return Ii(n,"indexEntries")}function TM(n){return Ii(n,"indexConfiguration")}function Wb(n){return Ii(n,"indexState")}function Kq(n){Et(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;AL(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Vo(e.readTime,e.documentKey,t)}const Zq={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ps{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ps(e,ps.DEFAULT_COLLECTION_PERCENTILE,ps.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Qq(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],a=IDBKeyRange.only(t.batchId);let c=0;const h=r.X({range:a},(E,b,x)=>(c++,x.delete()));s.push(h.next(()=>{Et(1===c)}));const g=[];for(const E of t.mutations){const b=Iz(e,E.key.path,t.batchId);s.push(i.delete(b)),g.push(E.key)}return ee.waitFor(s).next(()=>g)}function wM(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw dt();e=n.noDocument}return JSON.stringify(e).length}ps.DEFAULT_COLLECTION_PERCENTILE=10,ps.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ps.DEFAULT=new ps(41943040,ps.DEFAULT_COLLECTION_PERCENTILE,ps.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ps.DISABLED=new ps(-1,0,0);class bM{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){Et(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new bM(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ef(e).X({index:"userMutationsIndex",range:r},(i,s,a)=>{t=!1,a.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=cE(e),a=ef(e);return a.add({}).next(c=>{Et("number"==typeof c);const h=new jL(c,t,r,i),g=function(x,M,O){const V=O.baseMutations.map(ne=>$b(x.fe,ne)),G=O.mutations.map(ne=>$b(x.fe,ne));return{userId:M,batchId:O.batchId,localWriteTimeMs:O.localWriteTime.toMillis(),baseMutations:V,mutations:G}}(this.serializer,this.userId,h),E=[];let b=new Kn((x,M)=>zt(x.canonicalString(),M.canonicalString()));for(const x of i){const M=Iz(this.userId,x.key.path,c);b=b.add(x.key.path.popLast()),E.push(a.put(g)),E.push(s.put(M,NZ))}return b.forEach(x=>{E.push(this.indexManager.addToCollectionParentIndex(e,x))}),e.addOnCommittedListener(()=>{this.Vn[c]=h.keys()}),ee.waitFor(E).next(()=>h)})}lookupMutationBatch(e,t){return ef(e).get(t).next(r=>r?(Et(r.userId===this.userId),Gm(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?ee.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return ef(e).X({index:"userMutationsIndex",range:i},(a,c,h)=>{c.userId===this.userId&&(Et(c.batchId>=r),s=Gm(this.serializer,c)),h.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ef(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,s,a)=>{r=s.batchId,a.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ef(e).j("userMutationsIndex",t).next(r=>r.map(i=>Gm(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=nM(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return cE(e).X({range:i},(a,c,h)=>{const[g,E,b]=a,x=Eu(E);if(g===this.userId&&t.path.isEqual(x))return ef(e).get(b).next(M=>{if(!M)throw dt();Et(M.userId===this.userId),s.push(Gm(this.serializer,M))});h.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Kn(zt);const i=[];return t.forEach(s=>{const a=nM(this.userId,s.path),c=IDBKeyRange.lowerBound(a),h=cE(e).X({range:c},(g,E,b)=>{const[x,M,O]=g,V=Eu(M);x===this.userId&&s.path.isEqual(V)?r=r.add(O):b.done()});i.push(h)}),ee.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=nM(this.userId,r),a=IDBKeyRange.lowerBound(s);let c=new Kn(zt);return cE(e).X({range:a},(h,g,E)=>{const[b,x,M]=h,O=Eu(x);b===this.userId&&r.isPrefixOf(O)?O.length===i&&(c=c.add(M)):E.done()}).next(()=>this.Dn(e,c))}Dn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(ef(e).get(s).next(a=>{if(null===a)throw dt();Et(a.userId===this.userId),r.push(Gm(this.serializer,a))}))}),ee.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Qq(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),ee.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ee.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return cE(e).X({range:r},(s,a,c)=>{if(s[0]===this.userId){const h=Eu(s[1]);i.push(h)}else c.done()}).next(()=>{Et(0===i.length)})})}containsKey(e,t){return Yq(e,this.userId,t)}xn(e){return Xq(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Yq(n,e,t){const r=nM(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let a=!1;return cE(n).X({range:s,Y:!0},(c,h,g)=>{const[E,b,x]=c;E===e&&b===i&&(a=!0),g.done()}).next(()=>a)}function ef(n){return Ii(n,"mutations")}function cE(n){return Ii(n,"documentMutations")}function Xq(n){return Ii(n,"mutationQueues")}class qm{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new qm(0)}static Mn(){return new qm(-1)}}class WQ{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new qm(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>wt.fromTimestamp(new cr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>dE(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(Et(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return dE(e).X((a,c)=>{const h=Gb(c);h.sequenceNumber<=t&&null===r.get(h.targetId)&&(i++,s.push(this.removeTargetData(e,h)))}).next(()=>ee.waitFor(s)).next(()=>i)}forEachTarget(e,t){return dE(e).X((r,i)=>{const s=Gb(i);t(s)})}$n(e){return Jq(e).get("targetGlobalKey").next(t=>(Et(null!==t),t))}On(e,t){return Jq(e).put("targetGlobalKey",t)}Fn(e,t){return dE(e).put(Lq(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Lm(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return dE(e).X({range:i,index:"queryTargetsIndex"},(a,c,h)=>{const g=Gb(c);Rb(t,g.target)&&(s=g,h.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=tf(e);return t.forEach(a=>{const c=fs(a.path);i.push(s.put({targetId:r,path:c})),i.push(this.referenceDelegate.addReference(e,r,a))}),ee.waitFor(i)}removeMatchingKeys(e,t,r){const i=tf(e);return ee.forEach(t,s=>{const a=fs(s.path);return ee.waitFor([i.delete([r,a]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=tf(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=tf(e);let s=Jt();return i.X({range:r,Y:!0},(a,c,h)=>{const g=Eu(a[1]),E=new et(g);s=s.add(E)}).next(()=>s)}containsKey(e,t){const r=fs(t.path),i=IDBKeyRange.bound([r],[hz(r)],!1,!0);let s=0;return tf(e).X({index:"documentTargetsIndex",Y:!0,range:i},([a,c],h,g)=>{0!==a&&(s++,g.done())}).next(()=>s>0)}le(e,t){return dE(e).get(t).next(r=>r?Gb(r):null)}}function dE(n){return Ii(n,"targets")}function Jq(n){return Ii(n,"targetGlobal")}function tf(n){return Ii(n,"targetDocuments")}function e3([n,e],[t,r]){const i=zt(n,t);return 0===i?zt(e,r):i}class KQ{constructor(e){this.Ln=e,this.buffer=new Kn(e3),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();e3(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class t3{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Ve("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,N.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Hh(r)?Ve("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Gh(r)}yield t.Qn(3e5)}))}}class ZQ{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ee.resolve(Uo.ct);const r=new KQ(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(Zq)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Zq):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,s,a,c,h,g;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(b=>(b>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),i=this.params.maximumSequenceNumbersToCollect):i=b,a=Date.now(),this.nthSequenceNumber(e,i))).next(b=>(r=b,c=Date.now(),this.removeTargets(e,r,t))).next(b=>(s=b,h=Date.now(),this.removeOrphanedDocuments(e,r))).next(b=>(g=Date.now(),TL()<=Vr.in.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${a-E}ms\n\tDetermined least recently used ${i} in `+(c-a)+`ms\n\tRemoved ${s} targets in `+(h-c)+`ms\n\tRemoved ${b} documents in `+(g-h)+`ms\nTotal Duration: ${g-E}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:b})))}}class QQ{constructor(e,t){this.db=e,this.garbageCollector=function n3(n,e){return new ZQ(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return AM(e,r)}removeReference(e,t,r){return AM(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return AM(e,t)}Xn(e,t){return function(r,i){let s=!1;return Xq(r).Z(a=>Yq(r,a,i).next(c=>(c&&(s=!0),ee.resolve(!c)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Yn(e,(a,c)=>{if(c<=t){const h=this.Xn(e,a).next(g=>{if(!g)return s++,r.getEntry(e,a).next(()=>(r.removeEntry(a,wt.min()),tf(e).delete([0,fs(a.path)])))});i.push(h)}}).next(()=>ee.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return AM(e,t)}Yn(e,t){const r=tf(e);let i,s=Uo.ct;return r.X({index:"documentTargetsIndex"},([a,c],{path:h,sequenceNumber:g})=>{0===a?(s!==Uo.ct&&t(new et(Eu(i)),s),s=g,i=h):s=Uo.ct}).next(()=>{s!==Uo.ct&&t(new et(Eu(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function AM(n,e){return tf(n).put((r=n.currentSequenceNumber,{targetId:0,path:fs(e.path),sequenceNumber:r}));var r}class r3{constructor(){this.changes=new Yc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Zn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ee.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class YQ{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Wm(e).put(r)}removeEntry(e,t,r){return Wm(e).delete(function(i,s){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],yM(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=Zn.newInvalidDocument(t);return Wm(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Kb(t))},(i,s)=>{r=this.ts(t,s)}).next(()=>r)}es(e,t){let r={size:0,document:Zn.newInvalidDocument(t)};return Wm(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Kb(t))},(i,s)=>{r={document:this.ts(t,s),size:wM(s)}}).next(()=>r)}getEntries(e,t){let r=po();return this.ns(e,t,(i,s)=>{const a=this.ts(i,s);r=r.insert(i,a)}).next(()=>r)}ss(e,t){let r=po(),i=new jn(et.comparator);return this.ns(e,t,(s,a)=>{const c=this.ts(s,a);r=r.insert(s,c),i=i.insert(s,wM(a))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return ee.resolve();let i=new Kn(l3);t.forEach(h=>i=i.add(h));const s=IDBKeyRange.bound(Kb(i.first()),Kb(i.last())),a=i.getIterator();let c=a.getNext();return Wm(e).X({index:"documentKeyIndex",range:s},(h,g,E)=>{const b=et.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;c&&l3(c,b)<0;)r(c,null),c=a.getNext();c&&c.isEqual(b)&&(r(c,g),c=a.hasNext()?a.getNext():null),c?E.G(Kb(c)):E.done()}).next(()=>{for(;c;)r(c,null),c=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const s=t.path,a=[s.popLast().toArray(),s.lastSegment(),yM(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Wm(e).j(IDBKeyRange.bound(a,c,!0)).next(h=>{let g=po();for(const E of h){const b=this.ts(et.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);b.isFoundDocument()&&(Pb(t,b)||i.has(b.key))&&(g=g.insert(b.key,b))}return g})}getAllFromCollectionGroup(e,t,r,i){let s=po();const a=a3(t,r),c=a3(t,Vo.max());return Wm(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,c,!0)},(h,g,E)=>{const b=this.ts(et.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);s=s.insert(b.key,b),s.size===i&&E.done()}).next(()=>s)}newChangeBuffer(e){return new XQ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return o3(e).get("remoteDocumentGlobalKey").next(t=>(Et(!!t),t))}Zn(e,t){return o3(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function LQ(n,e){let t;if(e.document)t=xq(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=et.fromSegments(e.noDocument.path),i=$m(e.noDocument.readTime);t=Zn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return dt();{const r=et.fromSegments(e.unknownDocument.path),i=$m(e.unknownDocument.version);t=Zn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new cr(r[0],r[1]);return wt.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(wt.min()))return r}return Zn.newInvalidDocument(e)}}function s3(n){return new YQ(n)}class XQ extends r3{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Yc(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Kn((s,a)=>zt(s.canonicalString(),a.canonicalString()));return this.changes.forEach((s,a)=>{const c=this.us.get(s);if(t.push(this.os.removeEntry(e,s,c.readTime)),a.isValidDocument()){const h=Fq(this.os.serializer,a);i=i.add(s.path.popLast());const g=wM(h);r+=g-c.size,t.push(this.os.addEntry(e,s,h))}else if(r-=c.size,this.trackRemovals){const h=Fq(this.os.serializer,a.convertToNoDocument(wt.min()));t.push(this.os.addEntry(e,s,h))}}),i.forEach(s=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.os.updateMetadata(e,r)),ee.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((s,a)=>{this.us.set(s,{size:a,readTime:r.get(s).readTime})}),r))}}function o3(n){return Ii(n,"remoteDocumentGlobal")}function Wm(n){return Ii(n,"remoteDocumentsV14")}function Kb(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function a3(n,e){const t=e.documentKey.path.toArray();return[n,yM(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function l3(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=zt(t[s],r[s]),i)return i;return i=zt(t.length,r.length),i||(i=zt(t[t.length-2],r[r.length-2]),i||zt(t[t.length-1],r[r.length-1]))}class JQ{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class u3{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Fb(r.mutation,i,fo.empty(),cr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Jt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Jt()){const i=Tu();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let a=Nb();return s.forEach((c,h)=>{a=a.insert(c,h.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){const r=Tu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Jt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,c)=>{t.set(a,c)})})}computeViews(e,t,r,i){let s=po();const a=kb(),c=kb();return t.forEach((h,g)=>{const E=r.get(g.key);i.has(g.key)&&(void 0===E||E.mutation instanceof Xc)?s=s.insert(g.key,g):void 0!==E?(a.set(g.key,E.mutation.getFieldMask()),Fb(E.mutation,g,E.mutation.getFieldMask(),cr.now())):a.set(g.key,fo.empty())}),this.recalculateAndSaveOverlays(e,s).next(h=>(h.forEach((g,E)=>a.set(g,E)),t.forEach((g,E)=>{var b;return c.set(g,new JQ(E,null!==(b=a.get(g))&&void 0!==b?b:null))}),c))}recalculateAndSaveOverlays(e,t){const r=kb();let i=new jn((a,c)=>a-c),s=Jt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(const c of a)c.keys().forEach(h=>{const g=t.get(h);if(null===g)return;let E=r.get(h)||fo.empty();E=c.applyToLocalView(g,E),r.set(h,E);const b=(i.get(c.batchId)||Jt()).add(h);i=i.insert(c.batchId,b)})}).next(()=>{const a=[],c=i.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),g=h.key,E=h.value,b=eq();E.forEach(x=>{if(!s.has(x)){const M=uq(t.get(x),r.get(x));null!==M&&b.set(x,M),s=s.add(x)}}),a.push(this.documentOverlayCache.saveOverlays(e,g,b))}return ee.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return et.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):FL(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):ee.resolve(Tu());let c=-1,h=s;return a.next(g=>ee.forEach(g,(E,b)=>(c<b.largestBatchId&&(c=b.largestBatchId),s.get(E)?ee.resolve():this.remoteDocumentCache.getEntry(e,E).next(x=>{h=h.insert(E,x)}))).next(()=>this.populateOverlays(e,g,s)).next(()=>this.computeViews(e,h,g,Jt())).next(E=>({batchId:c,changes:Jz(E)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new et(t)).next(r=>{let i=Nb();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=Nb();return this.indexManager.getCollectionParents(e,i).next(a=>ee.forEach(a,c=>{const h=(g=t,E=c.child(i),new Qc(E,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt));var g,E;return this.getDocumentsMatchingCollectionQuery(e,h,r).next(g=>{g.forEach((E,b)=>{s=s.insert(E,b)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(s=>{i.forEach((c,h)=>{const g=h.getKey();null===s.get(g)&&(s=s.insert(g,Zn.newInvalidDocument(g)))});let a=Nb();return s.forEach((c,h)=>{const g=i.get(c);void 0!==g&&Fb(g.mutation,h,fo.empty(),cr.now()),Pb(t,h)&&(a=a.insert(c,h))}),a})}}class eY{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return ee.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:$r(r.createTime)}),ee.resolve()}getNamedQuery(e,t){return ee.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:YL(r.bundledQuery),readTime:$r(r.readTime)}),ee.resolve();var r}}class tY{constructor(){this.overlays=new jn(et.comparator),this.ls=new Map}getOverlay(e,t){return ee.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Tu();return ee.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.we(e,t,s)}),ee.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(r)),ee.resolve()}getOverlaysForCollection(e,t,r){const i=Tu(),s=t.length+1,a=new et(t.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const h=c.getNext().value,g=h.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===s&&h.largestBatchId>r&&i.set(h.getKey(),h)}return ee.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new jn((g,E)=>g-E);const a=this.overlays.getIterator();for(;a.hasNext();){const g=a.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>r){let E=s.get(g.largestBatchId);null===E&&(E=Tu(),s=s.insert(g.largestBatchId,E)),E.set(g.getKey(),g)}}const c=Tu(),h=s.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((g,E)=>c.set(g,E)),!(c.size()>=i)););return ee.resolve(c)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const a=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new GL(t,r));let s=this.ls.get(t);void 0===s&&(s=Jt(),this.ls.set(t,s)),this.ls.set(t,s.add(r.key))}}class iV{constructor(){this.fs=new Kn(Ti.ds),this.ws=new Kn(Ti._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new Ti(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new Ti(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new et(new mn([])),r=new Ti(t,e),i=new Ti(t,e+1),s=[];return this.ws.forEachInRange([r,i],a=>{this.ys(a),s.push(a.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new et(new mn([])),r=new Ti(t,e),i=new Ti(t,e+1);let s=Jt();return this.ws.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const t=new Ti(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ti{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return et.comparator(e.key,t.key)||zt(e.As,t.As)}static _s(e,t){return zt(e.As,t.As)||et.comparator(e.key,t.key)}}class nY{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Kn(Ti.ds)}checkEmpty(e){return ee.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.vs;this.vs++;const a=new jL(s,t,r,i);this.mutationQueue.push(a);for(const c of i)this.Rs=this.Rs.add(new Ti(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return ee.resolve(a)}lookupMutationBatch(e,t){return ee.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),s=i<0?0:i;return ee.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ti(t,0),i=new Ti(t,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([r,i],a=>{const c=this.Ps(a.As);s.push(c)}),ee.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Kn(zt);return t.forEach(i=>{const s=new Ti(i,0),a=new Ti(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,a],c=>{r=r.add(c.As)})}),ee.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;et.isDocumentKey(s)||(s=s.child(""));const a=new Ti(new et(s),0);let c=new Kn(zt);return this.Rs.forEachWhile(h=>{const g=h.key.path;return!!r.isPrefixOf(g)&&(g.length===i&&(c=c.add(h.As)),!0)},a),ee.resolve(this.Vs(c))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Et(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return ee.forEach(t.mutations,i=>{const s=new Ti(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new Ti(t,0),i=this.Rs.firstAfterOrEqual(r);return ee.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ee.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class rY{constructor(e){this.Ds=e,this.docs=new jn(et.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ee.resolve(r?r.document.mutableCopy():Zn.newInvalidDocument(t))}getEntries(e,t){let r=po();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Zn.newInvalidDocument(i))}),ee.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=po();const a=t.path,c=new et(a.child("")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:g,value:{document:E}}=h.getNext();if(!a.isPrefixOf(g.path))break;g.path.length>a.length+1||AL(pz(E),r)<=0||(i.has(E.key)||Pb(t,E))&&(s=s.insert(E.key,E.mutableCopy()))}return ee.resolve(s)}getAllFromCollectionGroup(e,t,r,i){dt()}Cs(e,t){return ee.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new iY(this)}getSize(e){return ee.resolve(this.size)}}class iY extends r3{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),ee.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class sY{constructor(e){this.persistence=e,this.xs=new Yc(t=>Lm(t),Rb),this.lastRemoteSnapshotVersion=wt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new iV,this.targetCount=0,this.Ms=qm.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),ee.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new qm(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,ee.resolve()}updateTargetData(e,t){return this.Fn(t),ee.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.xs.forEach((a,c)=>{c.sequenceNumber<=t&&null===r.get(c.targetId)&&(this.xs.delete(a),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),ee.waitFor(s).next(()=>i)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return ee.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),ee.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),ee.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),ee.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return ee.resolve(r)}containsKey(e,t){return ee.resolve(this.ks.containsKey(t))}}class sV{constructor(e,t){this.$s={},this.overlays={},this.Os=new Uo(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new sY(this),this.indexManager=new zQ,this.remoteDocumentCache=new rY(r=>this.referenceDelegate.Ls(r)),this.serializer=new Oq(t),this.qs=new eY(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new tY,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new nY(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Ve("MemoryPersistence","Starting transaction:",e);const i=new oY(this.Os.next());return this.referenceDelegate.Us(),r(i).next(s=>this.referenceDelegate.Ks(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gs(e,t){return ee.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class oY extends gz{constructor(e){super(),this.currentSequenceNumber=e}}class DM{constructor(e){this.persistence=e,this.Qs=new iV,this.js=null}static zs(e){return new DM(e)}get Ws(){if(this.js)return this.js;throw dt()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),ee.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),ee.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),ee.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Ws.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.Ws,r=>{const i=et.fromPath(r);return this.Hs(e,i).next(s=>{s||t.removeEntry(i,wt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return ee.or([()=>ee.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class aY{constructor(e){this.serializer=e}O(e,t,r,i){const s=new tM("createOrUpgrade",t);var c;r<1&&i>=1&&(e.createObjectStore("owner"),(c=e).createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ez,{unique:!0}),c.createObjectStore("documentMutations"),c3(e),function(c){c.createObjectStore("remoteDocuments")}(e));let a=ee.resolve();return r<3&&i>=3&&(0!==r&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),c3(e)),a=a.next(()=>function(c){const h=c.store("targetGlobal"),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:wt.min().toTimestamp(),targetCount:0};return h.put("targetGlobalKey",g)}(s))),r<4&&i>=4&&(0!==r&&(a=a.next(()=>function(c,h){return h.store("mutations").j().next(g=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ez,{unique:!0});const E=h.store("mutations"),b=g.map(x=>E.put(x));return ee.waitFor(b)})}(e,s))),a=a.next(()=>{!function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(a=a.next(()=>this.Ys(s))),r<6&&i>=6&&(a=a.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(s)))),r<7&&i>=7&&(a=a.next(()=>this.Zs(s))),r<8&&i>=8&&(a=a.next(()=>this.ti(e,s))),r<9&&i>=9&&(a=a.next(()=>{!function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(a=a.next(()=>this.ei(s))),r<11&&i>=11&&(a=a.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(a=a.next(()=>{!function(c){const h=c.createObjectStore("documentOverlays",{keyPath:zZ});h.createIndex("collectionPathOverlayIndex",qZ,{unique:!1}),h.createIndex("collectionGroupOverlayIndex",WZ,{unique:!1})}(e)})),r<13&&i>=13&&(a=a.next(()=>function(c){const h=c.createObjectStore("remoteDocumentsV14",{keyPath:kZ});h.createIndex("documentKeyIndex",OZ),h.createIndex("collectionGroupIndex",FZ)}(e)).next(()=>this.ni(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(a=a.next(()=>this.si(e,s))),r<15&&i>=15&&(a=a.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:jZ}).createIndex("sequenceNumberIndex",$Z,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:GZ}).createIndex("documentKeyIndex",HZ,{unique:!1})}(e))),a}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=wM(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>ee.forEach(i,s=>{const a=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",a).next(c=>ee.forEach(c,h=>{Et(h.userId===s.userId);const g=Gm(this.serializer,h);return Qq(e,s.userId,g).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.X((a,c)=>{const h=new mn(a),g=[0,fs(h)];s.push(t.get(g).next(E=>E?ee.resolve():t.put({targetId:0,path:fs(h),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ee.waitFor(s))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:BZ});const r=t.store("collectionParents"),i=new rV,s=a=>{if(i.add(a)){const c=a.lastSegment(),h=a.popLast();return r.put({collectionId:c,parent:fs(h)})}};return t.store("remoteDocuments").X({Y:!0},(a,c)=>{const h=new mn(a);return s(h.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([a,c,h],g)=>{const E=Eu(c);return s(E.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const s=Gb(i),a=Lq(this.serializer,s);return t.put(a)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((s,a)=>{const c=t.store("remoteDocumentsV14"),h=(g=a,g.document?new et(mn.fromString(g.document.name).popFirst(5)):g.noDocument?et.fromSegments(g.noDocument.path):g.unknownDocument?et.fromSegments(g.unknownDocument.path):dt()).path.toArray();var g;const E={prefixPath:h.slice(0,h.length-2),collectionGroup:h[h.length-2],documentId:h[h.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(c.put(E))}).next(()=>ee.waitFor(i))}si(e,t){const r=t.store("mutations"),i=s3(this.serializer),s=new sV(DM.zs,this.serializer.fe);return r.j().next(a=>{const c=new Map;return a.forEach(h=>{var g;let E=null!==(g=c.get(h.userId))&&void 0!==g?g:Jt();Gm(this.serializer,h).keys().forEach(b=>E=E.add(b)),c.set(h.userId,E)}),ee.forEach(c,(h,g)=>{const E=new Ei(g),b=vM.de(this.serializer,E),x=s.getIndexManager(E),M=bM.de(E,this.serializer,x,s.referenceDelegate);return new u3(i,M,b,x).recalculateAndSaveOverlaysForDocumentKeys(new SL(t,Uo.ct),h).next()})})}}function c3(n){n.createObjectStore("targetDocuments",{keyPath:VZ}).createIndex("documentTargetsIndex",UZ,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",LZ,{unique:!0}),n.createObjectStore("targetGlobal")}const oV="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class aV{constructor(e,t,r,i,s,a,c,h,g,E,b=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=s,this.window=a,this.document=c,this.ri=g,this.oi=E,this.ui=b,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=x=>Promise.resolve(),!aV.D())throw new Ae(ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new QQ(this,i),this.di=t+"main",this.serializer=new Oq(h),this.wi=new ul(this.di,this.ui,new aY(this.serializer)),this.Bs=new WQ(this.referenceDelegate,this.serializer),this.remoteDocumentCache=s3(this.serializer),this.qs=new VQ,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===E&&jr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ae(ae.FAILED_PRECONDITION,oV);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Uo(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,N.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,N.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,N.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>SM(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Hh(e))return Ve("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ve("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Zb(e).get("owner").next(t=>ee.resolve(this.Ri(t)))}Pi(e){return SM(e).delete(this.clientId)}bi(){var e=this;return(0,N.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ii(r,"clientMetadata");return i.j().next(s=>{const a=e.Si(s,18e5),c=s.filter(h=>-1===a.indexOf(h));return ee.forEach(c,h=>i.delete(h.clientId)).next(()=>c)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?ee.resolve(!0):Zb(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Ae(ae.FAILED_PRECONDITION,oV);return!1}}return!(!this.networkEnabled||!this.inForeground)||SM(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ve("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,N.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new SL(t,Uo.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>SM(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return bM.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new qQ(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return vM.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Ve("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=15===(a=this.ui)?ZZ:14===a?bz:13===a?wz:12===a?KZ:11===a?Tz:void dt();var a;let c;return this.wi.runTransaction(e,i,s,h=>(c=new SL(h,this.Os?this.Os.next():Uo.ct),"readwrite-primary"===t?this.Ti(c).next(g=>!!g||this.Ei(c)).next(g=>{if(!g)throw jr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Ae(ae.FAILED_PRECONDITION,mz);return r(c)}).next(g=>this.vi(c).next(()=>g)):this.Oi(c).next(()=>r(c)))).then(h=>(c.raiseOnCommittedEvent(),h))}Oi(e){return Zb(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ae(ae.FAILED_PRECONDITION,oV)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Zb(e).put("owner",t)}static D(){return ul.D()}Ai(e){const t=Zb(e);return t.get("owner").next(r=>this.Ri(r)?(Ve("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ee.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(jr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,Ie.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Ve("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return jr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){jr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Zb(n){return Ii(n,"owner")}function SM(n){return Ii(n,"clientMetadata")}function lV(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class uV{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=Jt(),i=Jt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new uV(e,t.fromCache,r,i)}}class d3{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(s=>s||this.Gi(e,t,i,r)).next(s=>s||this.Qi(e,t))}Ki(e,t){if(Kz(t))return ee.resolve(null);let r=Fs(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=hM(t,null,"F"),r=Fs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=Jt(...s);return this.Ui.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(h=>{const g=this.ji(t,c);return this.zi(t,g,a,h.readTime)?this.Ki(e,hM(t,null,"F")):this.Wi(e,g,t,h)}))})))}Gi(e,t,r,i){return Kz(t)||i.isEqual(wt.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(s=>{const a=this.ji(t,s);return this.zi(t,a,r,i)?this.Qi(e,t):(TL()<=Vr.in.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),VL(t)),this.Wi(e,a,t,fz(i,-1)))})}ji(e,t){let r=new Kn(Yz(e));return t.forEach((i,s)=>{Pb(e,s)&&(r=r.add(s))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Qi(e,t){return TL()<=Vr.in.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",VL(t)),this.Ui.getDocumentsMatchingQuery(e,t,Vo.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(a=>{s=s.insert(a.key,a)}),s))}}class lY{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new jn(zt),this.Yi=new Yc(s=>Lm(s),Rb),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new u3(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function h3(n,e,t,r){return new lY(n,e,t,r)}function f3(n,e){return cV.apply(this,arguments)}function cV(){return cV=(0,N.Z)(function*(n,e){const t=rt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],c=[];let h=Jt();for(const g of i){a.push(g.batchId);for(const E of g.mutations)h=h.add(E.key)}for(const g of s){c.push(g.batchId);for(const E of g.mutations)h=h.add(E.key)}return t.localDocuments.getDocuments(r,h).next(g=>({er:g,removedBatchIds:a,addedBatchIds:c}))})})}),cV.apply(this,arguments)}function p3(n){const e=rt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function m3(n,e,t){let r=Jt(),i=Jt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let a=po();return t.forEach((c,h)=>{const g=s.get(c);h.isFoundDocument()!==g.isFoundDocument()&&(i=i.add(c)),h.isNoDocument()&&h.version.isEqual(wt.min())?(e.removeEntry(c,h.readTime),a=a.insert(c,h)):!g.isValidDocument()||h.version.compareTo(g.version)>0||0===h.version.compareTo(g.version)&&g.hasPendingWrites?(e.addEntry(h),a=a.insert(c,h)):Ve("LocalStore","Ignoring outdated watch update for ",c,". Current version:",g.version," Watch version:",h.version)}),{nr:a,sr:i}})}function dY(n,e){const t=rt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function hE(n,e){const t=rt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(s=>s?(i=s,ee.resolve(i)):t.Bs.allocateTargetId(r).next(a=>(i=new Jc(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function fE(n,e,t){return dV.apply(this,arguments)}function dV(){return dV=(0,N.Z)(function*(n,e,t){const r=rt(n),i=r.Ji.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!Hh(a))throw a;Ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),dV.apply(this,arguments)}function xM(n,e,t){const r=rt(n);let i=wt.min(),s=Jt();return r.persistence.runTransaction("Execute query","readonly",a=>function(c,h,g){const E=rt(c),b=E.Yi.get(g);return void 0!==b?ee.resolve(E.Ji.get(b)):E.Bs.getTargetData(h,g)}(r,a,Fs(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(a,c.targetId).next(h=>{s=h})}).next(()=>r.Hi.getDocumentsMatchingQuery(a,e,t?i:wt.min(),t?s:Jt())).next(c=>(y3(r,Qz(e),c),{documents:c,ir:s})))}function g3(n,e){const t=rt(n),r=rt(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.le(s,e).next(a=>a?a.target:null))}function _3(n,e){const t=rt(n),r=t.Xi.get(e)||wt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,fz(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(y3(t,e,i),i))}function y3(n,e,t){let r=n.Xi.get(e)||wt.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Xi.set(e,r)}function hV(){return hV=(0,N.Z)(function*(n,e,t,r){const i=rt(n);let s=Jt(),a=po();for(const g of t){const E=e.rr(g.metadata.name);g.document&&(s=s.add(E));const b=e.ur(g);b.setReadTime(e.cr(g.metadata.readTime)),a=a.insert(E,b)}const c=i.Zi.newChangeBuffer({trackRemovals:!0}),h=yield hE(i,(g=r,Fs(rE(mn.fromString(`__bundle__/docs/${g}`)))));var g;return i.persistence.runTransaction("Apply bundle documents","readwrite",g=>m3(g,c,a).next(E=>(c.apply(g),E)).next(E=>i.Bs.removeMatchingKeysForTargetId(g,h.targetId).next(()=>i.Bs.addMatchingKeys(g,s,h.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(g,E.nr,E.sr)).next(()=>E.nr)))}),hV.apply(this,arguments)}function fY(n,e){return fV.apply(this,arguments)}function fV(){return fV=(0,N.Z)(function*(n,e,t=Jt()){const r=yield hE(n,Fs(YL(e.bundledQuery))),i=rt(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const a=$r(e.readTime);if(r.snapshotVersion.compareTo(a)>=0)return i.qs.saveNamedQuery(s,e);const c=r.withResumeToken(ui.EMPTY_BYTE_STRING,a);return i.Ji=i.Ji.insert(c.targetId,c),i.Bs.updateTargetData(s,c).next(()=>i.Bs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Bs.addMatchingKeys(s,t,r.targetId)).next(()=>i.qs.saveNamedQuery(s,e))})}),fV.apply(this,arguments)}function v3(n,e){return`firestore_clients_${n}_${e}`}function E3(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function pV(n,e){return`firestore_targets_${n}_${e}`}class RM{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let s,a="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&(a="string"==typeof i.error.message&&"string"==typeof i.error.code,a&&(s=new Ae(i.error.code,i.error.message))),a?new RM(e,t,i.state,s):(jr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Qb{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Ae(r.error.code,r.error.message))),s?new Qb(e,r.state,i):(jr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class MM{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=UL();for(let a=0;i&&a<r.activeTargetIds.length;++a)i=yz(r.activeTargetIds[a]),s=s.add(r.activeTargetIds[a]);return i?new MM(e,s):(jr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class mV{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new mV(t.clientId,t.onlineState):(jr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class gV{constructor(){this.activeTargetIds=UL()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _V{constructor(e,t,r,i,s){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new jn(zt),this.started=!1,this.yr=[];const a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.pr=v3(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new gV),this.Tr=new RegExp(`^firestore_clients_${a}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${a}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${a}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,N.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const s=e.getItem(v3(e.persistenceKey,i));if(s){const a=MM.ar(i,s);a&&(e.gr=e.gr.insert(a.clientId,a))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(pV(this.persistenceKey,e));if(r){const i=Qb.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(pV(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ve("SharedClientState","READ",e,t),t}setItem(e,t){Ve("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ve("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ve("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void jr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,N.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(s){let a=Uo.ct;if(null!=s)try{const c=JSON.parse(s);Et("number"==typeof c),a=c}catch(c){jr("SharedClientState","Failed to read sequence number from WebStorage",c)}return a}(r.newValue);i!==Uo.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Qr(s)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new RM(this.currentUser,e,t,r),s=E3(this.persistenceKey,this.currentUser,e);this.setItem(s,i.hr())}Cr(e){const t=E3(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=pV(this.persistenceKey,e),s=new Qb(e,t,r);this.setItem(i,s.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return MM.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return RM.ar(new Ei(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return Qb.ar(i,t)}br(e){return mV.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,N.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Ve("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),s=this.Sr(r),a=[],c=[];return s.forEach(h=>{i.has(h)||a.push(h)}),i.forEach(h=>{s.has(h)||c.push(h)}),this.syncEngine.Wr(a,c).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=UL();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class I3{constructor(){this.Hr=new gV,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new gV,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class pY{Yr(e){}shutdown(){}}class T3{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let PM=null;function yV(){return null===PM?PM=268435456+Math.round(2147483648*Math.random()):PM++,"0x"+PM.toString(16)}const mY={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class gY{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const ms="WebChannelConnection";class _Y extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,s){const a=yV(),c=this.To(e,t);Ve("RestConnection",`Sending RPC '${e}' ${a}:`,c,r);const h={};return this.Eo(h,i,s),this.Ao(e,c,h,r).then(g=>(Ve("RestConnection",`Received RPC '${e}' ${a}: `,g),g),g=>{throw ya("RestConnection",`RPC '${e}' ${a} failed with error: `,g,"url: ",c,"request:",r),g})}vo(e,t,r,i,s,a){return this.Io(e,t,r,i,s)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Yv,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}To(e,t){return`${this.mo}/v1/${t}:${mY[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const s=yV();return new Promise((a,c)=>{const h=new pZ;h.setWithCredentials(!0),h.listenOnce(dZ.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case IL.NO_ERROR:const E=h.getResponseJson();Ve(ms,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(E)),a(E);break;case IL.TIMEOUT:Ve(ms,`RPC '${e}' ${s} timed out`),c(new Ae(ae.DEADLINE_EXCEEDED,"Request time out"));break;case IL.HTTP_ERROR:const b=h.getStatus();if(Ve(ms,`RPC '${e}' ${s} failed with status:`,b,"response text:",h.getResponseText()),b>0){let x=h.getResponseJson();Array.isArray(x)&&(x=x[0]);const M=x?.error;if(M&&M.status&&M.message){const O=function(V){const G=V.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(G)>=0?G:ae.UNKNOWN}(M.status);c(new Ae(O,M.message))}else c(new Ae(ae.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new Ae(ae.UNAVAILABLE,"Connection failed."));break;default:dt()}}finally{Ve(ms,`RPC '${e}' ${s} completed.`)}});const g=JSON.stringify(i);Ve(ms,`RPC '${e}' ${s} sending request:`,i),h.send(t,"POST",g,r,15)})}Ro(e,t,r){const i=yV(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=uZ(),c=cZ(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;void 0!==g&&(h.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(h.xmlHttpFactory=new fZ({})),this.Eo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const E=s.join("");Ve(ms,`Creating RPC '${e}' stream ${i}: ${E}`,h);const b=a.createWebChannel(E,h);let x=!1,M=!1;const O=new gY({ro:G=>{M?Ve(ms,`Not sending because RPC '${e}' stream ${i} is closed:`,G):(x||(Ve(ms,`Opening RPC '${e}' stream ${i} transport.`),b.open(),x=!0),Ve(ms,`RPC '${e}' stream ${i} sending:`,G),b.send(G))},oo:()=>b.close()}),V=(G,ne,ce)=>{G.listen(ne,me=>{try{ce(me)}catch(Pe){setTimeout(()=>{throw Pe},0)}})};return V(b,XR.EventType.OPEN,()=>{M||Ve(ms,`RPC '${e}' stream ${i} transport opened.`)}),V(b,XR.EventType.CLOSE,()=>{M||(M=!0,Ve(ms,`RPC '${e}' stream ${i} transport closed`),O.wo())}),V(b,XR.EventType.ERROR,G=>{M||(M=!0,ya(ms,`RPC '${e}' stream ${i} transport errored:`,G),O.wo(new Ae(ae.UNAVAILABLE,"The operation could not be completed")))}),V(b,XR.EventType.MESSAGE,G=>{var ne;if(!M){const ce=G.data[0];Et(!!ce);const Pe=ce.error||(null===(ne=ce[0])||void 0===ne?void 0:ne.error);if(Pe){Ve(ms,`RPC '${e}' stream ${i} received error:`,Pe);const Ye=Pe.status;let Xe=function(Gn){const Di=Jr[Gn];if(void 0!==Di)return mq(Di)}(Ye),Nt=Pe.message;void 0===Xe&&(Xe=ae.INTERNAL,Nt="Unknown error status: "+Ye+" with message "+Pe.message),M=!0,O.wo(new Ae(Xe,Nt)),b.close()}else Ve(ms,`RPC '${e}' stream ${i} received:`,ce),O._o(ce)}}),V(c,hZ.STAT_EVENT,G=>{G.stat===az.PROXY?Ve(ms,`RPC '${e}' stream ${i} detected buffering proxy`):G.stat===az.NOPROXY&&Ve(ms,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{O.fo()},0),O}}function w3(){return typeof window<"u"?window:null}function NM(){return typeof document<"u"?document:null}function Yb(n){return new CQ(n,!0)}class vV{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&Ve("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class b3{constructor(e,t,r,i,s,a,c,h){this.ii=e,this.$o=r,this.Oo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new vV(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,N.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,N.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,N.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(jr(t.toString()),jr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===ae.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new Ae(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,N.Z)(function*(){e.state=0,e.start()}))}tu(e){return Ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class yY extends b3{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function RQ(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(h=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===h?1:"REMOVE"===h?2:"CURRENT"===h?3:"RESET"===h?4:dt(),i=e.targetChange.targetIds||[],s=function(h,g){return h.useProto3Json?(Et(void 0===g||"string"==typeof g),ui.fromBase64String(g||"")):(Et(void 0===g||g instanceof Uint8Array),ui.fromUint8Array(g||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(h){const g=void 0===h.code?ae.UNKNOWN:mq(h.code);return new Ae(g,h.message||"")}(a);t=new Eq(r,i,s,c||null)}else if("documentChange"in e){const r=e.documentChange,i=wu(n,r.document.name),s=$r(r.document.updateTime),a=r.document.createTime?$r(r.document.createTime):wt.min(),c=new Ki({mapValue:{fields:r.document.fields}}),h=Zn.newFoundDocument(i,s,a,c);t=new _M(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=wu(n,r.document),s=r.readTime?$r(r.readTime):wt.min(),a=Zn.newNoDocument(i,s);t=new _M([],r.removedTargetIds||[],a.key,a)}else if("documentRemove"in e){const r=e.documentRemove,i=wu(n,r.document);t=new _M([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return dt();{const r=e.filter,{count:i=0,unchangedNames:s}=r,a=new IQ(i,s);t=new vq(r.targetId,a)}}var h;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return wt.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?wt.min():s.readTime?$r(s.readTime):wt.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=jb(this.serializer),t.addTarget=function(i,s){let a;const c=s.target;if(a=uM(c)?{documents:Rq(i,c)}:{query:QL(i,c)},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=bq(i,s.resumeToken);const h=qL(i,s.expectedCount);null!==h&&(a.expectedCount=h)}else if(s.snapshotVersion.compareTo(wt.min())>0){a.readTime=lE(i,s.snapshotVersion.toTimestamp());const h=qL(i,s.expectedCount);null!==h&&(a.expectedCount=h)}return a}(this.serializer,e);const r=function PQ(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return dt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=jb(this.serializer),t.removeTarget=e,this.Wo(t)}}class vY extends b3{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Et(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function MQ(n,e){return n&&n.length>0?(Et(void 0!==e),n.map(t=>function(r,i){let s=$r(r.updateTime?r.updateTime:i);return s.isEqual(wt.min())&&(s=$r(i)),new _Q(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=$r(e.commitTime);return this.listener.cu(r,t)}return Et(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=jb(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>$b(this.serializer,r))};this.Wo(t)}}class EY extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new Ae(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Io(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ae(ae.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.vo(e,t,r,s,a,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ae(ae.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class TY{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(jr(t),this.mu=!1):Ve("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class wY{constructor(e,t,r,i,s){var a=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(c=>{r.enqueueAndForget((0,N.Z)(function*(){var h;nf(a)&&(Ve("RemoteStore","Restarting streams for network reachability change."),yield(h=(0,N.Z)(function*(g){const E=rt(g);E.vu.add(4),yield pE(E),E.bu.set("Unknown"),E.vu.delete(4),yield Xb(E)}),function(g){return h.apply(this,arguments)})(a))}))}),this.bu=new TY(r,i)}}function Xb(n){return IV.apply(this,arguments)}function IV(){return IV=(0,N.Z)(function*(n){if(nf(n))for(const e of n.Ru)yield e(!0)}),IV.apply(this,arguments)}function pE(n){return TV.apply(this,arguments)}function TV(){return TV=(0,N.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),TV.apply(this,arguments)}function kM(n,e){const t=rt(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),AV(t)?bV(t):gE(t).Ko()&&wV(t,e))}function Jb(n,e){const t=rt(n),r=gE(t);t.Au.delete(e),r.Ko()&&A3(t,e),0===t.Au.size&&(r.Ko()?r.jo():nf(t)&&t.bu.set("Unknown"))}function wV(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(wt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}gE(n).su(e)}function A3(n,e){n.Vu.qt(e),gE(n).iu(e)}function bV(n){n.Vu=new wQ({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),gE(n).start(),n.bu.gu()}function AV(n){return nf(n)&&!gE(n).Uo()&&n.Au.size>0}function nf(n){return 0===rt(n).vu.size}function D3(n){n.Vu=void 0}function bY(n){return DV.apply(this,arguments)}function DV(){return DV=(0,N.Z)(function*(n){n.Au.forEach((e,t)=>{wV(n,e)})}),DV.apply(this,arguments)}function AY(n,e){return CV.apply(this,arguments)}function CV(){return CV=(0,N.Z)(function*(n,e){D3(n),AV(n)?(n.bu.Iu(e),bV(n)):n.bu.set("Unknown")}),CV.apply(this,arguments)}function DY(n,e,t){return SV.apply(this,arguments)}function SV(){return SV=(0,N.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof Eq&&2===e.state&&e.cause)try{yield(r=(0,N.Z)(function*(i,s){const a=s.cause;for(const c of s.targetIds)i.Au.has(c)&&(yield i.remoteSyncer.rejectListen(c,a),i.Au.delete(c),i.Vu.removeTarget(c))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){Ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield OM(n,r)}else if(e instanceof _M?n.Vu.Ht(e):e instanceof vq?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(wt.min()))try{const r=yield p3(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const a=i.Vu.ce(s);return a.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const g=i.Au.get(h);g&&i.Au.set(h,g.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,h)=>{const g=i.Au.get(c);if(!g)return;i.Au.set(c,g.withResumeToken(ui.EMPTY_BYTE_STRING,g.snapshotVersion)),A3(i,c);const E=new Jc(g.target,c,h,g.sequenceNumber);wV(i,E)}),i.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){Ve("RemoteStore","Failed to raise snapshot:",r),yield OM(n,r)}var r}),SV.apply(this,arguments)}function OM(n,e,t){return xV.apply(this,arguments)}function xV(){return xV=(0,N.Z)(function*(n,e,t){if(!Hh(e))throw e;n.vu.add(1),yield pE(n),n.bu.set("Offline"),t||(t=()=>p3(n.localStore)),n.asyncQueue.enqueueRetryable((0,N.Z)(function*(){Ve("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield Xb(n)}))}),xV.apply(this,arguments)}function C3(n,e){return e().catch(t=>OM(n,t,e))}function mE(n){return RV.apply(this,arguments)}function RV(){return RV=(0,N.Z)(function*(n){const e=rt(n),t=rf(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;CY(e);)try{const i=yield dY(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,SY(e,i)}catch(i){yield OM(e,i)}S3(e)&&x3(e)}),RV.apply(this,arguments)}function CY(n){return nf(n)&&n.Eu.length<10}function SY(n,e){n.Eu.push(e);const t=rf(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function S3(n){return nf(n)&&!rf(n).Uo()&&n.Eu.length>0}function x3(n){rf(n).start()}function xY(n){return MV.apply(this,arguments)}function MV(){return MV=(0,N.Z)(function*(n){rf(n).hu()}),MV.apply(this,arguments)}function RY(n){return PV.apply(this,arguments)}function PV(){return PV=(0,N.Z)(function*(n){const e=rf(n);for(const t of n.Eu)e.uu(t.mutations)}),PV.apply(this,arguments)}function MY(n,e,t){return NV.apply(this,arguments)}function NV(){return NV=(0,N.Z)(function*(n,e,t){const r=n.Eu.shift(),i=$L.from(r,e,t);yield C3(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield mE(n)}),NV.apply(this,arguments)}function PY(n,e){return kV.apply(this,arguments)}function kV(){return kV=(0,N.Z)(function*(n,e){var t;e&&rf(n).ou&&(yield(t=(0,N.Z)(function*(r,i){if(pq(s=i.code)&&s!==ae.ABORTED){const a=r.Eu.shift();rf(r).Qo(),yield C3(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),yield mE(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),S3(n)&&x3(n)}),kV.apply(this,arguments)}function R3(n,e){return OV.apply(this,arguments)}function OV(){return OV=(0,N.Z)(function*(n,e){const t=rt(n);t.asyncQueue.verifyOperationInProgress(),Ve("RemoteStore","RemoteStore received new credentials");const r=nf(t);t.vu.add(3),yield pE(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield Xb(t)}),OV.apply(this,arguments)}function FV(n,e){return LV.apply(this,arguments)}function LV(){return LV=(0,N.Z)(function*(n,e){const t=rt(n);e?(t.vu.delete(2),yield Xb(t)):e||(t.vu.add(2),yield pE(t),t.bu.set("Unknown"))}),LV.apply(this,arguments)}function gE(n){return n.Su||(n.Su=function(e,t,r){const i=rt(e);return i.fu(),new yY(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:bY.bind(null,n),ao:AY.bind(null,n),nu:DY.bind(null,n)}),n.Ru.push(function(){var e=(0,N.Z)(function*(t){t?(n.Su.Qo(),AV(n)?bV(n):n.bu.set("Unknown")):(yield n.Su.stop(),D3(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function rf(n){return n.Du||(n.Du=function(e,t,r){const i=rt(e);return i.fu(),new vY(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:xY.bind(null,n),ao:PY.bind(null,n),au:RY.bind(null,n),cu:MY.bind(null,n)}),n.Ru.push(function(){var e=(0,N.Z)(function*(t){t?(n.Du.Qo(),yield mE(n)):(yield n.Du.stop(),n.Eu.length>0&&(Ve("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class VV{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new li,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}static createAndSchedule(e,t,r,i,s){const a=Date.now()+r,c=new VV(e,t,a,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ae(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _E(n,e){if(jr("AsyncQueue",`${e}: ${n}`),Hh(n))return new Ae(ae.UNAVAILABLE,`${e}: ${n}`);throw n}class yE{constructor(e){this.comparator=e?(t,r)=>e(t,r)||et.comparator(t.key,r.key):(t,r)=>et.comparator(t.key,r.key),this.keyedMap=Nb(),this.sortedSet=new jn(this.comparator)}static emptySet(e){return new yE(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof yE)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new yE;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class M3{constructor(){this.Cu=new jn(et.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):dt():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class vE{constructor(e,t,r,i,s,a,c,h,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=g}static fromInitialDocuments(e,t,r,i,s){const a=[];return t.forEach(c=>{a.push({type:0,doc:c})}),new vE(e,t,yE.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mb(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class NY{constructor(){this.Nu=void 0,this.listeners=[]}}class kY{constructor(){this.queries=new Yc(e=>Zz(e),Mb),this.onlineState="Unknown",this.ku=new Set}}function UV(n,e){return BV.apply(this,arguments)}function BV(){return BV=(0,N.Z)(function*(n,e){const t=rt(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new NY),i)try{s.Nu=yield t.onListen(r)}catch(a){const c=_E(a,`Initialization of query '${VL(e.query)}' failed`);return void e.onError(c)}t.queries.set(r,s),s.listeners.push(e),e.Mu(t.onlineState),s.Nu&&e.$u(s.Nu)&&GV(t)}),BV.apply(this,arguments)}function jV(n,e){return $V.apply(this,arguments)}function $V(){return $V=(0,N.Z)(function*(n,e){const t=rt(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const a=s.listeners.indexOf(e);a>=0&&(s.listeners.splice(a,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),$V.apply(this,arguments)}function OY(n,e){const t=rt(n);let r=!1;for(const i of e){const a=t.queries.get(i.query);if(a){for(const c of a.listeners)c.$u(i)&&(r=!0);a.Nu=i}}r&&GV(t)}function FY(n,e,t){const r=rt(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function GV(n){n.ku.forEach(e=>{e.next()})}class HV{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new vE(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=vE.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class LY{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class P3{constructor(e){this.serializer=e}rr(e){return wu(this.serializer,e)}ur(e){return e.metadata.exists?xq(this.serializer,e.document,!1):Zn.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return $r(e)}}class VY{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=N3(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=mn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new P3(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.rr(i.metadata.name);for(const a of i.metadata.queries){const c=(t.get(a)||Jt()).add(s);t.set(a,c)}}return t}complete(){var e=this;return(0,N.Z)(function*(){const t=yield function hY(n,e,t,r){return hV.apply(this,arguments)}(e.localStore,new P3(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield fY(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function N3(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class k3{constructor(e){this.key=e}}class O3{constructor(e){this.key=e}}class F3{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Jt(),this.mutatedKeys=Jt(),this.tc=Yz(e),this.ec=new yE(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new M3,i=t?t.ec:this.ec;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,c=!1;const h="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,g="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((E,b)=>{const x=i.get(E),M=Pb(this.query,b)?b:null,O=!!x&&this.mutatedKeys.has(x.key),V=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let G=!1;x&&M?x.data.isEqual(M.data)?O!==V&&(r.track({type:3,doc:M}),G=!0):this.rc(x,M)||(r.track({type:2,doc:M}),G=!0,(h&&this.tc(M,h)>0||g&&this.tc(M,g)<0)&&(c=!0)):!x&&M?(r.track({type:0,doc:M}),G=!0):x&&!M&&(r.track({type:1,doc:x}),G=!0,(h||g)&&(c=!0)),G&&(M?(a=a.add(M),s=V?s.add(E):s.delete(E)):(a=a.delete(E),s=s.delete(E)))}),null!==this.query.limit)for(;a.size>this.query.limit;){const E="F"===this.query.limitType?a.last():a.first();a=a.delete(E.key),s=s.delete(E.key),r.track({type:1,doc:E})}return{ec:a,ic:r,zi:c,mutatedKeys:s}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((g,E)=>function(b,x){const M=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return dt()}};return M(b)-M(x)}(g.type,E.type)||this.tc(g.doc,E.doc)),this.oc(r);const a=t?this.uc():[],c=0===this.Zu.size&&this.current?1:0,h=c!==this.Xu;return this.Xu=c,0!==s.length||h?{snapshot:new vE(this.query,e.ec,i,s,e.mutatedKeys,0===c,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:a}:{cc:a}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new M3,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Jt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new O3(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new k3(r))}),t}hc(e){this.Yu=e.ir,this.Zu=Jt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return vE.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class UY{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class BY{constructor(e){this.key=e,this.fc=!1}}class jY{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.dc={},this.wc=new Yc(c=>Zz(c),Mb),this._c=new Map,this.mc=new Set,this.gc=new jn(et.comparator),this.yc=new Map,this.Ic=new iV,this.Tc={},this.Ec=new Map,this.Ac=qm.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function $Y(n,e){return zV.apply(this,arguments)}function zV(){return zV=(0,N.Z)(function*(n,e){const t=pU(n);let r,i;const s=t.wc.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const a=yield hE(t.localStore,Fs(e)),c=t.sharedClientState.addLocalQueryTarget(a.targetId);r=a.targetId,i=yield qV(t,e,r,"current"===c,a.resumeToken),t.isPrimaryClient&&kM(t.remoteStore,a)}return i}),zV.apply(this,arguments)}function qV(n,e,t,r,i){return WV.apply(this,arguments)}function WV(){return WV=(0,N.Z)(function*(n,e,t,r,i){n.Rc=(b,x,M)=>{return(O=(0,N.Z)(function*(V,G,ne,ce){let me=G.view.sc(ne);me.zi&&(me=yield xM(V.localStore,G.query,!1).then(({documents:Xe})=>G.view.sc(Xe,me)));const Pe=ce&&ce.targetChanges.get(G.targetId),Ye=G.view.applyChanges(me,V.isPrimaryClient,Pe);return rU(V,G.targetId,Ye.cc),Ye.snapshot}),function(V,G,ne,ce){return O.apply(this,arguments)})(n,b,x,M);var O};const s=yield xM(n.localStore,e,!0),a=new F3(e,s.ir),c=a.sc(s.documents),h=Ub.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),g=a.applyChanges(c,n.isPrimaryClient,h);rU(n,t,g.cc);const E=new UY(e,t,a);return n.wc.set(e,E),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),g.snapshot}),WV.apply(this,arguments)}function GY(n,e){return KV.apply(this,arguments)}function KV(){return KV=(0,N.Z)(function*(n,e){const t=rt(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(s=>!Mb(s,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield fE(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Jb(t.remoteStore,r.targetId),EE(t,r.targetId)}).catch(Gh))):(EE(t,r.targetId),yield fE(t.localStore,r.targetId,!0))}),KV.apply(this,arguments)}function ZV(){return ZV=(0,N.Z)(function*(n,e,t){const r=mU(n);try{const i=yield function(s,a){const c=rt(s),h=cr.now(),g=a.reduce((x,M)=>x.add(M.key),Jt());let E,b;return c.persistence.runTransaction("Locally write mutations","readwrite",x=>{let M=po(),O=Jt();return c.Zi.getEntries(x,g).next(V=>{M=V,M.forEach((G,ne)=>{ne.isValidDocument()||(O=O.add(G))})}).next(()=>c.localDocuments.getOverlayedDocuments(x,M)).next(V=>{E=V;const G=[];for(const ne of a){const ce=vQ(ne,E.get(ne.key).overlayedDocument);null!=ce&&G.push(new Xc(ne.key,ce,Oz(ce.value.mapValue),dr.exists(!0)))}return c.mutationQueue.addMutationBatch(x,h,G,a)}).next(V=>{b=V;const G=V.applyToLocalDocumentSet(E,O);return c.documentOverlayCache.saveOverlays(x,V.batchId,G)})}).then(()=>({batchId:b.batchId,changes:Jz(E)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let h=s.Tc[s.currentUser.toKey()];h||(h=new jn(zt)),h=h.insert(a,c),s.Tc[s.currentUser.toKey()]=h}(r,i.batchId,t),yield ed(r,i.changes),yield mE(r.remoteStore)}catch(i){const s=_E(i,"Failed to persist write");t.reject(s)}}),ZV.apply(this,arguments)}function L3(n,e){return QV.apply(this,arguments)}function QV(){return QV=(0,N.Z)(function*(n,e){const t=rt(n);try{const r=yield function cY(n,e){const t=rt(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const c=[];e.targetChanges.forEach((E,b)=>{const x=i.get(b);if(!x)return;c.push(t.Bs.removeMatchingKeys(s,E.removedDocuments,b).next(()=>t.Bs.addMatchingKeys(s,E.addedDocuments,b)));let M=x.withSequenceNumber(s.currentSequenceNumber);var O,V,G;null!==e.targetMismatches.get(b)?M=M.withResumeToken(ui.EMPTY_BYTE_STRING,wt.min()).withLastLimboFreeSnapshotVersion(wt.min()):E.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(E.resumeToken,r)),i=i.insert(b,M),V=M,G=E,(0===(O=x).resumeToken.approximateByteSize()||V.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=3e8||G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0)&&c.push(t.Bs.updateTargetData(s,M))});let h=po(),g=Jt();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,E))}),c.push(m3(s,a,e.documentUpdates).next(E=>{h=E.nr,g=E.sr})),!r.isEqual(wt.min())){const E=t.Bs.getLastRemoteSnapshotVersion(s).next(b=>t.Bs.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(E)}return ee.waitFor(c).next(()=>a.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,h,g)).next(()=>h)}).then(s=>(t.Ji=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const a=t.yc.get(s);a&&(Et(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.fc=!0:i.modifiedDocuments.size>0?Et(a.fc):i.removedDocuments.size>0&&(Et(a.fc),a.fc=!1))}),yield ed(t,r,e)}catch(r){yield Gh(r)}}),QV.apply(this,arguments)}function V3(n,e,t){const r=rt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((s,a)=>{const c=a.view.Mu(e);c.snapshot&&i.push(c.snapshot)}),function(s,a){const c=rt(s);c.onlineState=a;let h=!1;c.queries.forEach((g,E)=>{for(const b of E.listeners)b.Mu(a)&&(h=!0)}),h&&GV(c)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function zY(n,e,t){return YV.apply(this,arguments)}function YV(){return YV=(0,N.Z)(function*(n,e,t){const r=rt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),s=i&&i.key;if(s){let a=new jn(et.comparator);a=a.insert(s,Zn.newNoDocument(s,wt.min()));const c=Jt().add(s),h=new Vb(wt.min(),new Map,new jn(zt),a,c);yield L3(r,h),r.gc=r.gc.remove(s),r.yc.delete(e),iU(r)}else yield fE(r.localStore,e,!1).then(()=>EE(r,e,t)).catch(Gh)}),YV.apply(this,arguments)}function qY(n,e){return XV.apply(this,arguments)}function XV(){return XV=(0,N.Z)(function*(n,e){const t=rt(n),r=e.batch.batchId;try{const i=yield function uY(n,e){const t=rt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Zi.newChangeBuffer({trackRemovals:!0});return function(a,c,h,g){const E=h.batch,b=E.keys();let x=ee.resolve();return b.forEach(M=>{x=x.next(()=>g.getEntry(c,M)).next(O=>{const V=h.docVersions.get(M);Et(null!==V),O.version.compareTo(V)<0&&(E.applyToRemoteDocument(O,h),O.isValidDocument()&&(O.setReadTime(h.commitVersion),g.addEntry(O)))})}),x.next(()=>a.mutationQueue.removeMutationBatch(c,E))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Jt();for(let h=0;h<a.mutationResults.length;++h)a.mutationResults[h].transformResults.length>0&&(c=c.add(a.batch.mutations[h].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);nU(t,r,null),tU(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ed(t,i)}catch(i){yield Gh(i)}}),XV.apply(this,arguments)}function WY(n,e,t){return JV.apply(this,arguments)}function JV(){return JV=(0,N.Z)(function*(n,e,t){const r=rt(n);try{const i=yield function(s,a){const c=rt(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let g;return c.mutationQueue.lookupMutationBatch(h,a).next(E=>(Et(null!==E),g=E.keys(),c.mutationQueue.removeMutationBatch(h,E))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,g,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,g)).next(()=>c.localDocuments.getDocuments(h,g))})}(r.localStore,e);nU(r,e,t),tU(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ed(r,i)}catch(i){yield Gh(i)}}),JV.apply(this,arguments)}function eU(){return eU=(0,N.Z)(function*(n,e){const t=rt(n);nf(t.remoteStore)||Ve("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const a=rt(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=_E(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),eU.apply(this,arguments)}function tU(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function nU(n,e,t){const r=rt(n);let i=r.Tc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function EE(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||U3(n,r)})}function U3(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(Jb(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),iU(n))}function rU(n,e,t){for(const r of t)r instanceof k3?(n.Ic.addReference(r.key,e),ZY(n,r)):r instanceof O3?(Ve("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||U3(n,r.key)):dt()}function ZY(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Ve("SyncEngine","New document in limbo: "+t),n.mc.add(r),iU(n))}function iU(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new et(mn.fromString(e)),r=n.Ac.next();n.yc.set(r,new BY(t)),n.gc=n.gc.insert(t,r),kM(n.remoteStore,new Jc(Fs(rE(t.path)),r,"TargetPurposeLimboResolution",Uo.ct))}}function ed(n,e,t){return sU.apply(this,arguments)}function sU(){return sU=(0,N.Z)(function*(n,e,t){const r=rt(n),i=[],s=[],a=[];var c;r.wc.isEmpty()||(r.wc.forEach((c,h)=>{a.push(r.Rc(h,e,t).then(g=>{if((g||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(h.targetId,g?.fromCache?"not-current":"current"),g){i.push(g);const E=uV.Li(h.targetId,g);s.push(E)}}))}),yield Promise.all(a),r.dc.nu(i),yield(c=(0,N.Z)(function*(h,g){const E=rt(h);try{yield E.persistence.runTransaction("notifyLocalViewChanges","readwrite",b=>ee.forEach(g,x=>ee.forEach(x.Fi,M=>E.persistence.referenceDelegate.addReference(b,x.targetId,M)).next(()=>ee.forEach(x.Bi,M=>E.persistence.referenceDelegate.removeReference(b,x.targetId,M)))))}catch(b){if(!Hh(b))throw b;Ve("LocalStore","Failed to update sequence numbers: "+b)}for(const b of g){const x=b.targetId;if(!b.fromCache){const M=E.Ji.get(x),V=M.withLastLimboFreeSnapshotVersion(M.snapshotVersion);E.Ji=E.Ji.insert(x,V)}}}),function(h,g){return c.apply(this,arguments)})(r.localStore,s))}),sU.apply(this,arguments)}function QY(n,e){return oU.apply(this,arguments)}function oU(){return oU=(0,N.Z)(function*(n,e){const t=rt(n);if(!t.currentUser.isEqual(e)){Ve("SyncEngine","User change. New user:",e.toKey());const r=yield f3(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(a=>{a.forEach(c=>{c.reject(new Ae(ae.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ed(t,r.er)}var i}),oU.apply(this,arguments)}function YY(n,e){const t=rt(n),r=t.yc.get(e);if(r&&r.fc)return Jt().add(r.key);{let i=Jt();const s=t._c.get(e);if(!s)return i;for(const a of s){const c=t.wc.get(a);i=i.unionWith(c.view.nc)}return i}}function XY(n,e){return aU.apply(this,arguments)}function aU(){return aU=(0,N.Z)(function*(n,e){const t=rt(n),r=yield xM(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&rU(t,e.targetId,i.cc),i}),aU.apply(this,arguments)}function JY(n,e){return lU.apply(this,arguments)}function lU(){return lU=(0,N.Z)(function*(n,e){const t=rt(n);return _3(t.localStore,e).then(r=>ed(t,r))}),lU.apply(this,arguments)}function eX(n,e,t,r){return uU.apply(this,arguments)}function uU(){return uU=(0,N.Z)(function*(n,e,t,r){const i=rt(n),s=yield function(a,c){const h=rt(a),g=rt(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",E=>g.Sn(E,c).next(b=>b?h.localDocuments.getDocuments(E,b):ee.resolve(null)))}(i.localStore,e);var c;null!==s?("pending"===t?yield mE(i.remoteStore):"acknowledged"===t||"rejected"===t?(nU(i,e,r||null),tU(i,e),c=e,rt(rt(i.localStore).mutationQueue).Cn(c)):dt(),yield ed(i,s)):Ve("SyncEngine","Cannot apply mutation batch with id: "+e)}),uU.apply(this,arguments)}function cU(){return cU=(0,N.Z)(function*(n,e){const t=rt(n);if(pU(t),mU(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield B3(t,r.toArray());t.vc=!0,yield FV(t.remoteStore,!0);for(const s of i)kM(t.remoteStore,s)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((s,a)=>{t.sharedClientState.isLocalQueryTarget(a)?r.push(a):i=i.then(()=>(EE(t,a),fE(t.localStore,a,!0))),Jb(t.remoteStore,a)}),yield i,yield B3(t,r),function(s){const a=rt(s);a.yc.forEach((c,h)=>{Jb(a.remoteStore,h)}),a.Ic.Ts(),a.yc=new Map,a.gc=new jn(et.comparator)}(t),t.vc=!1,yield FV(t.remoteStore,!1)}}),cU.apply(this,arguments)}function B3(n,e,t){return dU.apply(this,arguments)}function dU(){return dU=(0,N.Z)(function*(n,e,t){const r=rt(n),i=[],s=[];for(const a of e){let c;const h=r._c.get(a);if(h&&0!==h.length){c=yield hE(r.localStore,Fs(h[0]));for(const g of h){const E=r.wc.get(g),b=yield XY(r,E);b.snapshot&&s.push(b.snapshot)}}else{const g=yield g3(r.localStore,a);c=yield hE(r.localStore,g),yield qV(r,j3(g),a,!1,c.resumeToken)}i.push(c)}return r.dc.nu(s),i}),dU.apply(this,arguments)}function j3(n){return Wz(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function nX(n){const e=rt(n);return rt(rt(e.localStore).persistence).$i()}function rX(n,e,t,r){return hU.apply(this,arguments)}function hU(){return hU=(0,N.Z)(function*(n,e,t,r){const i=rt(n);if(i.vc)return void Ve("SyncEngine","Ignoring unexpected query state notification.");const s=i._c.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const a=yield _3(i.localStore,Qz(s[0])),c=Vb.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,ui.EMPTY_BYTE_STRING);yield ed(i,a,c);break}case"rejected":yield fE(i.localStore,e,!0),EE(i,e,r);break;default:dt()}}),hU.apply(this,arguments)}function iX(n,e,t){return fU.apply(this,arguments)}function fU(){return fU=(0,N.Z)(function*(n,e,t){const r=pU(n);if(r.vc){for(const i of e){if(r._c.has(i)){Ve("SyncEngine","Adding an already active target "+i);continue}const s=yield g3(r.localStore,i),a=yield hE(r.localStore,s);yield qV(r,j3(s),a.targetId,!1,a.resumeToken),kM(r.remoteStore,a)}for(const i of t)r._c.has(i)&&(yield fE(r.localStore,i,!1).then(()=>{Jb(r.remoteStore,i),EE(r,i)}).catch(Gh))}}),fU.apply(this,arguments)}function pU(n){const e=rt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=L3.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YY.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zY.bind(null,e),e.dc.nu=OY.bind(null,e.eventManager),e.dc.Pc=FY.bind(null,e.eventManager),e}function mU(n){const e=rt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=qY.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=WY.bind(null,e),e}class eA{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,N.Z)(function*(){t.serializer=Yb(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return h3(this.persistence,new d3,e.initialUser,this.serializer)}createPersistence(e){return new sV(DM.zs,this.serializer)}createSharedClientState(e){return new I3}terminate(){var e=this;return(0,N.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class gU extends eA{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,N.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield mU(r.Vc.syncEngine),yield mE(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return h3(this.persistence,new d3,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new t3(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new MZ(t,this.persistence);return new RZ(e.asyncQueue,r)}createPersistence(e){const t=lV(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ps.withCacheSize(this.cacheSizeBytes):ps.DEFAULT;return new aV(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,w3(),NM(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new I3}}class $3 extends gU{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,N.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof _V&&(r.sharedClientState.syncEngine={jr:eX.bind(null,i),zr:rX.bind(null,i),Wr:iX.bind(null,i),$i:nX.bind(null,i),Qr:JY.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var s=(0,N.Z)(function*(a){yield function tX(n,e){return cU.apply(this,arguments)}(r.Vc.syncEngine,a),r.gcScheduler&&(a&&!r.gcScheduler.started?r.gcScheduler.start():a||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(a&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():a||r.indexBackfillerScheduler.stop())});return function(a){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=w3();if(!_V.D(t))throw new Ae(ae.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=lV(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new _V(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class IE{initialize(e,t){var r=this;return(0,N.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>V3(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=QY.bind(null,r.syncEngine),yield FV(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new kY}createDatastore(e){const t=Yb(e.databaseInfo.databaseId),r=new _Y(e.databaseInfo);return new EY(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=c=>V3(this.syncEngine,c,0),a=T3.D()?new T3:new pY,new wY(t,r,i,s,a);var t,r,i,s,a}createSyncEngine(e,t){return function(r,i,s,a,c,h,g){const E=new jY(r,i,s,a,c,h);return g&&(E.vc=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,N.Z)(function*(t){const r=rt(t);Ve("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield pE(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function G3(n,e=10240){let t=0;return{read:()=>(0,N.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,N.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class FM{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):jr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class aX{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new li,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,N.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,N.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,N.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const s=yield e.$c(i);return new LY(JSON.parse(s),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,N.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,N.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,N.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class lX{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,N.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ae(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,N.Z)(function*(s,a){const c=rt(s),h=jb(c.serializer)+"/documents",g={documents:a.map(M=>Bb(c.serializer,M))},E=yield c.vo("BatchGetDocuments",h,g,a.length),b=new Map;E.forEach(M=>{const O=function xQ(n,e){return"found"in e?function(t,r){Et(!!r.found);const i=wu(t,r.found.name),s=$r(r.found.updateTime),a=r.found.createTime?$r(r.found.createTime):wt.min(),c=new Ki({mapValue:{fields:r.found.fields}});return Zn.newFoundDocument(i,s,a,c)}(n,e):"missing"in e?function(t,r){Et(!!r.missing),Et(!!r.readTime);const i=wu(t,r.missing),s=$r(r.readTime);return Zn.newNoDocument(i,s)}(n,e):dt()}(c.serializer,M);b.set(O.key.toString(),O)});const x=[];return a.forEach(M=>{const O=b.get(M.toString());Et(!!O),x.push(O)}),x}),function(s,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new aE(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,N.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=et.fromPath(i);e.mutations.push(new BL(s,e.precondition(s)))}),yield(r=(0,N.Z)(function*(i,s){const a=rt(i),c=jb(a.serializer)+"/documents",h={writes:s.map(g=>$b(a.serializer,g))};yield a.Io("Commit",c,h)}),function(i,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw dt();t=wt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ae(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(wt.min())?dr.exists(!1):dr.updateTime(t):dr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(wt.min()))throw new Ae(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return dr.updateTime(t)}return dr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class uX{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Bc=r.maxAttempts,this.qo=new vV(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,N.Z)(function*(){const t=new lX(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Uc(s)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!bb(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!pq(t)}return!1}}class cX{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ei.UNAUTHENTICATED,this.clientId=dz.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var a=(0,N.Z)(function*(c){Ve("FirestoreClient","Received user=",c.uid),yield s.authCredentialListener(c),s.user=c});return function(c){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(r,a=>(Ve("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}getConfiguration(){var e=this;return(0,N.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ae(ae.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new li;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,N.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=_E(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function LM(n,e){return _U.apply(this,arguments)}function _U(){return _U=(0,N.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ve("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,N.Z)(function*(s){r.isEqual(s)||(yield f3(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),_U.apply(this,arguments)}function yU(n,e){return vU.apply(this,arguments)}function vU(){return vU=(0,N.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield EU(n);Ve("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>R3(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>R3(e.remoteStore,s)),n._onlineComponents=e}),vU.apply(this,arguments)}function H3(n){return"FirebaseError"===n.name?n.code===ae.FAILED_PRECONDITION||n.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function EU(n){return IU.apply(this,arguments)}function IU(){return IU=(0,N.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ve("FirestoreClient","Using user provided OfflineComponentProvider");try{yield LM(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!H3(t))throw t;ya("Error using user provided cache. Falling back to memory cache: "+t),yield LM(n,new eA)}}else Ve("FirestoreClient","Using default OfflineComponentProvider"),yield LM(n,new eA);return n._offlineComponents}),IU.apply(this,arguments)}function VM(n){return TU.apply(this,arguments)}function TU(){return TU=(0,N.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ve("FirestoreClient","Using user provided OnlineComponentProvider"),yield yU(n,n._uninitializedComponentsProvider._online)):(Ve("FirestoreClient","Using default OnlineComponentProvider"),yield yU(n,new IE))),n._onlineComponents}),TU.apply(this,arguments)}function z3(n){return EU(n).then(e=>e.persistence)}function UM(n){return EU(n).then(e=>e.localStore)}function q3(n){return VM(n).then(e=>e.remoteStore)}function wU(n){return VM(n).then(e=>e.syncEngine)}function TE(n){return bU.apply(this,arguments)}function bU(){return bU=(0,N.Z)(function*(n){const e=yield VM(n),t=e.eventManager;return t.onListen=$Y.bind(null,e.syncEngine),t.onUnlisten=GY.bind(null,e.syncEngine),t}),bU.apply(this,arguments)}function K3(n,e,t={}){const r=new li;return n.asyncQueue.enqueueAndForget((0,N.Z)(function*(){return function(i,s,a,c,h){const g=new FM({next:b=>{s.enqueueAndForget(()=>jV(i,E));const x=b.docs.has(a);!x&&b.fromCache?h.reject(new Ae(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&b.fromCache&&c&&"server"===c.source?h.reject(new Ae(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(b)},error:b=>h.reject(b)}),E=new HV(rE(a.path),g,{includeMetadataChanges:!0,Ku:!0});return UV(i,E)}(yield TE(n),n.asyncQueue,e,t,r)})),r.promise}function Z3(n,e,t={}){const r=new li;return n.asyncQueue.enqueueAndForget((0,N.Z)(function*(){return function(i,s,a,c,h){const g=new FM({next:b=>{s.enqueueAndForget(()=>jV(i,E)),b.fromCache&&"server"===c.source?h.reject(new Ae(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(b)},error:b=>h.reject(b)}),E=new HV(a,g,{includeMetadataChanges:!0,Ku:!0});return UV(i,E)}(yield TE(n),n.asyncQueue,e,t,r)})),r.promise}function Q3(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const Y3=new Map;function AU(n,e,t){if(!t)throw new Ae(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function X3(n,e,t,r){if(!0===e&&!0===r)throw new Ae(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function J3(n){if(!et.isDocumentKey(n))throw new Ae(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function e4(n){if(et.isDocumentKey(n))throw new Ae(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function BM(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":dt()}function hn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ae(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=BM(n);throw new Ae(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function t4(n,e){if(e<=0)throw new Ae(ae.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class n4{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Ae(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ae(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}X3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Q3(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new Ae(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ae(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ae(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class tA{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new n4({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ae(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ae(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new n4(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new yZ;switch(t.type){case"firstParty":return new TZ(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ae(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Y3.get(e);t&&(Ve("ComponentProvider","Removing Datastore"),Y3.delete(e),t.terminate())}(this),Promise.resolve()}}class Qn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qn(this.firestore,e,this._key)}}class Zi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Zi(this.firestore,e,this._query)}}class bu extends Zi{constructor(e,t,r){super(e,t,rE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qn(this.firestore,null,new et(e))}withConverter(e){return new bu(this.firestore,e,this._path)}}function s4(n,e,...t){if(n=(0,Ie.m9)(n),AU("collection","path",e),n instanceof tA){const r=mn.fromString(e,...t);return e4(r),new bu(n,null,r)}{if(!(n instanceof Qn||n instanceof bu))throw new Ae(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mn.fromString(e,...t));return e4(r),new bu(n.firestore,null,r)}}function jM(n,e,...t){if(n=(0,Ie.m9)(n),1===arguments.length&&(e=dz.A()),AU("doc","path",e),n instanceof tA){const r=mn.fromString(e,...t);return J3(r),new Qn(n,null,new et(r))}{if(!(n instanceof Qn||n instanceof bu))throw new Ae(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mn.fromString(e,...t));return J3(r),new Qn(n.firestore,n instanceof bu?n.converter:null,new et(r))}}function o4(n,e){return n=(0,Ie.m9)(n),e=(0,Ie.m9)(e),(n instanceof Qn||n instanceof bu)&&(e instanceof Qn||e instanceof bu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function DU(n,e){return n=(0,Ie.m9)(n),e=(0,Ie.m9)(e),n instanceof Zi&&e instanceof Zi&&n.firestore===e.firestore&&Mb(n._query,e._query)&&n.converter===e.converter}class EX{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new vV(this,"async_queue_retry"),this.Xc=()=>{const t=NM();t&&Ve("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=NM();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=NM();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new li;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,N.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Hh(t))throw t;Ve("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,jr("INTERNAL UNHANDLED ERROR: ",function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),a}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=VV.createAndSchedule(this,e,t,r,s=>this.na(s));return this.zc.push(i),i}Zc(){this.Wc&&dt()}verifyOperationInProgress(){}sa(){var e=this;return(0,N.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function CU(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class IX{constructor(){this._progressObserver={},this._taskCompletionResolver=new li,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Yn extends tA{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new EX,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||a4(this),this._firestoreClient.terminate()}}function Gr(n){return n._firestoreClient||a4(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function a4(n){var e,t,r;const i=n._freezeSettings(),s=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new XZ(n._databaseId,c,n._persistenceKey,(g=i).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,Q3(g.experimentalLongPollingOptions),g.useFetchStreams));var c,g;n._firestoreClient=new cX(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function l4(n,e,t){const r=new li;return n.asyncQueue.enqueue((0,N.Z)(function*(){try{yield LM(n,t),yield yU(n,e),r.resolve()}catch(i){const s=i;if(!H3(s))throw s;ya("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function u4(n){if(n._initialized||n._terminated)throw new Ae(ae.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Au{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Au(ui.fromBase64String(e))}catch(t){throw new Ae(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Au(ui.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class td{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ae(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Sr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Km{constructor(e){this._methodName=e}}class $M{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ae(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ae(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return zt(this._lat,e._lat)||zt(this._long,e._long)}}const PX=/^__.*__$/;class NX{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Xc(e,this.data,this.fieldMask,t,this.fieldTransforms):new oE(e,this.data,t,this.fieldTransforms)}}class c4{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Xc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function d4(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw dt()}}class GM{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new GM(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return qM(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(d4(this.ca)&&PX.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class kX{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Yb(e)}ya(e,t,r,i=!1){return new GM({ca:e,methodName:t,ga:r,path:Sr.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zm(n){const e=n._freezeSettings(),t=Yb(n._databaseId);return new kX(n._databaseId,!!e.ignoreUndefinedProperties,t)}function HM(n,e,t,r,i,s={}){const a=n.ya(s.merge||s.mergeFields?2:0,e,t,i);MU("Data must be an object, but it was:",a,r);const c=p4(r,a);let h,g;if(s.merge)h=new fo(a.fieldMask),g=a.fieldTransforms;else if(s.mergeFields){const E=[];for(const b of s.mergeFields){const x=iA(e,b,t);if(!a.contains(x))throw new Ae(ae.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);g4(E,x)||E.push(x)}h=new fo(E),g=a.fieldTransforms.filter(b=>h.covers(b.field))}else h=null,g=a.fieldTransforms;return new NX(new Ki(c),h,g)}class rA extends Km{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof rA}}function h4(n,e,t){return new GM({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class SU extends Km{_toFieldTransform(e){return new Ob(e.path,new iE)}isEqual(e){return e instanceof SU}}class OX extends Km{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=h4(this,e,!0),r=this.pa.map(s=>Qm(s,t)),i=new Um(r);return new Ob(e.path,i)}isEqual(e){return this===e}}class FX extends Km{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=h4(this,e,!0),r=this.pa.map(s=>Qm(s,t)),i=new Bm(r);return new Ob(e.path,i)}isEqual(e){return this===e}}class LX extends Km{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new sE(e.serializer,rq(e.serializer,this.Ia));return new Ob(e.path,t)}isEqual(e){return this===e}}function xU(n,e,t,r){const i=n.ya(1,e,t);MU("Data must be an object, but it was:",i,r);const s=[],a=Ki.empty();zh(r,(h,g)=>{const E=zM(e,h,t);g=(0,Ie.m9)(g);const b=i.da(E);if(g instanceof rA)s.push(E);else{const x=Qm(g,b);null!=x&&(s.push(E),a.set(E,x))}});const c=new fo(s);return new c4(a,c,i.fieldTransforms)}function RU(n,e,t,r,i,s){const a=n.ya(1,e,t),c=[iA(e,r,t)],h=[i];if(s.length%2!=0)throw new Ae(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<s.length;x+=2)c.push(iA(e,s[x])),h.push(s[x+1]);const g=[],E=Ki.empty();for(let x=c.length-1;x>=0;--x)if(!g4(g,c[x])){const M=c[x];let O=h[x];O=(0,Ie.m9)(O);const V=a.da(M);if(O instanceof rA)g.push(M);else{const G=Qm(O,V);null!=G&&(g.push(M),E.set(M,G))}}const b=new fo(g);return new c4(E,b,a.fieldTransforms)}function f4(n,e,t,r=!1){return Qm(t,n.ya(r?4:3,e))}function Qm(n,e){if(m4(n=(0,Ie.m9)(n)))return MU("Unsupported field value:",e,n),p4(n,e);if(n instanceof Km)return function(t,r){if(!d4(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const a of t){let c=Qm(a,r.wa(s));null==c&&(c={nullValue:"NULL_VALUE"}),i.push(c),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,Ie.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return rq(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=cr.fromDate(t);return{timestampValue:lE(r.serializer,i)}}if(t instanceof cr){const i=new cr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:lE(r.serializer,i)}}if(t instanceof $M)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Au)return{bytesValue:bq(r.serializer,t._byteString)};if(t instanceof Qn){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:WL(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${BM(t)}`)}(n,e)}function p4(n,e){const t={};return Dz(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zh(n,(r,i)=>{const s=Qm(i,e.ha(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function m4(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof cr||n instanceof $M||n instanceof Au||n instanceof Qn||n instanceof Km)}function MU(n,e,t){if(!m4(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=BM(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function iA(n,e,t){if((e=(0,Ie.m9)(e))instanceof td)return e._internalPath;if("string"==typeof e)return zM(n,e);throw qM("Field path arguments must be of type string or ",n,!1,void 0,t)}const VX=new RegExp("[~\\*/\\[\\]]");function zM(n,e,t){if(e.search(VX)>=0)throw qM(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new td(...e.split("."))._internalPath}catch{throw qM(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function qM(n,e,t,r,i){const s=r&&!r.isEmpty(),a=void 0!==i;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(s||a)&&(h+=" (found",s&&(h+=` in field ${r}`),a&&(h+=` in document ${i}`),h+=")"),new Ae(ae.INVALID_ARGUMENT,c+n+h)}function g4(n,e){return n.some(t=>t.isEqual(e))}class sA{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Qn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new UX(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(WM("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class UX extends sA{data(){return super.data()}}function WM(n,e){return"string"==typeof e?zM(n,e):e instanceof td?e._internalPath:e._delegate._internalPath}function _4(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ae(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class PU{}class oA extends PU{}function sf(n,e,...t){let r=[];e instanceof PU&&r.push(e),r=r.concat(t),function(i){const s=i.filter(c=>c instanceof wE).length,a=i.filter(c=>c instanceof aA).length;if(s>1||s>0&&a>0)throw new Ae(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class aA extends oA{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new aA(e,t,r)}_apply(e){const t=this._parse(e);return I4(e._query,t),new Zi(e.firestore,e.converter,LL(e._query,t))}_parse(e){const t=Zm(e.firestore);return function(i,s,a,c,h,g,E){let b;if(h.isKeyField()){if("array-contains"===g||"array-contains-any"===g)throw new Ae(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if("in"===g||"not-in"===g){E4(E,g);const x=[];for(const M of E)x.push(v4(c,i,M));b={arrayValue:{values:x}}}else b=v4(c,i,E)}else"in"!==g&&"not-in"!==g&&"array-contains-any"!==g||E4(E,g),b=f4(a,"where",E,"in"===g||"not-in"===g);return dn.create(h,g,b)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class wE extends PU{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new wE(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Cn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let s=r;const a=i.getFlattenedFilters();for(const c of a)I4(s,c),s=LL(s,c)}(e._query,t),new Zi(e.firestore,e.converter,LL(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class NU extends oA{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new NU(e,t)}_apply(e){const t=function(r,i,s){if(null!==r.startAt)throw new Ae(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ae(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const a=new tE(i,s);return function(c,h){if(null===OL(c)){const g=dM(c);null!==g&&T4(0,g,h.field)}}(r,a),a}(e._query,this._field,this._direction);return new Zi(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new Qc(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class KM extends oA{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new KM(e,t,r)}_apply(e){return new Zi(e.firestore,e.converter,hM(e._query,this._limit,this._limitType))}}class ZM extends oA{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new ZM(e,t,r)}_apply(e){const t=y4(e,this.type,this._docOrFields,this._inclusive);return new Zi(e.firestore,e.converter,(i=t,new Qc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class QM extends oA{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new QM(e,t,r)}_apply(e){const t=y4(e,this.type,this._docOrFields,this._inclusive);return new Zi(e.firestore,e.converter,(i=t,new Qc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function y4(n,e,t,r){if(t[0]=(0,Ie.m9)(t[0]),t[0]instanceof sA)return function(i,s,a,c,h){if(!c)throw new Ae(ae.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const g=[];for(const E of Vm(i))if(E.field.isKeyField())g.push(Fm(s,c.key));else{const b=c.data.field(E.field);if(iM(b))throw new Ae(ae.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+E.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===b){const x=E.field.canonicalString();throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${x}' (used as the orderBy) does not exist.`)}g.push(b)}return new Yh(g,h)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Zm(n.firestore);return function(s,a,c,h,g,E){const b=s.explicitOrderBy;if(g.length>b.length)throw new Ae(ae.INVALID_ARGUMENT,`Too many arguments provided to ${h}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const x=[];for(let M=0;M<g.length;M++){const O=g[M];if(b[M].field.isKeyField()){if("string"!=typeof O)throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${h}(), but got a ${typeof O}`);if(!FL(s)&&-1!==O.indexOf("/"))throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${h}() must be a plain document ID, but '${O}' contains a slash.`);const V=s.path.child(mn.fromString(O));if(!et.isDocumentKey(V))throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${h}() must result in a valid document path, but '${V}' is not because it contains an odd number of segments.`);const G=new et(V);x.push(Fm(a,G))}else{const V=f4(c,h,O);x.push(V)}}return new Yh(x,E)}(n._query,n.firestore._databaseId,i,e,t,r)}}function v4(n,e,t){if("string"==typeof(t=(0,Ie.m9)(t))){if(""===t)throw new Ae(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!FL(e)&&-1!==t.indexOf("/"))throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(mn.fromString(t));if(!et.isDocumentKey(r))throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Fm(n,new et(r))}if(t instanceof Qn)return Fm(n,t._key);throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${BM(t)}.`)}function E4(n,e){if(!Array.isArray(n)||0===n.length)throw new Ae(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function I4(n,e){if(e.isInequality()){const r=dM(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=OL(n);null!==s&&T4(0,i,s)}const t=function(r,i){for(const s of r)for(const a of s.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ae(ae.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function T4(n,e,t){if(!t.isEqual(e))throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class kU{convertValue(e,t="none"){switch(Zh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Zc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw dt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return zh(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new $M(xr(e.latitude),xr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=sM(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Db(e));default:return null}}convertTimestamp(e){const t=qh(e);return new cr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=mn.fromString(e);Et(kq(r));const i=new Wh(r.get(1),r.get(3)),s=new et(r.popFirst(5));return i.isEqual(t)||jr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function YM(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class KX extends kU{constructor(e){super(),this.firestore=e}convertBytes(e){return new Au(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qn(this.firestore,null,t)}}class Ym{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class nd extends sA{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new lA(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(WM("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class lA extends nd{data(e={}){return super.data(e)}}class af{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ym(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new lA(this._firestore,this._userDataWriter,r.key,r,new Ym(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ae(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(a=>({type:"added",doc:new lA(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Ym(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>i||3!==a.type).map(a=>{const c=new lA(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Ym(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,g=-1;return 0!==a.type&&(h=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),1!==a.type&&(s=s.add(a.doc),g=s.indexOf(a.doc.key)),{type:QX(a.type),doc:c,oldIndex:h,newIndex:g}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function QX(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return dt()}}function b4(n,e){return n instanceof nd&&e instanceof nd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof af&&e instanceof af&&n._firestore===e._firestore&&DU(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class lf extends kU{constructor(e){super(),this.firestore=e}convertBytes(e){return new Au(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qn(this.firestore,null,t)}}function A4(n,e,t){n=hn(n,Qn);const r=hn(n.firestore,Yn),i=YM(n.converter,e,t);return bE(r,[HM(Zm(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,dr.none())])}function D4(n,e,t,...r){n=hn(n,Qn);const i=hn(n.firestore,Yn),s=Zm(i);let a;return a="string"==typeof(e=(0,Ie.m9)(e))||e instanceof td?RU(s,"updateDoc",n._key,e,t,r):xU(s,"updateDoc",n._key,e),bE(i,[a.toMutation(n._key,dr.exists(!0))])}function C4(n,...e){var t,r,i;n=(0,Ie.m9)(n);let s={includeMetadataChanges:!1},a=0;"object"!=typeof e[a]||CU(e[a])||(s=e[a],a++);const c={includeMetadataChanges:s.includeMetadataChanges};if(CU(e[a])){const b=e[a];e[a]=null===(t=b.next)||void 0===t?void 0:t.bind(b),e[a+1]=null===(r=b.error)||void 0===r?void 0:r.bind(b),e[a+2]=null===(i=b.complete)||void 0===i?void 0:i.bind(b)}let h,g,E;if(n instanceof Qn)g=hn(n.firestore,Yn),E=rE(n._key.path),h={next:b=>{e[a]&&e[a](OU(g,n,b))},error:e[a+1],complete:e[a+2]};else{const b=hn(n,Zi);g=hn(b.firestore,Yn),E=b._query;const x=new lf(g);h={next:M=>{e[a]&&e[a](new af(g,x,b,M))},error:e[a+1],complete:e[a+2]},_4(n._query)}return function(b,x,M,O){const V=new FM(O),G=new HV(x,V,M);return b.asyncQueue.enqueueAndForget((0,N.Z)(function*(){return UV(yield TE(b),G)})),()=>{V.Dc(),b.asyncQueue.enqueueAndForget((0,N.Z)(function*(){return jV(yield TE(b),G)}))}}(Gr(g),E,c,h)}function bE(n,e){return function(t,r){const i=new li;return t.asyncQueue.enqueueAndForget((0,N.Z)(function*(){return function HY(n,e,t){return ZV.apply(this,arguments)}(yield wU(t),r,i)})),i.promise}(Gr(n),e)}function OU(n,e,t){const r=t.docs.get(e._key),i=new lf(n);return new nd(n,i,e._key,r,new Ym(t.hasPendingWrites,t.fromCache),e.converter)}const pJ={maxAttempts:5};class S4{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Zm(e)}set(e,t,r){this._verifyNotCommitted();const i=uf(e,this._firestore),s=YM(i.converter,t,r),a=HM(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(a.toMutation(i._key,dr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=uf(e,this._firestore);let a;return a="string"==typeof(t=(0,Ie.m9)(t))||t instanceof td?RU(this._dataReader,"WriteBatch.update",s._key,t,r,i):xU(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(a.toMutation(s._key,dr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=uf(e,this._firestore);return this._mutations=this._mutations.concat(new aE(t._key,dr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ae(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function uf(n,e){if((n=(0,Ie.m9)(n)).firestore!==e)throw new Ae(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class mJ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Zm(e)}get(e){const t=uf(e,this._firestore),r=new KX(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return dt();const s=i[0];if(s.isFoundDocument())return new sA(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new sA(this._firestore,r,t._key,null,t.converter);throw dt()})}set(e,t,r){const i=uf(e,this._firestore),s=YM(i.converter,t,r),a=HM(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,r);return this._transaction.set(i._key,a),this}update(e,t,r,...i){const s=uf(e,this._firestore);let a;return a="string"==typeof(t=(0,Ie.m9)(t))||t instanceof td?RU(this._dataReader,"Transaction.update",s._key,t,r,i):xU(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,a),this}delete(e){const t=uf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=uf(e,this._firestore),r=new lf(this._firestore);return super.get(e).then(i=>new nd(this._firestore,r,t._key,i._document,new Ym(!1,!1),t.converter))}}function FU(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ae("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function R4(){if(typeof Uint8Array>"u")throw new Ae("unimplemented","Uint8Arrays are not available in this environment.")}function M4(){if(!function QZ(){return typeof atob<"u"}())throw new Ae("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Yv=il.SDK_VERSION,(0,il._registerComponent)(new Lr.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const s=t.getProvider("app").getImmediate(),a=new Yn(new EZ(t.getProvider("auth-internal")),new wZ(t.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Ae(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wh(c.options.projectId,h)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),(0,il.registerVersion)(lz,"3.13.0",n),(0,il.registerVersion)(lz,"3.13.0","esm2017")}();class uA{constructor(e){this._delegate=e}static fromBase64String(e){return M4(),new uA(Au.fromBase64String(e))}static fromUint8Array(e){return R4(),new uA(Au.fromUint8Array(e))}toBase64(){return M4(),this._delegate.toBase64()}toUint8Array(){return R4(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function LU(n){return function bJ(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class AJ{enableIndexedDbPersistence(e,t){return function wX(n,e){u4(n=hn(n,Yn));const t=Gr(n);if(t._uninitializedComponentsProvider)throw new Ae(ae.FAILED_PRECONDITION,"SDK cache is already specified.");ya("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new IE;return l4(t,i,new gU(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function bX(n){u4(n=hn(n,Yn));const e=Gr(n);if(e._uninitializedComponentsProvider)throw new Ae(ae.FAILED_PRECONDITION,"SDK cache is already specified.");ya("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new IE;return l4(e,r,new $3(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function AX(n){if(n._initialized&&!n._terminated)throw new Ae(ae.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new li;return n._queue.enqueueAndForgetEvenWhileRestricted((0,N.Z)(function*(){try{yield(t=(0,N.Z)(function*(r){if(!ul.D())return Promise.resolve();const i=r+"main";yield ul.delete(i)}),function(r){return t.apply(this,arguments)})(lV(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class P4{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Wh||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ya("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function r4(n,e,t,r={}){var i;const s=(n=hn(n,tA))._getSettings(),a=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==a&&ya("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let c,h;if("string"==typeof r.mockUserToken)c=r.mockUserToken,h=Ei.MOCK_USER;else{c=(0,Ie.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Ae(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ei(g)}n._authCredentials=new vZ(new uz(c,h))}}(this._delegate,e,t,r)}enableNetwork(){return function CX(n){return function dX(n){return n.asyncQueue.enqueue((0,N.Z)(function*(){const e=yield z3(n),t=yield q3(n);return e.setNetworkEnabled(!0),function(r){const i=rt(r);return i.vu.delete(0),Xb(i)}(t)}))}(Gr(n=hn(n,Yn)))}(this._delegate)}disableNetwork(){return function SX(n){return function hX(n){return n.asyncQueue.enqueue((0,N.Z)(function*(){const e=yield z3(n),t=yield q3(n);return e.setNetworkEnabled(!1),(r=(0,N.Z)(function*(i){const s=rt(i);s.vu.add(0),yield pE(s),s.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Gr(n=hn(n,Yn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,X3("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function DX(n){return function(e){const t=new li;return e.asyncQueue.enqueueAndForget((0,N.Z)(function*(){return function KY(n,e){return eU.apply(this,arguments)}(yield wU(e),t)})),t.promise}(Gr(n=hn(n,Yn)))}(this._delegate)}onSnapshotsInSync(e){return function sJ(n,e){return function mX(n,e){const t=new FM(e);return n.asyncQueue.enqueueAndForget((0,N.Z)(function*(){return r=yield TE(n),i=t,rt(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,N.Z)(function*(){return r=yield TE(n),i=t,void rt(r).ku.delete(i);var r,i}))}}(Gr(n=hn(n,Yn)),CU(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ae("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new AE(this,s4(this._delegate,e))}catch(t){throw Ls(t,"collection()","Firestore.collection()")}}doc(e){try{return new va(this,jM(this._delegate,e))}catch(t){throw Ls(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Vs(this,function vX(n,e){if(n=hn(n,tA),AU("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ae(ae.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Zi(n,null,(t=e,new Qc(mn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ls(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function gJ(n,e,t){n=hn(n,Yn);const r=Object.assign(Object.assign({},pJ),t);return function(i){if(i.maxAttempts<1)throw new Ae(ae.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,s,a){const c=new li;return i.asyncQueue.enqueueAndForget((0,N.Z)(function*(){const h=yield function W3(n){return VM(n).then(e=>e.datastore)}(i);new uX(i.asyncQueue,h,a,s,c).run()})),c.promise}(Gr(n),i=>e(new mJ(n,i)),r)}(this._delegate,t=>e(new N4(this,t)))}batch(){return Gr(this._delegate),new k4(new S4(this._delegate,e=>bE(this._delegate,e)))}loadBundle(e){return function xX(n,e){const t=Gr(n=hn(n,Yn)),r=new IX;return function gX(n,e,t,r){const i=function(s,a){let c;return c="string"==typeof s?gq().encode(s):s,h=function(h,g){if(h instanceof Uint8Array)return G3(h,g);if(h instanceof ArrayBuffer)return G3(new Uint8Array(h),g);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),new aX(h,a);var h}(t,Yb(e));n.asyncQueue.enqueueAndForget((0,N.Z)(function*(){!function sX(n,e,t){const r=rt(n);var i;(i=(0,N.Z)(function*(s,a,c){try{const h=yield a.getMetadata();if(yield function(x,M){const O=rt(x),V=$r(M.createTime);return O.persistence.runTransaction("hasNewerBundle","readonly",G=>O.qs.getBundleMetadata(G,M.id)).then(G=>!!G&&G.createTime.compareTo(V)>=0)}(s.localStore,h))return yield a.close(),c._completeWith({taskState:"Success",documentsLoaded:(x=h).totalDocuments,bytesLoaded:x.totalBytes,totalDocuments:x.totalDocuments,totalBytes:x.totalBytes}),Promise.resolve(new Set);c._updateProgress(N3(h));const g=new VY(h,s.localStore,a.serializer);let E=yield a.bc();for(;E;){const x=yield g.zu(E);x&&c._updateProgress(x),E=yield a.bc()}const b=yield g.complete();return yield ed(s,b.Ju,void 0),yield function(x,M){const O=rt(x);return O.persistence.runTransaction("Save bundle","readwrite",V=>O.qs.saveBundleMetadata(V,M))}(s.localStore,h),c._completeWith(b.progress),Promise.resolve(b.Hu)}catch(h){return ya("SyncEngine",`Loading bundle failed with ${h}`),c._failWith(h),Promise.resolve(new Set)}var x}),function(s,a,c){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield wU(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function RX(n,e){return function _X(n,e){return n.asyncQueue.enqueue((0,N.Z)(function*(){return function(t,r){const i=rt(t);return i.persistence.runTransaction("Get named query","readonly",s=>i.qs.getNamedQuery(s,r))}(yield UM(n),e)}))}(Gr(n=hn(n,Yn)),e).then(t=>t?new Zi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Vs(this,t):null)}}class XM extends kU{constructor(e){super(),this.firestore=e}convertBytes(e){return new uA(new Au(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return va.forKey(t,this.firestore,null)}}class N4{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new XM(e)}get(e){const t=Jm(e);return this._delegate.get(t).then(r=>new cA(this._firestore,new nd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Jm(e);return r?(FU("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Jm(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Jm(e);return this._delegate.delete(t),this}}class k4{constructor(e){this._delegate=e}set(e,t,r){const i=Jm(e);return r?(FU("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Jm(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Jm(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Xm{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new lA(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new dA(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Xm.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Xm(e,new XM(e),t),i.set(t,s)),s}}Xm.INSTANCES=new WeakMap;class va{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new XM(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ae("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new va(t,new Qn(t._delegate,r,new et(e)))}static forKey(e,t,r){return new va(t,new Qn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new AE(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new AE(this.firestore,s4(this._delegate,e))}catch(t){throw Ls(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ie.m9)(e))instanceof Qn&&o4(this._delegate,e)}set(e,t){t=FU("DocumentReference.set",t);try{return t?A4(this._delegate,e,t):A4(this._delegate,e)}catch(r){throw Ls(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?D4(this._delegate,e):D4(this._delegate,e,t,...r)}catch(i){throw Ls(i,"updateDoc()","DocumentReference.update()")}}delete(){return function rJ(n){return bE(hn(n.firestore,Yn),[new aE(n._key,dr.none())])}(this._delegate)}onSnapshot(...e){const t=O4(e),r=F4(e,i=>new cA(this.firestore,new nd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return C4(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function XX(n){n=hn(n,Qn);const e=hn(n.firestore,Yn),t=Gr(e),r=new lf(e);return function fX(n,e){const t=new li;return n.asyncQueue.enqueueAndForget((0,N.Z)(function*(){return(r=(0,N.Z)(function*(i,s,a){try{const c=yield function(h,g){const E=rt(h);return E.persistence.runTransaction("read document","readonly",b=>E.localDocuments.getDocument(b,g))}(i,s);c.isFoundDocument()?a.resolve(c):c.isNoDocument()?a.resolve(null):a.reject(new Ae(ae.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){const h=_E(c,`Failed to get document '${s} from cache`);a.reject(h)}}),function(i,s,a){return r.apply(this,arguments)})(yield UM(n),e,t);var r})),t.promise}(t,n._key).then(i=>new nd(e,r,n._key,i,new Ym(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function JX(n){n=hn(n,Qn);const e=hn(n.firestore,Yn);return K3(Gr(e),n._key,{source:"server"}).then(t=>OU(e,n,t))}(this._delegate):function YX(n){n=hn(n,Qn);const e=hn(n.firestore,Yn);return K3(Gr(e),n._key).then(t=>OU(e,n,t))}(this._delegate),t.then(r=>new cA(this.firestore,new nd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new va(this.firestore,this._delegate.withConverter(e?Xm.getInstance(this.firestore,e):null))}}function Ls(n,e,t){return n.message=n.message.replace(e,t),n}function O4(n){for(const e of n)if("object"==typeof e&&!LU(e))return e;return{}}function F4(n,e){var t,r;let i;return i=LU(n[0])?n[0]:LU(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class cA{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new va(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return b4(this._delegate,e._delegate)}}class dA extends cA{data(e){const t=this._delegate.data(e);return function _Z(n,e){n||dt()}(void 0!==t),t}}class Vs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new XM(e)}where(e,t,r){try{return new Vs(this.firestore,sf(this._delegate,function BX(n,e,t){const r=e,i=WM("where",n);return aA._create(i,r,t)}(e,t,r)))}catch(i){throw Ls(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Vs(this.firestore,sf(this._delegate,function jX(n,e="asc"){const t=e,r=WM("orderBy",n);return NU._create(r,t)}(e,t)))}catch(r){throw Ls(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Vs(this.firestore,sf(this._delegate,function $X(n){return t4("limit",n),KM._create("limit",n,"F")}(e)))}catch(t){throw Ls(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Vs(this.firestore,sf(this._delegate,function GX(n){return t4("limitToLast",n),KM._create("limitToLast",n,"L")}(e)))}catch(t){throw Ls(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Vs(this.firestore,sf(this._delegate,function HX(...n){return ZM._create("startAt",n,!0)}(...e)))}catch(t){throw Ls(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Vs(this.firestore,sf(this._delegate,function zX(...n){return ZM._create("startAfter",n,!1)}(...e)))}catch(t){throw Ls(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Vs(this.firestore,sf(this._delegate,function qX(...n){return QM._create("endBefore",n,!1)}(...e)))}catch(t){throw Ls(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Vs(this.firestore,sf(this._delegate,function WX(...n){return QM._create("endAt",n,!0)}(...e)))}catch(t){throw Ls(t,"endAt()","Query.endAt()")}}isEqual(e){return DU(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function tJ(n){n=hn(n,Zi);const e=hn(n.firestore,Yn),t=Gr(e),r=new lf(e);return function pX(n,e){const t=new li;return n.asyncQueue.enqueueAndForget((0,N.Z)(function*(){return(r=(0,N.Z)(function*(i,s,a){try{const c=yield xM(i,s,!0),h=new F3(s,c.ir),g=h.sc(c.documents),E=h.applyChanges(g,!1);a.resolve(E.snapshot)}catch(c){const h=_E(c,`Failed to execute query '${s} against cache`);a.reject(h)}}),function(i,s,a){return r.apply(this,arguments)})(yield UM(n),e,t);var r})),t.promise}(t,n._query).then(i=>new af(e,r,n,i))}(this._delegate):"server"===e?.source?function nJ(n){n=hn(n,Zi);const e=hn(n.firestore,Yn),t=Gr(e),r=new lf(e);return Z3(t,n._query,{source:"server"}).then(i=>new af(e,r,n,i))}(this._delegate):function eJ(n){n=hn(n,Zi);const e=hn(n.firestore,Yn),t=Gr(e),r=new lf(e);return _4(n._query),Z3(t,n._query).then(i=>new af(e,r,n,i))}(this._delegate),t.then(r=>new VU(this.firestore,new af(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=O4(e),r=F4(e,i=>new VU(this.firestore,new af(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return C4(this._delegate,t,r)}withConverter(e){return new Vs(this.firestore,this._delegate.withConverter(e?Xm.getInstance(this.firestore,e):null))}}class CJ{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new dA(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class VU{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Vs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new dA(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new CJ(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new dA(this._firestore,r))})}isEqual(e){return b4(this._delegate,e._delegate)}}class AE extends Vs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new va(this.firestore,e):null}doc(e){try{return new va(this.firestore,void 0===e?jM(this._delegate):jM(this._delegate,e))}catch(t){throw Ls(t,"doc()","CollectionReference.doc()")}}add(e){return function iJ(n,e){const t=hn(n.firestore,Yn),r=jM(n),i=YM(n.converter,e);return bE(t,[HM(Zm(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,dr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new va(this.firestore,t))}isEqual(e){return o4(this._delegate,e._delegate)}withConverter(e){return new AE(this.firestore,this._delegate.withConverter(e?Xm.getInstance(this.firestore,e):null))}}function Jm(n){return hn(n,Qn)}class UU{constructor(...e){this._delegate=new td(...e)}static documentId(){return new UU(Sr.keyField().canonicalString())}isEqual(e){return(e=(0,Ie.m9)(e))instanceof td&&this._delegate._internalPath.isEqual(e._internalPath)}}class eg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function yJ(){return new SU("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new eg(e)}static delete(){const e=function _J(){return new rA("deleteField")}();return e._methodName="FieldValue.delete",new eg(e)}static arrayUnion(...e){const t=function vJ(...n){return new OX("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new eg(t)}static arrayRemove(...e){const t=function EJ(...n){return new FX("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new eg(t)}static increment(e){const t=function IJ(n){return new LX("increment",n)}(e);return t._methodName="FieldValue.increment",new eg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const SJ={Firestore:P4,GeoPoint:$M,Timestamp:cr,Blob:uA,Transaction:N4,WriteBatch:k4,DocumentReference:va,DocumentSnapshot:cA,Query:Vs,QueryDocumentSnapshot:dA,QuerySnapshot:VU,CollectionReference:AE,FieldPath:UU,FieldValue:eg,setLogLevel:function DJ(n){!function gZ(n){$h.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function RJ(n){(function xJ(n,e){n.INTERNAL.registerComponent(new Lr.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},SJ)))})(n,(e,t)=>new P4(e,t,new AJ)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(l8.Z);var MJ=F(3019);class PJ extends mi.x{constructor(e=1/0,t=1/0,r=jw){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:a}=this;t||(r.push(e),!i&&r.push(s.now()+a)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let a=0;a<s.length&&!e.closed;a+=r?1:2)e.next(s[a]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const a=t.now();let c=0;for(let h=1;h<r.length&&r[h]<=a;h+=2)c=h;c&&r.splice(0,c+1)}}}var NJ=F(3020);function L4(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,NJ.B)({connector:()=>new PJ(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function V4(n,e){return(0,Ao.m)(e)?(0,or.w)(()=>n,e):(0,or.w)(()=>n)}const jU=new Map,U4={activated:!1,tokenObservers:[]},VJ={initialized:!1,enabled:!1};function Rr(n){return jU.get(n)||Object.assign({},U4)}function eP(){return VJ}const $U="https://content-firebaseappcheck.googleapis.com/v1",$J="exchangeDebugToken",B4={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class HJ{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,N.Z)(function*(){t.stop();try{t.pending=new Ie.BH,yield function zJ(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Ie.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Qi=new Ie.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function GU(n){if(!Rr(n).activated)throw Qi.create("use-before-activation",{appName:n.name})}function rP(n,e){return zU.apply(this,arguments)}function zU(){return zU=(0,N.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const b=yield i.getHeartbeatsHeader();b&&(r["X-Firebase-Client"]=b)}const s={method:"POST",body:JSON.stringify(e),headers:r};let a,c;try{a=yield fetch(n,s)}catch(b){throw Qi.create("fetch-network-error",{originalErrorMessage:b?.message})}if(200!==a.status)throw Qi.create("fetch-status-error",{httpStatus:a.status});try{c=yield a.json()}catch(b){throw Qi.create("fetch-parse-error",{originalErrorMessage:b?.message})}const h=c.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Qi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});const g=1e3*Number(h[1]),E=Date.now();return{token:c.token,expireTimeMillis:E+g,issuedAtTimeMillis:E}}),zU.apply(this,arguments)}function j4(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${$U}/projects/${t}/apps/${r}:${$J}?key=${i}`,body:{debug_token:e}}}const ZJ="firebase-app-check-database",QJ=1,hA="firebase-app-check-store";let iP=null;function qU(){return qU=(0,N.Z)(function*(n,e){const r=(yield function G4(){return iP||(iP=new Promise((n,e)=>{try{const t=indexedDB.open(ZJ,QJ);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Qi.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(hA,{keyPath:"compositeKey"})}}catch(t){e(Qi.create("storage-open",{originalErrorMessage:t?.message}))}}),iP)}()).transaction(hA,"readwrite"),s=r.objectStore(hA).put({compositeKey:n,value:e});return new Promise((a,c)=>{s.onsuccess=h=>{a()},r.onerror=h=>{var g;c(Qi.create("storage-set",{originalErrorMessage:null===(g=h.target.error)||void 0===g?void 0:g.message}))}})}),qU.apply(this,arguments)}const fA=new Vr.Yd("@firebase/app-check");function ZU(n,e){return(0,Ie.hl)()?function XJ(n,e){return function H4(n,e){return qU.apply(this,arguments)}(function q4(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{fA.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function YU(){return eP().enabled}function XU(){return JU.apply(this,arguments)}function JU(){return JU=(0,N.Z)(function*(){const n=eP();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),JU.apply(this,arguments)}const iee={error:"UNKNOWN_ERROR"};function see(n){return Ie.US.encodeString(JSON.stringify(n),!1)}function sP(n){return e2.apply(this,arguments)}function e2(){return e2=(0,N.Z)(function*(n,e=!1){const t=n.app;GU(t);const r=Rr(t);let s,i=r.token;if(i&&!DE(i)&&(r.token=void 0,i=void 0),!i){const h=yield r.cachedTokenPromise;h&&(DE(h)?i=h:yield ZU(t,void 0))}if(!e&&i&&DE(i))return{token:i.token};let c,a=!1;if(YU()){r.exchangeTokenPromise||(r.exchangeTokenPromise=rP(j4(t,yield XU()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),a=!0);const h=yield r.exchangeTokenPromise;return yield ZU(t,h),r.token=h,{token:h.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),a=!0),i=yield Rr(t).exchangeTokenPromise}catch(h){"appCheck/throttled"===h.code?fA.warn(h.message):fA.error(h),s=h}return i?s?c=DE(i)?{token:i.token,internalError:s}:Q4(s):(c={token:i.token},r.token=i,yield ZU(t,i)):c=Q4(s),a&&function Z4(n,e){const t=Rr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,c),c}),e2.apply(this,arguments)}function t2(){return t2=(0,N.Z)(function*(n){const e=n.app;GU(e);const{provider:t}=Rr(e);if(YU()){const r=yield XU(),{token:i}=yield rP(j4(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}}),t2.apply(this,arguments)}function r2(n,e){const t=Rr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function K4(n){const{app:e}=n,t=Rr(e);let r=t.tokenRefresher;r||(r=function oee(n){const{app:e}=n;return new HJ((0,N.Z)(function*(){let r;if(r=Rr(e).token?yield sP(n,!0):yield sP(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Rr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},B4.RETRIAL_MIN_WAIT,B4.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function DE(n){return n.expireTimeMillis-Date.now()>0}function Q4(n){return{token:see(iee),error:n}}class aee{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Rr(this.app);for(const t of e)r2(this.app,t.next);return Promise.resolve()}}const iW="app-check-internal";!function Iee(){cs(new Lr.wA("app-check",n=>function lee(n,e){return new aee(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(iW).initialize()})),cs(new Lr.wA(iW,n=>function uee(n){return{getToken:e=>sP(n,e),getLimitedUseToken:()=>function W4(n){return t2.apply(this,arguments)}(n),addTokenListener:e=>function n2(n,e,t,r){const{app:i}=n,s=Rr(i);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:r,type:e}],s.token&&DE(s.token)){const c=s.token;Promise.resolve().then(()=>{t({token:c.token}),K4(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>K4(n))}(n,"INTERNAL",e),removeTokenListener:e=>r2(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),Ur("@firebase/app-check","0.8.0")}();class l2{constructor(){return((n,e)=>{const t=(0,il.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(a=>{r.includes(a)||r.push(a)})}),r})("app-check")}}typeof window<"u"&&window,F(120);const oW=new y.OlP("angularfire2.auth.use-emulator"),aW=new y.OlP("angularfire2.auth.settings"),lW=new y.OlP("angularfire2.auth.tenant-id"),uW=new y.OlP("angularfire2.auth.langugage-code"),cW=new y.OlP("angularfire2.auth.use-device-language"),dW=new y.OlP("angularfire.auth.persistence"),hW=(n,e,t,r,i,s,a,c)=>(0,ol.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const h=e.runOutsideAngular(()=>n.auth());if(t&&h.useEmulator(...t),r&&(h.tenantId=r),h.languageCode=i,s&&h.useDeviceLanguage(),a)for(const[g,E]of Object.entries(a))h.settings[g]=E;return c&&h.setPersistence(c),h},[t,r,i,s,a,c]);let c2=(()=>{class n{constructor(t,r,i,s,a,c,h,g,E,b,x,M){const O=new mi.x,V=(0,Tt.of)(void 0).pipe((0,X0.Q)(a.outsideAngular),(0,or.w)(()=>s.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,1895)))),(0,Ht.U)(()=>(0,ol.on)(t,s,r)),(0,Ht.U)(G=>hW(G,s,c,g,E,b,h,x)),L4({bufferSize:1,refCount:!1}));if(Io(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Tt.of)(null);else{V.pipe(os()).subscribe();const ne=V.pipe((0,or.w)(Pe=>Pe.getRedirectResult().then(Ye=>Ye,()=>null)),Fo,L4({bufferSize:1,refCount:!1})),ce=V.pipe((0,or.w)(Pe=>new Ss.y(Ye=>({unsubscribe:s.runOutsideAngular(()=>Pe.onAuthStateChanged(Xe=>Ye.next(Xe),Xe=>Ye.error(Xe),()=>Ye.complete()))})))),me=V.pipe((0,or.w)(Pe=>new Ss.y(Ye=>({unsubscribe:s.runOutsideAngular(()=>Pe.onIdTokenChanged(Xe=>Ye.next(Xe),Xe=>Ye.error(Xe),()=>Ye.complete()))}))));this.authState=ne.pipe(V4(ce),(0,AR.R)(a.outsideAngular),(0,X0.Q)(a.insideAngular)),this.user=ne.pipe(V4(me),(0,AR.R)(a.outsideAngular),(0,X0.Q)(a.insideAngular)),this.idToken=this.user.pipe((0,or.w)(Pe=>Pe?(0,In.D)(Pe.getIdToken()):(0,Tt.of)(null))),this.idTokenResult=this.user.pipe((0,or.w)(Pe=>Pe?(0,In.D)(Pe.getIdTokenResult()):(0,Tt.of)(null))),this.credential=(0,MJ.T)(ne,O,this.authState.pipe(ss(Pe=>!Pe))).pipe((0,Ht.U)(Pe=>Pe?.user?Pe:null),(0,AR.R)(a.outsideAngular),(0,X0.Q)(a.insideAngular))}return(0,ol.pX)(this,V,s,{spy:{apply:(G,ne,ce)=>{(G.startsWith("signIn")||G.startsWith("createUser"))&&ce.then(me=>O.next(me))}}})}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(ol.Dh),y.LFG(ol.xv,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(zG),y.LFG(oW,8),y.LFG(aW,8),y.LFG(lW,8),y.LFG(uW,8),y.LFG(cW,8),y.LFG(dW,8),y.LFG(l2,8))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function fW(n,e){return function Cee(n,e=$w){return new Ss.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function d2(n,e){return fW(n,e).pipe((0,Ht.U)(t=>({payload:t,type:"query"})))}function aP(n,e){return d2(n,e).pipe(eo(void 0),NF(),(0,Ht.U)(([t,r])=>{const i=r.payload.docChanges(),s=i.map(a=>({type:a.type,payload:a}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((a,c)=>{const h=i.find(E=>E.doc.ref.isEqual(a.ref)),g=t?.payload.docs.find(E=>E.ref.isEqual(a.ref));h&&JSON.stringify(h.doc.metadata)===JSON.stringify(a.metadata)||!h&&g&&JSON.stringify(g.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function pW(n,e,t){return aP(n,t).pipe(na((r,i)=>function xee(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function Ree(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return h2(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return h2(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return h2(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),(0,a8.x)(),(0,Ht.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function h2(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function mW(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class gW{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=aP(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ht.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(eo(void 0),NF(),ss(([r,i])=>i.length>0||!r),(0,Ht.U)(([r,i])=>i),Fo)}auditTrail(e){return this.stateChanges(e).pipe(na((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=mW(e);return pW(this.query,t,this.afs.schedulers.outsideAngular).pipe(Fo)}valueChanges(e={}){return d2(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ht.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Fo)}get(e){return(0,In.D)(this.query.get(e)).pipe(Fo)}add(e){return this.ref.add(e)}doc(e){return new _W(this.ref.doc(e),this.afs)}}class _W{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=yW(r,t);return new gW(i,s,this.afs)}snapshotChanges(){return function See(n,e){return fW(n,e).pipe(eo(void 0),NF(),(0,Ht.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Fo)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ht.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,In.D)(this.ref.get(e)).pipe(Fo)}}class Mee{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?aP(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ht.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ss(t=>t.length>0),Fo):aP(this.query,this.afs.schedulers.outsideAngular).pipe(Fo)}auditTrail(e){return this.stateChanges(e).pipe(na((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=mW(e);return pW(this.query,t,this.afs.schedulers.outsideAngular).pipe(Fo)}valueChanges(e={}){return d2(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ht.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Fo)}get(e){return(0,In.D)(this.query.get(e)).pipe(Fo)}}const Pee=new y.OlP("angularfire2.enableFirestorePersistence"),Nee=new y.OlP("angularfire2.firestore.persistenceSettings"),kee=new y.OlP("angularfire2.firestore.settings"),Oee=new y.OlP("angularfire2.firestore.use-emulator");function yW(n,e=(t=>t)){return{query:e(n),ref:n}}let Fee=(()=>{class n{constructor(t,r,i,s,a,c,h,g,E,b,x,M,O,V,G,ne,ce){this.schedulers=h;const me=(0,ol.on)(t,c,r),Pe=E;b&&hW(me,c,x,O,V,G,M,ne),[this.firestore,this.persistenceEnabled$]=(0,ol.cc)(`${me.name}.firestore`,"AngularFirestore",me.name,()=>{const Ye=c.runOutsideAngular(()=>me.firestore());if(s&&Ye.settings(s),Pe&&Ye.useEmulator(...Pe),i&&!Io(a)){const Xe=()=>{try{return(0,In.D)(Ye.enablePersistence(g||void 0).then(()=>!0,()=>!1))}catch(Nt){return typeof console<"u"&&console.warn(Nt),(0,Tt.of)(!1)}};return[Ye,c.runOutsideAngular(Xe)]}return[Ye,(0,Tt.of)(!1)]},[s,Pe,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:a}=yW(i,r),c=this.schedulers.ngZone.run(()=>s);return new gW(c,a,this)}collectionGroup(t,r){const i=r||(a=>a),s=this.firestore.collectionGroup(t);return new Mee(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new _W(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(ol.Dh),y.LFG(ol.xv,8),y.LFG(Pee,8),y.LFG(kee,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(zG),y.LFG(Nee,8),y.LFG(Oee,8),y.LFG(c2,8),y.LFG(oW,8),y.LFG(aW,8),y.LFG(lW,8),y.LFG(uW,8),y.LFG(cW,8),y.LFG(dW,8),y.LFG(l2,8))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),pA=(()=>{class n{constructor(t,r,i,s){this.afs=t,this.afAuth=r,this.router=i,this.ngZone=s,this.afAuth.authState.subscribe(a=>{a?(console.log("userSignIn:",a),this.userData=a,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(i=>{this.sendVerificationMail(),this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}SignIn(t,r){return(0,In.D)(this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{this.SetUserData(i.user),console.log("user",this.userData),this.afAuth.authState.subscribe(s=>{s&&s.uid&&(this.user=s,this.router.navigate(["dashboard",s.uid]))})}).catch(i=>{window.alert(i.message)}))}getUserDetails(){return this.user}sendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["login"])})}signInWithMicrosoft(){(function yS(n,e,t){return Ky.apply(this,arguments)})(US(),new Sc("microsoft.com")).then(i=>{console.log("resultMicrostftUser::",i),Sc.credentialFromResult(i),this.user=i.user,this.router.navigate(["/dashboard",i.user.uid])}).catch(i=>{window.alert(i.message),console.log(i.message)})}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(Fee),y.LFG(c2),y.LFG(Ui),y.LFG(y.R0b))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Lee=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}ngOnInit(){}login(t,r){this.authService.SignIn(t,r).subscribe(i=>{console.log("userAfLogin::",i)})}}return n.\u0275fac=function(t){return new(t||n)(y.Y36(pA),y.Y36(Ui))},n.\u0275cmp=y.Xpm({type:n,selectors:[["app-login"]],decls:13,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["userEmail",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPwd",""],["type","button","value","Login",1,"btn","btnPrimary",3,"click"]],template:function(t,r){if(1&t){const i=y.EpF();y.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),y._uU(4,"Login"),y.qZA(),y.TgZ(5,"div",3),y._UZ(6,"input",4,5),y.qZA(),y.TgZ(8,"div",3),y._UZ(9,"input",6,7),y.qZA(),y.TgZ(11,"div",3)(12,"input",8),y.NdJ("click",function(){y.CHM(i);const a=y.MAs(7),c=y.MAs(10);return y.KtG(r.authService.SignIn(a.value,c.value))}),y.qZA()()()()()}}}),n})(),Vee=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(y.Y36(pA))},n.\u0275cmp=y.Xpm({type:n,selectors:[["app-sign-up"]],decls:19,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["userEmail",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPwd",""],["type","button","value","Sign Up",1,"btn","btnPrimary",3,"click"],[1,"redirectToLogin"],["type","button","value","Login",1,"btn","btnPrimary",3,"click"],["type","button","value","Login with Microsoft",1,"btn","btnPrimary",3,"click"]],template:function(t,r){if(1&t){const i=y.EpF();y.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),y._uU(4,"Sign Up"),y.qZA(),y.TgZ(5,"div",3),y._UZ(6,"input",4,5),y.qZA(),y.TgZ(8,"div",3),y._UZ(9,"input",6,7),y.qZA(),y.TgZ(11,"div",3)(12,"input",8),y.NdJ("click",function(){y.CHM(i);const a=y.MAs(7),c=y.MAs(10);return y.KtG(r.authService.SignUp(a.value,c.value))}),y.qZA()()(),y.TgZ(13,"div",9)(14,"span"),y._uU(15,"Already have an account? "),y.TgZ(16,"input",10),y.NdJ("click",function(){y.CHM(i);const a=y.MAs(7),c=y.MAs(10);return y.KtG(r.authService.SignIn(a.value,c.value))}),y.qZA(),y._uU(17," or "),y.TgZ(18,"input",11),y.NdJ("click",function(){return r.authService.signInWithMicrosoft()}),y.qZA()()()()()}}}),n})(),Uee=(()=>{class n{constructor(t,r){this.route=t,this.authService=r}ngOnInit(){this.user=this.authService.getUserDetails(),console.log("user::",this.user)}}return n.\u0275fac=function(t){return new(t||n)(y.Y36(so),y.Y36(pA))},n.\u0275cmp=y.Xpm({type:n,selectors:[["app-user-page"]],decls:6,vars:1,consts:[[1,"formGroup"],["type","button","value","Logout",1,"btn","btnPrimary",3,"click"]],template:function(t,r){1&t&&(y.TgZ(0,"p"),y._uU(1,"user-page works!"),y.qZA(),y.TgZ(2,"h3"),y._uU(3),y.qZA(),y.TgZ(4,"div",0)(5,"input",1),y.NdJ("click",function(){return r.authService.SignOut()}),y.qZA()()),2&t&&(y.xp6(3),y.hij("hello ",null==r.user?null:r.user.email,""))}}),n})();function Bee(n,e){if(1&n&&(y.TgZ(0,"div",4)(1,"p",9),y._uU(2,"We have sent a confirmation email to "),y.TgZ(3,"strong"),y._uU(4),y.qZA(),y._uU(5,"."),y.qZA(),y.TgZ(6,"p",9),y._uU(7,"Please check your email and click on the link to verfiy your email address."),y.qZA()()),2&n){const t=e.ngIf;y.xp6(4),y.Oqu(t.email)}}const jee=[{path:"",redirectTo:"/sign-up",pathMatch:"full"},{path:"sign-up",component:Vee},{path:"login",component:Lee},{path:"dashboard/:id",component:Uee},{path:"verify-email-address",component:(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(y.Y36(pA))},n.\u0275cmp=y.Xpm({type:n,selectors:[["app-verify-email"]],decls:15,vars:1,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],["class","formGroup",4,"ngIf"],[1,"formGroup"],["type","button",1,"btn","btnPrimary",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin"],["routerLink","/login",1,"redirect"],[1,"text-center"]],template:function(t,r){1&t&&(y.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),y._uU(4,"Thank You for Registering"),y.qZA(),y.YNc(5,Bee,8,1,"div",3),y.TgZ(6,"div",4)(7,"button",5),y.NdJ("click",function(){return r.authService.SendVerificationMail()}),y._UZ(8,"i",6),y._uU(9," Resend Verification Email "),y.qZA()()(),y.TgZ(10,"div",7)(11,"span"),y._uU(12,"Go back to "),y.TgZ(13,"a",8),y._uU(14," Login"),y.qZA()()()()()),2&t&&(y.xp6(5),y.Q6J("ngIf",r.authService.userData))},dependencies:[kf,q_]}),n})()}];let $ee=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({imports:[X_.forRoot(jee),X_]}),n})(),Gee=(()=>{class n{constructor(){this.title="AuthPractice"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=y.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&y._UZ(0,"router-outlet")},dependencies:[vp]}),n})();Ur("firebase","10.0.0","app");const vW="@firebase/firestore";class wi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wi.UNAUTHENTICATED=new wi(null),wi.GOOGLE_CREDENTIALS=new wi("google-credentials-uid"),wi.FIRST_PARTY=new wi("first-party-uid"),wi.MOCK_USER=new wi("mock-user");let mA="10.0.0";const cf=new Vr.Yd("@firebase/firestore");function $e(n,...e){if(cf.logLevel<=Vr.in.DEBUG){const t=e.map(p2);cf.debug(`Firestore (${mA}): ${n}`,...t)}}function Hr(n,...e){if(cf.logLevel<=Vr.in.ERROR){const t=e.map(p2);cf.error(`Firestore (${mA}): ${n}`,...t)}}function p2(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function pt(n="Unexpected state"){const e=`FIRESTORE (${mA}) INTERNAL ASSERTION FAILED: `+n;throw Hr(e),new Error(e)}function It(n,e){n||pt()}const le_CANCELLED="cancelled",le_INVALID_ARGUMENT="invalid-argument",le_FAILED_PRECONDITION="failed-precondition",le_UNAVAILABLE="unavailable";class Ne extends Ie.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ci{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class EW{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qee{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(wi.UNAUTHENTICATED))}shutdown(){}}class Wee{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Kee{constructor(e){this.t=e,this.currentUser=wi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let a=new ci;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ci,e.enqueueRetryable(()=>s(this.currentUser))};const c=()=>{const g=a;e.enqueueRetryable((0,N.Z)(function*(){yield g.promise,yield s(r.currentUser)}))},h=g=>{$e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.auth.addAuthTokenListener(this.o),c()};this.t.onInit(g=>h(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?h(g):($e("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ci)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?($e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(It("string"==typeof r.accessToken),new EW(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return It(null===e||"string"==typeof e),new wi(e)}}class Zee{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=wi.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Qee{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Zee(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(wi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class IW{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Yee{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=s=>{null!=s.error&&$e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,$e("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{$e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):$e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(It("string"==typeof t.token),this.R=t.token,new IW(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Xee(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class TW{static V(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=Xee(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function qt(n,e){return n<e?-1:n>e?1:0}class lP{constructor(e,t,r){void 0===t?t=0:t>e.length&&pt(),void 0===r?r=e.length-t:r>e.length-t&&pt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===lP.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof lP?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),a=t.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class _n extends lP{construct(e,t,r){return new _n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ne(le_INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new _n(t)}static emptyPath(){return new _n([])}}class nt{constructor(e){this.path=e}static fromPath(e){return new nt(_n.fromString(e))}static fromName(e){return new nt(_n.fromString(e).popFirst(5))}static empty(){return new nt(_n.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===_n.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return _n.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new nt(new _n(e.slice()))}}function hf(n){return"IndexedDbTransactionError"===n.name}class $n{constructor(e,t){this.comparator=e,this.root=t||Yi.EMPTY}insert(e,t){return new $n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yi.BLACK,null,null))}remove(e){return new $n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fP(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fP(this.root,e,this.comparator,!1)}getReverseIterator(){return new fP(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fP(this.root,e,this.comparator,!0)}}class fP{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yi{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Yi.RED,this.left=i??Yi.EMPTY,this.right=s??Yi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Yi(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Yi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Yi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pt();const e=this.left.check();if(e!==this.right.check())throw pt();return e+(this.isRed()?0:1)}}Yi.EMPTY=null,Yi.RED=!0,Yi.BLACK=!1,Yi.EMPTY=new class{constructor(){this.size=0}get key(){throw pt()}get value(){throw pt()}get color(){throw pt()}get left(){throw pt()}get right(){throw pt()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Yi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Xn{constructor(e){this.comparator=e,this.data=new $n(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new LW(this.data.getIterator())}getIteratorFrom(e){return new LW(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Xn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Xn(this.comparator);return t.data=e,t}}class LW{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class VW extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class di{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new VW("Invalid base64 string: "+s):s}}(e);return new di(t)}static fromUint8Array(e){const t=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new di(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}function Mr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}di.EMPTY_BYTE_STRING=new di("");class Ate{constructor(e,t,r,i,s,a,c,h,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=g}}class rg{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new rg("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof rg&&e.projectId===this.projectId&&e.database===this.database}}var ei,yn;new $n(nt.comparator),new $n(nt.comparator),new $n(nt.comparator),new Xn(nt.comparator),new Xn(qt),(yn=ei||(ei={}))[yn.OK=0]="OK",yn[yn.CANCELLED=1]="CANCELLED",yn[yn.UNKNOWN=2]="UNKNOWN",yn[yn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yn[yn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yn[yn.NOT_FOUND=5]="NOT_FOUND",yn[yn.ALREADY_EXISTS=6]="ALREADY_EXISTS",yn[yn.PERMISSION_DENIED=7]="PERMISSION_DENIED",yn[yn.UNAUTHENTICATED=16]="UNAUTHENTICATED",yn[yn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yn[yn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yn[yn.ABORTED=10]="ABORTED",yn[yn.OUT_OF_RANGE=11]="OUT_OF_RANGE",yn[yn.UNIMPLEMENTED=12]="UNIMPLEMENTED",yn[yn.INTERNAL=13]="INTERNAL",yn[yn.UNAVAILABLE=14]="UNAVAILABLE",yn[yn.DATA_LOSS=15]="DATA_LOSS",new Nm([4294967295,4294967295],0);class hg{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Mr(e.integerValue));else if("doubleValue"in e){const r=Mr(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),function vA(n){return 0===n&&1/n==-1/0}(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Et(t,20),"string"==typeof r?t.At(r):(t.At(`${r.seconds||""}`),t.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(function rd(n){return"string"==typeof n?di.fromBase64String(n):di.fromUint8Array(n)}(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?function $W(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):pt()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const r=e.fields||{};this.Et(t,55);for(const i of Object.keys(r))this.Rt(i,t),this.It(r[i],t)}wt(e,t){const r=e.values||[];this.Et(t,50);for(const i of r)this.It(i,t)}gt(e,t){this.Et(t,37),nt.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}hg.bt=new hg,new Uint8Array(0);class _s{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new _s(e,_s.DEFAULT_COLLECTION_PERCENTILE,_s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function jP(){return typeof document<"u"?document:null}_s.DEFAULT_COLLECTION_PERCENTILE=10,_s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_s.DEFAULT=new _s(41943040,_s.DEFAULT_COLLECTION_PERCENTILE,_s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_s.DISABLED=new _s(-1,0,0);class uB{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ii=e,this.timerId=t,this.wo=r,this.So=i,this.bo=s,this.Do=0,this.vo=null,this.Co=Date.now(),this.reset()}reset(){this.Do=0}Fo(){this.Do=this.bo}Mo(e){this.cancel();const t=Math.floor(this.Do+this.xo()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&$e("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Do} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.vo=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.Do*=this.So,this.Do<this.wo&&(this.Do=this.wo),this.Do>this.bo&&(this.Do=this.bo)}Oo(){null!==this.vo&&(this.vo.skipDelay(),this.vo=null)}cancel(){null!==this.vo&&(this.vo.cancel(),this.vo=null)}xo(){return(Math.random()-.5)*this.Do}}class SB{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ci,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}static createAndSchedule(e,t,r,i,s){const a=Date.now()+r,c=new SB(e,t,a,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ne(le_CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}class Fre{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=wi.UNAUTHENTICATED,this.clientId=TW.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var a=(0,N.Z)(function*(c){$e("FirestoreClient","Received user=",c.uid),yield s.authCredentialListener(c),s.user=c});return function(c){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(r,a=>($e("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}getConfiguration(){var e=this;return(0,N.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ne(le_FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ci;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,N.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=function qE(n,e){if(Hr("AsyncQueue",`${e}: ${n}`),hf(n))return new Ne(le_UNAVAILABLE,`${e}: ${n}`);throw n}(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function i9(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const s9=new Map;function fn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(le_INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=function ZP(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":pt()}(n);throw new Ne(le_INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}class u9{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Ne(le_INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ne(le_INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function zre(n,e,t,r){if(!0===e&&!0===r)throw new Ne(le_INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=i9(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new Ne(le_INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ne(le_INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ne(le_INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class KA{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new u9({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ne(le_FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ne(le_FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new u9(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new qee;switch(r.type){case"firstParty":return new Qee(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ne(le_INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=s9.get(t);r&&($e("ComponentProvider","Removing Datastore"),s9.delete(t),r.terminate())}(this),Promise.resolve()}}class Kre{constructor(){this.Ua=Promise.resolve(),this.Wa=[],this.Ga=!1,this.za=[],this.ja=null,this.Ha=!1,this.Ja=!1,this.Ya=[],this.Qo=new uB(this,"async_queue_retry"),this.Za=()=>{const t=jP();t&&$e("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Qo.Oo()};const e=jP();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Za)}get isShuttingDown(){return this.Ga}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Xa(),this.eu(e)}enterRestrictedMode(e){if(!this.Ga){this.Ga=!0,this.Ja=e||!1;const t=jP();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Za)}}enqueue(e){if(this.Xa(),this.Ga)return new Promise(()=>{});const t=new ci;return this.eu(()=>this.Ga&&this.Ja?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Wa.push(e),this.tu()))}tu(){var e=this;return(0,N.Z)(function*(){if(0!==e.Wa.length){try{yield e.Wa[0](),e.Wa.shift(),e.Qo.reset()}catch(t){if(!hf(t))throw t;$e("AsyncQueue","Operation failed with retryable error: "+t)}e.Wa.length>0&&e.Qo.Mo(()=>e.tu())}})()}eu(e){const t=this.Ua.then(()=>(this.Ha=!0,e().catch(r=>{throw this.ja=r,this.Ha=!1,Hr("INTERNAL UNHANDLED ERROR: ",function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),c}(r)),r}).then(r=>(this.Ha=!1,r))));return this.Ua=t,t}enqueueAfterDelay(e,t,r){this.Xa(),this.Ya.indexOf(e)>-1&&(t=0);const i=SB.createAndSchedule(this,e,t,r,s=>this.nu(s));return this.za.push(i),i}Xa(){this.ja&&pt()}verifyOperationInProgress(){}ru(){var e=this;return(0,N.Z)(function*(){let t;do{t=e.Ua,yield t}while(t!==e.Ua)})()}iu(e){for(const t of this.za)if(t.timerId===e)return!0;return!1}su(e){return this.ru().then(()=>{this.za.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.za)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ru()})}ou(e){this.Ya.push(e)}nu(e){const t=this.za.indexOf(e);this.za.splice(t,1)}}class er extends KA{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Kre,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||function d9(n){var e,t,r;const i=n._freezeSettings(),s=(h=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Ate(n._databaseId,h,n._persistenceKey,(E=i).host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,i9(E.experimentalLongPollingOptions),E.useFetchStreams));var h,E;n._firestoreClient=new Fre(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=i.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}(this),this._firestoreClient.terminate()}}!function(e,t=!0){mA=au,cs(new Lr.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),c=new er(new Kee(r.getProvider("auth-internal")),new Yee(r.getProvider("app-check-internal")),function(g,E){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new Ne(le_INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rg(g.options.projectId,E)}(a,i),a);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),Ur(vW,"4.0.0",e),Ur(vW,"4.0.0","esm2017")}();const P9={production:!1,firebaseConfig:{apiKey:"AIzaSyCxgQBFALhmwLetfjn5pOr9ReoGytqQA30",authDomain:"authpractice-b94cf.firebaseapp.com",databaseURL:"https://authpractice-b94cf-default-rtdb.europe-west1.firebasedatabase.app",projectId:"authpractice-b94cf",storageBucket:"authpractice-b94cf.appspot.com",messagingSenderId:"1098590268489",appId:"1:1098590268489:web:c8738d1919bf6efcfea398"}};class N9{}class Iie{}const ud="*";function k9(n,e=null){return{type:2,steps:n,options:e}}function sN(n){return{type:6,styles:n,offset:null}}class tD{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class O9{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(a=>{a.onDone(()=>{++t==s&&this._onFinish()}),a.onDestroy(()=>{++r==s&&this._onDestroy()}),a.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((a,c)=>Math.max(a,c.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function F9(n){return new y.vHH(3e3,!1)}function Df(n){switch(n.length){case 0:return new tD;case 1:return n[0];default:return new O9(n)}}function L9(n,e,t=new Map,r=new Map){const i=[],s=[];let a=-1,c=null;if(e.forEach(h=>{const g=h.get("offset"),E=g==a,b=E&&c||new Map;h.forEach((x,M)=>{let O=M,V=x;if("offset"!==M)switch(O=n.normalizePropertyName(O,i),V){case"!":V=t.get(M);break;case ud:V=r.get(M);break;default:V=n.normalizeStyleValue(M,O,V,i)}b.set(O,V)}),E||s.push(b),c=b,a=g}),i.length)throw function Kie(n){return new y.vHH(3502,!1)}();return s}function bj(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&Aj(t,"start",n)));break;case"done":n.onDone(()=>r(t&&Aj(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&Aj(t,"destroy",n)))}}function Aj(n,e,t){const s=Dj(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),a=n._data;return null!=a&&(s._data=a),s}function Dj(n,e,t,r,i="",s=0,a){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!a}}function $o(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function V9(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const ose=(()=>typeof document>"u"?null:document.documentElement)();function Cj(n){const e=n.parentNode||n.host||null;return e===ose?null:e}let vg=null,U9=!1;function B9(n,e){for(;e;){if(e===n)return!0;e=Cj(e)}return!1}function j9(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]}let $9=(()=>{class n{validateStyleProperty(t){return function lse(n){vg||(vg=function use(){return typeof document<"u"?document.body:null}()||{},U9=!!vg.style&&"WebkitAppearance"in vg.style);let e=!0;return vg.style&&!function ase(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in vg.style,!e&&U9&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in vg.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return B9(t,r)}getParentElement(t){return Cj(t)}query(t,r,i){return j9(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,a,c=[],h){return new tD(i,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})(),Sj=(()=>{class n{}return n.NOOP=new $9,n})();const cse=1e3,xj="ng-enter",oN="ng-leave",aN="ng-trigger",lN=".ng-trigger",H9="ng-animating",Rj=".ng-animating";function cd(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Mj(parseFloat(e[1]),e[2])}function Mj(n,e){return"s"===e?n*cse:n}function uN(n,e,t){return n.hasOwnProperty("duration")?n:function hse(n,e,t){let i,s=0,a="";if("string"==typeof n){const c=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===c)return e.push(F9()),{duration:0,delay:0,easing:""};i=Mj(parseFloat(c[1]),c[2]);const h=c[3];null!=h&&(s=Mj(parseFloat(h),c[4]));const g=c[5];g&&(a=g)}else i=n;if(!t){let c=!1,h=e.length;i<0&&(e.push(function Die(){return new y.vHH(3100,!1)}()),c=!0),s<0&&(e.push(function Cie(){return new y.vHH(3101,!1)}()),c=!0),c&&e.splice(h,0,F9())}return{duration:i,delay:s,easing:a}}(n,e,t)}function nD(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function z9(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Cf(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function Pu(n,e,t){e.forEach((r,i)=>{const s=Nj(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function Eg(n,e){e.forEach((t,r)=>{const i=Nj(r);n.style[i]=""})}function rD(n){return Array.isArray(n)?1==n.length?n[0]:k9(n):n}const Pj=new RegExp("{{\\s*(.+?)\\s*}}","g");function W9(n){let e=[];if("string"==typeof n){let t;for(;t=Pj.exec(n);)e.push(t[1]);Pj.lastIndex=0}return e}function iD(n,e,t){const r=n.toString(),i=r.replace(Pj,(s,a)=>{let c=e[a];return null==c&&(t.push(function xie(n){return new y.vHH(3003,!1)}()),c=""),c.toString()});return i==r?n:i}function cN(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const mse=/-+([a-z0-9])/g;function Nj(n){return n.replace(mse,(...e)=>e[1].toUpperCase())}function Go(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function Rie(n){return new y.vHH(3004,!1)}()}}function K9(n,e){return window.getComputedStyle(n)[e]}const dN="*";function yse(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function vse(n,e,t){if(":"==n[0]){const h=function Ese(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function Hie(n){return new y.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof h)return void e.push(h);n=h}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function Gie(n){return new y.vHH(3015,!1)}()),e;const i=r[1],s=r[2],a=r[3];e.push(Z9(i,a));"<"==s[0]&&!(i==dN&&a==dN)&&e.push(Z9(a,i))}(r,t,e)):t.push(n),t}const hN=new Set(["true","1"]),fN=new Set(["false","0"]);function Z9(n,e){const t=hN.has(n)||fN.has(n),r=hN.has(e)||fN.has(e);return(i,s)=>{let a=n==dN||n==i,c=e==dN||e==s;return!a&&t&&"boolean"==typeof i&&(a=i?hN.has(n):fN.has(n)),!c&&r&&"boolean"==typeof s&&(c=s?hN.has(e):fN.has(e)),a&&c}}const Ise=new RegExp("s*:selfs*,?","g");function kj(n,e,t,r){return new Tse(n).build(e,t,r)}class Tse{constructor(e){this._driver=e}build(e,t,r){const i=new Ase(t);return this._resetContextStyleTimingState(i),Go(this,rD(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],a=[];return"@"==e.name.charAt(0)&&t.errors.push(function Pie(){return new y.vHH(3006,!1)}()),e.definitions.forEach(c=>{if(this._resetContextStyleTimingState(t),0==c.type){const h=c,g=h.name;g.toString().split(/\s*,\s*/).forEach(E=>{h.name=E,s.push(this.visitState(h,t))}),h.name=g}else if(1==c.type){const h=this.visitTransition(c,t);r+=h.queryCount,i+=h.depCount,a.push(h)}else t.errors.push(function Nie(){return new y.vHH(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:a,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,a=i||{};r.styles.forEach(c=>{c instanceof Map&&c.forEach(h=>{W9(h).forEach(g=>{a.hasOwnProperty(g)||s.add(g)})})}),s.size&&(cN(s.values()),t.errors.push(function kie(n,e){return new y.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Go(this,rD(e.animation),t);return{type:1,matchers:yse(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Ig(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Go(this,r,t)),options:Ig(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(a=>{t.currentTime=r;const c=Go(this,a,t);return i=Math.max(i,t.currentTime),c});return t.currentTime=i,{type:3,steps:s,options:Ig(e.options)}}visitAnimate(e,t){const r=function Cse(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return Oj(uN(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=Oj(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=uN(t,e);return Oj(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:sN({});if(5==s.type)i=this.visitKeyframes(s,t);else{let a=e.styles,c=!1;if(!a){c=!0;const g={};r.easing&&(g.easing=r.easing),a=sN(g)}t.currentTime+=r.duration+r.delay;const h=this.visitStyle(a,t);h.isEmptyStep=c,i=h}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let c of i)"string"==typeof c?c===ud?r.push(c):t.errors.push(new y.vHH(3002,!1)):r.push(z9(c));let s=!1,a=null;return r.forEach(c=>{if(c instanceof Map&&(c.has("easing")&&(a=c.get("easing"),c.delete("easing")),!s))for(let h of c.values())if(h.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:a,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(a=>{"string"!=typeof a&&a.forEach((c,h)=>{const g=t.collectedStyles.get(t.currentQuerySelector),E=g.get(h);let b=!0;E&&(s!=i&&s>=E.startTime&&i<=E.endTime&&(t.errors.push(function Fie(n,e,t,r,i){return new y.vHH(3010,!1)}()),b=!1),s=E.startTime),b&&g.set(h,{startTime:s,endTime:i}),t.options&&function pse(n,e,t){const r=e.params||{},i=W9(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function Sie(n){return new y.vHH(3001,!1)}())})}(c,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Lie(){return new y.vHH(3011,!1)}()),r;let s=0;const a=[];let c=!1,h=!1,g=0;const E=e.steps.map(ne=>{const ce=this._makeStyleAst(ne,t);let me=null!=ce.offset?ce.offset:function Dse(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(ce.styles),Pe=0;return null!=me&&(s++,Pe=ce.offset=me),h=h||Pe<0||Pe>1,c=c||Pe<g,g=Pe,a.push(Pe),ce});h&&t.errors.push(function Vie(){return new y.vHH(3012,!1)}()),c&&t.errors.push(function Uie(){return new y.vHH(3200,!1)}());const b=e.steps.length;let x=0;s>0&&s<b?t.errors.push(function Bie(){return new y.vHH(3202,!1)}()):0==s&&(x=1/(b-1));const M=b-1,O=t.currentTime,V=t.currentAnimateTimings,G=V.duration;return E.forEach((ne,ce)=>{const me=x>0?ce==M?1:x*ce:a[ce],Pe=me*G;t.currentTime=O+V.delay+Pe,V.duration=Pe,this._validateStyleAst(ne,t),ne.offset=me,r.styles.push(ne)}),r}visitReference(e,t){return{type:8,animation:Go(this,rD(e.animation),t),options:Ig(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Ig(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Ig(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,a]=function wse(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(Ise,"")),n=n.replace(/@\*/g,lN).replace(/@\w+/g,t=>lN+"-"+t.slice(1)).replace(/:animating/g,Rj),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,$o(t.collectedStyles,t.currentQuerySelector,new Map);const c=Go(this,rD(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:a,animation:c,originalSelector:e.selector,options:Ig(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function jie(){return new y.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:uN(e.timings,t.errors,!0);return{type:12,animation:Go(this,rD(e.animation),t),timings:r,options:null}}}class Ase{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Ig(n){return n?(n=nD(n)).params&&(n.params=function bse(n){return n?nD(n):null}(n.params)):n={},n}function Oj(n,e,t){return{duration:n,delay:e,easing:t}}function Fj(n,e,t,r,i,s,a=null,c=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:a,subTimeline:c}}class pN{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Rse=new RegExp(":enter","g"),Pse=new RegExp(":leave","g");function Lj(n,e,t,r,i,s=new Map,a=new Map,c,h,g=[]){return(new Nse).buildKeyframes(n,e,t,r,i,s,a,c,h,g)}class Nse{buildKeyframes(e,t,r,i,s,a,c,h,g,E=[]){g=g||new pN;const b=new Vj(e,t,g,i,s,E,[]);b.options=h;const x=h.delay?cd(h.delay):0;b.currentTimeline.delayNextStep(x),b.currentTimeline.setStyles([a],null,b.errors,h),Go(this,r,b);const M=b.timelines.filter(O=>O.containsAnimation());if(M.length&&c.size){let O;for(let V=M.length-1;V>=0;V--){const G=M[V];if(G.element===t){O=G;break}}O&&!O.allowOnlyTimelineStyles()&&O.setStyles([c],null,b.errors,h)}return M.length?M.map(O=>O.buildKeyframes()):[Fj(t,[],[],[],0,x,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,a=this._visitSubInstructions(r,i,i.options);s!=a&&t.transformIntoNewTimeline(a)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const a="number"==typeof s?s:cd(iD(s,i?.params??{},t.errors));r.delayNextStep(a)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const a=null!=r.duration?cd(r.duration):null,c=null!=r.delay?cd(r.delay):null;return 0!==a&&e.forEach(h=>{const g=t.appendInstructionToTimeline(h,a,c);s=Math.max(s,g.duration+g.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Go(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=mN);const a=cd(s.delay);i.delayNextStep(a)}e.steps.length&&(e.steps.forEach(a=>Go(this,a,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?cd(e.options.delay):0;e.steps.forEach(a=>{const c=t.createSubContext(e.options);s&&c.delayNextStep(s),Go(this,a,c),i=Math.max(i,c.currentTimeline.currentTime),r.push(c.currentTimeline)}),r.forEach(a=>t.currentTimeline.mergeTimelineCollectedStyles(a)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return uN(t.params?iD(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,c=t.createSubContext().currentTimeline;c.easing=r.easing,e.styles.forEach(h=>{c.forwardTime((h.offset||0)*s),c.setStyles(h.styles,h.easing,t.errors,t.options),c.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(c),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?cd(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=mN);let a=r;const c=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=c.length;let h=null;c.forEach((g,E)=>{t.currentQueryIndex=E;const b=t.createSubContext(e.options,g);s&&b.delayNextStep(s),g===t.element&&(h=b.currentTimeline),Go(this,e.animation,b),b.currentTimeline.applyStylesToKeyframe(),a=Math.max(a,b.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(a),h&&(t.currentTimeline.mergeTimelineCollectedStyles(h),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,a=Math.abs(s.duration),c=a*(t.currentQueryTotal-1);let h=a*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":h=c-h;break;case"full":h=r.currentStaggerTime}const E=t.currentTimeline;h&&E.delayNextStep(h);const b=E.currentTime;Go(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-b+(i.startTime-r.currentTimeline.startTime)}}const mN={};class Vj{constructor(e,t,r,i,s,a,c,h){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=a,this.timelines=c,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=mN,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=h||new gN(this._driver,t,0),c.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=cd(r.duration)),null!=r.delay&&(i.delay=cd(r.delay));const s=r.params;if(s){let a=i.params;a||(a=this.options.params={}),Object.keys(s).forEach(c=>{(!t||!a.hasOwnProperty(c))&&(a[c]=iD(s[c],a,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new Vj(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=mN,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new kse(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,a){let c=[];if(i&&c.push(this.element),e.length>0){e=(e=e.replace(Rse,"."+this._enterClassName)).replace(Pse,"."+this._leaveClassName);let g=this._driver.query(this.element,e,1!=r);0!==r&&(g=r<0?g.slice(g.length+r,g.length):g.slice(0,r)),c.push(...g)}return!s&&0==c.length&&a.push(function $ie(n){return new y.vHH(3014,!1)}()),c}}class gN{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new gN(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||ud),this._currentKeyframe.set(t,ud);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},a=function Ose(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let s of r)t.set(s,ud)}else Cf(i,t)}),t}(e,this._globalTimelineStyles);for(let[c,h]of a){const g=iD(h,s,r);this._pendingStyles.set(c,g),this._localTimelineStyles.has(c)||this._backFill.set(c,this._globalTimelineStyles.get(c)??ud),this._updateStyle(c,g)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((c,h)=>{const g=Cf(c,new Map,this._backFill);g.forEach((E,b)=>{"!"===E?e.add(b):E===ud&&t.add(b)}),r||g.set("offset",h/this.duration),i.push(g)});const s=e.size?cN(e.values()):[],a=t.size?cN(t.values()):[];if(r){const c=i[0],h=new Map(c);c.set("offset",0),h.set("offset",1),i=[c,h]}return Fj(this.element,i,s,a,this.duration,this.startTime,this.easing,!1)}}class kse extends gN{constructor(e,t,r,i,s,a,c=!1){super(e,t,a.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=c,this.timings={duration:a.duration,delay:a.delay,easing:a.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],a=r+t,c=t/a,h=Cf(e[0]);h.set("offset",0),s.push(h);const g=Cf(e[0]);g.set("offset",X9(c)),s.push(g);const E=e.length-1;for(let b=1;b<=E;b++){let x=Cf(e[b]);const M=x.get("offset");x.set("offset",X9((t+M*r)/a)),s.push(x)}r=a,t=0,i="",e=s}return Fj(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function X9(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class Uj{}const Fse=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Lse extends Uj{normalizePropertyName(e,t){return Nj(e)}normalizeStyleValue(e,t,r,i){let s="";const a=r.toString().trim();if(Fse.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const c=r.match(/^[+-]?[\d\.]+([a-z]*)$/);c&&0==c[1].length&&i.push(function Mie(n,e){return new y.vHH(3005,!1)}())}return a+s}}function J9(n,e,t,r,i,s,a,c,h,g,E,b,x){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:a,timelines:c,queriedElements:h,preStyleProps:g,postStyleProps:E,totalTime:b,errors:x}}const Bj={};class eK{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function Vse(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,a,c,h,g,E){const b=[],x=this.ast.options&&this.ast.options.params||Bj,O=this.buildStyles(r,c&&c.params||Bj,b),V=h&&h.params||Bj,G=this.buildStyles(i,V,b),ne=new Set,ce=new Map,me=new Map,Pe="void"===i,Ye={params:Use(V,x),delay:this.ast.options?.delay},Xe=E?[]:Lj(e,t,this.ast.animation,s,a,O,G,Ye,g,b);let Nt=0;if(Xe.forEach(Di=>{Nt=Math.max(Di.duration+Di.delay,Nt)}),b.length)return J9(t,this._triggerName,r,i,Pe,O,G,[],[],ce,me,Nt,b);Xe.forEach(Di=>{const _o=Di.element,V7=$o(ce,_o,new Set);Di.preStyleProps.forEach(Dg=>V7.add(Dg));const fD=$o(me,_o,new Set);Di.postStyleProps.forEach(Dg=>fD.add(Dg)),_o!==t&&ne.add(_o)});const Gn=cN(ne.values());return J9(t,this._triggerName,r,i,Pe,O,G,Xe,Gn,ce,me,Nt)}}function Use(n,e){const t=nD(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class Bse{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=nD(this.defaultParams);return Object.keys(e).forEach(s=>{const a=e[s];null!==a&&(i[s]=a)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((a,c)=>{a&&(a=iD(a,i,t));const h=this.normalizer.normalizePropertyName(c,t);a=this.normalizer.normalizeStyleValue(c,h,a,t),r.set(c,a)})}),r}}class $se{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new Bse(i.style,i.options&&i.options.params||{},r))}),tK(this.states,"true","1"),tK(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new eK(e,i,this.states))}),this.fallbackTransition=function Gse(n,e,t){return new eK(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(a,c)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(a=>a.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function tK(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const Hse=new pN;class zse{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],s=kj(this._driver,t,r,[]);if(r.length)throw function Zie(n){return new y.vHH(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=L9(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let a;const c=new Map;if(s?(a=Lj(this._driver,t,s,xj,oN,new Map,new Map,r,Hse,i),a.forEach(E=>{const b=$o(c,E.element,new Map);E.postStyleProps.forEach(x=>b.set(x,null))})):(i.push(function Qie(){return new y.vHH(3300,!1)}()),a=[]),i.length)throw function Yie(n){return new y.vHH(3504,!1)}();c.forEach((E,b)=>{E.forEach((x,M)=>{E.set(M,this._driver.computeStyle(b,M,ud))})});const g=Df(a.map(E=>{const b=c.get(E.element);return this._buildPlayer(E,new Map,b)}));return this._playersById.set(e,g),g.onDestroy(()=>this.destroy(e)),this.players.push(g),g}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function Xie(n){return new y.vHH(3301,!1)}();return t}listen(e,t,r,i){const s=Dj(t,"","","");return bj(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const nK="ng-animate-queued",jj="ng-animate-disabled",Qse=[],rK={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Yse={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ea="__ng_removed";class $j{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function toe(n){return n??null}(r?e.value:e),r){const s=nD(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const sD="void",Gj=new $j(sD);class Xse{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ia(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function Jie(n,e){return new y.vHH(3302,!1)}();if(null==r||0==r.length)throw function ese(n){return new y.vHH(3303,!1)}();if(!function noe(n){return"start"==n||"done"==n}(r))throw function tse(n,e){return new y.vHH(3400,!1)}();const s=$o(this._elementListeners,e,[]),a={name:t,phase:r,callback:i};s.push(a);const c=$o(this._engine.statesByElement,e,new Map);return c.has(t)||(Ia(e,aN),Ia(e,aN+"-"+t),c.set(t,Gj)),()=>{this._engine.afterFlush(()=>{const h=s.indexOf(a);h>=0&&s.splice(h,1),this._triggers.has(t)||c.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function nse(n){return new y.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),a=new Hj(this.id,t,e);let c=this._engine.statesByElement.get(e);c||(Ia(e,aN),Ia(e,aN+"-"+t),this._engine.statesByElement.set(e,c=new Map));let h=c.get(t);const g=new $j(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&h&&g.absorbOptions(h.options),c.set(t,g),h||(h=Gj),g.value!==sD&&h.value===g.value){if(!function soe(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(h.params,g.params)){const V=[],G=s.matchStyles(h.value,h.params,V),ne=s.matchStyles(g.value,g.params,V);V.length?this._engine.reportError(V):this._engine.afterFlush(()=>{Eg(e,G),Pu(e,ne)})}return}const x=$o(this._engine.playersByElement,e,[]);x.forEach(V=>{V.namespaceId==this.id&&V.triggerName==t&&V.queued&&V.destroy()});let M=s.matchTransition(h.value,g.value,e,g.params),O=!1;if(!M){if(!i)return;M=s.fallbackTransition,O=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:M,fromState:h,toState:g,player:a,isFallbackTransition:O}),O||(Ia(e,nK),a.onStart(()=>{nI(e,nK)})),a.onDone(()=>{let V=this.players.indexOf(a);V>=0&&this.players.splice(V,1);const G=this._engine.playersByElement.get(e);if(G){let ne=G.indexOf(a);ne>=0&&G.splice(ne,1)}}),this.players.push(a),x.push(a),a}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,lN,!0);r.forEach(i=>{if(i[Ea])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(a=>a.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),a=new Map;if(s){const c=[];if(s.forEach((h,g)=>{if(a.set(g,h.value),this._triggers.has(g)){const E=this.trigger(e,g,sD,i);E&&c.push(E)}}),c.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,a),r&&Df(c).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const a=s.name;if(i.has(a))return;i.add(a);const h=this._triggers.get(a).fallbackTransition,g=r.get(a)||Gj,E=new $j(sD),b=new Hj(this.id,a,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:a,transition:h,fromState:g,toState:E,player:b,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let a=e;for(;a=a.parentNode;)if(r.statesByElement.get(a)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Ea];(!s||s===rK)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Ia(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,a=this._elementListeners.get(s);a&&a.forEach(c=>{if(c.name==r.triggerName){const h=Dj(s,r.triggerName,r.fromState.value,r.toState.value);h._data=e,bj(r.player,c.phase,h,c.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,a=i.transition.ast.depCount;return 0==s||0==a?s-a:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class Jse{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new Xse(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let a=!1,c=this.driver.getParentElement(t);for(;c;){const h=i.get(c);if(h){const g=r.indexOf(h);r.splice(g+1,0,e),a=!0;break}c=this.driver.getParentElement(c)}a||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(_N(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!_N(t))return;const s=t[Ea];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const a=this.collectedLeaveElements.indexOf(t);a>=0&&this.collectedLeaveElements.splice(a,1)}if(e){const a=this._fetchNamespace(e);a&&a.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ia(e,jj)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),nI(e,jj))}removeNode(e,t,r){if(_N(t)){const i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);const s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[Ea]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return _N(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,lN,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,Rj,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Df(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Ea];if(t&&t.setForRemoval){if(e[Ea]=rK,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(jj)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Ia(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Df(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function rse(n){return new y.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new pN,i=[],s=new Map,a=[],c=new Map,h=new Map,g=new Map,E=new Set;this.disabledNodes.forEach(yt=>{E.add(yt);const Mt=this.driver.query(yt,".ng-animate-queued",!0);for(let Ut=0;Ut<Mt.length;Ut++)E.add(Mt[Ut])});const b=this.bodyNode,x=Array.from(this.statesByElement.keys()),M=oK(x,this.collectedEnterElements),O=new Map;let V=0;M.forEach((yt,Mt)=>{const Ut=xj+V++;O.set(Mt,Ut),yt.forEach(En=>Ia(En,Ut))});const G=[],ne=new Set,ce=new Set;for(let yt=0;yt<this.collectedLeaveElements.length;yt++){const Mt=this.collectedLeaveElements[yt],Ut=Mt[Ea];Ut&&Ut.setForRemoval&&(G.push(Mt),ne.add(Mt),Ut.hasAnimation?this.driver.query(Mt,".ng-star-inserted",!0).forEach(En=>ne.add(En)):ce.add(Mt))}const me=new Map,Pe=oK(x,Array.from(ne));Pe.forEach((yt,Mt)=>{const Ut=oN+V++;me.set(Mt,Ut),yt.forEach(En=>Ia(En,Ut))}),e.push(()=>{M.forEach((yt,Mt)=>{const Ut=O.get(Mt);yt.forEach(En=>nI(En,Ut))}),Pe.forEach((yt,Mt)=>{const Ut=me.get(Mt);yt.forEach(En=>nI(En,Ut))}),G.forEach(yt=>{this.processLeaveNode(yt)})});const Ye=[],Xe=[];for(let yt=this._namespaceList.length-1;yt>=0;yt--)this._namespaceList[yt].drainQueuedTransitions(t).forEach(Ut=>{const En=Ut.player,Ci=Ut.element;if(Ye.push(En),this.collectedEnterElements.length){const Is=Ci[Ea];if(Is&&Is.setForMove){if(Is.previousTriggersValues&&Is.previousTriggersValues.has(Ut.triggerName)){const Cg=Is.previousTriggersValues.get(Ut.triggerName),Ta=this.statesByElement.get(Ut.element);if(Ta&&Ta.has(Ut.triggerName)){const NN=Ta.get(Ut.triggerName);NN.value=Cg,Ta.set(Ut.triggerName,NN)}}return void En.destroy()}}const ku=!b||!this.driver.containsElement(b,Ci),Ho=me.get(Ci),Mf=O.get(Ci),Ir=this._buildInstruction(Ut,r,Mf,Ho,ku);if(Ir.errors&&Ir.errors.length)return void Xe.push(Ir);if(ku)return En.onStart(()=>Eg(Ci,Ir.fromStyles)),En.onDestroy(()=>Pu(Ci,Ir.toStyles)),void i.push(En);if(Ut.isFallbackTransition)return En.onStart(()=>Eg(Ci,Ir.fromStyles)),En.onDestroy(()=>Pu(Ci,Ir.toStyles)),void i.push(En);const j7=[];Ir.timelines.forEach(Is=>{Is.stretchStartingKeyframe=!0,this.disabledNodes.has(Is.element)||j7.push(Is)}),Ir.timelines=j7,r.append(Ci,Ir.timelines),a.push({instruction:Ir,player:En,element:Ci}),Ir.queriedElements.forEach(Is=>$o(c,Is,[]).push(En)),Ir.preStyleProps.forEach((Is,Cg)=>{if(Is.size){let Ta=h.get(Cg);Ta||h.set(Cg,Ta=new Set),Is.forEach((NN,_$)=>Ta.add(_$))}}),Ir.postStyleProps.forEach((Is,Cg)=>{let Ta=g.get(Cg);Ta||g.set(Cg,Ta=new Set),Is.forEach((NN,_$)=>Ta.add(_$))})});if(Xe.length){const yt=[];Xe.forEach(Mt=>{yt.push(function ise(n,e){return new y.vHH(3505,!1)}())}),Ye.forEach(Mt=>Mt.destroy()),this.reportError(yt)}const Nt=new Map,Gn=new Map;a.forEach(yt=>{const Mt=yt.element;r.has(Mt)&&(Gn.set(Mt,Mt),this._beforeAnimationBuild(yt.player.namespaceId,yt.instruction,Nt))}),i.forEach(yt=>{const Mt=yt.element;this._getPreviousPlayers(Mt,!1,yt.namespaceId,yt.triggerName,null).forEach(En=>{$o(Nt,Mt,[]).push(En),En.destroy()})});const Di=G.filter(yt=>lK(yt,h,g)),_o=new Map;sK(_o,this.driver,ce,g,ud).forEach(yt=>{lK(yt,h,g)&&Di.push(yt)});const fD=new Map;M.forEach((yt,Mt)=>{sK(fD,this.driver,new Set(yt),h,"!")}),Di.forEach(yt=>{const Mt=_o.get(yt),Ut=fD.get(yt);_o.set(yt,new Map([...Mt?.entries()??[],...Ut?.entries()??[]]))});const Dg=[],U7=[],B7={};a.forEach(yt=>{const{element:Mt,player:Ut,instruction:En}=yt;if(r.has(Mt)){if(E.has(Mt))return Ut.onDestroy(()=>Pu(Mt,En.toStyles)),Ut.disabled=!0,Ut.overrideTotalTime(En.totalTime),void i.push(Ut);let Ci=B7;if(Gn.size>1){let Ho=Mt;const Mf=[];for(;Ho=Ho.parentNode;){const Ir=Gn.get(Ho);if(Ir){Ci=Ir;break}Mf.push(Ho)}Mf.forEach(Ir=>Gn.set(Ir,Ci))}const ku=this._buildAnimation(Ut.namespaceId,En,Nt,s,fD,_o);if(Ut.setRealPlayer(ku),Ci===B7)Dg.push(Ut);else{const Ho=this.playersByElement.get(Ci);Ho&&Ho.length&&(Ut.parentPlayer=Df(Ho)),i.push(Ut)}}else Eg(Mt,En.fromStyles),Ut.onDestroy(()=>Pu(Mt,En.toStyles)),U7.push(Ut),E.has(Mt)&&i.push(Ut)}),U7.forEach(yt=>{const Mt=s.get(yt.element);if(Mt&&Mt.length){const Ut=Df(Mt);yt.setRealPlayer(Ut)}}),i.forEach(yt=>{yt.parentPlayer?yt.syncPlayerEvents(yt.parentPlayer):yt.destroy()});for(let yt=0;yt<G.length;yt++){const Mt=G[yt],Ut=Mt[Ea];if(nI(Mt,oN),Ut&&Ut.hasAnimation)continue;let En=[];if(c.size){let ku=c.get(Mt);ku&&ku.length&&En.push(...ku);let Ho=this.driver.query(Mt,Rj,!0);for(let Mf=0;Mf<Ho.length;Mf++){let Ir=c.get(Ho[Mf]);Ir&&Ir.length&&En.push(...Ir)}}const Ci=En.filter(ku=>!ku.destroyed);Ci.length?roe(this,Mt,Ci):this.processLeaveNode(Mt)}return G.length=0,Dg.forEach(yt=>{this.players.push(yt),yt.onDone(()=>{yt.destroy();const Mt=this.players.indexOf(yt);this.players.splice(Mt,1)}),yt.play()}),Dg}elementContainsData(e,t){let r=!1;const i=t[Ea];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let a=[];if(t){const c=this.playersByQueriedElement.get(e);c&&(a=c)}else{const c=this.playersByElement.get(e);if(c){const h=!s||s==sD;c.forEach(g=>{g.queued||!h&&g.triggerName!=i||a.push(g)})}}return(r||i)&&(a=a.filter(c=>!(r&&r!=c.namespaceId||i&&i!=c.triggerName))),a}_beforeAnimationBuild(e,t,r){const s=t.element,a=t.isRemovalTransition?void 0:e,c=t.isRemovalTransition?void 0:t.triggerName;for(const h of t.timelines){const g=h.element,E=g!==s,b=$o(r,g,[]);this._getPreviousPlayers(g,E,a,c,t.toState).forEach(M=>{const O=M.getRealPlayer();O.beforeDestroy&&O.beforeDestroy(),M.destroy(),b.push(M)})}Eg(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,a){const c=t.triggerName,h=t.element,g=[],E=new Set,b=new Set,x=t.timelines.map(O=>{const V=O.element;E.add(V);const G=V[Ea];if(G&&G.removedBeforeQueried)return new tD(O.duration,O.delay);const ne=V!==h,ce=function ioe(n){const e=[];return aK(n,e),e}((r.get(V)||Qse).map(Nt=>Nt.getRealPlayer())).filter(Nt=>!!Nt.element&&Nt.element===V),me=s.get(V),Pe=a.get(V),Ye=L9(this._normalizer,O.keyframes,me,Pe),Xe=this._buildPlayer(O,Ye,ce);if(O.subTimeline&&i&&b.add(V),ne){const Nt=new Hj(e,c,V);Nt.setRealPlayer(Xe),g.push(Nt)}return Xe});g.forEach(O=>{$o(this.playersByQueriedElement,O.element,[]).push(O),O.onDone(()=>function eoe(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,O.element,O))}),E.forEach(O=>Ia(O,H9));const M=Df(x);return M.onDestroy(()=>{E.forEach(O=>nI(O,H9)),Pu(h,t.toStyles)}),b.forEach(O=>{$o(i,O,[]).push(M)}),M}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new tD(e.duration,e.delay)}}class Hj{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new tD,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>bj(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){$o(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function _N(n){return n&&1===n.nodeType}function iK(n,e){const t=n.style.display;return n.style.display=e??"none",t}function sK(n,e,t,r,i){const s=[];t.forEach(h=>s.push(iK(h)));const a=[];r.forEach((h,g)=>{const E=new Map;h.forEach(b=>{const x=e.computeStyle(g,b,i);E.set(b,x),(!x||0==x.length)&&(g[Ea]=Yse,a.push(g))}),n.set(g,E)});let c=0;return t.forEach(h=>iK(h,s[c++])),a}function oK(n,e){const t=new Map;if(n.forEach(c=>t.set(c,[])),0==e.length)return t;const i=new Set(e),s=new Map;function a(c){if(!c)return 1;let h=s.get(c);if(h)return h;const g=c.parentNode;return h=t.has(g)?g:i.has(g)?1:a(g),s.set(c,h),h}return e.forEach(c=>{const h=a(c);1!==h&&t.get(h).push(c)}),t}function Ia(n,e){n.classList?.add(e)}function nI(n,e){n.classList?.remove(e)}function roe(n,e,t){Df(t).onDone(()=>n.processLeaveNode(e))}function aK(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof O9?aK(r.players,e):e.push(r)}}function lK(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class yN{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new Jse(e,t,r),this._timelineEngine=new zse(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const a=e+"-"+i;let c=this._triggerCache[a];if(!c){const h=[],E=kj(this._driver,s,h,[]);if(h.length)throw function Wie(n,e){return new y.vHH(3404,!1)}();c=function jse(n,e,t){return new $se(n,e,t)}(i,E,this._normalizer),this._triggerCache[a]=c}this._transitionEngine.registerTrigger(t,i,c)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,a]=V9(r);this._timelineEngine.command(s,t,a,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[a,c]=V9(r);return this._timelineEngine.listen(a,t,c,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}let aoe=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Pu(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Pu(this._element,this._initialStyles),this._endStyles&&(Pu(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Eg(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Eg(this._element,this._endStyles),this._endStyles=null),Pu(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function zj(n){let e=null;return n.forEach((t,r)=>{(function loe(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class uK{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:K9(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class uoe{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return B9(e,t)}getParentElement(e){return Cj(e)}query(e,t,r){return j9(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,a=[]){const h={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(h.easing=s);const g=new Map,E=a.filter(M=>M instanceof uK);(function gse(n,e){return 0===n||0===e})(r,i)&&E.forEach(M=>{M.currentSnapshot.forEach((O,V)=>g.set(V,O))});let b=function fse(n){return n.length?n[0]instanceof Map?n:n.map(e=>z9(e)):[]}(t).map(M=>Cf(M));b=function _se(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,a)=>{r.has(a)||i.push(a),r.set(a,s)}),i.length)for(let s=1;s<e.length;s++){let a=e[s];i.forEach(c=>a.set(c,K9(n,c)))}}return e}(e,b,g);const x=function ooe(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=zj(e[0]),e.length>1&&(r=zj(e[e.length-1]))):e instanceof Map&&(t=zj(e)),t||r?new aoe(n,t,r):null}(e,b);return new uK(e,b,h,x)}}let coe=(()=>{class n extends N9{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:y.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?k9(t):t;return cK(this._renderer,null,r,"register",[i]),new doe(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(y.FYo),y.LFG(Te))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();class doe extends Iie{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new hoe(this._id,e,t||{},this._renderer)}}class hoe{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return cK(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function cK(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const dK="@.disabled";let foe=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,r.onRemovalComplete=(s,a)=>{const c=a?.parentNode(s);c&&a.removeChild(c,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let E=this._rendererCache.get(s);return E||(E=new hK("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,E)),E}const a=r.id,c=r.id+"-"+this._currentId;this._currentId++,this.engine.register(c,t);const h=E=>{Array.isArray(E)?E.forEach(h):this.engine.registerTrigger(a,c,t,E.name,E)};return r.data.animation.forEach(h),new poe(this,c,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[a,c]=s;a(c)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(y.FYo),y.LFG(yN),y.LFG(y.R0b))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();class hK{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==dK?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class poe extends hK{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==dK?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function moe(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),a="";return"@"!=s.charAt(0)&&([s,a]=function goe(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,a,c=>{this.factory.scheduleListenerCallback(c._data||-1,r,c)})}return this.delegate.listen(e,t,r)}}let _oe=(()=>{class n extends yN{constructor(t,r,i,s){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(Te),y.LFG(Sj),y.LFG(Uj),y.LFG(y.z2F))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();const fK=[{provide:N9,useClass:coe},{provide:Uj,useFactory:function yoe(){return new Lse}},{provide:yN,useClass:_oe},{provide:y.FYo,useFactory:function voe(n,e,t){return new foe(n,e,t)},deps:[Oi,yN,y.R0b]}],qj=[{provide:Sj,useFactory:()=>new uoe},{provide:y.QbO,useValue:"BrowserAnimations"},...fK],pK=[{provide:Sj,useClass:$9},{provide:y.QbO,useValue:"NoopAnimations"},...fK];let Eoe=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?pK:qj}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({providers:qj,imports:[qu]}),n})();const iI=new y.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>AN}),AN="always";let f$,t7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({}),n})(),yae=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({imports:[t7]}),n})(),Eae=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:iI,useValue:t.callSetDisabledState??AN}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({imports:[yae]}),n})(),Iae=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Tae=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({providers:[Iae]}),n})();try{f$=typeof Intl<"u"&&Intl.v8BreakIterator}catch{f$=!1}let cD,v7=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function Il(n){return n===Eo}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!f$)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(y.Lbi))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function dD(n){return function wae(){if(null==cD&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>cD=!0}))}finally{cD=cD||!1}return cD}()?n:!!n.capture}function I7(n){return Array.isArray(n)?n:[n]}function T7(n){return n instanceof y.SBq?n.nativeElement:n}var Oae=F(2420);function Fae(n){return(0,si.e)((e,t)=>{(0,Fl.Xf)(n).subscribe((0,pi.x)(t,()=>t.complete(),Oae.Z)),!t.closed&&e.subscribe(t)})}const w7=new Set;let Ag,Lae=(()=>{class n{constructor(t,r){this._platform=t,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Uae}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function Vae(n,e){if(!w7.has(n))try{Ag||(Ag=document.createElement("style"),e&&(Ag.nonce=e),Ag.setAttribute("type","text/css"),document.head.appendChild(Ag)),Ag.sheet&&(Ag.sheet.insertRule(`@media ${n} {body{ }}`,0),w7.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(v7),y.LFG(y.Ojb,8))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Uae(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let Bae=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new mi.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return b7(I7(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let s=Yu(b7(I7(t)).map(a=>this._registerQuery(a).observable));return s=Xo(s.pipe(ta(1)),s.pipe(function Nae(n){return ss((e,t)=>n<=t)}(1),function kae(n,e=$w){return(0,si.e)((t,r)=>{let i=null,s=null,a=null;const c=()=>{if(i){i.unsubscribe(),i=null;const g=s;s=null,r.next(g)}};function h(){const g=a+n,E=e.now();if(E<g)return i=this.schedule(void 0,g-E),void r.add(i);c()}t.subscribe((0,pi.x)(r,g=>{s=g,a=e.now(),i||(i=e.schedule(h,n),r.add(i))},()=>{c(),r.complete()},void 0,()=>{s=i=null}))})}(0))),s.pipe((0,Ht.U)(a=>{const c={matches:!1,breakpoints:{}};return a.forEach(({matches:h,query:g})=>{c.matches=c.matches||h,c.breakpoints[g]=h}),c}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),s={observable:new Ss.y(a=>{const c=h=>this._zone.run(()=>a.next(h));return r.addListener(c),()=>{r.removeListener(c)}}).pipe(eo(r),(0,Ht.U)(({matches:a})=>({query:t,matches:a})),Fae(this._destroySubject)),mql:r};return this._queries.set(t,s),s}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(Lae),y.LFG(y.R0b))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function b7(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}const S7="cdk-high-contrast-black-on-white",x7="cdk-high-contrast-white-on-black",m$="cdk-high-contrast-active";let Yae=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=(0,y.f3M)(Bae).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(m$,S7,x7),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(m$,S7):2===r&&t.add(m$,x7)}}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(v7),y.LFG(Te))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),R7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({}),n})();const tle=new y.OlP("mat-sanity-checks",{providedIn:"root",factory:function ele(){return!0}});let MN=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function Dae(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(Yae),y.LFG(tle,8),y.LFG(Te))},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({imports:[R7,R7]}),n})();class rle{constructor(e,t,r,i=!1){this._renderer=e,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const N7=dD({passive:!0,capture:!0});class ile{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=function Aae(n){return n.composedPath?n.composedPath()[0]:n.target}(e);t&&this._events.get(e.type)?.forEach((r,i)=>{(i===t||i.contains(t))&&r.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,r,i){const s=this._events.get(t);if(s){const a=s.get(r);a?a.add(i):s.set(r,new Set([i]))}else this._events.set(t,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,N7)})}removeHandler(e,t,r){const i=this._events.get(e);if(!i)return;const s=i.get(t);s&&(s.delete(r),0===s.size&&i.delete(t),0===i.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,N7)))}}const k7={enterDuration:225,exitDuration:150},O7=dD({passive:!0,capture:!0}),F7=["mousedown","touchstart"],L7=["mouseup","mouseleave","touchend","touchcancel"];class PN{constructor(e,t,r,i){this._target=e,this._ngZone=t,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=T7(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...k7,...r.animation};r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const a=r.radius||function ole(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),c=e-i.left,h=t-i.top,g=s.enterDuration,E=document.createElement("div");E.classList.add("mat-ripple-element"),E.style.left=c-a+"px",E.style.top=h-a+"px",E.style.height=2*a+"px",E.style.width=2*a+"px",null!=r.color&&(E.style.backgroundColor=r.color),E.style.transitionDuration=`${g}ms`,this._containerElement.appendChild(E);const b=window.getComputedStyle(E),M=b.transitionDuration,O="none"===b.transitionProperty||"0s"===M||"0s, 0s"===M||0===i.width&&0===i.height,V=new rle(this,E,r,O);E.style.transform="scale3d(1, 1, 1)",V.state=0,r.persistent||(this._mostRecentTransientRipple=V);let G=null;return!O&&(g||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const ne=()=>this._finishRippleTransition(V),ce=()=>this._destroyRipple(V);E.addEventListener("transitionend",ne),E.addEventListener("transitioncancel",ce),G={onTransitionEnd:ne,onTransitionCancel:ce}}),this._activeRipples.set(V,G),(O||!g)&&this._finishRippleTransition(V),V}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,r={...k7,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=T7(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,F7.forEach(r=>{PN._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{L7.forEach(t=>{this._triggerElement.addEventListener(t,this,O7)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=1,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=function Kae(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!function Zae(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(F7.forEach(t=>PN._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&L7.forEach(t=>e.removeEventListener(t,this,O7)))}}PN._eventManager=new ile;let g$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({imports:[MN,Ni,Tae,MN]}),n})(),fle=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({}),n})(),ple=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({imports:[MN,g$,g$,fle,MN]}),n})();tC(P9.firebaseConfig),function Qre(n,e){const r="string"==typeof n?n:e||"(default)",i=uh("object"==typeof n?n:nC(),"firestore").getImmediate({identifier:r});if(!i._initialized){const s=(0,Ie.P0)("firestore");s&&function qre(n,e,t,r={}){var i;const s=(n=fn(n,KA))._getSettings(),a=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==a&&function Du(n,...e){if(cf.logLevel<=Vr.in.WARN){const t=e.map(p2);cf.warn(`Firestore (${mA}): ${n}`,...t)}}("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let c,h;if("string"==typeof r.mockUserToken)c=r.mockUserToken,h=wi.MOCK_USER;else{c=(0,Ie.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Ne(le_INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new wi(g)}n._authCredentials=new Wee(new EW(c,h))}}(i,...s)}}();let mle=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=y.oAB({type:n,bootstrap:[Gee]}),n.\u0275inj=y.cJS({providers:[pA,{provide:ol.Dh,useValue:P9.firebaseConfig}],imports:[qu,Eoe,$ee,Eae,g$,ple]}),n})();Jg().bootstrapModule(mle).catch(n=>console.error(n))},5619:(vt,Re,F)=>{F.d(Re,{X:()=>Q});var y=F(8645);class Q extends y.x{constructor(se){super(),this._value=se}get value(){return this.getValue()}_subscribe(se){const _e=super._subscribe(se);return!_e.closed&&se.next(this._value),_e}getValue(){const{hasError:se,thrownError:_e,_value:Te}=this;if(se)throw _e;return this._throwIfClosed(),Te}next(se){super.next(this._value=se)}}},5592:(vt,Re,F)=>{F.d(Re,{y:()=>Ke});var y=F(305),Q=F(7394),j=F(4850),se=F(8407),_e=F(2653),Te=F(4674),Ue=F(1441);let Ke=(()=>{class Y{constructor(Be){Be&&(this._subscribe=Be)}lift(Be){const ut=new Y;return ut.source=this,ut.operator=Be,ut}subscribe(Be,ut,Me){const Le=function H(Y){return Y&&Y instanceof y.Lv||function B(Y){return Y&&(0,Te.m)(Y.next)&&(0,Te.m)(Y.error)&&(0,Te.m)(Y.complete)}(Y)&&(0,Q.Nn)(Y)}(Be)?Be:new y.Hp(Be,ut,Me);return(0,Ue.x)(()=>{const{operator:je,source:gt}=this;Le.add(je?je.call(Le,gt):gt?this._subscribe(Le):this._trySubscribe(Le))}),Le}_trySubscribe(Be){try{return this._subscribe(Be)}catch(ut){Be.error(ut)}}forEach(Be,ut){return new(ut=Oe(ut))((Me,Le)=>{const je=new y.Hp({next:gt=>{try{Be(gt)}catch(Dt){Le(Dt),je.unsubscribe()}},error:Le,complete:Me});this.subscribe(je)})}_subscribe(Be){var ut;return null===(ut=this.source)||void 0===ut?void 0:ut.subscribe(Be)}[j.L](){return this}pipe(...Be){return(0,se.U)(Be)(this)}toPromise(Be){return new(Be=Oe(Be))((ut,Me)=>{let Le;this.subscribe(je=>Le=je,je=>Me(je),()=>ut(Le))})}}return Y.create=qe=>new Y(qe),Y})();function Oe(Y){var qe;return null!==(qe=Y??_e.config.Promise)&&void 0!==qe?qe:Promise}},8645:(vt,Re,F)=>{F.d(Re,{x:()=>Ue});var y=F(5592),Q=F(7394);const se=(0,F(2306).d)(Oe=>function(){Oe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var _e=F(9039),Te=F(1441);let Ue=(()=>{class Oe extends y.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const Y=new Ke(this,this);return Y.operator=H,Y}_throwIfClosed(){if(this.closed)throw new se}next(H){(0,Te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Y of this.currentObservers)Y.next(H)}})}error(H){(0,Te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:Y}=this;for(;Y.length;)Y.shift().error(H)}})}complete(){(0,Te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:Y,isStopped:qe,observers:Be}=this;return Y||qe?Q.Lc:(this.currentObservers=null,Be.push(H),new Q.w0(()=>{this.currentObservers=null,(0,_e.P)(Be,H)}))}_checkFinalizedStatuses(H){const{hasError:Y,thrownError:qe,isStopped:Be}=this;Y?H.error(qe):Be&&H.complete()}asObservable(){const H=new y.y;return H.source=this,H}}return Oe.create=(B,H)=>new Ke(B,H),Oe})();class Ke extends Ue{constructor(B,H){super(),this.destination=B,this.source=H}next(B){var H,Y;null===(Y=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===Y||Y.call(H,B)}error(B){var H,Y;null===(Y=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===Y||Y.call(H,B)}complete(){var B,H;null===(H=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===H||H.call(B)}_subscribe(B){var H,Y;return null!==(Y=null===(H=this.source)||void 0===H?void 0:H.subscribe(B))&&void 0!==Y?Y:Q.Lc}}},305:(vt,Re,F)=>{F.d(Re,{Hp:()=>Me,Lv:()=>Y});var y=F(4674),Q=F(7394),j=F(2653),se=F(3894),_e=F(2420);const Te=Oe("C",void 0,void 0);function Oe(oe,De,J){return{kind:oe,value:De,error:J}}var B=F(7599),H=F(1441);class Y extends Q.w0{constructor(De){super(),this.isStopped=!1,De?(this.destination=De,(0,Q.Nn)(De)&&De.add(this)):this.destination=Dt}static create(De,J,he){return new Me(De,J,he)}next(De){this.isStopped?gt(function Ke(oe){return Oe("N",oe,void 0)}(De),this):this._next(De)}error(De){this.isStopped?gt(function Ue(oe){return Oe("E",void 0,oe)}(De),this):(this.isStopped=!0,this._error(De))}complete(){this.isStopped?gt(Te,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(De){this.destination.next(De)}_error(De){try{this.destination.error(De)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const qe=Function.prototype.bind;function Be(oe,De){return qe.call(oe,De)}class ut{constructor(De){this.partialObserver=De}next(De){const{partialObserver:J}=this;if(J.next)try{J.next(De)}catch(he){Le(he)}}error(De){const{partialObserver:J}=this;if(J.error)try{J.error(De)}catch(he){Le(he)}else Le(De)}complete(){const{partialObserver:De}=this;if(De.complete)try{De.complete()}catch(J){Le(J)}}}class Me extends Y{constructor(De,J,he){let Ge;if(super(),(0,y.m)(De)||!De)Ge={next:De??void 0,error:J??void 0,complete:he??void 0};else{let X;this&&j.config.useDeprecatedNextContext?(X=Object.create(De),X.unsubscribe=()=>this.unsubscribe(),Ge={next:De.next&&Be(De.next,X),error:De.error&&Be(De.error,X),complete:De.complete&&Be(De.complete,X)}):Ge=De}this.destination=new ut(Ge)}}function Le(oe){j.config.useDeprecatedSynchronousErrorHandling?(0,H.O)(oe):(0,se.h)(oe)}function gt(oe,De){const{onStoppedNotification:J}=j.config;J&&B.z.setTimeout(()=>J(oe,De))}const Dt={closed:!0,next:_e.Z,error:function je(oe){throw oe},complete:_e.Z}},7394:(vt,Re,F)=>{F.d(Re,{Lc:()=>Te,w0:()=>_e,Nn:()=>Ue});var y=F(4674);const j=(0,F(2306).d)(Oe=>function(H){Oe(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((Y,qe)=>`${qe+1}) ${Y.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var se=F(9039);class _e{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const Be of H)Be.remove(this);else H.remove(this);const{initialTeardown:Y}=this;if((0,y.m)(Y))try{Y()}catch(Be){B=Be instanceof j?Be.errors:[Be]}const{_finalizers:qe}=this;if(qe){this._finalizers=null;for(const Be of qe)try{Ke(Be)}catch(ut){B=B??[],ut instanceof j?B=[...B,...ut.errors]:B.push(ut)}}if(B)throw new j(B)}}add(B){var H;if(B&&B!==this)if(this.closed)Ke(B);else{if(B instanceof _e){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push(B)}}_hasParent(B){const{_parentage:H}=this;return H===B||Array.isArray(H)&&H.includes(B)}_addParent(B){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(B),H):H?[H,B]:B}_removeParent(B){const{_parentage:H}=this;H===B?this._parentage=null:Array.isArray(H)&&(0,se.P)(H,B)}remove(B){const{_finalizers:H}=this;H&&(0,se.P)(H,B),B instanceof _e&&B._removeParent(this)}}_e.EMPTY=(()=>{const Oe=new _e;return Oe.closed=!0,Oe})();const Te=_e.EMPTY;function Ue(Oe){return Oe instanceof _e||Oe&&"closed"in Oe&&(0,y.m)(Oe.remove)&&(0,y.m)(Oe.add)&&(0,y.m)(Oe.unsubscribe)}function Ke(Oe){(0,y.m)(Oe)?Oe():Oe.unsubscribe()}},2653:(vt,Re,F)=>{F.d(Re,{config:()=>y});const y={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(vt,Re,F)=>{F.d(Re,{E:()=>Q});const Q=new(F(5592).y)(_e=>_e.complete())},2459:(vt,Re,F)=>{F.d(Re,{D:()=>De});var y=F(4829),Q=F(3093),j=F(5137),Te=F(5592),Ke=F(4971),Oe=F(4674),B=F(7103);function Y(J,he){if(!J)throw new Error("Iterable cannot be null");return new Te.y(Ge=>{(0,B.f)(Ge,he,()=>{const X=J[Symbol.asyncIterator]();(0,B.f)(Ge,he,()=>{X.next().then(be=>{be.done?Ge.complete():Ge.next(be.value)})},0,!0)})})}var qe=F(8382),Be=F(4026),ut=F(4266),Me=F(3664),Le=F(5726),je=F(9853),gt=F(541);function De(J,he){return he?function oe(J,he){if(null!=J){if((0,qe.c)(J))return function se(J,he){return(0,y.Xf)(J).pipe((0,j.R)(he),(0,Q.Q)(he))}(J,he);if((0,ut.z)(J))return function Ue(J,he){return new Te.y(Ge=>{let X=0;return he.schedule(function(){X===J.length?Ge.complete():(Ge.next(J[X++]),Ge.closed||this.schedule())})})}(J,he);if((0,Be.t)(J))return function _e(J,he){return(0,y.Xf)(J).pipe((0,j.R)(he),(0,Q.Q)(he))}(J,he);if((0,Le.D)(J))return Y(J,he);if((0,Me.T)(J))return function H(J,he){return new Te.y(Ge=>{let X;return(0,B.f)(Ge,he,()=>{X=J[Ke.h](),(0,B.f)(Ge,he,()=>{let be,Se;try{({value:be,done:Se}=X.next())}catch(Ot){return void Ge.error(Ot)}Se?Ge.complete():Ge.next(be)},0,!0)}),()=>(0,Oe.m)(X?.return)&&X.return()})}(J,he);if((0,gt.L)(J))return function Dt(J,he){return Y((0,gt.Q)(J),he)}(J,he)}throw(0,je.z)(J)}(J,he):(0,y.Xf)(J)}},4829:(vt,Re,F)=>{F.d(Re,{Xf:()=>qe});var y=F(7582),Q=F(4266),j=F(4026),se=F(5592),_e=F(8382),Te=F(5726),Ue=F(9853),Ke=F(3664),Oe=F(541),B=F(4674),H=F(3894),Y=F(4850);function qe(oe){if(oe instanceof se.y)return oe;if(null!=oe){if((0,_e.c)(oe))return function Be(oe){return new se.y(De=>{const J=oe[Y.L]();if((0,B.m)(J.subscribe))return J.subscribe(De);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(oe);if((0,Q.z)(oe))return function ut(oe){return new se.y(De=>{for(let J=0;J<oe.length&&!De.closed;J++)De.next(oe[J]);De.complete()})}(oe);if((0,j.t)(oe))return function Me(oe){return new se.y(De=>{oe.then(J=>{De.closed||(De.next(J),De.complete())},J=>De.error(J)).then(null,H.h)})}(oe);if((0,Te.D)(oe))return je(oe);if((0,Ke.T)(oe))return function Le(oe){return new se.y(De=>{for(const J of oe)if(De.next(J),De.closed)return;De.complete()})}(oe);if((0,Oe.L)(oe))return function gt(oe){return je((0,Oe.Q)(oe))}(oe)}throw(0,Ue.z)(oe)}function je(oe){return new se.y(De=>{(function Dt(oe,De){var J,he,Ge,X;return(0,y.mG)(this,void 0,void 0,function*(){try{for(J=(0,y.KL)(oe);!(he=yield J.next()).done;)if(De.next(he.value),De.closed)return}catch(be){Ge={error:be}}finally{try{he&&!he.done&&(X=J.return)&&(yield X.call(J))}finally{if(Ge)throw Ge.error}}De.complete()})})(oe,De).catch(J=>De.error(J))})}},3019:(vt,Re,F)=>{F.d(Re,{T:()=>Te});var y=F(7537),Q=F(4829),j=F(6232),se=F(4564),_e=F(2459);function Te(...Ue){const Ke=(0,se.yG)(Ue),Oe=(0,se._6)(Ue,1/0),B=Ue;return B.length?1===B.length?(0,Q.Xf)(B[0]):(0,y.J)(Oe)((0,_e.D)(B,Ke)):j.E}},2096:(vt,Re,F)=>{F.d(Re,{of:()=>j});var y=F(4564),Q=F(2459);function j(...se){const _e=(0,y.yG)(se);return(0,Q.D)(se,_e)}},8251:(vt,Re,F)=>{F.d(Re,{x:()=>Q});var y=F(305);function Q(se,_e,Te,Ue,Ke){return new j(se,_e,Te,Ue,Ke)}class j extends y.Lv{constructor(_e,Te,Ue,Ke,Oe,B){super(_e),this.onFinalize=Oe,this.shouldUnsubscribe=B,this._next=Te?function(H){try{Te(H)}catch(Y){_e.error(Y)}}:super._next,this._error=Ke?function(H){try{Ke(H)}catch(Y){_e.error(Y)}finally{this.unsubscribe()}}:super._error,this._complete=Ue?function(){try{Ue()}catch(H){_e.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var _e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Te}=this;super.unsubscribe(),!Te&&(null===(_e=this.onFinalize)||void 0===_e||_e.call(this))}}}},3997:(vt,Re,F)=>{F.d(Re,{x:()=>se});var y=F(2737),Q=F(9360),j=F(8251);function se(Te,Ue=y.y){return Te=Te??_e,(0,Q.e)((Ke,Oe)=>{let B,H=!0;Ke.subscribe((0,j.x)(Oe,Y=>{const qe=Ue(Y);(H||!Te(B,qe))&&(H=!1,B=qe,Oe.next(Y))}))})}function _e(Te,Ue){return Te===Ue}},7398:(vt,Re,F)=>{F.d(Re,{U:()=>j});var y=F(9360),Q=F(8251);function j(se,_e){return(0,y.e)((Te,Ue)=>{let Ke=0;Te.subscribe((0,Q.x)(Ue,Oe=>{Ue.next(se.call(_e,Oe,Ke++))}))})}},7537:(vt,Re,F)=>{F.d(Re,{J:()=>j});var y=F(1631),Q=F(2737);function j(se=1/0){return(0,y.z)(Q.y,se)}},1631:(vt,Re,F)=>{F.d(Re,{z:()=>Ke});var y=F(7398),Q=F(4829),j=F(9360),se=F(7103),_e=F(8251),Ue=F(4674);function Ke(Oe,B,H=1/0){return(0,Ue.m)(B)?Ke((Y,qe)=>(0,y.U)((Be,ut)=>B(Y,Be,qe,ut))((0,Q.Xf)(Oe(Y,qe))),H):("number"==typeof B&&(H=B),(0,j.e)((Y,qe)=>function Te(Oe,B,H,Y,qe,Be,ut,Me){const Le=[];let je=0,gt=0,Dt=!1;const oe=()=>{Dt&&!Le.length&&!je&&B.complete()},De=he=>je<Y?J(he):Le.push(he),J=he=>{Be&&B.next(he),je++;let Ge=!1;(0,Q.Xf)(H(he,gt++)).subscribe((0,_e.x)(B,X=>{qe?.(X),Be?De(X):B.next(X)},()=>{Ge=!0},void 0,()=>{if(Ge)try{for(je--;Le.length&&je<Y;){const X=Le.shift();ut?(0,se.f)(B,ut,()=>J(X)):J(X)}oe()}catch(X){B.error(X)}}))};return Oe.subscribe((0,_e.x)(B,De,()=>{Dt=!0,oe()})),()=>{Me?.()}}(Y,qe,Oe,H)))}},3093:(vt,Re,F)=>{F.d(Re,{Q:()=>se});var y=F(7103),Q=F(9360),j=F(8251);function se(_e,Te=0){return(0,Q.e)((Ue,Ke)=>{Ue.subscribe((0,j.x)(Ke,Oe=>(0,y.f)(Ke,_e,()=>Ke.next(Oe),Te),()=>(0,y.f)(Ke,_e,()=>Ke.complete(),Te),Oe=>(0,y.f)(Ke,_e,()=>Ke.error(Oe),Te)))})}},3020:(vt,Re,F)=>{F.d(Re,{B:()=>_e});var y=F(4829),Q=F(8645),j=F(305),se=F(9360);function _e(Ue={}){const{connector:Ke=(()=>new Q.x),resetOnError:Oe=!0,resetOnComplete:B=!0,resetOnRefCountZero:H=!0}=Ue;return Y=>{let qe,Be,ut,Me=0,Le=!1,je=!1;const gt=()=>{Be?.unsubscribe(),Be=void 0},Dt=()=>{gt(),qe=ut=void 0,Le=je=!1},oe=()=>{const De=qe;Dt(),De?.unsubscribe()};return(0,se.e)((De,J)=>{Me++,!je&&!Le&&gt();const he=ut=ut??Ke();J.add(()=>{Me--,0===Me&&!je&&!Le&&(Be=Te(oe,H))}),he.subscribe(J),!qe&&Me>0&&(qe=new j.Hp({next:Ge=>he.next(Ge),error:Ge=>{je=!0,gt(),Be=Te(Dt,Oe,Ge),he.error(Ge)},complete:()=>{Le=!0,gt(),Be=Te(Dt,B),he.complete()}}),(0,y.Xf)(De).subscribe(qe))})(Y)}}function Te(Ue,Ke,...Oe){if(!0===Ke)return void Ue();if(!1===Ke)return;const B=new j.Hp({next:()=>{B.unsubscribe(),Ue()}});return(0,y.Xf)(Ke(...Oe)).subscribe(B)}},5137:(vt,Re,F)=>{F.d(Re,{R:()=>Q});var y=F(9360);function Q(j,se=0){return(0,y.e)((_e,Te)=>{Te.add(j.schedule(()=>_e.subscribe(Te),se))})}},4664:(vt,Re,F)=>{F.d(Re,{w:()=>se});var y=F(4829),Q=F(9360),j=F(8251);function se(_e,Te){return(0,Q.e)((Ue,Ke)=>{let Oe=null,B=0,H=!1;const Y=()=>H&&!Oe&&Ke.complete();Ue.subscribe((0,j.x)(Ke,qe=>{Oe?.unsubscribe();let Be=0;const ut=B++;(0,y.Xf)(_e(qe,ut)).subscribe(Oe=(0,j.x)(Ke,Me=>Ke.next(Te?Te(qe,Me,ut,Be++):Me),()=>{Oe=null,Y()}))},()=>{H=!0,Y()}))})}},7599:(vt,Re,F)=>{F.d(Re,{z:()=>y});const y={setTimeout(Q,j,...se){const{delegate:_e}=y;return _e?.setTimeout?_e.setTimeout(Q,j,...se):setTimeout(Q,j,...se)},clearTimeout(Q){const{delegate:j}=y;return(j?.clearTimeout||clearTimeout)(Q)},delegate:void 0}},4971:(vt,Re,F)=>{F.d(Re,{h:()=>Q});const Q=function y(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(vt,Re,F)=>{F.d(Re,{L:()=>y});const y="function"==typeof Symbol&&Symbol.observable||"@@observable"},4564:(vt,Re,F)=>{F.d(Re,{_6:()=>Te,jO:()=>se,yG:()=>_e});var y=F(4674);function j(Ue){return Ue[Ue.length-1]}function se(Ue){return(0,y.m)(j(Ue))?Ue.pop():void 0}function _e(Ue){return function Q(Ue){return Ue&&(0,y.m)(Ue.schedule)}(j(Ue))?Ue.pop():void 0}function Te(Ue,Ke){return"number"==typeof j(Ue)?Ue.pop():Ke}},9039:(vt,Re,F)=>{function y(Q,j){if(Q){const se=Q.indexOf(j);0<=se&&Q.splice(se,1)}}F.d(Re,{P:()=>y})},2306:(vt,Re,F)=>{function y(Q){const se=Q(_e=>{Error.call(_e),_e.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}F.d(Re,{d:()=>y})},1441:(vt,Re,F)=>{F.d(Re,{O:()=>se,x:()=>j});var y=F(2653);let Q=null;function j(_e){if(y.config.useDeprecatedSynchronousErrorHandling){const Te=!Q;if(Te&&(Q={errorThrown:!1,error:null}),_e(),Te){const{errorThrown:Ue,error:Ke}=Q;if(Q=null,Ue)throw Ke}}else _e()}function se(_e){y.config.useDeprecatedSynchronousErrorHandling&&Q&&(Q.errorThrown=!0,Q.error=_e)}},7103:(vt,Re,F)=>{function y(Q,j,se,_e=0,Te=!1){const Ue=j.schedule(function(){se(),Te?Q.add(this.schedule(null,_e)):this.unsubscribe()},_e);if(Q.add(Ue),!Te)return Ue}F.d(Re,{f:()=>y})},2737:(vt,Re,F)=>{function y(Q){return Q}F.d(Re,{y:()=>y})},4266:(vt,Re,F)=>{F.d(Re,{z:()=>y});const y=Q=>Q&&"number"==typeof Q.length&&"function"!=typeof Q},5726:(vt,Re,F)=>{F.d(Re,{D:()=>Q});var y=F(4674);function Q(j){return Symbol.asyncIterator&&(0,y.m)(j?.[Symbol.asyncIterator])}},4674:(vt,Re,F)=>{function y(Q){return"function"==typeof Q}F.d(Re,{m:()=>y})},8382:(vt,Re,F)=>{F.d(Re,{c:()=>j});var y=F(4850),Q=F(4674);function j(se){return(0,Q.m)(se[y.L])}},3664:(vt,Re,F)=>{F.d(Re,{T:()=>j});var y=F(4971),Q=F(4674);function j(se){return(0,Q.m)(se?.[y.h])}},4026:(vt,Re,F)=>{F.d(Re,{t:()=>Q});var y=F(4674);function Q(j){return(0,y.m)(j?.then)}},541:(vt,Re,F)=>{F.d(Re,{L:()=>se,Q:()=>j});var y=F(7582),Q=F(4674);function j(_e){return(0,y.FC)(this,arguments,function*(){const Ue=_e.getReader();try{for(;;){const{value:Ke,done:Oe}=yield(0,y.qq)(Ue.read());if(Oe)return yield(0,y.qq)(void 0);yield yield(0,y.qq)(Ke)}}finally{Ue.releaseLock()}})}function se(_e){return(0,Q.m)(_e?.getReader)}},9360:(vt,Re,F)=>{F.d(Re,{A:()=>Q,e:()=>j});var y=F(4674);function Q(se){return(0,y.m)(se?.lift)}function j(se){return _e=>{if(Q(_e))return _e.lift(function(Te){try{return se(Te,this)}catch(Ue){this.error(Ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(vt,Re,F)=>{function y(){}F.d(Re,{Z:()=>y})},8407:(vt,Re,F)=>{F.d(Re,{U:()=>j,z:()=>Q});var y=F(2737);function Q(...se){return j(se)}function j(se){return 0===se.length?y.y:1===se.length?se[0]:function(Te){return se.reduce((Ue,Ke)=>Ke(Ue),Te)}}},3894:(vt,Re,F)=>{F.d(Re,{h:()=>j});var y=F(2653),Q=F(7599);function j(se){Q.z.setTimeout(()=>{const{onUnhandledError:_e}=y.config;if(!_e)throw se;_e(se)})}},9853:(vt,Re,F)=>{function y(Q){return new TypeError(`You provided ${null!==Q&&"object"==typeof Q?"an invalid object":`'${Q}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Re,{z:()=>y})},5879:(vt,Re,F)=>{F.d(Re,{$8M:()=>os,$WT:()=>gl,$Z:()=>fh,AFp:()=>ak,AaK:()=>Y,CHM:()=>bI,CRH:()=>S1,EJc:()=>Fx,EpF:()=>oO,F4k:()=>aO,FYo:()=>au,FiY:()=>zl,GfV:()=>yk,Gpc:()=>ut,HDt:()=>Dv,JOm:()=>ls,KtG:()=>tp,LFG:()=>xt,Lbi:()=>ZD,Lck:()=>o1,MAs:()=>ky,MMx:()=>WS,NdJ:()=>em,Ojb:()=>Lr,OlP:()=>pn,Oqu:()=>vw,P3R:()=>ek,PXZ:()=>zx,Q6J:()=>sw,QGY:()=>Jp,QbO:()=>Ie,Qsj:()=>tC,R0b:()=>Gi,RDi:()=>Wa,Rgc:()=>Hc,SBq:()=>Ns,Sil:()=>K1,Suo:()=>Tv,TTD:()=>wd,TgZ:()=>Sh,VuI:()=>Q0,X6Q:()=>sF,XFs:()=>at,Xpm:()=>gd,Xq5:()=>by,Xts:()=>W_,Y36:()=>hh,YKP:()=>zS,YNc:()=>Mc,Yjl:()=>Lg,Yz7:()=>ct,Z0I:()=>Tn,ZZ4:()=>H0,_Bn:()=>dv,_UZ:()=>Yp,_c5:()=>q0,_uU:()=>iS,aQg:()=>z0,c2e:()=>Ox,cJS:()=>fr,cg1:()=>Rw,dDg:()=>C0,dqk:()=>Ct,eFA:()=>k0,eJc:()=>gi,ekj:()=>lr,eoX:()=>xv,f3M:()=>tn,g9A:()=>lk,h0i:()=>Nh,hGG:()=>yF,hij:()=>Oc,iGM:()=>hx,ifc:()=>Ln,ip1:()=>kx,jDz:()=>Zw,kL8:()=>Yy,lG2:()=>Fg,lqb:()=>Tc,lri:()=>Sv,n5z:()=>br,oAB:()=>Bu,qFp:()=>AF,qLn:()=>ua,qOj:()=>vy,qZA:()=>ow,rWj:()=>D0,rg0:()=>TD,sBO:()=>aF,s_b:()=>_v,soG:()=>Lh,tb:()=>Br,tp0:()=>Va,uIk:()=>Kp,vHH:()=>oe,vpe:()=>ho,wAp:()=>Rt,xp6:()=>Sk,z2F:()=>Vh,zSh:()=>zD,zs3:()=>lu});var y=F(8645),Q=F(7394),j=F(5619),se=F(5592),_e=F(3019),Te=F(2096),Ue=F(3020),Ke=F(4664),Oe=F(3997);function B(o){for(let l in o)if(o[l]===B)return l;throw Error("Could not find renamed property on target object.")}function H(o,l){for(const u in l)l.hasOwnProperty(u)&&!o.hasOwnProperty(u)&&(o[u]=l[u])}function Y(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(Y).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const l=o.toString();if(null==l)return""+l;const u=l.indexOf("\n");return-1===u?l:l.substring(0,u)}function qe(o,l){return null==o||""===o?null===l?"":l:null==l||""===l?o:o+" "+l}const Be=B({__forward_ref__:B});function ut(o){return o.__forward_ref__=ut,o.toString=function(){return Y(this())},o}function Me(o){return Le(o)?o():o}function Le(o){return"function"==typeof o&&o.hasOwnProperty(Be)&&o.__forward_ref__===ut}function je(o){return o&&!!o.\u0275providers}const Dt="https://g.co/ng/security#xss";class oe extends Error{constructor(l,u){super(function De(o,l){return`NG0${Math.abs(o)}${l?": "+l:""}`}(l,u)),this.code=l}}function J(o){return"string"==typeof o?o:null==o?"":String(o)}function Se(o,l){throw new oe(-201,!1)}function ht(o,l){null==o&&function mt(o,l,u,d){throw new Error(`ASSERTION ERROR: ${o}`+(null==d?"":` [Expected=> ${u} ${d} ${l} <=Actual]`))}(l,o,null,"!=")}function ct(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function fr(o){return{providers:o.providers||[],imports:o.imports||[]}}function Hn(o){return xe(o,Kr)||xe(o,Gs)}function Tn(o){return null!==Hn(o)}function xe(o,l){return o.hasOwnProperty(l)?o[l]:null}function Pr(o){return o&&(o.hasOwnProperty($s)||o.hasOwnProperty(Ou))?o[$s]:null}const Kr=B({\u0275prov:B}),$s=B({\u0275inj:B}),Gs=B({ngInjectableDef:B}),Ou=B({ngInjectorDef:B});var at=(()=>((at=at||{})[at.Default=0]="Default",at[at.Host=1]="Host",at[at.Self=2]="Self",at[at.SkipSelf=4]="SkipSelf",at[at.Optional=8]="Optional",at))();let ft;function ir(o){const l=ft;return ft=o,l}function yo(o,l,u){const d=Hn(o);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:u&at.Optional?null:void 0!==l?l:void Se(Y(o))}const Ct=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Hs={},Xt="__NG_DI_FLAG__",zs="ngTempTokenPath",dd=/\n/gm,hl="__source";let st;function Je(o){const l=st;return st=o,l}function Bt(o,l=at.Default){if(void 0===st)throw new oe(-203,!1);return null===st?yo(o,void 0,l):st.get(o,l&at.Optional?null:void 0,l)}function xt(o,l=at.Default){return(function St(){return ft}()||Bt)(Me(o),l)}function tn(o,l=at.Default){return xt(o,$(l))}function $(o){return typeof o>"u"||"number"==typeof o?o:0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)}function U(o){const l=[];for(let u=0;u<o.length;u++){const d=Me(o[u]);if(Array.isArray(d)){if(0===d.length)throw new oe(900,!1);let f,_=at.Default;for(let I=0;I<d.length;I++){const w=d[I],D=ye(w);"number"==typeof D?-1===D?f=w.token:_|=D:f=w}l.push(xt(f,_))}else l.push(xt(d))}return l}function W(o,l){return o[Xt]=l,o.prototype[Xt]=l,o}function ye(o){return o[Xt]}function At(o){return{toString:o}.toString()}var rn=(()=>((rn=rn||{})[rn.OnPush=0]="OnPush",rn[rn.Default=1]="Default",rn))(),Ln=(()=>{return(o=Ln||(Ln={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",Ln;var o})();const bn={},kt=[],sn=B({\u0275cmp:B}),xi=B({\u0275dir:B}),es=B({\u0275pipe:B}),hd=B({\u0275mod:B}),vo=B({\u0275fac:B}),Fu=B({__NG_ELEMENT_ID__:B}),fl=B({__NG_ENV_ID__:B});function pl(o,l,u){let d=o.length;for(;;){const f=o.indexOf(l,u);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const _=l.length;if(f+_===d||o.charCodeAt(f+_)<=32)return f}u=f+1}}function qs(o,l,u){let d=0;for(;d<u.length;){const f=u[d];if("number"==typeof f){if(0!==f)break;d++;const _=u[d++],I=u[d++],w=u[d++];o.setAttribute(l,I,w,_)}else{const _=f,I=u[++d];Lu(_)?o.setProperty(l,_,I):o.setAttribute(l,_,I),d++}}return d}function qo(o){return 3===o||4===o||6===o}function Lu(o){return 64===o.charCodeAt(0)}function pr(o,l){if(null!==l&&0!==l.length)if(null===o||0===o.length)o=l.slice();else{let u=-1;for(let d=0;d<l.length;d++){const f=l[d];"number"==typeof f?u=f:0===u||Sg(o,u,f,null,-1===u||2===u?l[++d]:null)}}return o}function Sg(o,l,u,d,f){let _=0,I=o.length;if(-1===l)I=-1;else for(;_<o.length;){const w=o[_++];if("number"==typeof w){if(w===l){I=-1;break}if(w>l){I=_-1;break}}}for(;_<o.length;){const w=o[_];if("number"==typeof w)break;if(w===u){if(null===d)return void(null!==f&&(o[_+1]=f));if(d===o[_+1])return void(o[_+2]=f)}_++,null!==d&&_++,null!==f&&_++}-1!==I&&(o.splice(I,0,l),_=I+1),o.splice(_++,0,u),null!==d&&o.splice(_++,0,d),null!==f&&o.splice(_++,0,f)}const wa="ng-template";function ml(o,l,u){let d=0,f=!0;for(;d<o.length;){let _=o[d++];if("string"==typeof _&&f){const I=o[d++];if(u&&"class"===_&&-1!==pl(I.toLowerCase(),l,0))return!0}else{if(1===_){for(;d<o.length&&"string"==typeof(_=o[d++]);)if(_.toLowerCase()===l)return!0;return!1}"number"==typeof _&&(f=!1)}}return!1}function ba(o){return 4===o.type&&o.value!==wa}function fd(o,l,u){return l===(4!==o.type||u?o.value:wa)}function Pf(o,l,u){let d=4;const f=o.attrs||[],_=function Rg(o){for(let l=0;l<o.length;l++)if(qo(o[l]))return l;return o.length}(f);let I=!1;for(let w=0;w<l.length;w++){const D=l[w];if("number"!=typeof D){if(!I)if(4&d){if(d=2|1&d,""!==D&&!fd(o,D,u)||""===D&&1===l.length){if(Ri(d))return!1;I=!0}}else{const S=8&d?D:l[++w];if(8&d&&null!==o.attrs){if(!ml(o.attrs,S,u)){if(Ri(d))return!1;I=!0}continue}const k=xg(8&d?"class":D,f,ba(o),u);if(-1===k){if(Ri(d))return!1;I=!0;continue}if(""!==S){let z;z=k>_?"":f[k+1].toLowerCase();const K=8&d?z:null;if(K&&-1!==pl(K,S,0)||2&d&&S!==z){if(Ri(d))return!1;I=!0}}}}else{if(!I&&!Ri(d)&&!Ri(D))return!1;if(I&&Ri(D))continue;I=!1,d=D|1&d}}return Ri(d)||I}function Ri(o){return 0==(1&o)}function xg(o,l,u,d){if(null===l)return-1;let f=0;if(d||!u){let _=!1;for(;f<l.length;){const I=l[f];if(I===o)return f;if(3===I||6===I)_=!0;else{if(1===I||2===I){let w=l[++f];for(;"string"==typeof w;)w=l[++f];continue}if(4===I)break;if(0===I){f+=4;continue}}f+=_?1:2}return-1}return function Nf(o,l){let u=o.indexOf(4);if(u>-1)for(u++;u<o.length;){const d=o[u];if("number"==typeof d)return-1;if(d===l)return u;u++}return-1}(l,o)}function pd(o,l,u=!1){for(let d=0;d<l.length;d++)if(Pf(o,l[d],u))return!0;return!1}function kf(o,l){return o?":not("+l.trim()+")":l}function oI(o){let l=o[0],u=1,d=2,f="",_=!1;for(;u<o.length;){let I=o[u];if("string"==typeof I)if(2&d){const w=o[++u];f+="["+I+(w.length>0?'="'+w+'"':"")+"]"}else 8&d?f+="."+I:4&d&&(f+=" "+I);else""!==f&&!Ri(I)&&(l+=kf(_,f),f=""),d=I,_=_||!Ri(d);u++}return""!==f&&(l+=kf(_,f)),l}function gd(o){return At(()=>{const l=Vg(o),u={...l,decls:o.decls,vars:o.vars,template:o.template,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,onPush:o.changeDetection===rn.OnPush,directiveDefs:null,pipeDefs:null,dependencies:l.standalone&&o.dependencies||null,getStandaloneInjector:null,signals:o.signals??!1,data:o.data||{},encapsulation:o.encapsulation||Ln.Emulated,styles:o.styles||kt,_:null,schemas:o.schemas||null,tView:null,id:""};Of(u);const d=o.dependencies;return u.directiveDefs=Ts(d,!1),u.pipeDefs=Ts(d,!0),u.id=function lI(o){let l=0;const u=[o.selectors,o.ngContentSelectors,o.hostVars,o.hostAttrs,o.consts,o.vars,o.decls,o.encapsulation,o.standalone,o.signals,o.exportAs,JSON.stringify(o.inputs),JSON.stringify(o.outputs),Object.getOwnPropertyNames(o.type.prototype),!!o.contentQueries,!!o.viewQuery].join("|");for(const f of u)l=Math.imul(31,l)+f.charCodeAt(0)<<0;return l+=2147483648,"c"+l}(u),u})}function aI(o){return Wt(o)||wr(o)}function Ng(o){return null!==o}function Bu(o){return At(()=>({type:o.type,bootstrap:o.bootstrap||kt,declarations:o.declarations||kt,imports:o.imports||kt,exports:o.exports||kt,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function Og(o,l){if(null==o)return bn;const u={};for(const d in o)if(o.hasOwnProperty(d)){let f=o[d],_=f;Array.isArray(f)&&(_=f[1],f=f[0]),u[f]=d,l&&(l[f]=_)}return u}function Fg(o){return At(()=>{const l=Vg(o);return Of(l),l})}function Lg(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function Wt(o){return o[sn]||null}function wr(o){return o[xi]||null}function ni(o){return o[es]||null}function gl(o){const l=Wt(o)||wr(o)||ni(o);return null!==l&&l.standalone}function Mi(o,l){const u=o[hd]||null;if(!u&&!0===l)throw new Error(`Type ${Y(o)} does not have '\u0275mod' property.`);return u}function Vg(o){const l={};return{type:o.type,providersResolver:null,factory:null,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:l,inputTransforms:null,inputConfig:o.inputs||bn,exportAs:o.exportAs||null,standalone:!0===o.standalone,signals:!0===o.signals,selectors:o.selectors||kt,viewQuery:o.viewQuery||null,features:o.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Og(o.inputs,l),outputs:Og(o.outputs)}}function Of(o){o.features?.forEach(l=>l(o))}function Ts(o,l){if(!o)return null;const u=l?ni:aI;return()=>("function"==typeof o?o():o).map(d=>u(d)).filter(Ng)}const mr=0,ze=1,Lt=2,Nn=3,ws=4,_l=5,Nr=6,yl=7,zn=8,vl=9,Pi=10,Vt=11,Aa=12,Lf=13,Ws=14,Vn=15,El=16,Da=17,Ni=18,Eo=19,_d=20,Wo=21,bs=22,Il=23,Io=24,nn=25,Ug=1,yd=2,Ks=7,Tl=9,sr=11;function kr(o){return Array.isArray(o)&&"object"==typeof o[Ug]}function ki(o){return Array.isArray(o)&&!0===o[Ug]}function ts(o){return 0!=(4&o.flags)}function xa(o){return o.componentOffset>-1}function bl(o){return 1==(1&o.flags)}function hi(o){return!!o.template}function ju(o){return 0!=(512&o[Lt])}function To(o,l){return o.hasOwnProperty(vo)?o[vo]:null}let Gf=Ct.WeakRef??class $f{constructor(l){this.ref=l}deref(){return this.ref}},Gg=0,ns=null,Cl=!1;function Un(o){const l=ns;return ns=o,l}class wo{constructor(){this.id=Gg++,this.ref=function fI(o){return new Gf(o)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[l,u]of this.producers){const d=u.producerNode.deref();if(void 0!==d&&u.atTrackingVersion===this.trackingVersion){if(d.producerPollStatus(u.seenValueVersion))return!0}else this.producers.delete(l),d?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const l=Cl;Cl=!0;try{for(const[u,d]of this.consumers){const f=d.consumerNode.deref();void 0!==f&&f.trackingVersion===d.atTrackingVersion?f.onConsumerDependencyMayHaveChanged():(this.consumers.delete(u),f?.producers.delete(this.id))}}finally{Cl=l}}producerAccessed(){if(Cl)throw new Error("");if(null===ns)return;let l=ns.producers.get(this.id);void 0===l?(l={consumerNode:ns.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:ns.trackingVersion},ns.producers.set(this.id,l),this.consumers.set(ns.id,l)):(l.seenValueVersion=this.valueVersion,l.atTrackingVersion=ns.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==ns?.consumerAllowSignalWrites}producerPollStatus(l){return this.valueVersion!==l||(this.onProducerUpdateValueVersion(),this.valueVersion!==l)}}let Ed=null;function TD(o){const l=Un(null);try{return o()}finally{Un(l)}}const zf=()=>{};class Td extends wo{constructor(l,u,d){super(),this.watch=l,this.schedule=u,this.dirty=!1,this.cleanupFn=zf,this.registerOnCleanup=f=>{this.cleanupFn=f},this.consumerAllowSignalWrites=d}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const l=Un(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=zf,this.watch(this.registerOnCleanup)}finally{Un(l)}}cleanup(){this.cleanupFn()}}class qf{constructor(l,u,d){this.previousValue=l,this.currentValue=u,this.firstChange=d}isFirstChange(){return this.firstChange}}function wd(){return Ra}function Ra(o){return o.type.prototype.ngOnChanges&&(o.setInput=Kg),gI}function gI(){const o=Wf(this),l=o?.current;if(l){const u=o.previous;if(u===bn)o.previous=l;else for(let d in l)u[d]=l[d];o.current=null,this.ngOnChanges(l)}}function Kg(o,l,u,d){const f=this.declaredInputs[u],_=Wf(o)||function wD(o,l){return o[_I]=l}(o,{previous:bn,current:null}),I=_.current||(_.current={}),w=_.previous,D=w[f];I[f]=new qf(D&&D.currentValue,l,w===bn),o[d]=l}wd.ngInherit=!0;const _I="__ngSimpleChanges__";function Wf(o){return o[_I]||null}const As=function(o,l,u){};function Pn(o){for(;Array.isArray(o);)o=o[mr];return o}function Ad(o,l){return Pn(l[o])}function Zr(o,l){return Pn(l[o.index])}function Zg(o,l){return o.data[l]}function ri(o,l){const u=l[o];return kr(u)?u:u[mr]}function Ds(o,l){return null==l?null:o[l]}function Yf(o){o[Da]=0}function Hu(o){1024&o[Lt]||(o[Lt]|=1024,Ml(o,1))}function Xf(o){1024&o[Lt]&&(o[Lt]&=-1025,Ml(o,-1))}function Ml(o,l){let u=o[Nn];if(null===u)return;u[_l]+=l;let d=u;for(u=u[Nn];null!==u&&(1===l&&1===d[_l]||-1===l&&0===d[_l]);)u[_l]+=l,d=u,u=u[Nn]}const Pt={lFrame:Xs(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function ep(){return Pt.bindingsEnabled}function we(){return Pt.lFrame.lView}function on(){return Pt.lFrame.tView}function bI(o){return Pt.lFrame.contextLView=o,o[zn]}function tp(o){return Pt.lFrame.contextLView=null,o}function Or(){let o=AI();for(;null!==o&&64===o.type;)o=o.parent;return o}function AI(){return Pt.lFrame.currentTNode}function Zo(o,l){const u=Pt.lFrame;u.currentTNode=o,u.isParent=l}function DI(){return Pt.lFrame.isParent}function zu(){return Pt.lFrame.bindingIndex++}function t_(o,l){const u=Pt.lFrame;u.bindingIndex=u.bindingRootIndex=o,Wu(l)}function Wu(o){Pt.lFrame.currentDirectiveIndex=o}function rp(){return Pt.lFrame.currentQueryIndex}function Nd(o){Pt.lFrame.currentQueryIndex=o}function Qo(o){const l=o[ze];return 2===l.type?l.declTNode:1===l.type?o[Nr]:null}function SI(o,l,u){if(u&at.SkipSelf){let f=l,_=o;for(;!(f=f.parent,null!==f||u&at.Host||(f=Qo(_),null===f||(_=_[Ws],10&f.type))););if(null===f)return!1;l=f,o=_}const d=Pt.lFrame=ip();return d.currentTNode=l,d.lView=o,!0}function Nl(o){const l=ip(),u=o[ze];Pt.lFrame=l,l.currentTNode=u.firstChild,l.lView=o,l.tView=u,l.contextLView=o,l.bindingIndex=u.bindingStartIndex,l.inI18n=!1}function ip(){const o=Pt.lFrame,l=null===o?null:o.child;return null===l?Xs(o):l}function Xs(o){const l={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=l),l}function xI(){const o=Pt.lFrame;return Pt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const RI=xI;function kl(){const o=xI();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function fi(){return Pt.lFrame.selectedIndex}function Yo(o){Pt.lFrame.selectedIndex=o}function Bn(){const o=Pt.lFrame;return Zg(o.tView,o.selectedIndex)}let Ol=!0;function kd(){return Ol}function Cs(o){Ol=o}function op(o,l){for(let u=l.directiveStart,d=l.directiveEnd;u<d;u++){const _=o.data[u].type.prototype,{ngAfterContentInit:I,ngAfterContentChecked:w,ngAfterViewInit:D,ngAfterViewChecked:S,ngOnDestroy:P}=_;I&&(o.contentHooks??=[]).push(-u,I),w&&((o.contentHooks??=[]).push(u,w),(o.contentCheckHooks??=[]).push(u,w)),D&&(o.viewHooks??=[]).push(-u,D),S&&((o.viewHooks??=[]).push(u,S),(o.viewCheckHooks??=[]).push(u,S)),null!=P&&(o.destroyHooks??=[]).push(u,P)}}function Ku(o,l,u){Ss(o,l,3,u)}function Od(o,l,u,d){(3&o[Lt])===u&&Ss(o,l,u,d)}function Fd(o,l){let u=o[Lt];(3&u)===l&&(u&=8191,u+=1,o[Lt]=u)}function Ss(o,l,u,d){const _=d??-1,I=l.length-1;let w=0;for(let D=void 0!==d?65535&o[Da]:0;D<I;D++)if("number"==typeof l[D+1]){if(w=l[D],null!=d&&w>=d)break}else l[D]<0&&(o[Da]+=65536),(w<_||-1==_)&&(i_(o,u,l,D),o[Da]=(4294901760&o[Da])+D+2),D++}function Ao(o,l){As(4,o,l);const u=Un(null);try{l.call(o)}finally{Un(u),As(5,o,l)}}function i_(o,l,u,d){const f=u[d]<0,_=u[d+1],w=o[f?-u[d]:u[d]];f?o[Lt]>>13<o[Da]>>16&&(3&o[Lt])===l&&(o[Lt]+=8192,Ao(w,_)):Ao(w,_)}const In=-1;class Tt{constructor(l,u,d){this.factory=l,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=d}}function Ht(o){return o!==In}function Ld(o){return 32767&o}function Na(o,l){let u=function kI(o){return o>>16}(o),d=l;for(;u>0;)d=d[Ws],u--;return d}let ka=!0;function Qu(o){const l=ka;return ka=o,l}const o_=255,Yu=5;let a_=0;const xs={};function Oa(o,l){const u=l_(o,l);if(-1!==u)return u;const d=l[ze];d.firstCreatePass&&(o.injectorIndex=l.length,Do(d.data,o),Do(l,null),Do(d.blueprint,null));const f=Xo(o,l),_=o.injectorIndex;if(Ht(f)){const I=Ld(f),w=Na(f,l),D=w[ze].data;for(let S=0;S<8;S++)l[_+S]=w[I+S]|D[I+S]}return l[_+8]=f,_}function Do(o,l){o.push(0,0,0,0,0,0,0,0,l)}function l_(o,l){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===l[o.injectorIndex+8]?-1:o.injectorIndex}function Xo(o,l){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let u=0,d=null,f=l;for(;null!==f;){if(d=d_(f),null===d)return In;if(u++,f=f[Ws],-1!==d.injectorIndex)return d.injectorIndex|u<<16}return In}function Fl(o,l,u){!function OI(o,l,u){let d;"string"==typeof u?d=u.charCodeAt(0)||0:u.hasOwnProperty(Fu)&&(d=u[Fu]),null==d&&(d=u[Fu]=a_++);const f=d&o_;l.data[o+(f>>Yu)]|=1<<f}(o,l,u)}function u_(o,l,u){if(u&at.Optional||void 0!==o)return o;Se()}function Jo(o,l,u,d){if(u&at.Optional&&void 0===d&&(d=null),!(u&(at.Self|at.Host))){const f=o[vl],_=ir(void 0);try{return f?f.get(l,d,u&at.Optional):yo(l,d,u&at.Optional)}finally{ir(_)}}return u_(d,0,u)}function rs(o,l,u,d=at.Default,f){if(null!==o){if(2048&l[Lt]&&!(d&at.Self)){const I=function c_(o,l,u,d,f){let _=o,I=l;for(;null!==_&&null!==I&&2048&I[Lt]&&!(512&I[Lt]);){const w=Ll(_,I,u,d|at.Self,xs);if(w!==xs)return w;let D=_.parent;if(!D){const S=I[_d];if(S){const P=S.get(u,xs,d);if(P!==xs)return P}D=d_(I),I=I[Ws]}_=D}return f}(o,l,u,d,xs);if(I!==xs)return I}const _=Ll(o,l,u,d,xs);if(_!==xs)return _}return Jo(l,u,d,f)}function Ll(o,l,u,d,f){const _=function mi(o){if("string"==typeof o)return o.charCodeAt(0)||0;const l=o.hasOwnProperty(Fu)?o[Fu]:void 0;return"number"==typeof l?l>=0?l&o_:ss:l}(u);if("function"==typeof _){if(!SI(l,o,d))return d&at.Host?u_(f,0,d):Jo(l,u,d,f);try{const I=_(d);if(null!=I||d&at.Optional)return I;Se()}finally{RI()}}else if("number"==typeof _){let I=null,w=l_(o,l),D=In,S=d&at.Host?l[Vn][Nr]:null;for((-1===w||d&at.SkipSelf)&&(D=-1===w?Xo(o,l):l[w+8],D!==In&&ta(d,!1)?(I=l[ze],w=Ld(D),l=Na(D,l)):w=-1);-1!==w;){const P=l[ze];if(or(_,w,P.data)){const k=si(w,l,u,I,d,S);if(k!==xs)return k}D=l[w+8],D!==In&&ta(d,l[ze].data[w+8]===S)&&or(_,w,l)?(I=P,w=Ld(D),l=Na(D,l)):w=-1}}return f}function si(o,l,u,d,f,_){const I=l[ze],w=I.data[o+8],P=ea(w,I,u,null==d?xa(w)&&ka:d!=I&&0!=(3&w.type),f&at.Host&&_===w);return null!==P?is(l,I,P,w):xs}function ea(o,l,u,d,f){const _=o.providerIndexes,I=l.data,w=1048575&_,D=o.directiveStart,P=_>>20,z=f?w+P:o.directiveEnd;for(let K=d?w:w+P;K<z;K++){const ge=I[K];if(K<D&&u===ge||K>=D&&ge.type===u)return K}if(f){const K=I[D];if(K&&hi(K)&&K.type===u)return D}return null}function is(o,l,u,d){let f=o[u];const _=l.data;if(function Js(o){return o instanceof Tt}(f)){const I=f;I.resolving&&function Ge(o,l){const u=l?`. Dependency path: ${l.join(" > ")} > ${o}`:"";throw new oe(-200,`Circular dependency in DI detected for ${o}${u}`)}(function he(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():J(o)}(_[u]));const w=Qu(I.canSeeViewProviders);I.resolving=!0;const D=I.injectImpl?ir(I.injectImpl):null;SI(o,d,at.Default);try{f=o[u]=I.factory(void 0,_,o,d),l.firstCreatePass&&u>=d.directiveStart&&function sp(o,l,u){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:_}=l.type.prototype;if(d){const I=Ra(l);(u.preOrderHooks??=[]).push(o,I),(u.preOrderCheckHooks??=[]).push(o,I)}f&&(u.preOrderHooks??=[]).push(0-o,f),_&&((u.preOrderHooks??=[]).push(o,_),(u.preOrderCheckHooks??=[]).push(o,_))}(u,_[u],l)}finally{null!==D&&ir(D),Qu(w),I.resolving=!1,RI()}}return f}function or(o,l,u){return!!(u[l+(o>>Yu)]&1<<o)}function ta(o,l){return!(o&at.Self||o&at.Host&&l)}class eo{constructor(l,u){this._tNode=l,this._lView=u}get(l,u,d){return rs(this._tNode,this._lView,l,$(d),u)}}function ss(){return new eo(Or(),we())}function br(o){return At(()=>{const l=o.prototype.constructor,u=l[vo]||Fa(l),d=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==d;){const _=f[vo]||Fa(f);if(_&&_!==u)return _;f=Object.getPrototypeOf(f)}return _=>new _})}function Fa(o){return Le(o)?()=>{const l=Fa(Me(o));return l&&l()}:To(o)}function d_(o){const l=o[ze],u=l.type;return 2===u?l.declTNode:1===u?o[Nr]:null}function os(o){return function Vd(o,l){if("class"===l)return o.classes;if("style"===l)return o.styles;const u=o.attrs;if(u){const d=u.length;let f=0;for(;f<d;){const _=u[f];if(qo(_))break;if(0===_)f+=2;else if("number"==typeof _)for(f++;f<d&&"string"==typeof u[f];)f++;else{if(_===l)return u[f+1];f+=2}}}return null}(Or(),o)}const On="__parameters__";function ra(o,l,u){return At(()=>{const d=function na(o){return function(...u){if(o){const d=o(...u);for(const f in d)this[f]=d[f]}}}(l);function f(..._){if(this instanceof f)return d.apply(this,_),this;const I=new f(..._);return w.annotation=I,w;function w(D,S,P){const k=D.hasOwnProperty(On)?D[On]:Object.defineProperty(D,On,{value:[]})[On];for(;k.length<=P;)k.push(null);return(k[P]=k[P]||[]).push(I),D}}return u&&(f.prototype=Object.create(u.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}function ec(o,l){o.forEach(u=>Array.isArray(u)?ec(u,l):l(u))}function lp(o,l,u){l>=o.length?o.push(u):o.splice(l,0,u)}function Bl(o,l){return l>=o.length-1?o.pop():o.splice(l,1)[0]}function _r(o,l,u){let d=Fi(o,l);return d>=0?o[1|d]=u:(d=~d,function ia(o,l,u,d){let f=o.length;if(f==l)o.push(u,d);else if(1===f)o.push(d,o[0]),o[0]=u;else{for(f--,o.push(o[f-1],o[f]);f>l;)o[f]=o[f-2],f--;o[l]=u,o[l+1]=d}}(o,d,l,u)),d}function up(o,l){const u=Fi(o,l);if(u>=0)return o[1|u]}function Fi(o,l){return function La(o,l,u){let d=0,f=o.length>>u;for(;f!==d;){const _=d+(f-d>>1),I=o[_<<u];if(l===I)return _<<u;I>l?f=_:d=_+1}return~(f<<u)}(o,l,1)}const zl=W(ra("Optional"),8),Va=W(ra("SkipSelf"),4);function Kd(o){return 128==(128&o.flags)}var ls=(()=>((ls=ls||{})[ls.Important=1]="Important",ls[ls.DashCase=2]="DashCase",ls))();const uc=new Map;let x_=0;const Jl="__ngContext__";function Fr(o,l){kr(l)?(o[Jl]=l[Eo],function _p(o){uc.set(o[Eo],o)}(l)):o[Jl]=l}let Ep;function eu(o,l){return Ep(o,l)}function So(o){const l=o[Nn];return ki(l)?l[Nn]:l}function k_(o){return Ip(o[Aa])}function Jd(o){return Ip(o[ws])}function Ip(o){for(;null!==o&&!ki(o);)o=o[ws];return o}function ja(o,l,u,d,f){if(null!=d){let _,I=!1;ki(d)?_=d:kr(d)&&(I=!0,d=d[mr]);const w=Pn(d);0===o&&null!==u?null==f?wp(l,u,w):$a(l,u,w,f||null,!0):1===o&&null!==u?$a(l,u,w,f||null,!0):2===o?function th(o,l,u){const d=Ms(o,l);d&&function V_(o,l,u,d){o.removeChild(l,u,d)}(o,d,l,u)}(l,w,I):3===o&&l.destroyNode(w),null!=_&&function C(o,l,u,d,f){const _=u[Ks];_!==Pn(u)&&ja(l,o,d,_,f);for(let w=sr;w<u.length;w++){const D=u[w];p(D[ze],D,o,l,d,_)}}(l,o,_,u,f)}}function gc(o,l,u){return o.createElement(l,u)}function F_(o,l){const u=o[Tl],d=u.indexOf(l);Xf(l),u.splice(d,1)}function yc(o,l){if(o.length<=sr)return;const u=sr+l,d=o[u];if(d){const f=d[El];null!==f&&f!==o&&F_(f,d),l>0&&(o[u-1][ws]=d[ws]);const _=Bl(o,sr+l);!function MD(o,l){p(o,l,l[Vt],2,null,null),l[mr]=null,l[Nr]=null}(d[ze],d);const I=_[Ni];null!==I&&I.detachView(_[ze]),d[Nn]=null,d[ws]=null,d[Lt]&=-129}return d}function ru(o,l){if(!(256&l[Lt])){const u=l[Vt];l[Il]?.destroy(),l[Io]?.destroy(),u.destroyNode&&p(o,l,u,3,null,null),function us(o){let l=o[Aa];if(!l)return Li(o[ze],o);for(;l;){let u=null;if(kr(l))u=l[Aa];else{const d=l[sr];d&&(u=d)}if(!u){for(;l&&!l[ws]&&l!==o;)kr(l)&&Li(l[ze],l),l=l[Nn];null===l&&(l=o),kr(l)&&Li(l[ze],l),u=l&&l[ws]}l=u}}(l)}}function Li(o,l){if(!(256&l[Lt])){l[Lt]&=-129,l[Lt]|=256,function vc(o,l){let u;if(null!=o&&null!=(u=o.destroyHooks))for(let d=0;d<u.length;d+=2){const f=l[u[d]];if(!(f instanceof Tt)){const _=u[d+1];if(Array.isArray(_))for(let I=0;I<_.length;I+=2){const w=f[_[I]],D=_[I+1];As(4,w,D);try{D.call(w)}finally{As(5,w,D)}}else{As(4,f,_);try{_.call(f)}finally{As(5,f,_)}}}}}(o,l),function L_(o,l){const u=o.cleanup,d=l[yl];if(null!==u)for(let _=0;_<u.length-1;_+=2)if("string"==typeof u[_]){const I=u[_+3];I>=0?d[I]():d[-I].unsubscribe(),_+=2}else u[_].call(d[u[_+1]]);null!==d&&(l[yl]=null);const f=l[Wo];if(null!==f){l[Wo]=null;for(let _=0;_<f.length;_++)(0,f[_])()}}(o,l),1===l[ze].type&&l[Vt].destroy();const u=l[El];if(null!==u&&ki(l[Nn])){u!==l[Nn]&&F_(u,l);const d=l[Ni];null!==d&&d.detachView(o)}!function R_(o){uc.delete(o[Eo])}(l)}}function xo(o,l,u){return function Tp(o,l,u){let d=l;for(;null!==d&&40&d.type;)d=(l=d).parent;if(null===d)return u[mr];{const{componentOffset:f}=d;if(f>-1){const{encapsulation:_}=o.data[d.directiveStart+f];if(_===Ln.None||_===Ln.Emulated)return null}return Zr(d,u)}}(o,l.parent,u)}function $a(o,l,u,d,f){o.insertBefore(l,u,d,f)}function wp(o,l,u){o.appendChild(l,u)}function Ec(o,l,u,d,f){null!==d?$a(o,l,u,d,f):wp(o,l,u)}function Ms(o,l){return o.parentNode(l)}let aa,iu,su,ao=function oo(o,l,u){return 40&o.type?Zr(o,u):null};function eh(o,l,u,d){const f=xo(o,d,l),_=l[Vt],w=function U_(o,l,u){return ao(o,l,u)}(d.parent||l[Nr],d,l);if(null!=f)if(Array.isArray(u))for(let D=0;D<u.length;D++)Ec(_,f,u[D],w,!1);else Ec(_,f,u,w,!1);void 0!==aa&&aa(_,d,l,u,f)}function Ha(o,l){if(null!==l){const u=l.type;if(3&u)return Zr(l,o);if(4&u)return Ap(-1,o[l.index]);if(8&u){const d=l.child;if(null!==d)return Ha(o,d);{const f=o[l.index];return ki(f)?Ap(-1,f):Pn(f)}}if(32&u)return eu(l,o)()||Pn(o[l.index]);{const d=B_(o,l);return null!==d?Array.isArray(d)?d[0]:Ha(So(o[Vn]),d):Ha(o,l.next)}}return null}function B_(o,l){return null!==l?o[Vn][Nr].projection[l.projection]:null}function Ap(o,l){const u=sr+o+1;if(u<l.length){const d=l[u],f=d[ze].firstChild;if(null!==f)return Ha(d,f)}return l[Ks]}function v(o,l,u,d,f,_,I){for(;null!=u;){const w=d[u.index],D=u.type;if(I&&0===l&&(w&&Fr(Pn(w),d),u.flags|=2),32!=(32&u.flags))if(8&D)v(o,l,u.child,d,f,_,!1),ja(l,o,f,w,_);else if(32&D){const S=eu(u,d);let P;for(;P=S();)ja(l,o,f,P,_);ja(l,o,f,w,_)}else 16&D?T(o,l,d,u,f,_):ja(l,o,f,w,_);u=I?u.projectionNext:u.next}}function p(o,l,u,d,f,_){v(u,d,o.firstChild,l,f,_,!1)}function T(o,l,u,d,f,_){const I=u[Vn],D=I[Nr].projection[d.projection];if(Array.isArray(D))for(let S=0;S<D.length;S++)ja(l,o,f,D[S],_);else{let S=D;const P=I[Nn];Kd(d)&&(S.flags|=128),v(o,l,S,P,f,_,!0)}}function q(o,l,u){""===u?o.removeAttribute(l,"class"):o.setAttribute(l,"class",u)}function ve(o,l,u){const{mergedAttrs:d,classes:f,styles:_}=u;null!==d&&qs(o,l,d),null!==f&&q(o,l,f),null!==_&&function L(o,l,u){o.setAttribute(l,"style",u)}(o,l,_)}function Wa(o){iu=o}function Cp(o){return function nh(){if(void 0===su&&(su=null,Ct.trustedTypes))try{su=Ct.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return su}()?.createScriptURL(o)||o}class rh{constructor(l){this.changingThisBreaksApplicationSecurity=l}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Dt})`}}function Ro(o){return o instanceof rh?o.changingThisBreaksApplicationSecurity:o}function Sp(o,l){const u=function UN(o){return o instanceof rh&&o.getTypeName()||null}(o);if(null!=u&&u!==l){if("ResourceURL"===u&&"URL"===l)return!0;throw new Error(`Required a safe ${l}, got a ${u} (see ${Dt})`)}return u===l}const GN=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Ar=(()=>((Ar=Ar||{})[Ar.NONE=0]="NONE",Ar[Ar.HTML=1]="HTML",Ar[Ar.STYLE=2]="STYLE",Ar[Ar.SCRIPT=3]="SCRIPT",Ar[Ar.URL=4]="URL",Ar[Ar.RESOURCE_URL=5]="RESOURCE_URL",Ar))();function Ui(o){const l=Ic();return l?l.sanitize(Ar.URL,o)||"":Sp(o,"URL")?Ro(o):function eT(o){return(o=String(o)).match(GN)?o:"unsafe:"+o}(J(o))}function UD(o){const l=Ic();if(l)return Cp(l.sanitize(Ar.RESOURCE_URL,o)||"");if(Sp(o,"ResourceURL"))return Cp(Ro(o));throw new oe(904,!1)}function ek(o,l,u){return function BD(o,l){return"src"===l&&("embed"===o||"frame"===o||"iframe"===o||"media"===o||"script"===o)||"href"===l&&("base"===o||"link"===o)?UD:Ui}(l,u)(o)}function Ic(){const o=we();return o&&o[Pi].sanitizer}class pn{constructor(l,u){this._desc=l,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=ct({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const W_=new pn("ENVIRONMENT_INITIALIZER"),nT=new pn("INJECTOR",-1),la=new pn("INJECTOR_DEF_TYPES");class jD{get(l,u=Hs){if(u===Hs){const d=new Error(`NullInjectorError: No provider for ${Y(l)}!`);throw d.name="NullInjectorError",d}return u}}function A$(...o){return{\u0275providers:nk(0,o),\u0275fromNgModule:!0}}function nk(o,...l){const u=[],d=new Set;let f;return ec(l,_=>{const I=_;K_(I,u,[],d)&&(f||=[],f.push(I))}),void 0!==f&&rT(f,u),u}function rT(o,l){for(let u=0;u<o.length;u++){const{providers:f}=o[u];iT(f,_=>{l.push(_)})}}function K_(o,l,u,d){if(!(o=Me(o)))return!1;let f=null,_=Pr(o);const I=!_&&Wt(o);if(_||I){if(I&&!I.standalone)return!1;f=o}else{const D=o.ngModule;if(_=Pr(D),!_)return!1;f=D}const w=d.has(f);if(I){if(w)return!1;if(d.add(f),I.dependencies){const D="function"==typeof I.dependencies?I.dependencies():I.dependencies;for(const S of D)K_(S,l,u,d)}}else{if(!_)return!1;{if(null!=_.imports&&!w){let S;d.add(f);try{ec(_.imports,P=>{K_(P,l,u,d)&&(S||=[],S.push(P))})}finally{}void 0!==S&&rT(S,l)}if(!w){const S=To(f)||(()=>new f);l.push({provide:f,useFactory:S,deps:kt},{provide:la,useValue:f,multi:!0},{provide:W_,useValue:()=>xt(f),multi:!0})}const D=_.providers;null==D||w||iT(D,P=>{l.push(P)})}}return f!==o&&void 0!==o.providers}function iT(o,l){for(let u of o)je(u)&&(u=u.\u0275providers),Array.isArray(u)?iT(u,l):l(u)}const rk=B({provide:String,useValue:B});function GD(o){return null!==o&&"object"==typeof o&&rk in o}function oh(o){return"function"==typeof o}const zD=new pn("Set Injector scope."),Z_={},C$={};let Q_;function Y_(){return void 0===Q_&&(Q_=new jD),Q_}class Tc{}class X_ extends Tc{get destroyed(){return this._destroyed}constructor(l,u,d,f){super(),this.parent=u,this.source=d,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,KD(l,I=>this.processProvider(I)),this.records.set(nT,ah(void 0,this)),f.has("environment")&&this.records.set(Tc,ah(void 0,this));const _=this.records.get(zD);null!=_&&"string"==typeof _.value&&this.scopes.add(_.value),this.injectorDefTypes=new Set(this.get(la.multi,kt,at.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const u of this._ngOnDestroyHooks)u.ngOnDestroy();const l=this._onDestroyHooks;this._onDestroyHooks=[];for(const u of l)u()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(l){return this.assertNotDestroyed(),this._onDestroyHooks.push(l),()=>this.removeOnDestroy(l)}runInContext(l){this.assertNotDestroyed();const u=Je(this),d=ir(void 0);try{return l()}finally{Je(u),ir(d)}}get(l,u=Hs,d=at.Default){if(this.assertNotDestroyed(),l.hasOwnProperty(fl))return l[fl](this);d=$(d);const f=Je(this),_=ir(void 0);try{if(!(d&at.SkipSelf)){let w=this.records.get(l);if(void 0===w){const D=function S$(o){return"function"==typeof o||"object"==typeof o&&o instanceof pn}(l)&&Hn(l);w=D&&this.injectableDefInScope(D)?ah(oT(l),Z_):null,this.records.set(l,w)}if(null!=w)return this.hydrate(l,w)}return(d&at.Self?Y_():this.parent).get(l,u=d&at.Optional&&u===Hs?null:u)}catch(I){if("NullInjectorError"===I.name){if((I[zs]=I[zs]||[]).unshift(Y(l)),f)throw I;return function re(o,l,u,d){const f=o[zs];throw l[hl]&&f.unshift(l[hl]),o.message=function lt(o,l,u,d=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.slice(2):o;let f=Y(l);if(Array.isArray(l))f=l.map(Y).join(" -> ");else if("object"==typeof l){let _=[];for(let I in l)if(l.hasOwnProperty(I)){let w=l[I];_.push(I+":"+("string"==typeof w?JSON.stringify(w):Y(w)))}f=`{${_.join(", ")}}`}return`${u}${d?"("+d+")":""}[${f}]: ${o.replace(dd,"\n  ")}`}("\n"+o.message,f,u,d),o.ngTokenPath=f,o[zs]=null,o}(I,l,"R3InjectorError",this.source)}throw I}finally{ir(_),Je(f)}}resolveInjectorInitializers(){const l=Je(this),u=ir(void 0);try{const d=this.get(W_.multi,kt,at.Self);for(const f of d)f()}finally{Je(l),ir(u)}}toString(){const l=[],u=this.records;for(const d of u.keys())l.push(Y(d));return`R3Injector[${l.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new oe(205,!1)}processProvider(l){let u=oh(l=Me(l))?l:Me(l&&l.provide);const d=function sk(o){return GD(o)?ah(void 0,o.useValue):ah(qD(o),Z_)}(l);if(oh(l)||!0!==l.multi)this.records.get(u);else{let f=this.records.get(u);f||(f=ah(void 0,Z_,!0),f.factory=()=>U(f.multi),this.records.set(u,f)),u=l,f.multi.push(l)}this.records.set(u,d)}hydrate(l,u){return u.value===Z_&&(u.value=C$,u.value=u.factory()),"object"==typeof u.value&&u.value&&function ok(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(l){if(!l.providedIn)return!1;const u=Me(l.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}removeOnDestroy(l){const u=this._onDestroyHooks.indexOf(l);-1!==u&&this._onDestroyHooks.splice(u,1)}}function oT(o){const l=Hn(o),u=null!==l?l.factory:To(o);if(null!==u)return u;if(o instanceof pn)throw new oe(204,!1);if(o instanceof Function)return function ik(o){const l=o.length;if(l>0)throw function jl(o,l){const u=[];for(let d=0;d<o;d++)u.push(l);return u}(l,"?"),new oe(204,!1);const u=function rr(o){return o&&(o[Kr]||o[Gs])||null}(o);return null!==u?()=>u.factory(o):()=>new o}(o);throw new oe(204,!1)}function qD(o,l,u){let d;if(oh(o)){const f=Me(o);return To(f)||oT(f)}if(GD(o))d=()=>Me(o.useValue);else if(function HD(o){return!(!o||!o.useFactory)}(o))d=()=>o.useFactory(...U(o.deps||[]));else if(function sT(o){return!(!o||!o.useExisting)}(o))d=()=>xt(Me(o.useExisting));else{const f=Me(o&&(o.useClass||o.provide));if(!function WD(o){return!!o.deps}(o))return To(f)||oT(f);d=()=>new f(...U(o.deps))}return d}function ah(o,l,u=!1){return{factory:o,value:l,multi:u?[]:void 0}}function KD(o,l){for(const u of o)Array.isArray(u)?KD(u,l):u&&je(u)?KD(u.\u0275providers,l):l(u)}const ak=new pn("AppId",{providedIn:"root",factory:()=>x$}),x$="ng",lk=new pn("Platform Initializer"),ZD=new pn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Ie=new pn("AnimationModuleType"),Lr=new pn("CSP nonce",{providedIn:"root",factory:()=>function Ka(){if(void 0!==iu)return iu;if(typeof document<"u")return document;throw new oe(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let YD=(o,l)=>null;function XD(o,l){return YD(o,l)}class wc{}class kp{}class uh{resolveComponentFactory(l){throw function mk(o){const l=Error(`No component factory found for ${Y(o)}.`);return l.ngComponent=o,l}(l)}}let mT=(()=>{class o{}return o.NULL=new uh,o})();function k$(){return ch(Or(),we())}function ch(o,l){return new Ns(Zr(o,l))}let Ns=(()=>{class o{constructor(u){this.nativeElement=u}}return o.__NG_ELEMENT_ID__=k$,o})();function _k(o){return o instanceof Ns?o.nativeElement:o}class au{}let tC=(()=>{class o{constructor(){this.destroyNode=null}}return o.__NG_ELEMENT_ID__=()=>function nC(){const o=we(),u=ri(Or().index,o);return(kr(u)?u:o)[Vt]}(),o})(),O$=(()=>{class o{}return o.\u0275prov=ct({token:o,providedIn:"root",factory:()=>null}),o})();class yk{constructor(l){this.full=l,this.major=l.split(".")[0],this.minor=l.split(".")[1],this.patch=l.split(".").slice(2).join(".")}}const gT=new yk("16.1.4"),Ur={};function iy(o){for(;o;){o[Lt]|=64;const l=So(o);if(ju(o)&&!l)return o;o=l}return null}function _T(o){return o.ngOriginalError}class ua{constructor(){this._console=console}handleError(l){const u=this._findOriginalError(l);this._console.error("ERROR",l),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(l){let u=l&&_T(l);for(;u&&_T(u);)u=_T(u);return u||null}}const rC=new pn("",{providedIn:"root",factory:()=>!1});function Ya(o){return o instanceof Function?o():o}class Dk extends wo{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(l){this._lView=l}onConsumerDependencyMayHaveChanged(){iy(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(l,u,d){const f=Un(this);this.trackingVersion++;try{l(u,d)}finally{Un(f)}}destroy(){this.trackingVersion++}}let IT=null;function TT(){return IT??=new Dk,IT}function Ck(o,l){return o[l]??TT()}function uC(o,l){const u=TT();u.hasReadASignal&&(o[l]=IT,u.lView=o,IT=new Dk)}const $t={};function Sk(o){Op(on(),we(),fi()+o,!1)}function Op(o,l,u,d){if(!d)if(3==(3&l[Lt])){const _=o.preOrderCheckHooks;null!==_&&Ku(l,_,u)}else{const _=o.preOrderHooks;null!==_&&Od(l,_,0,u)}Yo(u)}function ay(o,l=null,u=null,d){const f=bT(o,l,u,d);return f.resolveInjectorInitializers(),f}function bT(o,l=null,u=null,d,f=new Set){const _=[u||kt,A$(o)];return d=d||("object"==typeof o?void 0:Y(o)),new X_(_,l||Y_(),d||null,f)}let lu=(()=>{class o{static create(u,d){if(Array.isArray(u))return ay({name:""},d,u,"");{const f=u.name??"";return ay({name:f},u.parent,u.providers,f)}}}return o.THROW_IF_NOT_FOUND=Hs,o.NULL=new jD,o.\u0275prov=ct({token:o,providedIn:"any",factory:()=>xt(nT)}),o.__NG_ELEMENT_ID__=-1,o})();function hh(o,l=at.Default){const u=we();return null===u?xt(o,l):rs(Or(),u,Me(o),l)}function fh(){throw new Error("invalid")}function Fp(o,l,u,d,f,_,I,w,D,S,P){const k=l.blueprint.slice();return k[mr]=f,k[Lt]=140|d,(null!==S||o&&2048&o[Lt])&&(k[Lt]|=2048),Yf(k),k[Nn]=k[Ws]=o,k[zn]=u,k[Pi]=I||o&&o[Pi],k[Vt]=w||o&&o[Vt],k[vl]=D||o&&o[vl]||null,k[Nr]=_,k[Eo]=function RD(){return x_++}(),k[bs]=P,k[_d]=S,k[Vn]=2==l.type?o[Vn]:k,k}function ph(o,l,u,d,f){let _=o.data[l];if(null===_)_=function DT(o,l,u,d,f){const _=AI(),I=DI(),D=o.data[l]=function Mk(o,l,u,d,f,_){let I=l?l.injectorIndex:-1,w=0;return function Oi(){return null!==Pt.skipHydrationRootTNode}()&&(w|=128),{type:u,index:d,insertBeforeIndex:null,injectorIndex:I,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:w,providerIndexes:0,value:f,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:l,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,I?_:_&&_.parent,u,l,d,f);return null===o.firstChild&&(o.firstChild=D),null!==_&&(I?null==_.child&&null!==D.parent&&(_.child=D):null===_.next&&(_.next=D,D.prev=_)),D}(o,l,u,d,f),function e_(){return Pt.lFrame.inI18n}()&&(_.flags|=32);else if(64&_.type){_.type=u,_.value=d,_.attrs=f;const I=function Rd(){const o=Pt.lFrame,l=o.currentTNode;return o.isParent?l:l.parent}();_.injectorIndex=null===I?-1:I.injectorIndex}return Zo(_,!0),_}function An(o,l,u,d){if(0===u)return-1;const f=l.length;for(let _=0;_<u;_++)l.push(d),o.blueprint.push(d),o.data.push(null);return f}function qn(o,l,u,d,f){const _=Ck(l,Il),I=fi(),w=2&d;try{if(Yo(-1),w&&l.length>nn&&Op(o,l,nn,!1),As(w?2:0,f),w)_.runInContext(u,d,f);else{const S=Un(null);try{u(d,f)}finally{Un(S)}}}finally{w&&null===l[Il]&&uC(l,Il),Yo(I),As(w?3:1,f)}}function Lp(o,l,u){if(ts(l)){const d=Un(null);try{const _=l.directiveEnd;for(let I=l.directiveStart;I<_;I++){const w=o.data[I];w.contentQueries&&w.contentQueries(1,u[I],I)}}finally{Un(d)}}}function ly(o,l,u){ep()&&(function fC(o,l,u,d){const f=u.directiveStart,_=u.directiveEnd;xa(u)&&function $p(o,l,u){const d=Zr(l,o),f=da(u);let I=16;u.signals?I=4096:u.onPush&&(I=64);const w=el(o,Fp(o,f,null,I,d,l,null,o[Pi].rendererFactory.createRenderer(d,u),null,null,null));o[l.index]=w}(l,u,o.data[f+u.componentOffset]),o.firstCreatePass||Oa(u,l),Fr(d,l);const I=u.initialInputs;for(let w=f;w<_;w++){const D=o.data[w],S=is(l,o,w,u);Fr(S,l),null!==I&&pC(0,w-f,S,D,0,I),hi(D)&&(ri(u.index,l)[zn]=is(l,o,w,u))}}(o,l,u,Zr(u,l)),64==(64&u.flags)&&gh(o,l,u))}function Vp(o,l,u=Zr){const d=l.localNames;if(null!==d){let f=l.index+1;for(let _=0;_<d.length;_+=2){const I=d[_+1],w=-1===I?u(l,o):o[I];o[f++]=w}}}function da(o){const l=o.tView;return null===l||l.incompleteFirstPass?o.tView=Up(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts,o.id):l}function Up(o,l,u,d,f,_,I,w,D,S,P){const k=nn+d,z=k+f,K=function dC(o,l){const u=[];for(let d=0;d<l;d++)u.push(d<o?null:$t);return u}(k,z),ge="function"==typeof S?S():S;return K[ze]={type:o,blueprint:K,template:u,queries:null,viewQuery:w,declTNode:l,data:K.slice().fill(null,k),bindingStartIndex:k,expandoStartIndex:z,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof I?I():I,firstChild:null,schemas:D,consts:ge,incompleteFirstPass:!1,ssrId:P}}let hC=o=>null;function uy(o,l,u,d){for(let f in o)if(o.hasOwnProperty(f)){u=null===u?{}:u;const _=o[f];null===d?mh(u,l,f,_):d.hasOwnProperty(f)&&mh(u,l,d[f],_)}return u}function mh(o,l,u,d){o.hasOwnProperty(u)?o[u].push(l,d):o[u]=[l,d]}function Mo(o,l,u,d){if(ep()){const f=null===d?null:{"":-1},_=function Ok(o,l){const u=o.directiveRegistry;let d=null,f=null;if(u)for(let _=0;_<u.length;_++){const I=u[_];if(pd(l,I.selectors,!1))if(d||(d=[]),hi(I))if(null!==I.findHostDirectiveDefs){const w=[];f=f||new Map,I.findHostDirectiveDefs(I,w,f),d.unshift(...w,I),jp(o,l,w.length)}else d.unshift(I),jp(o,l,0);else f=f||new Map,I.findHostDirectiveDefs?.(I,d,f),d.push(I)}return null===d?null:[d,f]}(o,u);let I,w;null===_?I=w=null:[I,w]=_,null!==I&&dy(o,l,u,I,f,w),f&&function Fk(o,l,u){if(l){const d=o.localNames=[];for(let f=0;f<l.length;f+=2){const _=u[l[f+1]];if(null==_)throw new oe(-301,!1);d.push(l[f],_)}}}(u,d,f)}u.mergedAttrs=pr(u.mergedAttrs,u.attrs)}function dy(o,l,u,d,f,_){for(let S=0;S<d.length;S++)Fl(Oa(u,l),o,d[S].type);!function Vk(o,l,u){o.flags|=1,o.directiveStart=l,o.directiveEnd=l+u,o.providerIndexes=l}(u,o.data.length,d.length);for(let S=0;S<d.length;S++){const P=d[S];P.providersResolver&&P.providersResolver(P)}let I=!1,w=!1,D=An(o,l,d.length,null);for(let S=0;S<d.length;S++){const P=d[S];u.mergedAttrs=pr(u.mergedAttrs,P.hostAttrs),MT(o,u,l,D,P),Lk(D,P,f),null!==P.contentQueries&&(u.flags|=4),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(u.flags|=64);const k=P.type.prototype;!I&&(k.ngOnChanges||k.ngOnInit||k.ngDoCheck)&&((o.preOrderHooks??=[]).push(u.index),I=!0),!w&&(k.ngOnChanges||k.ngDoCheck)&&((o.preOrderCheckHooks??=[]).push(u.index),w=!0),D++}!function V$(o,l,u){const f=l.directiveEnd,_=o.data,I=l.attrs,w=[];let D=null,S=null;for(let P=l.directiveStart;P<f;P++){const k=_[P],z=u?u.get(k):null,ge=z?z.outputs:null;D=uy(k.inputs,P,D,z?z.inputs:null),S=uy(k.outputs,P,S,ge);const ke=null===D||null===I||ba(l)?null:B$(D,P,I);w.push(ke)}null!==D&&(D.hasOwnProperty("class")&&(l.flags|=8),D.hasOwnProperty("style")&&(l.flags|=16)),l.initialInputs=w,l.inputs=D,l.outputs=S}(o,u,_)}function gh(o,l,u){const d=u.directiveStart,f=u.directiveEnd,_=u.index,I=function CI(){return Pt.lFrame.currentDirectiveIndex}();try{Yo(_);for(let w=d;w<f;w++){const D=o.data[w],S=l[w];Wu(w),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&RT(D,S)}}finally{Yo(-1),Wu(I)}}function RT(o,l){null!==o.hostBindings&&o.hostBindings(1,l)}function jp(o,l,u){l.componentOffset=u,(o.components??=[]).push(l.index)}function Lk(o,l,u){if(u){if(l.exportAs)for(let d=0;d<l.exportAs.length;d++)u[l.exportAs[d]]=o;hi(l)&&(u[""]=o)}}function MT(o,l,u,d,f){o.data[d]=f;const _=f.factory||(f.factory=To(f.type)),I=new Tt(_,hi(f),hh);o.blueprint[d]=I,u[d]=I,function Nk(o,l,u,d,f){const _=f.hostBindings;if(_){let I=o.hostBindingOpCodes;null===I&&(I=o.hostBindingOpCodes=[]);const w=~l.index;(function kk(o){let l=o.length;for(;l>0;){const u=o[--l];if("number"==typeof u&&u<0)return u}return 0})(I)!=w&&I.push(w),I.push(u,d,_)}}(o,l,d,An(o,u,f.hostVars,$t),f)}function ai(o,l,u,d,f,_){const I=Zr(o,l);!function Ja(o,l,u,d,f,_,I){if(null==_)o.removeAttribute(l,f,u);else{const w=null==I?J(_):I(_,d||"",f);o.setAttribute(l,f,w,u)}}(l[Vt],I,_,o.value,u,d,f)}function pC(o,l,u,d,f,_){const I=_[l];if(null!==I)for(let w=0;w<I.length;)ha(d,u,I[w++],I[w++],I[w++])}function ha(o,l,u,d,f){const _=Un(null);try{const I=o.inputTransforms;null!==I&&I.hasOwnProperty(d)&&(f=I[d].call(l,f)),null!==o.setInput?o.setInput(l,f,u,d):l[d]=f}finally{Un(_)}}function B$(o,l,u){let d=null,f=0;for(;f<u.length;){const _=u[f];if(0!==_)if(5!==_){if("number"==typeof _)break;if(o.hasOwnProperty(_)){null===d&&(d=[]);const I=o[_];for(let w=0;w<I.length;w+=2)if(I[w]===l){d.push(_,I[w+1],u[f+1]);break}}f+=2}else f+=2;else f+=4}return d}function PT(o,l,u,d){return[o,!0,!1,l,null,0,d,u,null,null,null]}function Gp(o,l){const u=o.contentQueries;if(null!==u)for(let d=0;d<u.length;d+=2){const _=u[d+1];if(-1!==_){const I=o.data[_];Nd(u[d]),I.contentQueries(2,l[_],_)}}}function el(o,l){return o[Aa]?o[Lf][ws]=l:o[Aa]=l,o[Lf]=l,l}function hy(o,l,u){Nd(0);const d=Un(null);try{l(o,u)}finally{Un(d)}}function fy(o){return o[yl]||(o[yl]=[])}function NT(o){return o.cleanup||(o.cleanup=[])}function OT(o,l){const u=o[vl],d=u?u.get(ua,null):null;d&&d.handleError(l)}function py(o,l,u,d,f){for(let _=0;_<u.length;){const I=u[_++],w=u[_++];ha(o.data[I],l[I],d,w,f)}}function my(o,l){const u=ri(l,o),d=u[ze];!function j$(o,l){for(let u=l.length;u<o.blueprint.length;u++)l.push(o.blueprint[u])}(d,u);const f=u[mr];null!==f&&null===u[bs]&&(u[bs]=XD(f,u[vl])),FT(d,u,u[zn])}function FT(o,l,u){Nl(l);try{const d=o.viewQuery;null!==d&&hy(1,d,u);const f=o.template;null!==f&&qn(o,l,f,1,u),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&Gp(o,l),o.staticViewQueries&&hy(2,o.viewQuery,u);const _=o.components;null!==_&&function Bk(o,l){for(let u=0;u<l.length;u++)my(o,l[u])}(l,_)}catch(d){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),d}finally{l[Lt]&=-5,kl()}}let gC=(()=>{class o{constructor(){this.all=new Set,this.queue=new Map}create(u,d,f){const _=typeof Zone>"u"?null:Zone.current,I=new Td(u,S=>{this.all.has(S)&&this.queue.set(S,_)},f);let w;this.all.add(I),I.notify();const D=()=>{I.cleanup(),w?.(),this.all.delete(I),this.queue.delete(I)};return w=d?.onDestroy(D),{destroy:D}}flush(){if(0!==this.queue.size)for(const[u,d]of this.queue)this.queue.delete(u),d?d.run(()=>u.run()):u.run()}get isQueueEmpty(){return 0===this.queue.size}}return o.\u0275prov=ct({token:o,providedIn:"root",factory:()=>new o}),o})();function Hp(o,l,u){let d=u?o.styles:null,f=u?o.classes:null,_=0;if(null!==l)for(let I=0;I<l.length;I++){const w=l[I];"number"==typeof w?_=w:1==_?f=qe(f,w):2==_&&(d=qe(d,w+": "+l[++I]+";"))}u?o.styles=d:o.stylesWithoutHost=d,u?o.classes=f:o.classesWithoutHost=f}function Dc(o,l,u,d,f=!1){for(;null!==u;){const _=l[u.index];if(null!==_&&d.push(Pn(_)),ki(_)){for(let w=sr;w<_.length;w++){const D=_[w],S=D[ze].firstChild;null!==S&&Dc(D[ze],D,S,d)}_[Ks]!==_[mr]&&d.push(_[Ks])}const I=u.type;if(8&I)Dc(o,l,u.child,d);else if(32&I){const w=eu(u,l);let D;for(;D=w();)d.push(D)}else if(16&I){const w=B_(l,u);if(Array.isArray(w))d.push(...w);else{const D=So(l[Vn]);Dc(D[ze],D,w,d,!0)}}u=f?u.projectionNext:u.next}return d}function zp(o,l,u,d=!0){const f=l[Pi].rendererFactory;f.begin&&f.begin();try{yC(o,l,o.template,u)}catch(I){throw d&&OT(l,I),I}finally{f.end&&f.end(),l[Pi].effectManager?.flush()}}function yC(o,l,u,d){const f=l[Lt];if(256!=(256&f)){l[Pi].effectManager?.flush(),Nl(l);try{Yf(l),function Jg(o){return Pt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==u&&qn(o,l,u,2,d);const I=3==(3&f);if(I){const S=o.preOrderCheckHooks;null!==S&&Ku(l,S,null)}else{const S=o.preOrderHooks;null!==S&&Od(l,S,0,null),Fd(l,0)}if(function vC(o){for(let l=k_(o);null!==l;l=Jd(l)){if(!l[yd])continue;const u=l[Tl];for(let d=0;d<u.length;d++){Hu(u[d])}}}(l),gy(l,2),null!==o.contentQueries&&Gp(o,l),I){const S=o.contentCheckHooks;null!==S&&Ku(l,S)}else{const S=o.contentHooks;null!==S&&Od(l,S,1),Fd(l,1)}!function AT(o,l){const u=o.hostBindingOpCodes;if(null===u)return;const d=Ck(l,Io);try{for(let f=0;f<u.length;f++){const _=u[f];if(_<0)Yo(~_);else{const I=_,w=u[++f],D=u[++f];t_(w,I),d.runInContext(D,2,l[I])}}}finally{null===l[Io]&&uC(l,Io),Yo(-1)}}(o,l);const w=o.components;null!==w&&IC(l,w,0);const D=o.viewQuery;if(null!==D&&hy(2,D,d),I){const S=o.viewCheckHooks;null!==S&&Ku(l,S)}else{const S=o.viewHooks;null!==S&&Od(l,S,2),Fd(l,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),l[Lt]&=-73,Xf(l)}finally{kl()}}}function gy(o,l){for(let u=k_(o);null!==u;u=Jd(u))for(let d=sr;d<u.length;d++)EC(u[d],l)}function Hk(o,l,u){EC(ri(l,o),u)}function EC(o,l){if(!function Zf(o){return 128==(128&o[Lt])}(o))return;const u=o[ze];if(80&o[Lt]&&0===l||1024&o[Lt]||2===l)yC(u,o,u.template,o[zn]);else if(o[_l]>0){gy(o,1);const f=o[ze].components;null!==f&&IC(o,f,1)}}function IC(o,l,u){for(let d=0;d<l.length;d++)Hk(o,l[d],u)}class _h{get rootNodes(){const l=this._lView,u=l[ze];return Dc(u,l,u.firstChild,[])}constructor(l,u){this._lView=l,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[zn]}set context(l){this._lView[zn]=l}get destroyed(){return 256==(256&this._lView[Lt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const l=this._lView[Nn];if(ki(l)){const u=l[8],d=u?u.indexOf(this):-1;d>-1&&(yc(l,d),Bl(u,d))}this._attachedToViewContainer=!1}ru(this._lView[ze],this._lView)}onDestroy(l){!function Dd(o,l){if(256==(256&o[Lt]))throw new oe(911,!1);null===o[Wo]&&(o[Wo]=[]),o[Wo].push(l)}(this._lView,l)}markForCheck(){iy(this._cdRefInjectingView||this._lView)}detach(){this._lView[Lt]&=-129}reattach(){this._lView[Lt]|=128}detectChanges(){zp(this._lView[ze],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new oe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function PD(o,l){p(o,l,l[Vt],2,null,null)}(this._lView[ze],this._lView)}attachToAppRef(l){if(this._attachedToViewContainer)throw new oe(902,!1);this._appRef=l}}class uu extends _h{constructor(l){super(l),this._view=l}detectChanges(){const l=this._view;zp(l[ze],l,l[zn],!1)}checkNoChanges(){}get context(){return null}}class _y extends mT{constructor(l){super(),this.ngModule=l}resolveComponentFactory(l){const u=Wt(l);return new yh(u,this.ngModule)}}function TC(o){const l=[];for(let u in o)o.hasOwnProperty(u)&&l.push({propName:o[u],templateName:u});return l}class Yr{constructor(l,u){this.injector=l,this.parentInjector=u}get(l,u,d){d=$(d);const f=this.injector.get(l,Ur,d);return f!==Ur||u===Ur?f:this.parentInjector.get(l,u,d)}}class yh extends kp{get inputs(){const l=this.componentDef,u=l.inputTransforms,d=TC(l.inputs);if(null!==u)for(const f of d)u.hasOwnProperty(f.propName)&&(f.transform=u[f.propName]);return d}get outputs(){return TC(this.componentDef.outputs)}constructor(l,u){super(),this.componentDef=l,this.ngModule=u,this.componentType=l.type,this.selector=function Mg(o){return o.map(oI).join(",")}(l.selectors),this.ngContentSelectors=l.ngContentSelectors?l.ngContentSelectors:[],this.isBoundToModule=!!u}create(l,u,d,f){let _=(f=f||this.ngModule)instanceof Tc?f:f?.injector;_&&null!==this.componentDef.getStandaloneInjector&&(_=this.componentDef.getStandaloneInjector(_)||_);const I=_?new Yr(l,_):l,w=I.get(au,null);if(null===w)throw new oe(407,!1);const P={rendererFactory:w,sanitizer:I.get(O$,null),effectManager:I.get(gC,null)},k=w.createRenderer(null,this.componentDef),z=this.componentDef.selectors[0][0]||"div",K=d?function xk(o,l,u,d){const _=d.get(rC,!1)||u===Ln.ShadowDom,I=o.selectRootElement(l,_);return function Bp(o){hC(o)}(I),I}(k,d,this.componentDef.encapsulation,I):gc(k,z,function zk(o){const l=o.toLowerCase();return"svg"===l?"svg":"math"===l?"math":null}(z)),tt=this.componentDef.signals?4608:this.componentDef.onPush?576:528,_t=Up(0,null,null,1,0,null,null,null,null,null,null),Ee=Fp(null,_t,null,tt,null,null,P,k,I,null,null);let Gt,an;Nl(Ee);try{const cn=this.componentDef;let Hi,Gv=null;cn.findHostDirectiveDefs?(Hi=[],Gv=new Map,cn.findHostDirectiveDefs(cn,Hi,Gv),Hi.push(cn)):Hi=[cn];const $G=function Wk(o,l){const u=o[ze],d=nn;return o[d]=l,ph(u,d,2,"#host",null)}(Ee,K),bR=function wC(o,l,u,d,f,_,I){const w=f[ze];!function Kk(o,l,u,d){for(const f of o)l.mergedAttrs=pr(l.mergedAttrs,f.hostAttrs);null!==l.mergedAttrs&&(Hp(l,l.mergedAttrs,!0),null!==u&&ve(d,u,l))}(d,o,l,I);let D=null;null!==l&&(D=XD(l,f[vl]));const S=_.rendererFactory.createRenderer(l,u);let P=16;u.signals?P=4096:u.onPush&&(P=64);const k=Fp(f,da(u),null,P,f[o.index],o,_,S,null,null,D);return w.firstCreatePass&&jp(w,o,d.length-1),el(f,k),f[o.index]=k}($G,K,cn,Hi,Ee,P,k);an=Zg(_t,nn),K&&function Zk(o,l,u,d){if(d)qs(o,u,["ng-version",gT.full]);else{const{attrs:f,classes:_}=function md(o){const l=[],u=[];let d=1,f=2;for(;d<o.length;){let _=o[d];if("string"==typeof _)2===f?""!==_&&l.push(_,o[++d]):8===f&&u.push(_);else{if(!Ri(f))break;f=_}d++}return{attrs:l,classes:u}}(l.selectors[0]);f&&qs(o,u,f),_&&_.length>0&&q(o,u,_.join(" "))}}(k,cn,K,d),void 0!==u&&function AC(o,l,u){const d=o.projection=[];for(let f=0;f<l.length;f++){const _=u[f];d.push(null!=_?Array.from(_):null)}}(an,this.ngContentSelectors,u),Gt=function bC(o,l,u,d,f,_){const I=Or(),w=f[ze],D=Zr(I,f);dy(w,f,I,u,null,d);for(let P=0;P<u.length;P++)Fr(is(f,w,I.directiveStart+P,I),f);gh(w,f,I),D&&Fr(D,f);const S=is(f,w,I.directiveStart+I.componentOffset,I);if(o[zn]=f[zn]=S,null!==_)for(const P of _)P(S,l);return Lp(w,I,o),S}(bR,cn,Hi,Gv,Ee,[DC]),FT(_t,Ee,null)}finally{kl()}return new qk(this.componentType,Gt,ch(an,Ee),Ee,an)}}class qk extends wc{constructor(l,u,d,f,_){super(),this.location=d,this._rootLView=f,this._tNode=_,this.previousInputValues=null,this.instance=u,this.hostView=this.changeDetectorRef=new uu(f),this.componentType=l}setInput(l,u){const d=this._tNode.inputs;let f;if(null!==d&&(f=d[l])){if(this.previousInputValues??=new Map,this.previousInputValues.has(l)&&Object.is(this.previousInputValues.get(l),u))return;const _=this._rootLView;py(_[ze],_,f,l,u),this.previousInputValues.set(l,u),iy(ri(this._tNode.index,_))}}get injector(){return new eo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(l){this.hostView.onDestroy(l)}}function DC(){const o=Or();op(we()[ze],o)}function vy(o){let l=function yy(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),u=!0;const d=[o];for(;l;){let f;if(hi(o))f=l.\u0275cmp||l.\u0275dir;else{if(l.\u0275cmp)throw new oe(903,!1);f=l.\u0275dir}if(f){if(u){d.push(f);const I=o;I.inputs=Ey(o.inputs),I.inputTransforms=Ey(o.inputTransforms),I.declaredInputs=Ey(o.declaredInputs),I.outputs=Ey(o.outputs);const w=f.hostBindings;w&&jT(o,w);const D=f.viewQuery,S=f.contentQueries;if(D&&UT(o,D),S&&BT(o,S),H(o.inputs,f.inputs),H(o.declaredInputs,f.declaredInputs),H(o.outputs,f.outputs),null!==f.inputTransforms&&(null===I.inputTransforms&&(I.inputTransforms={}),H(I.inputTransforms,f.inputTransforms)),hi(f)&&f.data.animation){const P=o.data;P.animation=(P.animation||[]).concat(f.data.animation)}}const _=f.features;if(_)for(let I=0;I<_.length;I++){const w=_[I];w&&w.ngInherit&&w(o),w===vy&&(u=!1)}}l=Object.getPrototypeOf(l)}!function VT(o){let l=0,u=null;for(let d=o.length-1;d>=0;d--){const f=o[d];f.hostVars=l+=f.hostVars,f.hostAttrs=pr(f.hostAttrs,u=pr(u,f.hostAttrs))}}(d)}function Ey(o){return o===bn?{}:o===kt?[]:o}function UT(o,l){const u=o.viewQuery;o.viewQuery=u?(d,f)=>{l(d,f),u(d,f)}:l}function BT(o,l){const u=o.contentQueries;o.contentQueries=u?(d,f,_)=>{l(d,f,_),u(d,f,_)}:l}function jT(o,l){const u=o.hostBindings;o.hostBindings=u?(d,f)=>{l(d,f),u(d,f)}:l}function by(o){const l=o.inputConfig,u={};for(const d in l)if(l.hasOwnProperty(d)){const f=l[d];Array.isArray(f)&&f[2]&&(u[d]=f[2])}o.inputTransforms=u}function vh(o){return!!qp(o)&&(Array.isArray(o)||!(o instanceof Map)&&Symbol.iterator in o)}function qp(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function Dr(o,l,u){return!Object.is(o[l],u)&&(o[l]=u,!0)}function Kp(o,l,u,d){const f=we();return Dr(f,zu(),l)&&(on(),ai(Bn(),f,o,l,u,d)),Kp}function Mc(o,l,u,d,f,_,I,w){const D=we(),S=on(),P=o+nn,k=S.firstCreatePass?function rw(o,l,u,d,f,_,I,w,D){const S=l.consts,P=ph(l,o,4,I||null,Ds(S,w));Mo(l,u,P,Ds(S,D)),op(l,P);const k=P.tView=Up(2,P,d,f,_,l.directiveRegistry,l.pipeRegistry,null,l.schemas,S,null);return null!==l.queries&&(l.queries.template(l,P),k.queries=l.queries.embeddedTView(P)),P}(P,S,D,l,u,d,f,_,I):S.data[P];Zo(k,!1);const z=iO(S,D,k,o);kd()&&eh(S,D,z,k),Fr(z,D),el(D,D[P]=PT(z,D,z,k)),bl(k)&&ly(S,D,k),null!=I&&Vp(D,k,w)}let iO=function Ny(o,l,u,d){return Cs(!0),l[Vt].createComment("")};function ky(o){return function bo(o,l){return o[l]}(function Xg(){return Pt.lFrame.contextLView}(),nn+o)}function sw(o,l,u){const d=we();return Dr(d,zu(),l)&&function ji(o,l,u,d,f,_,I,w){const D=Zr(l,u);let P,S=l.inputs;!w&&null!=S&&(P=S[d])?(py(o,u,P,d,f),xa(l)&&function xT(o,l){const u=ri(l,o);16&u[Lt]||(u[Lt]|=64)}(u,l.index)):3&l.type&&(d=function Pk(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(d),f=null!=I?I(f,l.value||"",d):f,_.setProperty(D,d,f))}(on(),Bn(),d,o,l,d[Vt],u,!1),sw}function Qp(o,l,u,d,f){const I=f?"class":"style";py(o,u,l.inputs[I],I,d)}function Sh(o,l,u,d){const f=we(),_=on(),I=nn+o,w=f[Vt],D=_.firstCreatePass?function q$(o,l,u,d,f,_){const I=l.consts,D=ph(l,o,2,d,Ds(I,f));return Mo(l,u,D,Ds(I,_)),null!==D.attrs&&Hp(D,D.attrs,!1),null!==D.mergedAttrs&&Hp(D,D.mergedAttrs,!0),null!==l.queries&&l.queries.elementStart(l,D),D}(I,_,f,l,u,d):_.data[I],S=sO(_,f,D,w,l,o);f[I]=S;const P=bl(D);return Zo(D,!0),ve(w,S,D),32!=(32&D.flags)&&kd()&&eh(_,f,S,D),0===function II(){return Pt.lFrame.elementDepthCount}()&&Fr(S,f),function Qg(){Pt.lFrame.elementDepthCount++}(),P&&(ly(_,f,D),Lp(_,D,f)),null!==d&&Vp(f,D),Sh}function ow(){let o=Or();DI()?function np(){Pt.lFrame.isParent=!1}():(o=o.parent,Zo(o,!1));const l=o;(function xd(o){return Pt.skipHydrationRootTNode===o})(l)&&function wI(){Pt.skipHydrationRootTNode=null}(),function Jf(){Pt.lFrame.elementDepthCount--}();const u=on();return u.firstCreatePass&&(op(u,o),ts(o)&&u.queries.elementEnd(o)),null!=l.classesWithoutHost&&function NI(o){return 0!=(8&o.flags)}(l)&&Qp(u,l,we(),l.classesWithoutHost,!0),null!=l.stylesWithoutHost&&function s_(o){return 0!=(16&o.flags)}(l)&&Qp(u,l,we(),l.stylesWithoutHost,!1),ow}function Yp(o,l,u,d){return Sh(o,l,u,d),ow(),Yp}let sO=(o,l,u,d,f,_)=>(Cs(!0),gc(d,f,function r_(){return Pt.lFrame.currentNamespace}()));function oO(){return we()}function Jp(o){return!!o&&"function"==typeof o.then}function aO(o){return!!o&&"function"==typeof o.subscribe}function em(o,l,u,d){const f=we(),_=on(),I=Or();return function lO(o,l,u,d,f,_,I){const w=bl(d),S=o.firstCreatePass&&NT(o),P=l[zn],k=fy(l);let z=!0;if(3&d.type||I){const ke=Zr(d,l),tt=I?I(ke):ke,_t=k.length,Ee=I?an=>I(Pn(an[d.index])):d.index;let Gt=null;if(!I&&w&&(Gt=function uw(o,l,u,d){const f=o.cleanup;if(null!=f)for(let _=0;_<f.length-1;_+=2){const I=f[_];if(I===u&&f[_+1]===d){const w=l[yl],D=f[_+2];return w.length>D?w[D]:null}"string"==typeof I&&(_+=2)}return null}(o,l,f,d.index)),null!==Gt)(Gt.__ngLastListenerFn__||Gt).__ngNextListenerFn__=_,Gt.__ngLastListenerFn__=_,z=!1;else{_=uO(d,l,P,_,!1);const an=u.listen(tt,f,_);k.push(_,an),S&&S.push(f,Ee,_t,_t+1)}}else _=uO(d,l,P,_,!1);const K=d.outputs;let ge;if(z&&null!==K&&(ge=K[f])){const ke=ge.length;if(ke)for(let tt=0;tt<ke;tt+=2){const cn=l[ge[tt]][ge[tt+1]].subscribe(_),Hi=k.length;k.push(_,cn),S&&S.push(f,d.index,Hi,-(Hi+1))}}}(_,f,f[Vt],I,o,l,d),em}function Fy(o,l,u,d){try{return As(6,l,u),!1!==u(d)}catch(f){return OT(o,f),!1}finally{As(7,l,u)}}function uO(o,l,u,d,f){return function _(I){if(I===Function)return d;iy(o.componentOffset>-1?ri(o.index,l):l);let D=Fy(l,u,d,I),S=_.__ngNextListenerFn__;for(;S;)D=Fy(l,u,S,I)&&D,S=S.__ngNextListenerFn__;return f&&!1===D&&I.preventDefault(),D}}function Vy(o,l){return o<<17|l<<2}function Pc(o){return o>>17&32767}function WC(o){return 2|o}function xh(o){return(131068&o)>>2}function tm(o,l){return-131069&o|l<<2}function nm(o){return 1|o}function KC(o,l,u,d,f){const _=o[u+1],I=null===l;let w=d?Pc(_):xh(_),D=!1;for(;0!==w&&(!1===D||I);){const P=o[w+1];mO(o[w],l)&&(D=!0,o[w+1]=d?nm(P):WC(P)),w=d?Pc(P):xh(P)}D&&(o[u+1]=d?WC(_):nm(_))}function mO(o,l){return null===o||null==l||(Array.isArray(o)?o[1]:o)===l||!(!Array.isArray(o)||"string"!=typeof l)&&Fi(o,l)>=0}function lr(o,l){return function No(o,l,u,d){const f=we(),_=on(),I=function Ys(o){const l=Pt.lFrame,u=l.bindingIndex;return l.bindingIndex=l.bindingIndex+o,u}(2);_.firstUpdatePass&&function JC(o,l,u,d){const f=o.data;if(null===f[u+1]){const _=f[fi()],I=function mw(o,l){return l>=o.expandoStartIndex}(o,u);(function rS(o,l){return 0!=(o.flags&(l?8:16))})(_,d)&&null===l&&!I&&(l=!1),l=function jy(o,l,u,d){const f=function Pd(o){const l=Pt.lFrame.currentDirectiveIndex;return-1===l?null:o[l]}(o);let _=d?l.residualClasses:l.residualStyles;if(null===f)0===(d?l.classBindings:l.styleBindings)&&(u=kc(u=gw(null,o,l,u,d),l.attrs,d),_=null);else{const I=l.directiveStylingLast;if(-1===I||o[I]!==f)if(u=gw(f,o,l,u,d),null===_){let D=function eS(o,l,u){const d=u?l.classBindings:l.styleBindings;if(0!==xh(d))return o[Pc(d)]}(o,l,d);void 0!==D&&Array.isArray(D)&&(D=gw(null,o,l,D[1],d),D=kc(D,l.attrs,d),function im(o,l,u,d){o[Pc(u?l.classBindings:l.styleBindings)]=d}(o,l,d,D))}else _=function $y(o,l,u){let d;const f=l.directiveEnd;for(let _=1+l.directiveStylingLast;_<f;_++)d=kc(d,o[_].hostAttrs,u);return kc(d,l.attrs,u)}(o,l,d)}return void 0!==_&&(d?l.residualClasses=_:l.residualStyles=_),u}(f,_,l,d),function pO(o,l,u,d,f,_){let I=_?l.classBindings:l.styleBindings,w=Pc(I),D=xh(I);o[d]=u;let P,S=!1;if(Array.isArray(u)?(P=u[1],(null===P||Fi(u,P)>0)&&(S=!0)):P=u,f)if(0!==D){const z=Pc(o[w+1]);o[d+1]=Vy(z,w),0!==z&&(o[z+1]=tm(o[z+1],d)),o[w+1]=function X$(o,l){return 131071&o|l<<17}(o[w+1],d)}else o[d+1]=Vy(w,0),0!==w&&(o[w+1]=tm(o[w+1],d)),w=d;else o[d+1]=Vy(D,0),0===w?w=d:o[D+1]=tm(o[D+1],d),D=d;S&&(o[d+1]=WC(o[d+1])),KC(o,P,d,!0),KC(o,P,d,!1),function eG(o,l,u,d,f){const _=f?o.residualClasses:o.residualStyles;null!=_&&"string"==typeof l&&Fi(_,l)>=0&&(u[d+1]=nm(u[d+1]))}(l,P,o,d,_),I=Vy(w,D),_?l.classBindings=I:l.styleBindings=I}(f,_,l,u,I,d)}}(_,o,I,d),l!==$t&&Dr(f,I,l)&&function yw(o,l,u,d,f,_,I,w){if(!(3&l.type))return;const D=o.data,S=D[w+1],P=function Nc(o){return 1==(1&o)}(S)?nS(D,l,u,f,xh(S),I):void 0;Hy(P)||(Hy(_)||function Y$(o){return 2==(2&o)}(S)&&(_=nS(D,null,u,f,w,I)),function R(o,l,u,d,f){if(l)f?o.addClass(u,d):o.removeClass(u,d);else{let _=-1===d.indexOf("-")?void 0:ls.DashCase;null==f?o.removeStyle(u,d,_):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),_|=ls.Important),o.setStyle(u,d,f,_))}}(d,I,Ad(fi(),u),f,_))}(_,_.data[fi()],f,f[Vt],o,f[I+1]=function rG(o,l){return null==o||""===o||("string"==typeof l?o+=l:"object"==typeof o&&(o=Y(Ro(o)))),o}(l,u),d,I)}(o,l,null,!0),lr}function gw(o,l,u,d,f){let _=null;const I=u.directiveEnd;let w=u.directiveStylingLast;for(-1===w?w=u.directiveStart:w++;w<I&&(_=l[w],d=kc(d,_.hostAttrs,f),_!==o);)w++;return null!==o&&(u.directiveStylingLast=w),d}function kc(o,l,u){const d=u?1:2;let f=-1;if(null!==l)for(let _=0;_<l.length;_++){const I=l[_];"number"==typeof I?f=I:f===d&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),_r(o,I,!!u||l[++_]))}return void 0===o?null:o}function nS(o,l,u,d,f,_){const I=null===l;let w;for(;f>0;){const D=o[f],S=Array.isArray(D),P=S?D[1]:D,k=null===P;let z=u[f+1];z===$t&&(z=k?kt:void 0);let K=k?up(z,d):P===d?z:void 0;if(S&&!Hy(K)&&(K=up(D,d)),Hy(K)&&(w=K,I))return w;const ge=o[f+1];f=I?Pc(ge):xh(ge)}if(null!==l){let D=_?l.residualClasses:l.residualStyles;null!=D&&(w=up(D,d))}return w}function Hy(o){return void 0!==o}function iS(o,l=""){const u=we(),d=on(),f=o+nn,_=d.firstCreatePass?ph(d,f,1,l,null):d.data[f],I=sS(d,u,_,l,o);u[f]=I,kd()&&eh(d,u,I,_),Zo(_,!1)}let sS=(o,l,u,d,f)=>(Cs(!0),function tu(o,l){return o.createText(l)}(l[Vt],d));function vw(o){return Oc("",o,""),vw}function Oc(o,l,u){const d=we(),f=function cu(o,l,u,d){return Dr(o,zu(),u)?l+J(u)+d:$t}(d,o,l,u);return f!==$t&&function fa(o,l,u){const d=Ad(l,o);!function mc(o,l,u){o.setValue(l,u)}(o[Vt],d,u)}(d,fi(),f),Oc}const Rh=void 0;var xw=["en",[["a","p"],["AM","PM"],Rh],[["AM","PM"],Rh,Rh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Rh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Rh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Rh,"{1} 'at' {0}",Rh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Sw(o){const u=Math.floor(Math.abs(o)),d=o.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===d?1:5}];let Mh={};function Rw(o){const l=function CO(o){return o.toLowerCase().replace(/_/g,"-")}(o);let u=Xy(l);if(u)return u;const d=l.split("-")[0];if(u=Xy(d),u)return u;if("en"===d)return xw;throw new oe(701,!1)}function Yy(o){return Rw(o)[Rt.PluralCase]}function Xy(o){return o in Mh||(Mh[o]=Ct.ng&&Ct.ng.common&&Ct.ng.common.locales&&Ct.ng.common.locales[o]),Mh[o]}var Rt=(()=>((Rt=Rt||{})[Rt.LocaleId=0]="LocaleId",Rt[Rt.DayPeriodsFormat=1]="DayPeriodsFormat",Rt[Rt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Rt[Rt.DaysFormat=3]="DaysFormat",Rt[Rt.DaysStandalone=4]="DaysStandalone",Rt[Rt.MonthsFormat=5]="MonthsFormat",Rt[Rt.MonthsStandalone=6]="MonthsStandalone",Rt[Rt.Eras=7]="Eras",Rt[Rt.FirstDayOfWeek=8]="FirstDayOfWeek",Rt[Rt.WeekendRange=9]="WeekendRange",Rt[Rt.DateFormat=10]="DateFormat",Rt[Rt.TimeFormat=11]="TimeFormat",Rt[Rt.DateTimeFormat=12]="DateTimeFormat",Rt[Rt.NumberSymbols=13]="NumberSymbols",Rt[Rt.NumberFormats=14]="NumberFormats",Rt[Rt.CurrencyCode=15]="CurrencyCode",Rt[Rt.CurrencySymbol=16]="CurrencySymbol",Rt[Rt.CurrencyName=17]="CurrencyName",Rt[Rt.Currencies=18]="Currencies",Rt[Rt.Directionality=19]="Directionality",Rt[Rt.PluralCase=20]="PluralCase",Rt[Rt.ExtraData=21]="ExtraData",Rt))();const sm="en-US";let xO=sm;function Gw(o,l,u,d,f){if(o=Me(o),Array.isArray(o))for(let _=0;_<o.length;_++)Gw(o[_],l,u,d,f);else{const _=on(),I=we();let w=oh(o)?o:Me(o.provide),D=qD(o);const S=Or(),P=1048575&S.providerIndexes,k=S.directiveStart,z=S.providerIndexes>>20;if(oh(o)||!o.multi){const K=new Tt(D,f,hh),ge=cv(w,l,f?P:P+z,k);-1===ge?(Fl(Oa(S,I),_,w),lv(_,o,l.length),l.push(w),S.directiveStart++,S.directiveEnd++,f&&(S.providerIndexes+=1048576),u.push(K),I.push(K)):(u[ge]=K,I[ge]=K)}else{const K=cv(w,l,P+z,k),ge=cv(w,l,P,P+z),tt=ge>=0&&u[ge];if(f&&!tt||!f&&!(K>=0&&u[K])){Fl(Oa(S,I),_,w);const _t=function s1(o,l,u,d,f){const _=new Tt(o,u,hh);return _.multi=[],_.index=l,_.componentProviders=0,uv(_,f,d&&!u),_}(f?zw:Hw,u.length,f,d,D);!f&&tt&&(u[ge].providerFactory=_t),lv(_,o,l.length,0),l.push(w),S.directiveStart++,S.directiveEnd++,f&&(S.providerIndexes+=1048576),u.push(_t),I.push(_t)}else lv(_,o,K>-1?K:ge,uv(u[f?ge:K],D,!f&&d));!f&&d&&tt&&u[ge].componentProviders++}}}function lv(o,l,u,d){const f=oh(l),_=function D$(o){return!!o.useClass}(l);if(f||_){const D=(_?Me(l.useClass):l).prototype.ngOnDestroy;if(D){const S=o.destroyHooks||(o.destroyHooks=[]);if(!f&&l.multi){const P=S.indexOf(u);-1===P?S.push(u,[d,D]):S[P+1].push(d,D)}else S.push(u,D)}}}function uv(o,l,u){return u&&o.componentProviders++,o.multi.push(l)-1}function cv(o,l,u,d){for(let f=u;f<d;f++)if(l[f]===o)return f;return-1}function Hw(o,l,u,d){return qw(this.multi,[])}function zw(o,l,u,d){const f=this.multi;let _;if(this.providerFactory){const I=this.providerFactory.componentProviders,w=is(u,u[ze],this.providerFactory.index,d);_=w.slice(0,I),qw(f,_);for(let D=I;D<w.length;D++)_.push(w[D])}else _=[],qw(f,_);return _}function qw(o,l){for(let u=0;u<o.length;u++)l.push((0,o[u])());return l}function dv(o,l=[]){return u=>{u.providersResolver=(d,f)=>function r1(o,l,u){const d=on();if(d.firstCreatePass){const f=hi(o);Gw(u,d.data,d.blueprint,f,!0),Gw(l,d.data,d.blueprint,f,!1)}}(d,f?f(o):o,l)}}class Nh{}class zS{}function o1(o,l){return new hm(o,l??null,[])}class hm extends Nh{constructor(l,u,d){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new _y(this);const f=Mi(l);this._bootstrapComponents=Ya(f.bootstrap),this._r3Injector=bT(l,u,[{provide:Nh,useValue:this},{provide:mT,useValue:this.componentFactoryResolver},...d],Y(l),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(l)}get injector(){return this._r3Injector}destroy(){const l=this._r3Injector;!l.destroyed&&l.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(l){this.destroyCbs.push(l)}}class Ww extends zS{constructor(l){super(),this.moduleType=l}create(l){return new hm(this.moduleType,l,[])}}class qS extends Nh{constructor(l){super(),this.componentFactoryResolver=new _y(this),this.instance=null;const u=new X_([...l.providers,{provide:Nh,useValue:this},{provide:mT,useValue:this.componentFactoryResolver}],l.parent||Y_(),l.debugName,new Set(["environment"]));this.injector=u,l.runEnvironmentInitializers&&u.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(l){this.injector.onDestroy(l)}}function WS(o,l,u=null){return new qS({providers:o,parent:l,debugName:u,runEnvironmentInitializers:!0}).injector}let Kw=(()=>{class o{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const d=nk(0,u.type),f=d.length>0?WS([d],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,f)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return o.\u0275prov=ct({token:o,providedIn:"environment",factory:()=>new o(xt(Tc))}),o})();function Zw(o){o.getStandaloneInjector=l=>l.get(Kw).getOrCreateStandaloneInjector(o)}function pm(o){return l=>{setTimeout(o,void 0,l)}}const ho=class Gc extends y.x{constructor(l=!1){super(),this.__isAsync=l}emit(l){super.next(l)}subscribe(l,u,d){let f=l,_=u||(()=>null),I=d;if(l&&"object"==typeof l){const D=l;f=D.next?.bind(D),_=D.error?.bind(D),I=D.complete?.bind(D)}this.__isAsync&&(_=pm(_),f&&(f=pm(f)),I&&(I=pm(I)));const w=super.subscribe({next:f,error:_,complete:I});return l instanceof Q.w0&&l.add(w),w}};function pv(){return this._results[Symbol.iterator]()}class mm{get changes(){return this._changes||(this._changes=new ho)}constructor(l=!1){this._emitDistinctChangesOnly=l,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=mm.prototype;u[Symbol.iterator]||(u[Symbol.iterator]=pv)}get(l){return this._results[l]}map(l){return this._results.map(l)}filter(l){return this._results.filter(l)}find(l){return this._results.find(l)}reduce(l,u){return this._results.reduce(l,u)}forEach(l){this._results.forEach(l)}some(l){return this._results.some(l)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(l,u){const d=this;d.dirty=!1;const f=function oi(o){return o.flat(Number.POSITIVE_INFINITY)}(l);(this._changesDetected=!function m_(o,l,u){if(o.length!==l.length)return!1;for(let d=0;d<o.length;d++){let f=o[d],_=l[d];if(u&&(f=u(f),_=u(_)),_!==f)return!1}return!0}(d._results,f,u))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Hc=(()=>{class o{}return o.__NG_ELEMENT_ID__=l0,o})();const a0=Hc,gm=class extends a0{constructor(l,u,d){super(),this._declarationLView=l,this._declarationTContainer=u,this.elementRef=d}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(l,u){return this.createEmbeddedViewImpl(l,u,null)}createEmbeddedViewImpl(l,u,d){const I=this._declarationTContainer.tView,w=Fp(this._declarationLView,I,l,4096&this._declarationLView[Lt]?4096:16,null,I.declTNode,null,null,null,u||null,d||null);w[El]=this._declarationLView[this._declarationTContainer.index];const S=this._declarationLView[Ni];return null!==S&&(w[Ni]=S.createEmbeddedView(I)),FT(I,w,l),new _h(w)}};function l0(){return kh(Or(),we())}function kh(o,l){return 4&o.type?new gm(l,o,ch(o,l)):null}let _v=(()=>{class o{}return o.__NG_ELEMENT_ID__=d0,o})();function d0(){return Ev(Or(),we())}const b1=_v,yv=class extends b1{constructor(l,u,d){super(),this._lContainer=l,this._hostTNode=u,this._hostLView=d}get element(){return ch(this._hostTNode,this._hostLView)}get injector(){return new eo(this._hostTNode,this._hostLView)}get parentInjector(){const l=Xo(this._hostTNode,this._hostLView);if(Ht(l)){const u=Na(l,this._hostLView),d=Ld(l);return new eo(u[ze].data[d+8],u)}return new eo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(l){const u=vv(this._lContainer);return null!==u&&u[l]||null}get length(){return this._lContainer.length-sr}createEmbeddedView(l,u,d){let f,_;"number"==typeof d?f=d:null!=d&&(f=d.index,_=d.injector);const w=l.createEmbeddedViewImpl(u||{},_,null);return this.insertImpl(w,f,false),w}createComponent(l,u,d,f,_){const I=l&&!function Ju(o){return"function"==typeof o}(l);let w;if(I)w=u;else{const ke=u||{};w=ke.index,d=ke.injector,f=ke.projectableNodes,_=ke.environmentInjector||ke.ngModuleRef}const D=I?l:new yh(Wt(l)),S=d||this.parentInjector;if(!_&&null==D.ngModule){const tt=(I?S:this.parentInjector).get(Tc,null);tt&&(_=tt)}Wt(D.componentType??{});const K=D.create(S,f,null,_);return this.insertImpl(K.hostView,w,false),K}insert(l,u){return this.insertImpl(l,u,!1)}insertImpl(l,u,d){const f=l._lView,_=f[ze];if(function Qf(o){return ki(o[Nn])}(f)){const D=this.indexOf(l);if(-1!==D)this.detach(D);else{const S=f[Nn],P=new yv(S,S[Nr],S[Nn]);P.detach(P.indexOf(l))}}const I=this._adjustIndex(u),w=this._lContainer;if(function _c(o,l,u,d){const f=sr+d,_=u.length;d>0&&(u[f-1][ws]=l),d<_-sr?(l[ws]=u[f],lp(u,sr+d,l)):(u.push(l),l[ws]=null),l[Nn]=u;const I=l[El];null!==I&&u!==I&&function YI(o,l){const u=o[Tl];l[Vn]!==l[Nn][Nn][Vn]&&(o[yd]=!0),null===u?o[Tl]=[l]:u.push(l)}(I,l);const w=l[Ni];null!==w&&w.insertView(o),l[Lt]|=128}(_,f,w,I),!d){const D=Ap(I,w),S=f[Vt],P=Ms(S,w[Ks]);null!==P&&function O_(o,l,u,d,f,_){d[mr]=f,d[Nr]=l,p(o,d,u,1,f,_)}(_,w[Nr],S,f,P,D)}return l.attachToViewContainerRef(),lp(h0(w),I,l),l}move(l,u){return this.insert(l,u)}indexOf(l){const u=vv(this._lContainer);return null!==u?u.indexOf(l):-1}remove(l){const u=this._adjustIndex(l,-1),d=yc(this._lContainer,u);d&&(Bl(h0(this._lContainer),u),ru(d[ze],d))}detach(l){const u=this._adjustIndex(l,-1),d=yc(this._lContainer,u);return d&&null!=Bl(h0(this._lContainer),u)?new _h(d):null}_adjustIndex(l,u=0){return l??this.length+u}};function vv(o){return o[8]}function h0(o){return o[8]||(o[8]=[])}function Ev(o,l){let u;const d=l[o.index];return ki(d)?u=d:(u=PT(d,l,null,o),l[o.index]=u,el(l,u)),lx(u,l,o,d),new yv(u,o,l)}let lx=function Iv(o,l,u,d){if(o[Ks])return;let f;f=8&u.type?Pn(d):function ax(o,l){const u=o[Vt],d=u.createComment(""),f=Zr(l,o);return $a(u,Ms(u,f),d,function Ga(o,l){return o.nextSibling(l)}(u,f),!1),d}(l,u),o[Ks]=f};class f0{constructor(l){this.queryList=l,this.matches=null}clone(){return new f0(this.queryList)}setDirty(){this.queryList.setDirty()}}class p0{constructor(l=[]){this.queries=l}createEmbeddedView(l){const u=l.queries;if(null!==u){const d=null!==l.contentQueries?l.contentQueries[0]:u.length,f=[];for(let _=0;_<d;_++){const I=u.getByIndex(_);f.push(this.queries[I.indexInDeclarationView].clone())}return new p0(f)}return null}insertView(l){this.dirtyQueriesWithMatches(l)}detachView(l){this.dirtyQueriesWithMatches(l)}dirtyQueriesWithMatches(l){for(let u=0;u<this.queries.length;u++)null!==mx(l,u).matches&&this.queries[u].setDirty()}}class cx{constructor(l,u,d=null){this.predicate=l,this.flags=u,this.read=d}}class m0{constructor(l=[]){this.queries=l}elementStart(l,u){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(l,u)}elementEnd(l){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(l)}embeddedTView(l){let u=null;for(let d=0;d<this.length;d++){const f=null!==u?u.length:0,_=this.getByIndex(d).embeddedTView(l,f);_&&(_.indexInDeclarationView=d,null!==u?u.push(_):u=[_])}return null!==u?new m0(u):null}template(l,u){for(let d=0;d<this.queries.length;d++)this.queries[d].template(l,u)}getByIndex(l){return this.queries[l]}get length(){return this.queries.length}track(l){this.queries.push(l)}}class _m{constructor(l,u=-1){this.metadata=l,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(l,u){this.isApplyingToNode(u)&&this.matchTNode(l,u)}elementEnd(l){this._declarationNodeIndex===l.index&&(this._appliesToNextNode=!1)}template(l,u){this.elementStart(l,u)}embeddedTView(l,u){return this.isApplyingToNode(l)?(this.crossesNgTemplate=!0,this.addMatch(-l.index,u),new _m(this.metadata)):null}isApplyingToNode(l){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let d=l.parent;for(;null!==d&&8&d.type&&d.index!==u;)d=d.parent;return u===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(l,u){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const _=d[f];this.matchTNodeWithReadOption(l,u,D1(u,_)),this.matchTNodeWithReadOption(l,u,ea(u,l,_,!1,!1))}else d===Hc?4&u.type&&this.matchTNodeWithReadOption(l,u,-1):this.matchTNodeWithReadOption(l,u,ea(u,l,d,!1,!1))}matchTNodeWithReadOption(l,u,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===Ns||f===_v||f===Hc&&4&u.type)this.addMatch(u.index,-2);else{const _=ea(u,l,f,!1,!1);null!==_&&this.addMatch(u.index,_)}else this.addMatch(u.index,d)}}addMatch(l,u){null===this.matches?this.matches=[l,u]:this.matches.push(l,u)}}function D1(o,l){const u=o.localNames;if(null!==u)for(let d=0;d<u.length;d+=2)if(u[d]===l)return u[d+1];return null}function C1(o,l,u,d){return-1===u?function g0(o,l){return 11&o.type?ch(o,l):4&o.type?kh(o,l):null}(l,o):-2===u?function _0(o,l,u){return u===Ns?ch(l,o):u===Hc?kh(l,o):u===_v?Ev(l,o):void 0}(o,l,d):is(o,o[ze],u,l)}function dx(o,l,u,d){const f=l[Ni].queries[d];if(null===f.matches){const _=o.data,I=u.matches,w=[];for(let D=0;D<I.length;D+=2){const S=I[D];w.push(S<0?null:C1(l,_[S],I[D+1],u.metadata.read))}f.matches=w}return f.matches}function ym(o,l,u,d){const f=o.queries.getByIndex(u),_=f.matches;if(null!==_){const I=dx(o,l,f,u);for(let w=0;w<_.length;w+=2){const D=_[w];if(D>0)d.push(I[w/2]);else{const S=_[w+1],P=l[-D];for(let k=sr;k<P.length;k++){const z=P[k];z[El]===z[Nn]&&ym(z[ze],z,S,d)}if(null!==P[Tl]){const k=P[Tl];for(let z=0;z<k.length;z++){const K=k[z];ym(K[ze],K,S,d)}}}}}return d}function hx(o){const l=we(),u=on(),d=rp();Nd(d+1);const f=mx(u,d);if(o.dirty&&function EI(o){return 4==(4&o[Lt])}(l)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const _=f.crossesNgTemplate?ym(u,l,d,[]):dx(u,l,f,d);o.reset(_,_k),o.notifyOnChanges()}return!0}return!1}function Tv(o,l,u,d){const f=on();if(f.firstCreatePass){const _=Or();(function wv(o,l,u){null===o.queries&&(o.queries=new m0),o.queries.track(new _m(l,u))})(f,new cx(l,u,d),_.index),function px(o,l){const u=o.contentQueries||(o.contentQueries=[]);l!==(u.length?u[u.length-1]:-1)&&u.push(o.queries.length-1,l)}(f,o),2==(2&u)&&(f.staticContentQueries=!0)}!function fx(o,l,u){const d=new mm(4==(4&u));(function ST(o,l,u,d){const f=fy(l);f.push(u),o.firstCreatePass&&NT(o).push(d,f.length-1)})(o,l,d,d.destroy),null===l[Ni]&&(l[Ni]=new p0),l[Ni].queries.push(new f0(d))}(f,we(),u)}function S1(){return function yG(o,l){return o[Ni].queries[l].queryList}(we(),rp())}function mx(o,l){return o.queries.getByIndex(l)}function gi(o){return!!Mi(o)}const kx=new pn("Application Initializer");let T0=(()=>{class o{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,d)=>{this.resolve=u,this.reject=d}),this.appInits=tn(kx,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const u=[];for(const f of this.appInits){const _=f();if(Jp(_))u.push(_);else if(aO(_)){const I=new Promise((w,D)=>{_.subscribe({complete:w,error:D})});u.push(I)}}const d=()=>{this.done=!0,this.resolve()};Promise.all(u).then(()=>{d()}).catch(f=>{this.reject(f)}),0===u.length&&d(),this.initialized=!0}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=ct({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),Ox=(()=>{class o{log(u){console.log(u)}warn(u){console.warn(u)}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=ct({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const Lh=new pn("LocaleId",{providedIn:"root",factory:()=>tn(Lh,at.Optional|at.SkipSelf)||function sl(){return typeof $localize<"u"&&$localize.locale||sm}()}),Fx=new pn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let Dv=(()=>{class o{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new j.X(!1)}add(){this.hasPendingTasks.next(!0);const u=this.taskId++;return this.pendingTasks.add(u),u}remove(u){this.pendingTasks.delete(u),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=ct({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();class Vx{constructor(l,u){this.ngModuleFactory=l,this.componentFactories=u}}let K1=(()=>{class o{compileModuleSync(u){return new Ww(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const d=this.compileModuleSync(u),_=Ya(Mi(u).declarations).reduce((I,w)=>{const D=Wt(w);return D&&I.push(new yh(D)),I},[]);return new Vx(d,_)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=ct({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function X1(...o){}class Gi{constructor({enableLongStackTrace:l=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ho(!1),this.onMicrotaskEmpty=new ho(!1),this.onStable=new ho(!1),this.onError=new ho(!1),typeof Zone>"u")throw new oe(908,!1);Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),l&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&u,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function pu(){const o="function"==typeof Ct.requestAnimationFrame;let l=Ct[o?"requestAnimationFrame":"setTimeout"],u=Ct[o?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&l&&u){const d=l[Zone.__symbol__("OriginalDelegate")];d&&(l=d);const f=u[Zone.__symbol__("OriginalDelegate")];f&&(u=f)}return{nativeRequestAnimationFrame:l,nativeCancelAnimationFrame:u}}().nativeRequestAnimationFrame,function J1(o){const l=()=>{!function Bx(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(Ct,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,bm(o),o.isCheckStableRunning=!0,A0(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),bm(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,d,f,_,I,w)=>{try{return jx(o),u.invokeTask(f,_,I,w)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||o.shouldCoalesceRunChangeDetection)&&l(),$x(o)}},onInvoke:(u,d,f,_,I,w,D)=>{try{return jx(o),u.invoke(f,_,I,w,D)}finally{o.shouldCoalesceRunChangeDetection&&l(),$x(o)}},onHasTask:(u,d,f,_)=>{u.hasTask(f,_),d===f&&("microTask"==_.change?(o._hasPendingMicrotasks=_.microTask,bm(o),A0(o)):"macroTask"==_.change&&(o.hasPendingMacrotasks=_.macroTask))},onHandleError:(u,d,f,_)=>(u.handleError(f,_),o.runOutsideAngular(()=>o.onError.emit(_)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Gi.isInAngularZone())throw new oe(909,!1)}static assertNotInAngularZone(){if(Gi.isInAngularZone())throw new oe(909,!1)}run(l,u,d){return this._inner.run(l,u,d)}runTask(l,u,d,f){const _=this._inner,I=_.scheduleEventTask("NgZoneEvent: "+f,l,b0,X1,X1);try{return _.runTask(I,u,d)}finally{_.cancelTask(I)}}runGuarded(l,u,d){return this._inner.runGuarded(l,u,d)}runOutsideAngular(l){return this._outer.run(l)}}const b0={};function A0(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function bm(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function jx(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function $x(o){o._nesting--,A0(o)}class eF{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ho,this.onMicrotaskEmpty=new ho,this.onStable=new ho,this.onError=new ho}run(l,u,d){return l.apply(u,d)}runGuarded(l,u,d){return l.apply(u,d)}runOutsideAngular(l){return l()}runTask(l,u,d,f){return l.apply(u,d)}}const gu=new pn("",{providedIn:"root",factory:Cv});function Cv(){const o=tn(Gi);let l=!0;const u=new se.y(f=>{l=o.isStable&&!o.hasPendingMacrotasks&&!o.hasPendingMicrotasks,o.runOutsideAngular(()=>{f.next(l),f.complete()})}),d=new se.y(f=>{let _;o.runOutsideAngular(()=>{_=o.onStable.subscribe(()=>{Gi.assertNotInAngularZone(),queueMicrotask(()=>{!l&&!o.hasPendingMacrotasks&&!o.hasPendingMicrotasks&&(l=!0,f.next(!0))})})});const I=o.onUnstable.subscribe(()=>{Gi.assertInAngularZone(),l&&(l=!1,o.runOutsideAngular(()=>{f.next(!1)}))});return()=>{_.unsubscribe(),I.unsubscribe()}});return(0,_e.T)(u,d.pipe((0,Ue.B)()))}const Sv=new pn(""),D0=new pn("");let x0,C0=(()=>{class o{constructor(u,d,f){this._ngZone=u,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,x0||(function S0(o){x0=o}(f),f.addToWindow(d)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Gi.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(u)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,d,f){let _=-1;d&&d>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(I=>I.timeoutId!==_),u(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:u,timeoutId:_,updateCb:f})}whenStable(u,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,d,f){return[]}}return o.\u0275fac=function(u){return new(u||o)(xt(Gi),xt(xv),xt(D0))},o.\u0275prov=ct({token:o,factory:o.\u0275fac}),o})(),xv=(()=>{class o{constructor(){this._applications=new Map}registerApplication(u,d){this._applications.set(u,d)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,d=!0){return x0?.findTestabilityInTree(this,u,d)??null}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=ct({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})(),ga=null;const Rv=new pn("AllowMultipleToken"),R0=new pn("PlatformDestroyListeners"),Br=new pn("appBootstrapListener");class zx{constructor(l,u){this.name=l,this.token=u}}function k0(o,l,u=[]){const d=`Platform: ${l}`,f=new pn(d);return(_=[])=>{let I=Pv();if(!I||I.injector.get(Rv,!1)){const w=[...u,..._,{provide:f,useValue:!0}];o?o(w):function P0(o){if(ga&&!ga.get(Rv,!1))throw new oe(400,!1);(function Hx(){!function qg(o){Ed=o}(()=>{throw new oe(600,!1)})})(),ga=o;const l=o.get(Nv);(function Mv(o){o.get(lk,null)?.forEach(u=>u())})(o)}(function Wx(o=[],l){return lu.create({name:l,providers:[{provide:zD,useValue:"platform"},{provide:R0,useValue:new Set([()=>ga=null])},...o]})}(w,d))}return function nF(o){const l=Pv();if(!l)throw new oe(401,!1);return l}()}}function Pv(){return ga?.get(Nv)??null}let Nv=(()=>{class o{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,d){const f=function O0(o="zone.js",l){return"noop"===o?new eF:"zone.js"===o?new Gi(l):o}(d?.ngZone,function Zx(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:o?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:o?.runCoalescing??!1}}({eventCoalescing:d?.ngZoneEventCoalescing,runCoalescing:d?.ngZoneRunCoalescing}));return f.run(()=>{const _=function gG(o,l,u){return new hm(o,l,u)}(u.moduleType,this.injector,function Yx(o){return[{provide:Gi,useFactory:o},{provide:W_,multi:!0,useFactory:()=>{const l=tn(iF,{optional:!0});return()=>l.initialize()}},{provide:L0,useFactory:rF},{provide:gu,useFactory:Cv}]}(()=>f)),I=_.injector.get(ua,null);return f.runOutsideAngular(()=>{const w=f.onError.subscribe({next:D=>{I.handleError(D)}});_.onDestroy(()=>{Uh(this._modules,_),w.unsubscribe()})}),function F0(o,l,u){try{const d=u();return Jp(d)?d.catch(f=>{throw l.runOutsideAngular(()=>o.handleError(f)),f}):d}catch(d){throw l.runOutsideAngular(()=>o.handleError(d)),d}}(I,f,()=>{const w=_.injector.get(T0);return w.runInitializers(),w.donePromise.then(()=>(function wS(o){ht(o,"Expected localeId to be defined"),"string"==typeof o&&(xO=o.toLowerCase().replace(/_/g,"-"))}(_.injector.get(Lh,sm)||sm),this._moduleDoBootstrap(_),_))})})}bootstrapModule(u,d=[]){const f=kv({},d);return function tF(o,l,u){const d=new Ww(u);return Promise.resolve(d)}(0,0,u).then(_=>this.bootstrapModuleFactory(_,f))}_moduleDoBootstrap(u){const d=u.injector.get(Vh);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!u.instance.ngDoBootstrap)throw new oe(-403,!1);u.instance.ngDoBootstrap(d)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new oe(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const u=this._injector.get(R0,null);u&&(u.forEach(d=>d()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(u){return new(u||o)(xt(lu))},o.\u0275prov=ct({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();function kv(o,l){return Array.isArray(l)?l.reduce(kv,o):{...o,...l}}let Vh=(()=>{class o{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=tn(L0),this.zoneIsStable=tn(gu),this.componentTypes=[],this.components=[],this.isStable=tn(Dv).hasPendingTasks.pipe((0,Ke.w)(u=>u?(0,Te.of)(!1):this.zoneIsStable),(0,Oe.x)(),(0,Ue.B)()),this._injector=tn(Tc)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,d){const f=u instanceof kp;if(!this._injector.get(T0).done)throw!f&&gl(u),new oe(405,!1);let I;I=f?u:this._injector.get(mT).resolveComponentFactory(u),this.componentTypes.push(I.componentType);const w=function M0(o){return o.isBoundToModule}(I)?void 0:this._injector.get(Nh),S=I.create(lu.NULL,[],d||I.selector,w),P=S.location.nativeElement,k=S.injector.get(Sv,null);return k?.registerApplication(P),S.onDestroy(()=>{this.detachView(S.hostView),Uh(this.components,S),k?.unregisterApplication(P)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new oe(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this.internalErrorHandler(u)}finally{this._runningTick=!1}}attachView(u){const d=u;this._views.push(d),d.attachToAppRef(this)}detachView(u){const d=u;Uh(this._views,d),d.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const d=this._injector.get(Br,[]);d.push(...this._bootstrapListeners),d.forEach(f=>f(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Uh(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new oe(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=ct({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function Uh(o,l){const u=o.indexOf(l);u>-1&&o.splice(u,1)}const L0=new pn("",{providedIn:"root",factory:()=>tn(ua).handleError.bind(void 0)});function rF(){const o=tn(Gi),l=tn(ua);return u=>o.runOutsideAngular(()=>l.handleError(u))}let iF=(()=>{class o{constructor(){this.zone=tn(Gi),this.applicationRef=tn(Vh)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=ct({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function sF(){return!1}let aF=(()=>{class o{}return o.__NG_ELEMENT_ID__=V0,o})();function V0(o){return function lF(o,l,u){if(xa(o)&&!u){const d=ri(o.index,l);return new _h(d,d)}return 47&o.type?new _h(l[Vn],l):null}(Or(),we(),16==(16&o))}class dF{constructor(){}supports(l){return vh(l)}create(l){return new Uv(l)}}const NG=(o,l)=>l;class Uv{constructor(l){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=l||NG}forEachItem(l){let u;for(u=this._itHead;null!==u;u=u._next)l(u)}forEachOperation(l){let u=this._itHead,d=this._removalsHead,f=0,_=null;for(;u||d;){const I=!d||u&&u.currentIndex<aR(d,f,_)?u:d,w=aR(I,f,_),D=I.currentIndex;if(I===d)f--,d=d._nextRemoved;else if(u=u._next,null==I.previousIndex)f++;else{_||(_=[]);const S=w-f,P=D-f;if(S!=P){for(let z=0;z<S;z++){const K=z<_.length?_[z]:_[z]=0,ge=K+z;P<=ge&&ge<S&&(_[z]=K+1)}_[I.previousIndex]=P-S}}w!==D&&l(I,w,D)}}forEachPreviousItem(l){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachMovedItem(l){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}forEachIdentityChange(l){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)l(u)}diff(l){if(null==l&&(l=[]),!vh(l))throw new oe(900,!1);return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let f,_,I,u=this._itHead,d=!1;if(Array.isArray(l)){this.length=l.length;for(let w=0;w<this.length;w++)_=l[w],I=this._trackByFn(w,_),null!==u&&Object.is(u.trackById,I)?(d&&(u=this._verifyReinsertion(u,_,I,w)),Object.is(u.item,_)||this._addIdentityChange(u,_)):(u=this._mismatch(u,_,I,w),d=!0),u=u._next}else f=0,function zT(o,l){if(Array.isArray(o))for(let u=0;u<o.length;u++)l(o[u]);else{const u=o[Symbol.iterator]();let d;for(;!(d=u.next()).done;)l(d.value)}}(l,w=>{I=this._trackByFn(f,w),null!==u&&Object.is(u.trackById,I)?(d&&(u=this._verifyReinsertion(u,w,I,f)),Object.is(u.item,w)||this._addIdentityChange(u,w)):(u=this._mismatch(u,w,I,f),d=!0),u=u._next,f++}),this.length=f;return this._truncate(u),this.collection=l,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let l;for(l=this._previousItHead=this._itHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._additionsHead;null!==l;l=l._nextAdded)l.previousIndex=l.currentIndex;for(this._additionsHead=this._additionsTail=null,l=this._movesHead;null!==l;l=l._nextMoved)l.previousIndex=l.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(l,u,d,f){let _;return null===l?_=this._itTail:(_=l._prev,this._remove(l)),null!==(l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._reinsertAfter(l,_,f)):null!==(l=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._moveAfter(l,_,f)):l=this._addAfter(new hF(u,d),_,f),l}_verifyReinsertion(l,u,d,f){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==_?l=this._reinsertAfter(_,l._prev,f):l.currentIndex!=f&&(l.currentIndex=f,this._addToMoves(l,f)),l}_truncate(l){for(;null!==l;){const u=l._next;this._addToRemovals(this._unlink(l)),l=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(l,u,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(l);const f=l._prevRemoved,_=l._nextRemoved;return null===f?this._removalsHead=_:f._nextRemoved=_,null===_?this._removalsTail=f:_._prevRemoved=f,this._insertAfter(l,u,d),this._addToMoves(l,d),l}_moveAfter(l,u,d){return this._unlink(l),this._insertAfter(l,u,d),this._addToMoves(l,d),l}_addAfter(l,u,d){return this._insertAfter(l,u,d),this._additionsTail=null===this._additionsTail?this._additionsHead=l:this._additionsTail._nextAdded=l,l}_insertAfter(l,u,d){const f=null===u?this._itHead:u._next;return l._next=f,l._prev=u,null===f?this._itTail=l:f._prev=l,null===u?this._itHead=l:u._next=l,null===this._linkedRecords&&(this._linkedRecords=new oR),this._linkedRecords.put(l),l.currentIndex=d,l}_remove(l){return this._addToRemovals(this._unlink(l))}_unlink(l){null!==this._linkedRecords&&this._linkedRecords.remove(l);const u=l._prev,d=l._next;return null===u?this._itHead=d:u._next=d,null===d?this._itTail=u:d._prev=u,l}_addToMoves(l,u){return l.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=l:this._movesTail._nextMoved=l),l}_addToRemovals(l){return null===this._unlinkedRecords&&(this._unlinkedRecords=new oR),this._unlinkedRecords.put(l),l.currentIndex=null,l._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=l,l._prevRemoved=null):(l._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=l),l}_addIdentityChange(l,u){return l.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=l:this._identityChangesTail._nextIdentityChange=l,l}}class hF{constructor(l,u){this.item=l,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class fF{constructor(){this._head=null,this._tail=null}add(l){null===this._head?(this._head=this._tail=l,l._nextDup=null,l._prevDup=null):(this._tail._nextDup=l,l._prevDup=this._tail,l._nextDup=null,this._tail=l)}get(l,u){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===u||u<=d.currentIndex)&&Object.is(d.trackById,l))return d;return null}remove(l){const u=l._prevDup,d=l._nextDup;return null===u?this._head=d:u._nextDup=d,null===d?this._tail=u:d._prevDup=u,null===this._head}}class oR{constructor(){this.map=new Map}put(l){const u=l.trackById;let d=this.map.get(u);d||(d=new fF,this.map.set(u,d)),d.add(l)}get(l,u){const f=this.map.get(l);return f?f.get(l,u):null}remove(l){const u=l.trackById;return this.map.get(u).remove(l)&&this.map.delete(u),l}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function aR(o,l,u){const d=o.previousIndex;if(null===d)return d;let f=0;return u&&d<u.length&&(f=u[d]),d+l+f}class Bv{constructor(){}supports(l){return l instanceof Map||qp(l)}create(){return new Xr}}class Xr{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(l){let u;for(u=this._mapHead;null!==u;u=u._next)l(u)}forEachPreviousItem(l){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)l(u)}forEachChangedItem(l){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}diff(l){if(l){if(!(l instanceof Map||qp(l)))throw new oe(900,!1)}else l=new Map;return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(l,(d,f)=>{if(u&&u.key===f)this._maybeAddToChanges(u,d),this._appendAfter=u,u=u._next;else{const _=this._getOrCreateRecordForKey(f,d);u=this._insertBeforeOrAppend(u,_)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let d=u;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(l,u){if(l){const d=l._prev;return u._next=l,u._prev=d,l._prev=u,d&&(d._next=u),l===this._mapHead&&(this._mapHead=u),this._appendAfter=l,l}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(l,u){if(this._records.has(l)){const f=this._records.get(l);this._maybeAddToChanges(f,u);const _=f._prev,I=f._next;return _&&(_._next=I),I&&(I._prev=_),f._next=null,f._prev=null,f}const d=new pF(l);return this._records.set(l,d),d.currentValue=u,this._addToAdditions(d),d}_reset(){if(this.isDirty){let l;for(this._previousMapHead=this._mapHead,l=this._previousMapHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._changesHead;null!==l;l=l._nextChanged)l.previousValue=l.currentValue;for(l=this._additionsHead;null!=l;l=l._nextAdded)l.previousValue=l.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(l,u){Object.is(u,l.currentValue)||(l.previousValue=l.currentValue,l.currentValue=u,this._addToChanges(l))}_addToAdditions(l){null===this._additionsHead?this._additionsHead=this._additionsTail=l:(this._additionsTail._nextAdded=l,this._additionsTail=l)}_addToChanges(l){null===this._changesHead?this._changesHead=this._changesTail=l:(this._changesTail._nextChanged=l,this._changesTail=l)}_forEach(l,u){l instanceof Map?l.forEach(u):Object.keys(l).forEach(d=>u(l[d],d))}}class pF{constructor(l){this.key=l,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function _i(){return new H0([new dF])}let H0=(()=>{class o{constructor(u){this.factories=u}static create(u,d){if(null!=d){const f=d.factories.slice();u=u.concat(f)}return new o(u)}static extend(u){return{provide:o,useFactory:d=>o.create(u,d||_i()),deps:[[o,new Va,new zl]]}}find(u){const d=this.factories.find(f=>f.supports(u));if(null!=d)return d;throw new oe(901,!1)}}return o.\u0275prov=ct({token:o,providedIn:"root",factory:_i}),o})();function lR(){return new z0([new Bv])}let z0=(()=>{class o{constructor(u){this.factories=u}static create(u,d){if(d){const f=d.factories.slice();u=u.concat(f)}return new o(u)}static extend(u){return{provide:o,useFactory:d=>o.create(u,d||lR()),deps:[[o,new Va,new zl]]}}find(u){const d=this.factories.find(f=>f.supports(u));if(d)return d;throw new oe(901,!1)}}return o.\u0275prov=ct({token:o,providedIn:"root",factory:lR}),o})();const q0=k0(null,"core",[]);let yF=(()=>{class o{constructor(u){}}return o.\u0275fac=function(u){return new(u||o)(xt(Vh))},o.\u0275mod=Bu({type:o}),o.\u0275inj=fr({}),o})();function Q0(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}function AF(o){const l=Wt(o);if(!l)return null;const u=new yh(l);return{get selector(){return u.selector},get type(){return u.componentType},get inputs(){return u.inputs},get outputs(){return u.outputs},get ngContentSelectors(){return u.ngContentSelectors},get isStandalone(){return l.standalone},get isSignal(){return l.signals}}}},3399:(vt,Re,F)=>{F.d(Re,{Z:()=>ut});var y=F(9058),Q=F(4537),j=F(7592),se=F(7879);class _e{constructor(Le,je){this._delegate=Le,this.firebase=je,(0,j._addComponent)(Le,new Q.wA("app-compat",()=>this,"PUBLIC")),this.container=Le.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Le){this._delegate.automaticDataCollectionEnabled=Le}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Le=>{this._delegate.checkDestroyed(),Le()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,j.deleteApp)(this._delegate)))}_getService(Le,je=j._DEFAULT_ENTRY_NAME){var gt;this._delegate.checkDestroyed();const Dt=this._delegate.container.getProvider(Le);return!Dt.isInitialized()&&"EXPLICIT"===(null===(gt=Dt.getComponent())||void 0===gt?void 0:gt.instantiationMode)&&Dt.initialize(),Dt.getImmediate({identifier:je})}_removeServiceInstance(Le,je=j._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Le).clearInstance(je)}_addComponent(Le){(0,j._addComponent)(this._delegate,Le)}_addOrOverwriteComponent(Le){(0,j._addOrOverwriteComponent)(this._delegate,Le)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ue=new y.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function Oe(){const Me=function Ke(Me){const Le={},je={__esModule:!0,initializeApp:function oe(Ge,X={}){const be=j.initializeApp(Ge,X);if((0,y.r3)(Le,be.name))return Le[be.name];const Se=new Me(be,je);return Le[be.name]=Se,Se},app:Dt,registerVersion:j.registerVersion,setLogLevel:j.setLogLevel,onLog:j.onLog,apps:null,SDK_VERSION:j.SDK_VERSION,INTERNAL:{registerComponent:function J(Ge){const X=Ge.name,be=X.replace("-compat","");if(j._registerComponent(Ge)&&"PUBLIC"===Ge.type){const Se=(Ot=Dt())=>{if("function"!=typeof Ot[be])throw Ue.create("invalid-app-argument",{appName:X});return Ot[be]()};void 0!==Ge.serviceProps&&(0,y.ZB)(Se,Ge.serviceProps),je[be]=Se,Me.prototype[be]=function(...Ot){return this._getService.bind(this,X).apply(this,Ge.multipleInstances?Ot:[])}}return"PUBLIC"===Ge.type?je[be]:null},removeApp:function gt(Ge){delete Le[Ge]},useAsService:function he(Ge,X){return"serverAuth"===X?null:X},modularAPIs:j}};function Dt(Ge){if(!(0,y.r3)(Le,Ge=Ge||j._DEFAULT_ENTRY_NAME))throw Ue.create("no-app",{appName:Ge});return Le[Ge]}return je.default=je,Object.defineProperty(je,"apps",{get:function De(){return Object.keys(Le).map(Ge=>Le[Ge])}}),Dt.App=Me,je}(_e);return Me.INTERNAL=Object.assign(Object.assign({},Me.INTERNAL),{createFirebaseNamespace:Oe,extendNamespace:function Le(je){(0,y.ZB)(Me,je)},createSubscribe:y.ne,ErrorFactory:y.LL,deepExtend:y.ZB}),Me}(),H=new se.Yd("@firebase/app-compat");if((0,y.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Me=self.firebase.SDK_VERSION;Me&&Me.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ut=B;!function Be(Me){(0,j.registerVersion)("@firebase/app-compat","0.2.13",Me)}()},7592:(vt,Re,F)=>{F.r(Re),F.d(Re,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>fr,_DEFAULT_ENTRY_NAME:()=>ie,_addComponent:()=>Fe,_addOrOverwriteComponent:()=>He,_apps:()=>de,_clearComponents:()=>Ft,_components:()=>fe,_getProvider:()=>mt,_registerComponent:()=>ht,_removeServiceInstance:()=>nr,deleteApp:()=>rr,getApp:()=>Tn,getApps:()=>xe,initializeApp:()=>Hn,onLog:()=>$s,registerVersion:()=>Kr,setLogLevel:()=>Gs});var y=F(5861),Q=F(4537),j=F(7879),se=F(9058),_e=F(1878);class Te{constructor(Ce){this.container=Ce}getPlatformInfoString(){return this.container.getProviders().map(Je=>{if(function Ue(st){const Ce=st.getComponent();return"VERSION"===Ce?.type}(Je)){const Bt=Je.getImmediate();return`${Bt.library}/${Bt.version}`}return null}).filter(Je=>Je).join(" ")}}const Ke="@firebase/app",B=new j.Yd("@firebase/app"),ie="[DEFAULT]",ue={[Ke]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},de=new Map,fe=new Map;function Fe(st,Ce){try{st.container.addComponent(Ce)}catch(Je){B.debug(`Component ${Ce.name} failed to register with FirebaseApp ${st.name}`,Je)}}function He(st,Ce){st.container.addOrOverwriteComponent(Ce)}function ht(st){const Ce=st.name;if(fe.has(Ce))return B.debug(`There were multiple attempts to register component ${Ce}.`),!1;fe.set(Ce,st);for(const Je of de.values())Fe(Je,st);return!0}function mt(st,Ce){const Je=st.container.getProvider("heartbeat").getImmediate({optional:!0});return Je&&Je.triggerHeartbeat(),st.container.getProvider(Ce)}function nr(st,Ce,Je=ie){mt(st,Ce).clearInstance(Je)}function Ft(){fe.clear()}const ct=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Qt{constructor(Ce,Je,Bt){this._isDeleted=!1,this._options=Object.assign({},Ce),this._config=Object.assign({},Je),this._name=Je.name,this._automaticDataCollectionEnabled=Je.automaticDataCollectionEnabled,this._container=Bt,this.container.addComponent(new Q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ce}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ce){this._isDeleted=Ce}checkDestroyed(){if(this.isDeleted)throw ct.create("app-deleted",{appName:this._name})}}const fr="9.23.0";function Hn(st,Ce={}){let Je=st;"object"!=typeof Ce&&(Ce={name:Ce});const Bt=Object.assign({name:ie,automaticDataCollectionEnabled:!1},Ce),xt=Bt.name;if("string"!=typeof xt||!xt)throw ct.create("bad-app-name",{appName:String(xt)});if(Je||(Je=(0,se.aH)()),!Je)throw ct.create("no-options");const ln=de.get(xt);if(ln){if((0,se.vZ)(Je,ln.options)&&(0,se.vZ)(Bt,ln.config))return ln;throw ct.create("duplicate-app",{appName:xt})}const tn=new Q.H0(xt);for(const U of fe.values())tn.addComponent(U);const $=new Qt(Je,Bt,tn);return de.set(xt,$),$}function Tn(st=ie){const Ce=de.get(st);if(!Ce&&st===ie&&(0,se.aH)())return Hn();if(!Ce)throw ct.create("no-app",{appName:st});return Ce}function xe(){return Array.from(de.values())}function rr(st){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,y.Z)(function*(st){const Ce=st.name;de.has(Ce)&&(de.delete(Ce),yield Promise.all(st.container.getProviders().map(Je=>Je.delete())),st.isDeleted=!0)})).apply(this,arguments)}function Kr(st,Ce,Je){var Bt;let xt=null!==(Bt=ue[st])&&void 0!==Bt?Bt:st;Je&&(xt+=`-${Je}`);const ln=xt.match(/\s|\//),tn=Ce.match(/\s|\//);if(ln||tn){const $=[`Unable to register library "${xt}" with version "${Ce}":`];return ln&&$.push(`library name "${xt}" contains illegal characters (whitespace or "/")`),ln&&tn&&$.push("and"),tn&&$.push(`version name "${Ce}" contains illegal characters (whitespace or "/")`),void B.warn($.join(" "))}ht(new Q.wA(`${xt}-version`,()=>({library:xt,version:Ce}),"VERSION"))}function $s(st,Ce){if(null!==st&&"function"!=typeof st)throw ct.create("invalid-log-argument");(0,j.Am)(st,Ce)}function Gs(st){(0,j.Ub)(st)}const Ou="firebase-heartbeat-database",at=1,ft="firebase-heartbeat-store";let St=null;function ir(){return St||(St=(0,_e.X3)(Ou,at,{upgrade:(st,Ce)=>{0===Ce&&st.createObjectStore(ft)}}).catch(st=>{throw ct.create("idb-open",{originalErrorMessage:st.message})})),St}function Si(){return(Si=(0,y.Z)(function*(st){try{return yield(yield ir()).transaction(ft).objectStore(ft).get(dl(st))}catch(Ce){if(Ce instanceof se.ZR)B.warn(Ce.message);else{const Je=ct.create("idb-get",{originalErrorMessage:Ce?.message});B.warn(Je.message)}}})).apply(this,arguments)}function Ct(st,Ce){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,y.Z)(function*(st,Ce){try{const Bt=(yield ir()).transaction(ft,"readwrite");yield Bt.objectStore(ft).put(Ce,dl(st)),yield Bt.done}catch(Je){if(Je instanceof se.ZR)B.warn(Je.message);else{const Bt=ct.create("idb-set",{originalErrorMessage:Je?.message});B.warn(Bt.message)}}})).apply(this,arguments)}function dl(st){return`${st.name}!${st.options.appId}`}class Xt{constructor(Ce){this.container=Ce,this._heartbeatsCache=null;const Je=this.container.getProvider("app").getImmediate();this._storage=new dd(Je),this._heartbeatsCachePromise=this._storage.read().then(Bt=>(this._heartbeatsCache=Bt,Bt))}triggerHeartbeat(){var Ce=this;return(0,y.Z)(function*(){const Bt=Ce.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),xt=zs();if(null===Ce._heartbeatsCache&&(Ce._heartbeatsCache=yield Ce._heartbeatsCachePromise),Ce._heartbeatsCache.lastSentHeartbeatDate!==xt&&!Ce._heartbeatsCache.heartbeats.some(ln=>ln.date===xt))return Ce._heartbeatsCache.heartbeats.push({date:xt,agent:Bt}),Ce._heartbeatsCache.heartbeats=Ce._heartbeatsCache.heartbeats.filter(ln=>{const tn=new Date(ln.date).valueOf();return Date.now()-tn<=2592e6}),Ce._storage.overwrite(Ce._heartbeatsCache)})()}getHeartbeatsHeader(){var Ce=this;return(0,y.Z)(function*(){if(null===Ce._heartbeatsCache&&(yield Ce._heartbeatsCachePromise),null===Ce._heartbeatsCache||0===Ce._heartbeatsCache.heartbeats.length)return"";const Je=zs(),{heartbeatsToSend:Bt,unsentEntries:xt}=function zo(st,Ce=1024){const Je=[];let Bt=st.slice();for(const xt of st){const ln=Je.find(tn=>tn.agent===xt.agent);if(ln){if(ln.dates.push(xt.date),Ji(Je)>Ce){ln.dates.pop();break}}else if(Je.push({agent:xt.agent,dates:[xt.date]}),Ji(Je)>Ce){Je.pop();break}Bt=Bt.slice(1)}return{heartbeatsToSend:Je,unsentEntries:Bt}}(Ce._heartbeatsCache.heartbeats),ln=(0,se.L)(JSON.stringify({version:2,heartbeats:Bt}));return Ce._heartbeatsCache.lastSentHeartbeatDate=Je,xt.length>0?(Ce._heartbeatsCache.heartbeats=xt,yield Ce._storage.overwrite(Ce._heartbeatsCache)):(Ce._heartbeatsCache.heartbeats=[],Ce._storage.overwrite(Ce._heartbeatsCache)),ln})()}}function zs(){return(new Date).toISOString().substring(0,10)}class dd{constructor(Ce){this.app=Ce,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,y.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ce=this;return(0,y.Z)(function*(){return(yield Ce._canUseIndexedDBPromise)&&(yield function yo(st){return Si.apply(this,arguments)}(Ce.app))||{heartbeats:[]}})()}overwrite(Ce){var Je=this;return(0,y.Z)(function*(){var Bt;if(yield Je._canUseIndexedDBPromise){const ln=yield Je.read();return Ct(Je.app,{lastSentHeartbeatDate:null!==(Bt=Ce.lastSentHeartbeatDate)&&void 0!==Bt?Bt:ln.lastSentHeartbeatDate,heartbeats:Ce.heartbeats})}})()}add(Ce){var Je=this;return(0,y.Z)(function*(){var Bt;if(yield Je._canUseIndexedDBPromise){const ln=yield Je.read();return Ct(Je.app,{lastSentHeartbeatDate:null!==(Bt=Ce.lastSentHeartbeatDate)&&void 0!==Bt?Bt:ln.lastSentHeartbeatDate,heartbeats:[...ln.heartbeats,...Ce.heartbeats]})}})()}}function Ji(st){return(0,se.L)(JSON.stringify({version:2,heartbeats:st})).length}!function hl(st){ht(new Q.wA("platform-logger",Ce=>new Te(Ce),"PRIVATE")),ht(new Q.wA("heartbeat",Ce=>new Xt(Ce),"PRIVATE")),Kr(Ke,"0.9.13",st),Kr(Ke,"0.9.13","esm2017"),Kr("fire-js","")}("")},120:(vt,Re,F)=>{F.d(Re,{Z:()=>y.Z});var y=F(3399);y.Z.registerVersion("firebase","9.23.0","app-compat")},1895:(vt,Re,F)=>{F.r(Re);var y=F(5861),Q=F(3399),j=F(9058),se=F(7592);function Ke(v,p){var m={};for(var T in v)Object.prototype.hasOwnProperty.call(v,T)&&p.indexOf(T)<0&&(m[T]=v[T]);if(null!=v&&"function"==typeof Object.getOwnPropertySymbols){var C=0;for(T=Object.getOwnPropertySymbols(v);C<T.length;C++)p.indexOf(T[C])<0&&Object.prototype.propertyIsEnumerable.call(v,T[C])&&(m[T[C]]=v[T[C]])}return m}var tr=F(7879),Rn=F(4537);const Mn={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Fe=function de(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},He=function fe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ht=new j.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),nr=new tr.Yd("@firebase/auth");function un(v,...p){nr.logLevel<=tr.in.ERROR&&nr.error(`Auth (${se.SDK_VERSION}): ${v}`,...p)}function ct(v,...p){throw Tn(v,...p)}function Qt(v,...p){return Tn(v,...p)}function fr(v,p,m){const T=Object.assign(Object.assign({},He()),{[p]:m});return new j.LL("auth","Firebase",T).create(p,{appName:v.name})}function Hn(v,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&ct(v,"argument-error"),fr(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Tn(v,...p){if("string"!=typeof v){const m=p[0],T=[...p.slice(1)];return T[0]&&(T[0].appName=v.name),v._errorFactory.create(m,...T)}return ht.create(v,...p)}function xe(v,p,...m){if(!v)throw Tn(p,...m)}function rr(v){const p="INTERNAL ASSERTION FAILED: "+v;throw un(p),new Error(p)}function Pr(v,p){v||rr(p)}function Kr(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function $s(){return"http:"===Gs()||"https:"===Gs()}function Gs(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class ft{constructor(p,m){this.shortDelay=p,this.longDelay=m,Pr(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,j.uI)()||(0,j.b$)()}get(){return function Ou(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&($s()||(0,j.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function St(v,p){Pr(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class ir{static initialize(p,m,T){this.fetchImpl=p,m&&(this.headersImpl=m),T&&(this.responseImpl=T)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void rr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void rr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void rr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const yo={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Si=new ft(3e4,6e4);function Ct(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function Yt(v,p,m,T){return dl.apply(this,arguments)}function dl(){return(dl=(0,y.Z)(function*(v,p,m,T,C={}){return wn(v,C,(0,y.Z)(function*(){let R={},L={};T&&("GET"===p?L=T:R={body:JSON.stringify(T)});const q=(0,j.xO)(Object.assign({key:v.config.apiKey},L)).slice(1),ve=yield v._getAdditionalHeaders();return ve["Content-Type"]="application/json",v.languageCode&&(ve["X-Firebase-Locale"]=v.languageCode),ir.fetch()(zo(v,v.config.apiHost,m,q),Object.assign({method:p,headers:ve,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function wn(v,p,m){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,y.Z)(function*(v,p,m){v._canInitEmulator=!1;const T=Object.assign(Object.assign({},yo),p);try{const C=new dd(v),R=yield Promise.race([m(),C.promise]);C.clearNetworkTimeout();const L=yield R.json();if("needConfirmation"in L)throw Ji(v,"account-exists-with-different-credential",L);if(R.ok&&!("errorMessage"in L))return L;{const q=R.ok?L.errorMessage:L.error.message,[ve,pe]=q.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ve)throw Ji(v,"credential-already-in-use",L);if("EMAIL_EXISTS"===ve)throw Ji(v,"email-already-in-use",L);if("USER_DISABLED"===ve)throw Ji(v,"user-disabled",L);const We=T[ve]||ve.toLowerCase().replace(/[_\s]+/g,"-");if(pe)throw fr(v,We,pe);ct(v,We)}}catch(C){if(C instanceof j.ZR)throw C;ct(v,"network-request-failed",{message:String(C)})}})).apply(this,arguments)}function Xt(v,p,m,T){return zs.apply(this,arguments)}function zs(){return(zs=(0,y.Z)(function*(v,p,m,T,C={}){const R=yield Yt(v,p,m,T,C);return"mfaPendingCredential"in R&&ct(v,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function zo(v,p,m,T){const C=`${p}${m}?${T}`;return v.config.emulator?St(v.config,C):`${v.config.apiScheme}://${C}`}class dd{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,T)=>{this.timer=setTimeout(()=>T(Qt(this.auth,"network-request-failed")),Si.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ji(v,p,m){const T={appName:v.name};m.email&&(T.email=m.email),m.phoneNumber&&(T.phoneNumber=m.phoneNumber);const C=Qt(v,p,T);return C.customData._tokenResponse=m,C}function st(){return(st=(0,y.Z)(function*(v,p){return Yt(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Je(){return(Je=(0,y.Z)(function*(v,p){return Yt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function xt(){return(xt=(0,y.Z)(function*(v,p){return Yt(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function ln(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function U(){return(U=(0,y.Z)(function*(v,p=!1){const m=(0,j.m9)(v),T=yield m.getIdToken(p),C=ye(T);xe(C&&C.exp&&C.auth_time&&C.iat,m.auth,"internal-error");const R="object"==typeof C.firebase?C.firebase:void 0,L=R?.sign_in_provider;return{claims:C,token:T,authTime:ln(W(C.auth_time)),issuedAtTime:ln(W(C.iat)),expirationTime:ln(W(C.exp)),signInProvider:L||null,signInSecondFactor:R?.sign_in_second_factor||null}})).apply(this,arguments)}function W(v){return 1e3*Number(v)}function ye(v){const[p,m,T]=v.split(".");if(void 0===p||void 0===m||void 0===T)return un("JWT malformed, contained fewer than 3 sections"),null;try{const C=(0,j.tV)(m);return C?JSON.parse(C):(un("Failed to decode base64 JWT payload"),null)}catch(C){return un("Caught error parsing JWT payload as JSON",C?.toString()),null}}function lt(v,p){return At.apply(this,arguments)}function At(){return(At=(0,y.Z)(function*(v,p,m=!1){if(m)return p;try{return yield p}catch(T){throw T instanceof j.ZR&&function rn({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}(T)&&v.auth.currentUser===v&&(yield v.auth.signOut()),T}})).apply(this,arguments)}class Ln{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const T=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),T}{this.errorBackoff=3e4;const C=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,C)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const T=this.getInterval(p);this.timerId=setTimeout((0,y.Z)(function*(){yield m.iteration()}),T)}iteration(){var p=this;return(0,y.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m?.code&&p.schedule(!0))}p.schedule()})()}}class bn{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=ln(this.lastLoginAt),this.creationTime=ln(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function kt(v){return sn.apply(this,arguments)}function sn(){return sn=(0,y.Z)(function*(v){var p;const m=v.auth,T=yield v.getIdToken(),C=yield lt(v,function Bt(v,p){return xt.apply(this,arguments)}(m,{idToken:T}));xe(C?.users.length,m,"internal-error");const R=C.users[0];v._notifyReloadListener(R);const L=null!==(p=R.providerUserInfo)&&void 0!==p&&p.length?function vo(v){return v.map(p=>{var{providerId:m}=p,T=Ke(p,["providerId"]);return{providerId:m,uid:T.rawId||"",displayName:T.displayName||null,email:T.email||null,phoneNumber:T.phoneNumber||null,photoURL:T.photoUrl||null}})}(R.providerUserInfo):[],q=function hd(v,p){return[...v.filter(T=>!p.some(C=>C.providerId===T.providerId)),...p]}(v.providerData,L),We=!!v.isAnonymous&&!(v.email&&R.passwordHash||q?.length),Qe={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:q,metadata:new bn(R.createdAt,R.lastLoginAt),isAnonymous:We};Object.assign(v,Qe)}),sn.apply(this,arguments)}function es(){return(es=(0,y.Z)(function*(v){const p=(0,j.m9)(v);yield kt(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function fl(){return(fl=(0,y.Z)(function*(v,p){const m=yield wn(v,{},(0,y.Z)(function*(){const T=(0,j.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:C,apiKey:R}=v.config,L=zo(v,C,"/v1/token",`key=${R}`),q=yield v._getAdditionalHeaders();return q["Content-Type"]="application/x-www-form-urlencoded",ir.fetch()(L,{method:"POST",headers:q,body:T})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class pl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){xe(p.idToken,"internal-error"),xe(typeof p.idToken<"u","internal-error"),xe(typeof p.refreshToken<"u","internal-error");const m="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function re(v){const p=ye(v);return xe(p,"internal-error"),xe(typeof p.exp<"u","internal-error"),xe(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var T=this;return(0,y.Z)(function*(){return xe(!T.accessToken||T.refreshToken,p,"user-token-expired"),m||!T.accessToken||T.isExpired?T.refreshToken?(yield T.refresh(p,T.refreshToken),T.accessToken):null:T.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var T=this;return(0,y.Z)(function*(){const{accessToken:C,refreshToken:R,expiresIn:L}=yield function Fu(v,p){return fl.apply(this,arguments)}(p,m);T.updateTokensAndExpiration(C,R,Number(L))})()}updateTokensAndExpiration(p,m,T){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*T}static fromJSON(p,m){const{refreshToken:T,accessToken:C,expirationTime:R}=m,L=new pl;return T&&(xe("string"==typeof T,"internal-error",{appName:p}),L.refreshToken=T),C&&(xe("string"==typeof C,"internal-error",{appName:p}),L.accessToken=C),R&&(xe("number"==typeof R,"internal-error",{appName:p}),L.expirationTime=R),L}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new pl,this.toJSON())}_performRefresh(){return rr("not implemented")}}function qs(v,p){xe("string"==typeof v||typeof v>"u","internal-error",{appName:p})}class qo{constructor(p){var{uid:m,auth:T,stsTokenManager:C}=p,R=Ke(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ln(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=T,this.stsTokenManager=C,this.accessToken=C.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new bn(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,y.Z)(function*(){const T=yield lt(m,m.stsTokenManager.getToken(m.auth,p));return xe(T,m.auth,"internal-error"),m.accessToken!==T&&(m.accessToken=T,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),T})()}getIdTokenResult(p){return function $(v){return U.apply(this,arguments)}(this,p)}reload(){return function xi(v){return es.apply(this,arguments)}(this)}_assign(p){this!==p&&(xe(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const m=new qo(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return m.metadata._copy(this.metadata),m}_onReload(p){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var T=this;return(0,y.Z)(function*(){let C=!1;p.idToken&&p.idToken!==T.stsTokenManager.accessToken&&(T.stsTokenManager.updateFromServerResponse(p),C=!0),m&&(yield kt(T)),yield T.auth._persistUserIfCurrent(T),C&&T.auth._notifyListenersIfCurrent(T)})()}delete(){var p=this;return(0,y.Z)(function*(){const m=yield p.getIdToken();return yield lt(p,function hl(v,p){return st.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var T,C,R,L,q,ve,pe,We;const Qe=null!==(T=m.displayName)&&void 0!==T?T:void 0,Zt=null!==(C=m.email)&&void 0!==C?C:void 0,yr=null!==(R=m.phoneNumber)&&void 0!==R?R:void 0,za=null!==(L=m.photoURL)&&void 0!==L?L:void 0,qa=null!==(q=m.tenantId)&&void 0!==q?q:void 0,iu=null!==(ve=m._redirectEventId)&&void 0!==ve?ve:void 0,Wa=null!==(pe=m.createdAt)&&void 0!==pe?pe:void 0,Ka=null!==(We=m.lastLoginAt)&&void 0!==We?We:void 0,{uid:su,emailVerified:nh,isAnonymous:Dp,providerData:ou,stsTokenManager:Cp}=m;xe(su&&Cp,p,"internal-error");const rh=pl.fromJSON(this.name,Cp);xe("string"==typeof su,p,"internal-error"),qs(Qe,p.name),qs(Zt,p.name),xe("boolean"==typeof nh,p,"internal-error"),xe("boolean"==typeof Dp,p,"internal-error"),qs(yr,p.name),qs(za,p.name),qs(qa,p.name),qs(iu,p.name),qs(Wa,p.name),qs(Ka,p.name);const ih=new qo({uid:su,auth:p,email:Zt,emailVerified:nh,displayName:Qe,isAnonymous:Dp,photoURL:za,phoneNumber:yr,tenantId:qa,stsTokenManager:rh,createdAt:Wa,lastLoginAt:Ka});return ou&&Array.isArray(ou)&&(ih.providerData=ou.map(JI=>Object.assign({},JI))),iu&&(ih._redirectEventId=iu),ih}static _fromIdTokenResponse(p,m,T=!1){return(0,y.Z)(function*(){const C=new pl;C.updateFromServerResponse(m);const R=new qo({uid:m.localId,auth:p,stsTokenManager:C,isAnonymous:T});return yield kt(R),R})()}}const Lu=new Map;function pr(v){Pr(v instanceof Function,"Expected a class definition");let p=Lu.get(v);return p?(Pr(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,Lu.set(v,p),p)}const wa=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,y.Z)(function*(){return!0})()}_set(m,T){var C=this;return(0,y.Z)(function*(){C.storage[m]=T})()}_get(m){var T=this;return(0,y.Z)(function*(){const C=T.storage[m];return void 0===C?null:C})()}_remove(m){var T=this;return(0,y.Z)(function*(){delete T.storage[m]})()}_addListener(m,T){}_removeListener(m,T){}}return v.type="NONE",v})();function ml(v,p,m){return`firebase:${v}:${p}:${m}`}class ba{constructor(p,m,T){this.persistence=p,this.auth=m,this.userKey=T;const{config:C,name:R}=this.auth;this.fullUserKey=ml(this.userKey,C.apiKey,R),this.fullPersistenceKey=ml("persistence",C.apiKey,R),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,y.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?qo._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,y.Z)(function*(){if(m.persistence===p)return;const T=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,T?m.setCurrentUser(T):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,T="authUser"){return(0,y.Z)(function*(){if(!m.length)return new ba(pr(wa),p,T);const C=(yield Promise.all(m.map(function(){var pe=(0,y.Z)(function*(We){if(yield We._isAvailable())return We});return function(We){return pe.apply(this,arguments)}}()))).filter(pe=>pe);let R=C[0]||pr(wa);const L=ml(T,p.config.apiKey,p.name);let q=null;for(const pe of m)try{const We=yield pe._get(L);if(We){const Qe=qo._fromJSON(p,We);pe!==R&&(q=Qe),R=pe;break}}catch{}const ve=C.filter(pe=>pe._shouldAllowMigration);return R._shouldAllowMigration&&ve.length?(R=ve[0],q&&(yield R._set(L,q.toJSON())),yield Promise.all(m.map(function(){var pe=(0,y.Z)(function*(We){if(We!==R)try{yield We._remove(L)}catch{}});return function(We){return pe.apply(this,arguments)}}())),new ba(R,p,T)):new ba(R,p,T)})()}}function fd(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(pd(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(Pf(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Rg(p))return"Blackberry";if(Nf(p))return"Webos";if(Ri(p))return"Safari";if((p.includes("chrome/")||xg(p))&&!p.includes("edge/"))return"Chrome";if(Vu(p))return"Android";{const T=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===T?.length)return T[1]}return"Other"}function Pf(v=(0,j.z$)()){return/firefox\//i.test(v)}function Ri(v=(0,j.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function xg(v=(0,j.z$)()){return/crios\//i.test(v)}function pd(v=(0,j.z$)()){return/iemobile/i.test(v)}function Vu(v=(0,j.z$)()){return/android/i.test(v)}function Rg(v=(0,j.z$)()){return/blackberry/i.test(v)}function Nf(v=(0,j.z$)()){return/webos/i.test(v)}function Uu(v=(0,j.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function md(v=(0,j.z$)()){return Uu(v)||Vu(v)||Nf(v)||Rg(v)||/windows phone/i.test(v)||pd(v)}function Pg(v,p=[]){let m;switch(v){case"Browser":m=fd((0,j.z$)());break;case"Worker":m=`${fd((0,j.z$)())}-${v}`;break;default:m=v}const T=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${se.SDK_VERSION}/${T}`}function Ng(){return(Ng=(0,y.Z)(function*(v){return(yield Yt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Bu(v,p){return kg.apply(this,arguments)}function kg(){return(kg=(0,y.Z)(function*(v,p){return Yt(v,"GET","/v2/recaptchaConfig",Ct(v,p))})).apply(this,arguments)}function Og(v){return void 0!==v&&void 0!==v.getResponse}function Fg(v){return void 0!==v&&void 0!==v.enterprise}class Lg{constructor(p){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===p.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=p.recaptchaKey.split("/")[3],this.emailPasswordEnabled=p.recaptchaEnforcementState.some(m=>"EMAIL_PASSWORD_PROVIDER"===m.provider&&"OFF"!==m.enforcementState)}}function wr(v){return new Promise((p,m)=>{const T=document.createElement("script");T.setAttribute("src",v),T.onload=p,T.onerror=C=>{const R=Qt("internal-error");R.customData=C,m(R)},T.type="text/javascript",T.charset="UTF-8",function Wt(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(T)})}function ni(v){return`__${v}${Math.floor(1e6*Math.random())}`}class Of{constructor(p){this.type="recaptcha-enterprise",this.auth=ze(p)}verify(p="verify",m=!1){var T=this;return(0,y.Z)(function*(){function R(){return R=(0,y.Z)(function*(q){if(!m){if(null==q.tenantId&&null!=q._agentRecaptchaConfig)return q._agentRecaptchaConfig.siteKey;if(null!=q.tenantId&&void 0!==q._tenantRecaptchaConfigs[q.tenantId])return q._tenantRecaptchaConfigs[q.tenantId].siteKey}return new Promise(function(){var ve=(0,y.Z)(function*(pe,We){Bu(q,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Qe=>{if(void 0!==Qe.recaptchaKey){const Zt=new Lg(Qe);return null==q.tenantId?q._agentRecaptchaConfig=Zt:q._tenantRecaptchaConfigs[q.tenantId]=Zt,pe(Zt.siteKey)}We(new Error("recaptcha Enterprise site key undefined"))}).catch(Qe=>{We(Qe)})});return function(pe,We){return ve.apply(this,arguments)}}())}),R.apply(this,arguments)}function L(q,ve,pe){const We=window.grecaptcha;Fg(We)?We.enterprise.ready(()=>{We.enterprise.execute(q,{action:p}).then(Qe=>{ve(Qe)}).catch(()=>{ve("NO_RECAPTCHA")})}):pe(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((q,ve)=>{(function C(q){return R.apply(this,arguments)})(T.auth).then(pe=>{if(!m&&Fg(window.grecaptcha))L(pe,q,ve);else{if(typeof window>"u")return void ve(new Error("RecaptchaVerifier is only supported in browser"));wr("https://www.google.com/recaptcha/enterprise.js?render="+pe).then(()=>{L(pe,q,ve)}).catch(We=>{ve(We)})}}).catch(pe=>{ve(pe)})})})()}}function Ts(v,p,m){return Ff.apply(this,arguments)}function Ff(){return(Ff=(0,y.Z)(function*(v,p,m,T=!1){const C=new Of(v);let R;try{R=yield C.verify(m)}catch{R=yield C.verify(m,!0)}const L=Object.assign({},p);return Object.assign(L,T?{captchaResp:R}:{captchaResponse:R}),Object.assign(L,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(L,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),L})).apply(this,arguments)}class lI{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,m){const T=R=>new Promise((L,q)=>{try{L(p(R))}catch(ve){q(ve)}});T.onAbort=m,this.queue.push(T);const C=this.queue.length-1;return()=>{this.queue[C]=()=>Promise.resolve()}}runMiddleware(p){var m=this;return(0,y.Z)(function*(){if(m.auth.currentUser===p)return;const T=[];try{for(const C of m.queue)yield C(p),C.onAbort&&T.push(C.onAbort)}catch(C){T.reverse();for(const R of T)try{R()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:C?.message})}})()}}class mr{constructor(p,m,T,C){this.app=p,this.heartbeatServiceProvider=m,this.appCheckServiceProvider=T,this.config=C,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Lt(this),this.idTokenSubscription=new Lt(this),this.beforeStateQueue=new lI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ht,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=C.sdkClientVersion}_initializeWithPersistence(p,m){var T=this;return m&&(this._popupRedirectResolver=pr(m)),this._initializationPromise=this.queue((0,y.Z)(function*(){var C,R;if(!T._deleted&&(T.persistenceManager=yield ba.create(T,p),!T._deleted)){if(null!==(C=T._popupRedirectResolver)&&void 0!==C&&C._shouldInitProactively)try{yield T._popupRedirectResolver._initialize(T)}catch{}yield T.initializeCurrentUser(m),T.lastNotifiedUid=(null===(R=T.currentUser)||void 0===R?void 0:R.uid)||null,!T._deleted&&(T._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,y.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m,!0)}})()}initializeCurrentUser(p){var m=this;return(0,y.Z)(function*(){var T;const C=yield m.assertedPersistence.getCurrentUser();let R=C,L=!1;if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const q=null===(T=m.redirectUser)||void 0===T?void 0:T._redirectEventId,ve=R?._redirectEventId,pe=yield m.tryRedirectSignIn(p);(!q||q===ve)&&pe?.user&&(R=pe.user,L=!0)}if(!R)return m.directlySetCurrentUser(null);if(!R._redirectEventId){if(L)try{yield m.beforeStateQueue.runMiddleware(R)}catch(q){R=C,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(q))}return R?m.reloadAndSetCurrentUserOrClear(R):m.directlySetCurrentUser(null)}return xe(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===R._redirectEventId?m.directlySetCurrentUser(R):m.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(p){var m=this;return(0,y.Z)(function*(){let T=null;try{T=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch{yield m._setRedirectUser(null)}return T})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,y.Z)(function*(){try{yield kt(p)}catch(T){if("auth/network-request-failed"!==T?.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function at(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,y.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,y.Z)(function*(){const T=p?(0,j.m9)(p):null;return T&&xe(T.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(T&&T._clone(m))})()}_updateCurrentUser(p,m=!1){var T=this;return(0,y.Z)(function*(){if(!T._deleted)return p&&xe(T.tenantId===p.tenantId,T,"tenant-id-mismatch"),m||(yield T.beforeStateQueue.runMiddleware(p)),T.queue((0,y.Z)(function*(){yield T.directlySetCurrentUser(p),T.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,y.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var m=this;return this.queue((0,y.Z)(function*(){yield m.assertedPersistence.setPersistence(pr(p))}))}initializeRecaptchaConfig(){var p=this;return(0,y.Z)(function*(){const m=yield Bu(p,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),T=new Lg(m);null==p.tenantId?p._agentRecaptchaConfig=T:p._tenantRecaptchaConfigs[p.tenantId]=T,T.emailPasswordEnabled&&new Of(p).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new j.LL("auth","Firebase",p())}onAuthStateChanged(p,m,T){return this.registerStateListener(this.authStateSubscription,p,m,T)}beforeAuthStateChanged(p,m){return this.beforeStateQueue.pushCallback(p,m)}onIdTokenChanged(p,m,T){return this.registerStateListener(this.idTokenSubscription,p,m,T)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var T=this;return(0,y.Z)(function*(){const C=yield T.getOrInitRedirectPersistenceManager(m);return null===p?C.removeCurrentUser():C.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,y.Z)(function*(){if(!m.redirectPersistenceManager){const T=p&&pr(p)||m._popupRedirectResolver;xe(T,m,"argument-error"),m.redirectPersistenceManager=yield ba.create(m,[pr(T._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,y.Z)(function*(){var T,C;return m._isInitialized&&(yield m.queue((0,y.Z)(function*(){}))),(null===(T=m._currentUser)||void 0===T?void 0:T._redirectEventId)===p?m._currentUser:(null===(C=m.redirectUser)||void 0===C?void 0:C._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,y.Z)(function*(){if(p===m.currentUser)return m.queue((0,y.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const T=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==T&&(this.lastNotifiedUid=T,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,T,C){if(this._deleted)return()=>{};const R="function"==typeof m?m:m.next.bind(m),L=this._isInitialized?Promise.resolve():this._initializationPromise;return xe(L,this,"internal-error"),L.then(()=>R(this.currentUser)),"function"==typeof m?p.addObserver(m,T,C):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,y.Z)(function*(){m.currentUser&&m.currentUser!==p&&m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh(),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Pg(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,y.Z)(function*(){var m;const T={"X-Client-Version":p.clientVersion};p.app.options.appId&&(T["X-Firebase-gmpid"]=p.app.options.appId);const C=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();C&&(T["X-Firebase-Client"]=C);const R=yield p._getAppCheckToken();return R&&(T["X-Firebase-AppCheck"]=R),T})()}_getAppCheckToken(){var p=this;return(0,y.Z)(function*(){var m;const T=yield null===(m=p.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getToken();return T?.error&&function Ft(v,...p){nr.logLevel<=tr.in.WARN&&nr.warn(`Auth (${se.SDK_VERSION}): ${v}`,...p)}(`Error while retrieving App Check token: ${T.error}`),T?.token})()}}function ze(v){return(0,j.m9)(v)}class Lt{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,j.ne)(m=>this.observer=m)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Nr(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function zn(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class Pi{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return rr("not implemented")}_getIdTokenResponse(p){return rr("not implemented")}_linkToIdToken(p,m){return rr("not implemented")}_getReauthenticationResolver(p){return rr("not implemented")}}function Vt(v,p){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,y.Z)(function*(v,p){return Yt(v,"POST","/v1/accounts:resetPassword",Ct(v,p))})).apply(this,arguments)}function Lf(v,p){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,y.Z)(function*(v,p){return Yt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function El(){return(El=(0,y.Z)(function*(v,p){return Yt(v,"POST","/v1/accounts:update",Ct(v,p))})).apply(this,arguments)}function Da(v,p){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,y.Z)(function*(v,p){return Xt(v,"POST","/v1/accounts:signInWithPassword",Ct(v,p))})).apply(this,arguments)}function Eo(v,p){return _d.apply(this,arguments)}function _d(){return(_d=(0,y.Z)(function*(v,p){return Yt(v,"POST","/v1/accounts:sendOobCode",Ct(v,p))})).apply(this,arguments)}function bs(){return(bs=(0,y.Z)(function*(v,p){return Eo(v,p)})).apply(this,arguments)}function Il(v,p){return Io.apply(this,arguments)}function Io(){return(Io=(0,y.Z)(function*(v,p){return Eo(v,p)})).apply(this,arguments)}function nn(v,p){return uI.apply(this,arguments)}function uI(){return(uI=(0,y.Z)(function*(v,p){return Eo(v,p)})).apply(this,arguments)}function yd(){return(yd=(0,y.Z)(function*(v,p){return Eo(v,p)})).apply(this,arguments)}function Ca(){return(Ca=(0,y.Z)(function*(v,p){return Xt(v,"POST","/v1/accounts:signInWithEmailLink",Ct(v,p))})).apply(this,arguments)}function wl(){return(wl=(0,y.Z)(function*(v,p){return Xt(v,"POST","/v1/accounts:signInWithEmailLink",Ct(v,p))})).apply(this,arguments)}class sr extends Pi{constructor(p,m,T,C=null){super("password",T),this._email=p,this._password=m,this._tenantId=C}static _fromEmailAndPassword(p,m){return new sr(p,m,"password")}static _fromEmailAndCode(p,m,T=null){return new sr(p,m,"emailLink",T)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,y.Z)(function*(){var T;switch(m.signInMethod){case"password":const C={returnSecureToken:!0,email:m._email,password:m._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(T=p._getRecaptchaConfig())&&void 0!==T&&T.emailPasswordEnabled){const R=yield Ts(p,C,"signInWithPassword");return Da(p,R)}return Da(p,C).catch(function(){var R=(0,y.Z)(function*(L){if("auth/missing-recaptcha-token"===L.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const q=yield Ts(p,C,"signInWithPassword");return Da(p,q)}return Promise.reject(L)});return function(L){return R.apply(this,arguments)}}());case"emailLink":return function Ks(v,p){return Ca.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:ct(p,"internal-error")}})()}_linkToIdToken(p,m){var T=this;return(0,y.Z)(function*(){switch(T.signInMethod){case"password":return Lf(p,{idToken:m,returnSecureToken:!0,email:T._email,password:T._password});case"emailLink":return function Tl(v,p){return wl.apply(this,arguments)}(p,{idToken:m,email:T._email,oobCode:T._password});default:ct(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Sa(v,p){return kr.apply(this,arguments)}function kr(){return(kr=(0,y.Z)(function*(v,p){return Xt(v,"POST","/v1/accounts:signInWithIdp",Ct(v,p))})).apply(this,arguments)}class ts extends Pi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new ts(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):ct("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:T,signInMethod:C}=m,R=Ke(m,["providerId","signInMethod"]);if(!T||!C)return null;const L=new ts(T,C);return L.idToken=R.idToken||void 0,L.accessToken=R.accessToken||void 0,L.secret=R.secret,L.nonce=R.nonce,L.pendingToken=R.pendingToken||null,L}_getIdTokenResponse(p){return Sa(p,this.buildRequest())}_linkToIdToken(p,m){const T=this.buildRequest();return T.idToken=m,Sa(p,T)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,Sa(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,j.xO)(m)}return p}}function bl(){return(bl=(0,y.Z)(function*(v,p){return Yt(v,"POST","/v1/accounts:sendVerificationCode",Ct(v,p))})).apply(this,arguments)}function ju(){return(ju=(0,y.Z)(function*(v,p){return Xt(v,"POST","/v1/accounts:signInWithPhoneNumber",Ct(v,p))})).apply(this,arguments)}function Vf(){return(Vf=(0,y.Z)(function*(v,p){const m=yield Xt(v,"POST","/v1/accounts:signInWithPhoneNumber",Ct(v,p));if(m.temporaryProof)throw Ji(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const mD={USER_NOT_FOUND:"user-not-found"};function Bg(){return(Bg=(0,y.Z)(function*(v,p){return Xt(v,"POST","/v1/accounts:signInWithPhoneNumber",Ct(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),mD)})).apply(this,arguments)}class Al extends Pi{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new Al({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new Al({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function hi(v,p){return ju.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function pD(v,p){return Vf.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function gD(v,p){return Bg.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:T,verificationCode:C}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:T,code:C}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:T,phoneNumber:C,temporaryProof:R}=p;return T||m||C||R?new Al({verificationId:m,verificationCode:T,phoneNumber:C,temporaryProof:R}):null}}class Uf{constructor(p){var m,T,C,R,L,q;const ve=(0,j.zd)((0,j.pd)(p)),pe=null!==(m=ve.apiKey)&&void 0!==m?m:null,We=null!==(T=ve.oobCode)&&void 0!==T?T:null,Qe=function _D(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(C=ve.mode)&&void 0!==C?C:null);xe(pe&&We&&Qe,"argument-error"),this.apiKey=pe,this.operation=Qe,this.code=We,this.continueUrl=null!==(R=ve.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(L=ve.languageCode)&&void 0!==L?L:null,this.tenantId=null!==(q=ve.tenantId)&&void 0!==q?q:null}static parseLink(p){const m=function yD(v){const p=(0,j.zd)((0,j.pd)(v)).link,m=p?(0,j.zd)((0,j.pd)(p)).deep_link_id:null,T=(0,j.zd)((0,j.pd)(v)).deep_link_id;return(T?(0,j.zd)((0,j.pd)(T)).link:null)||T||m||p||v}(p);try{return new Uf(m)}catch{return null}}}let jg=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,T){return sr._fromEmailAndPassword(m,T)}static credentialWithLink(m,T){const C=Uf.parseLink(T);return xe(C,"argument-error"),sr._fromEmailAndCode(m,C.code,C.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Ko{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class $u extends Ko{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class vd extends $u{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return xe("providerId"in m&&"signInMethod"in m,"argument-error"),ts._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return xe(p.idToken||p.accessToken,"argument-error"),ts._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return vd.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return vd.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:T,oauthTokenSecret:C,pendingToken:R,nonce:L,providerId:q}=p;if(!T&&!C&&!m&&!R||!q)return null;try{return new vd(q)._credential({idToken:m,accessToken:T,nonce:L,pendingToken:R})}catch{return null}}}let vD=(()=>{class v extends $u{constructor(){super("facebook.com")}static credential(m){return ts._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),cI=(()=>{class v extends $u{constructor(){super("google.com"),this.addScope("profile")}static credential(m,T){return ts._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:T})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:T,oauthAccessToken:C}=m;if(!T&&!C)return null;try{return v.credential(T,C)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),dI=(()=>{class v extends $u{constructor(){super("github.com")}static credential(m){return ts._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Dl extends Pi{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return Sa(p,this.buildRequest())}_linkToIdToken(p,m){const T=this.buildRequest();return T.idToken=m,Sa(p,T)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,Sa(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:T,signInMethod:C,pendingToken:R}=m;return T&&C&&R&&T===C?new Dl(T,R):null}static _create(p,m){return new Dl(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class kn extends Ko{constructor(p){xe(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return kn.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return kn.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=Dl.fromJSON(p);return xe(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:T}=p;if(!m||!T)return null;try{return Dl._create(T,m)}catch{return null}}}let ED=(()=>{class v extends $u{constructor(){super("twitter.com")}static credential(m,T){return ts._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:T})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:T,oauthTokenSecret:C}=m;if(!T||!C)return null;try{return v.credential(T,C)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function To(v,p){return Bf.apply(this,arguments)}function Bf(){return(Bf=(0,y.Z)(function*(v,p){return Xt(v,"POST","/v1/accounts:signUp",Ct(v,p))})).apply(this,arguments)}class Zs{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,T,C=!1){return(0,y.Z)(function*(){const R=yield qo._fromIdTokenResponse(p,T,C),L=jf(T);return new Zs({user:R,providerId:L,_tokenResponse:T,operationType:m})})()}static _forOperation(p,m,T){return(0,y.Z)(function*(){yield p._updateTokensIfNecessary(T,!0);const C=jf(T);return new Zs({user:p,providerId:C,_tokenResponse:T,operationType:m})})()}}function jf(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function $f(){return($f=(0,y.Z)(function*(v){var p;const m=ze(v);if(yield m._initializationPromise,null!==(p=m.currentUser)&&void 0!==p&&p.isAnonymous)return new Zs({user:m.currentUser,providerId:null,operationType:"signIn"});const T=yield To(m,{returnSecureToken:!0}),C=yield Zs._fromIdTokenResponse(m,"signIn",T,!0);return yield m._updateCurrentUser(C.user),C})).apply(this,arguments)}class Gf extends j.ZR{constructor(p,m,T,C){var R;super(m.code,m.message),this.operationType=T,this.user=C,Object.setPrototypeOf(this,Gf.prototype),this.customData={appName:p.name,tenantId:null!==(R=p.tenantId)&&void 0!==R?R:void 0,_serverResponse:m.customData._serverResponse,operationType:T}}static _fromErrorAndOperation(p,m,T,C){return new Gf(p,m,T,C)}}function fI(v,p,m,T){return("reauthenticate"===p?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?Gf._fromErrorAndOperation(v,R,p,T):R})}function ID(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function ns(){return ns=(0,y.Z)(function*(v,p){const m=(0,j.m9)(v);yield wo(!0,m,p);const{providerUserInfo:T}=yield function Ce(v,p){return Je.apply(this,arguments)}(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),C=ID(T||[]);return m.providerData=m.providerData.filter(R=>C.has(R.providerId)),C.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m}),ns.apply(this,arguments)}function Cl(v,p){return Un.apply(this,arguments)}function Un(){return(Un=(0,y.Z)(function*(v,p,m=!1){const T=yield lt(v,p._linkToIdToken(v.auth,yield v.getIdToken()),m);return Zs._forOperation(v,"link",T)})).apply(this,arguments)}function wo(v,p,m){return pI.apply(this,arguments)}function pI(){return(pI=(0,y.Z)(function*(v,p,m){yield kt(p);const C=!1===v?"provider-already-linked":"no-such-provider";xe(ID(p.providerData).has(m)===v,p.auth,C)})).apply(this,arguments)}function Hf(v,p){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,y.Z)(function*(v,p,m=!1){const{auth:T}=v,C="reauthenticate";try{const R=yield lt(v,fI(T,C,p,v),m);xe(R.idToken,T,"internal-error");const L=ye(R.idToken);xe(L,T,"internal-error");const{sub:q}=L;return xe(v.uid===q,T,"user-mismatch"),Zs._forOperation(v,C,R)}catch(R){throw"auth/user-not-found"===R?.code&&ct(T,"user-mismatch"),R}})).apply(this,arguments)}function xl(v,p){return Hg.apply(this,arguments)}function Hg(){return(Hg=(0,y.Z)(function*(v,p,m=!1){const T="signIn",C=yield fI(v,T,p),R=yield Zs._fromIdTokenResponse(v,T,C);return m||(yield v._updateCurrentUser(R.user)),R})).apply(this,arguments)}function zg(v,p){return Ed.apply(this,arguments)}function Ed(){return(Ed=(0,y.Z)(function*(v,p){return xl(ze(v),p)})).apply(this,arguments)}function Gu(v,p){return qg.apply(this,arguments)}function qg(){return(qg=(0,y.Z)(function*(v,p){const m=(0,j.m9)(v);return yield wo(!1,m,p.providerId),Cl(m,p)})).apply(this,arguments)}function Id(v,p){return Wg.apply(this,arguments)}function Wg(){return(Wg=(0,y.Z)(function*(v,p){return Hf((0,j.m9)(v),p)})).apply(this,arguments)}function mI(){return(mI=(0,y.Z)(function*(v,p){return Xt(v,"POST","/v1/accounts:signInWithCustomToken",Ct(v,p))})).apply(this,arguments)}function zf(){return zf=(0,y.Z)(function*(v,p){const m=ze(v),T=yield function ON(v,p){return mI.apply(this,arguments)}(m,{token:p,returnSecureToken:!0}),C=yield Zs._fromIdTokenResponse(m,"signIn",T);return yield m._updateCurrentUser(C.user),C}),zf.apply(this,arguments)}class Td{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?qf._fromServerResponse(p,m):"totpInfo"in m?wd._fromServerResponse(p,m):ct(p,"internal-error")}}class qf extends Td{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new qf(m)}}class wd extends Td{constructor(p){super("totp",p)}static _fromServerResponse(p,m){return new wd(m)}}function Ra(v,p,m){var T;xe((null===(T=m.url)||void 0===T?void 0:T.length)>0,v,"invalid-continue-uri"),xe(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(xe(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(xe(m.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function Kg(){return Kg=(0,y.Z)(function*(v,p,m){var T;const C=ze(v),R={requestType:"PASSWORD_RESET",email:p,clientType:"CLIENT_TYPE_WEB"};if(null!==(T=C._getRecaptchaConfig())&&void 0!==T&&T.emailPasswordEnabled){const L=yield Ts(C,R,"getOobCode",!0);m&&Ra(C,L,m),yield Il(C,L)}else m&&Ra(C,R,m),yield Il(C,R).catch(function(){var L=(0,y.Z)(function*(q){if("auth/missing-recaptcha-token"!==q.code)return Promise.reject(q);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const ve=yield Ts(C,R,"getOobCode",!0);m&&Ra(C,ve,m),yield Il(C,ve)}});return function(q){return L.apply(this,arguments)}}())}),Kg.apply(this,arguments)}function Wf(){return(Wf=(0,y.Z)(function*(v,p,m){yield Vt((0,j.m9)(v),{oobCode:p,newPassword:m})})).apply(this,arguments)}function bd(){return bd=(0,y.Z)(function*(v,p){yield function Vn(v,p){return El.apply(this,arguments)}((0,j.m9)(v),{oobCode:p})}),bd.apply(this,arguments)}function yI(v,p){return As.apply(this,arguments)}function As(){return(As=(0,y.Z)(function*(v,p){const m=(0,j.m9)(v),T=yield Vt(m,{oobCode:p}),C=T.requestType;switch(xe(C,m,"internal-error"),C){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":xe(T.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":xe(T.mfaInfo,m,"internal-error");default:xe(T.email,m,"internal-error")}let R=null;return T.mfaInfo&&(R=Td._fromServerResponse(ze(m),T.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.newEmail:T.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.email:T.newEmail)||null,multiFactorInfo:R},operation:C}})).apply(this,arguments)}function Kf(){return(Kf=(0,y.Z)(function*(v,p){const{data:m}=yield yI((0,j.m9)(v),p);return m.email})).apply(this,arguments)}function Rl(){return Rl=(0,y.Z)(function*(v,p,m){var T;const C=ze(v),R={returnSecureToken:!0,email:p,password:m,clientType:"CLIENT_TYPE_WEB"};let L;if(null!==(T=C._getRecaptchaConfig())&&void 0!==T&&T.emailPasswordEnabled){const pe=yield Ts(C,R,"signUpPassword");L=To(C,pe)}else L=To(C,R).catch(function(){var pe=(0,y.Z)(function*(We){if("auth/missing-recaptcha-token"===We.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const Qe=yield Ts(C,R,"signUpPassword");return To(C,Qe)}return Promise.reject(We)});return function(We){return pe.apply(this,arguments)}}());const q=yield L.catch(pe=>Promise.reject(pe)),ve=yield Zs._fromIdTokenResponse(C,"signIn",q);return yield C._updateCurrentUser(ve.user),ve}),Rl.apply(this,arguments)}function Ma(){return Ma=(0,y.Z)(function*(v,p,m){var T;const C=ze(v),R={requestType:"EMAIL_SIGNIN",email:p,clientType:"CLIENT_TYPE_WEB"};function L(q,ve){xe(ve.handleCodeInApp,C,"argument-error"),ve&&Ra(C,q,ve)}if(null!==(T=C._getRecaptchaConfig())&&void 0!==T&&T.emailPasswordEnabled){const q=yield Ts(C,R,"getOobCode",!0);L(q,m),yield nn(C,q)}else L(R,m),yield nn(C,R).catch(function(){var q=(0,y.Z)(function*(ve){if("auth/missing-recaptcha-token"!==ve.code)return Promise.reject(ve);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const pe=yield Ts(C,R,"getOobCode",!0);L(pe,m),yield nn(C,pe)}});return function(ve){return q.apply(this,arguments)}}())}),Ma.apply(this,arguments)}function ri(){return(ri=(0,y.Z)(function*(v,p,m){const T=(0,j.m9)(v),C=jg.credentialWithLink(p,m||Kr());return xe(C._tenantId===(T.tenantId||null),T,"tenant-id-mismatch"),zg(T,C)})).apply(this,arguments)}function Zf(){return(Zf=(0,y.Z)(function*(v,p){return Yt(v,"POST","/v1/accounts:createAuthUri",Ct(v,p))})).apply(this,arguments)}function Ds(){return Ds=(0,y.Z)(function*(v,p){const T={identifier:p,continueUri:$s()?Kr():"http://localhost"},{signinMethods:C}=yield function EI(v,p){return Zf.apply(this,arguments)}((0,j.m9)(v),T);return C||[]}),Ds.apply(this,arguments)}function Hu(){return Hu=(0,y.Z)(function*(v,p){const m=(0,j.m9)(v),C={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&Ra(m.auth,C,p);const{email:R}=yield function Wo(v,p){return bs.apply(this,arguments)}(m.auth,C);R!==v.email&&(yield v.reload())}),Hu.apply(this,arguments)}function Ml(){return Ml=(0,y.Z)(function*(v,p,m){const T=(0,j.m9)(v),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};m&&Ra(T.auth,R,m);const{email:L}=yield function Ug(v,p){return yd.apply(this,arguments)}(T.auth,R);L!==v.email&&(yield v.reload())}),Ml.apply(this,arguments)}function Cd(){return(Cd=(0,y.Z)(function*(v,p){return Yt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Sd(){return Sd=(0,y.Z)(function*(v,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const T=(0,j.m9)(v),R={idToken:yield T.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},L=yield lt(T,function Dd(v,p){return Cd.apply(this,arguments)}(T.auth,R));T.displayName=L.displayName||null,T.photoURL=L.photoUrl||null;const q=T.providerData.find(({providerId:ve})=>"password"===ve);q&&(q.displayName=T.displayName,q.photoURL=T.photoURL),yield T._updateTokensIfNecessary(L)}),Sd.apply(this,arguments)}function Qg(v,p,m){return Jf.apply(this,arguments)}function Jf(){return(Jf=(0,y.Z)(function*(v,p,m){const{auth:T}=v,R={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(R.email=p),m&&(R.password=m);const L=yield lt(v,Lf(T,R));yield v._updateTokensIfNecessary(L,!0)})).apply(this,arguments)}class Oi{constructor(p,m,T={}){this.isNewUser=p,this.providerId=m,this.profile=T}}class xd extends Oi{constructor(p,m,T,C){super(p,m,T),this.username=C}}class TI extends Oi{constructor(p,m){super(p,"facebook.com",m)}}class AD extends xd{constructor(p,m){super(p,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class Yg extends Oi{constructor(p,m){super(p,"google.com",m)}}class wI extends xd{constructor(p,m,T){super(p,"twitter.com",m,T)}}function we(v){const{user:p,_tokenResponse:m}=v;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function ep(v){var p,m;if(!v)return null;const{providerId:T}=v,C=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},R=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!T&&v?.idToken){const L=null===(m=null===(p=ye(v.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(L)return new Oi(R,"anonymous"!==L&&"custom"!==L?L:null)}if(!T)return null;switch(T){case"facebook.com":return new TI(R,C);case"github.com":return new AD(R,C);case"google.com":return new Yg(R,C);case"twitter.com":return new wI(R,C,v.screenName||null);case"custom":case"anonymous":return new Oi(R,null);default:return new Oi(R,T,C)}}(m)}class Pl{constructor(p,m,T){this.type=p,this.credential=m,this.auth=T}static _fromIdtoken(p,m){return new Pl("enroll",p,m)}static _fromMfaPendingCredential(p){return new Pl("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,T;if(p?.multiFactorSession){if(null!==(m=p.multiFactorSession)&&void 0!==m&&m.pendingCredential)return Pl._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(T=p.multiFactorSession)&&void 0!==T&&T.idToken)return Pl._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Md{constructor(p,m,T){this.session=p,this.hints=m,this.signInResolver=T}static _fromError(p,m){const T=ze(p),C=m.customData._serverResponse,R=(C.mfaInfo||[]).map(q=>Td._fromServerResponse(T,q));xe(C.mfaPendingCredential,T,"internal-error");const L=Pl._fromMfaPendingCredential(C.mfaPendingCredential);return new Md(L,R,function(){var q=(0,y.Z)(function*(ve){const pe=yield ve._process(T,L);delete C.mfaInfo,delete C.mfaPendingCredential;const We=Object.assign(Object.assign({},C),{idToken:pe.idToken,refreshToken:pe.refreshToken});switch(m.operationType){case"signIn":const Qe=yield Zs._fromIdTokenResponse(T,m.operationType,We);return yield T._updateCurrentUser(Qe.user),Qe;case"reauthenticate":return xe(m.user,T,"internal-error"),Zs._forOperation(m.user,m.operationType,We);default:ct(T,"internal-error")}});return function(ve){return q.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,y.Z)(function*(){return m.signInResolver(p)})()}}class qu{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(T=>Td._fromServerResponse(p.auth,T)))})}static _fromUser(p){return new qu(p)}getSession(){var p=this;return(0,y.Z)(function*(){return Pl._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,m){var T=this;return(0,y.Z)(function*(){const C=p,R=yield T.getSession(),L=yield lt(T.user,C._process(T.user.auth,R,m));return yield T.user._updateTokensIfNecessary(L),T.user.reload()})()}unenroll(p){var m=this;return(0,y.Z)(function*(){const T="string"==typeof p?p:p.uid,C=yield m.user.getIdToken();try{const R=yield lt(m.user,function e_(v,p){return Yt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Ct(v,p))}(m.user.auth,{idToken:C,mfaEnrollmentId:T}));m.enrolledFactors=m.enrolledFactors.filter(({uid:L})=>L!==T),yield m.user._updateTokensIfNecessary(R),yield m.user.reload()}catch(R){throw R}})()}}const t_=new WeakMap,Wu="__sak";class Pd{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Wu,"1"),this.storage.removeItem(Wu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Nl=(()=>{class v extends Pd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,T)=>this.onStorageEvent(m,T),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function rp(){const v=(0,j.z$)();return Ri(v)||Uu(v)}()&&function gd(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=md(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const T of Object.keys(this.listeners)){const C=this.storage.getItem(T),R=this.localCache[T];C!==R&&m(T,R,C)}}onStorageEvent(m,T=!1){if(!m.key)return void this.forAllChangedKeys((q,ve,pe)=>{this.notifyListeners(q,pe)});const C=m.key;if(T?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const q=this.storage.getItem(C);if(m.newValue!==q)null!==m.newValue?this.storage.setItem(C,m.newValue):this.storage.removeItem(C);else if(this.localCache[C]===m.newValue&&!T)return}const R=()=>{const q=this.storage.getItem(C);!T&&this.localCache[C]===q||this.notifyListeners(C,q)},L=this.storage.getItem(C);!function Mg(){return(0,j.w1)()&&10===document.documentMode}()||L===m.newValue||m.newValue===m.oldValue?R():setTimeout(R,10)}notifyListeners(m,T){this.localCache[m]=T;const C=this.listeners[m];if(C)for(const R of Array.from(C))R(T&&JSON.parse(T))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,T,C)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:T,newValue:C}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,T){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(T)}_removeListener(m,T){this.listeners[m]&&(this.listeners[m].delete(T),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,T){var C=()=>super._set,R=this;return(0,y.Z)(function*(){yield C().call(R,m,T),R.localCache[m]=JSON.stringify(T)})()}_get(m){var T=()=>super._get,C=this;return(0,y.Z)(function*(){const R=yield T().call(C,m);return C.localCache[m]=JSON.stringify(R),R})()}_remove(m){var T=()=>super._remove,C=this;return(0,y.Z)(function*(){yield T().call(C,m),delete C.localCache[m]})()}}return v.type="LOCAL",v})(),Xs=(()=>{class v extends Pd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,T){}_removeListener(m,T){}}return v.type="SESSION",v})();let RI=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const T=this.receivers.find(R=>R.isListeningto(m));if(T)return T;const C=new v(m);return this.receivers.push(C),C}isListeningto(m){return this.eventTarget===m}handleEvent(m){var T=this;return(0,y.Z)(function*(){const C=m,{eventId:R,eventType:L,data:q}=C.data,ve=T.handlersMap[L];if(!ve?.size)return;C.ports[0].postMessage({status:"ack",eventId:R,eventType:L});const pe=Array.from(ve).map(function(){var Qe=(0,y.Z)(function*(Zt){return Zt(C.origin,q)});return function(Zt){return Qe.apply(this,arguments)}}()),We=yield function xI(v){return Promise.all(v.map(function(){var p=(0,y.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(T){return{fulfilled:!1,reason:T}}});return function(m){return p.apply(this,arguments)}}()))}(pe);C.ports[0].postMessage({status:"done",eventId:R,eventType:L,response:We})})()}_subscribe(m,T){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(T)}_unsubscribe(m,T){this.handlersMap[m]&&T&&this.handlersMap[m].delete(T),(!T||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function kl(v="",p=10){let m="";for(let T=0;T<p;T++)m+=Math.floor(10*Math.random());return v+m}class MI{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,T=50){var C=this;return(0,y.Z)(function*(){const R=typeof MessageChannel<"u"?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let L,q;return new Promise((ve,pe)=>{const We=kl("",20);R.port1.start();const Qe=setTimeout(()=>{pe(new Error("unsupported_event"))},T);q={messageChannel:R,onMessage(Zt){const yr=Zt;if(yr.data.eventId===We)switch(yr.data.status){case"ack":clearTimeout(Qe),L=setTimeout(()=>{pe(new Error("timeout"))},3e3);break;case"done":clearTimeout(L),ve(yr.data.response);break;default:clearTimeout(Qe),clearTimeout(L),pe(new Error("invalid_response"))}}},C.handlers.add(q),R.port1.addEventListener("message",q.onMessage),C.target.postMessage({eventType:p,eventId:We,data:m},[R.port2])}).finally(()=>{q&&C.removeMessageHandler(q)})})()}}function gr(){return window}function Yo(){return typeof gr().WorkerGlobalScope<"u"&&"function"==typeof gr().importScripts}function n_(){return(n_=(0,y.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const PI="firebaseLocalStorageDb",Ol="firebaseLocalStorage",kd="fbase_key";class Cs{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function sp(v,p){return v.transaction([Ol],p?"readwrite":"readonly").objectStore(Ol)}function Ku(){const v=indexedDB.open(PI,1);return new Promise((p,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const T=v.result;try{T.createObjectStore(Ol,{keyPath:kd})}catch(C){m(C)}}),v.addEventListener("success",(0,y.Z)(function*(){const T=v.result;T.objectStoreNames.contains(Ol)?p(T):(T.close(),yield function op(){const v=indexedDB.deleteDatabase(PI);return new Cs(v).toPromise()}(),p(yield Ku()))}))})}function Od(v,p,m){return Fd.apply(this,arguments)}function Fd(){return(Fd=(0,y.Z)(function*(v,p,m){const T=sp(v,!0).put({[kd]:p,value:m});return new Cs(T).toPromise()})).apply(this,arguments)}function Ao(){return(Ao=(0,y.Z)(function*(v,p){const m=sp(v,!1).get(p),T=yield new Cs(m).toPromise();return void 0===T?null:T.value})).apply(this,arguments)}function i_(v,p){const m=sp(v,!0).delete(p);return new Cs(m).toPromise()}const Zu=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,y.Z)(function*(){return m.db||(m.db=yield Ku()),m.db})()}_withRetries(m){var T=this;return(0,y.Z)(function*(){let C=0;for(;;)try{const R=yield T._openDb();return yield m(R)}catch(R){if(C++>3)throw R;T.db&&(T.db.close(),T.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,y.Z)(function*(){return Yo()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,y.Z)(function*(){m.receiver=RI._getInstance(function CD(){return Yo()?self:null}()),m.receiver._subscribe("keyChanged",function(){var T=(0,y.Z)(function*(C,R){return{keyProcessed:(yield m._poll()).includes(R.key)}});return function(C,R){return T.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var T=(0,y.Z)(function*(C,R){return["keyChanged"]});return function(C,R){return T.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,y.Z)(function*(){var T,C;if(m.activeServiceWorker=yield function Bn(){return n_.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new MI(m.activeServiceWorker);const R=yield m.sender._send("ping",{},800);R&&null!==(T=R[0])&&void 0!==T&&T.fulfilled&&null!==(C=R[0])&&void 0!==C&&C.value.includes("keyChanged")&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var T=this;return(0,y.Z)(function*(){if(T.sender&&T.activeServiceWorker&&function DD(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===T.activeServiceWorker)try{yield T.sender._send("keyChanged",{key:m},T.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,y.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Ku();return yield Od(m,Wu,"1"),yield i_(m,Wu),!0}catch{}return!1})()}_withPendingWrite(m){var T=this;return(0,y.Z)(function*(){T.pendingWrites++;try{yield m()}finally{T.pendingWrites--}})()}_set(m,T){var C=this;return(0,y.Z)(function*(){return C._withPendingWrite((0,y.Z)(function*(){return yield C._withRetries(R=>Od(R,m,T)),C.localCache[m]=T,C.notifyServiceWorker(m)}))})()}_get(m){var T=this;return(0,y.Z)(function*(){const C=yield T._withRetries(R=>function Ss(v,p){return Ao.apply(this,arguments)}(R,m));return T.localCache[m]=C,C})()}_remove(m){var T=this;return(0,y.Z)(function*(){return T._withPendingWrite((0,y.Z)(function*(){return yield T._withRetries(C=>i_(C,m)),delete T.localCache[m],T.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,y.Z)(function*(){const T=yield m._withRetries(L=>{const q=sp(L,!1).getAll();return new Cs(q).toPromise()});if(!T)return[];if(0!==m.pendingWrites)return[];const C=[],R=new Set;for(const{fbase_key:L,value:q}of T)R.add(L),JSON.stringify(m.localCache[L])!==JSON.stringify(q)&&(m.notifyListeners(L,q),C.push(L));for(const L of Object.keys(m.localCache))m.localCache[L]&&!R.has(L)&&(m.notifyListeners(L,null),C.push(L));return C})()}notifyListeners(m,T){this.localCache[m]=T;const C=this.listeners[m];if(C)for(const R of Array.from(C))R(T)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,y.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,T){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(T)}_removeListener(m,T){this.listeners[m]&&(this.listeners[m].delete(T),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})(),Pa=1e12;class Ht{constructor(p){this.auth=p,this.counter=Pa,this._widgets=new Map}render(p,m){const T=this.counter;return this._widgets.set(T,new Ld(p,this.auth.name,m||{})),this.counter++,T}reset(p){var m;const T=p||Pa;null===(m=this._widgets.get(T))||void 0===m||m.delete(),this._widgets.delete(T)}getResponse(p){var m;return(null===(m=this._widgets.get(p||Pa))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,y.Z)(function*(){var T;return null===(T=m._widgets.get(p||Pa))||void 0===T||T.execute(),""})()}}class Ld{constructor(p,m,T){this.params=T,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const C="string"==typeof p?document.getElementById(p):p;xe(C,"argument-error",{appName:m}),this.container=C,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function kI(v){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let T=0;T<v;T++)p.push(m.charAt(Math.floor(62*Math.random())));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Na=ni("rcb"),ka=new ft(3e4,6e4);class pi{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=gr().grecaptcha)||void 0===p||!p.render)}load(p,m=""){return xe(function o_(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),p,"argument-error"),this.shouldResolveImmediately(m)&&Og(gr().grecaptcha)?Promise.resolve(gr().grecaptcha):new Promise((T,C)=>{const R=gr().setTimeout(()=>{C(Qt(p,"network-request-failed"))},ka.get());gr()[Na]=()=>{gr().clearTimeout(R),delete gr()[Na];const q=gr().grecaptcha;if(!q||!Og(q))return void C(Qt(p,"internal-error"));const ve=q.render;q.render=(pe,We)=>{const Qe=ve(pe,We);return this.counter++,Qe},this.hostLanguage=m,T(q)},wr(`https://www.google.com/recaptcha/api.js??${(0,j.xO)({onload:Na,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(R),C(Qt(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var m;return!(null===(m=gr().grecaptcha)||void 0===m||!m.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Yu{load(p){return(0,y.Z)(function*(){return new Ht(p)})()}clearedOneInstance(){}}const a_="recaptcha",xs={theme:"light",type:"image"};class OI{constructor(p,m=Object.assign({},xs),T){this.parameters=m,this.type=a_,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ze(T),this.isInvisible="invisible"===this.parameters.size,xe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const C="string"==typeof p?document.getElementById(p):p;xe(C,this.auth,"argument-error"),this.container=C,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Yu:new pi,this.validateStartingState()}verify(){var p=this;return(0,y.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),T=p.getAssertedRecaptcha();return T.getResponse(m)||new Promise(R=>{const L=q=>{q&&(p.tokenChangeListeners.delete(L),R(q))};p.tokenChangeListeners.add(L),p.isInvisible&&T.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){xe(!this.parameters.sitekey,this.auth,"argument-error"),xe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),xe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(T=>T(m)),"function"==typeof p)p(m);else if("string"==typeof p){const T=gr()[p];"function"==typeof T&&T(m)}}}assertNotDestroyed(){xe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,y.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const T=document.createElement("div");m.appendChild(T),m=T}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,y.Z)(function*(){xe($s()&&!Yo(),p.auth,"internal-error"),yield function Oa(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function aI(v){return Ng.apply(this,arguments)}(p.auth);xe(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return xe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Do{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=Al._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function Xo(){return(Xo=(0,y.Z)(function*(v,p,m){const T=ze(v),C=yield rs(T,p,(0,j.m9)(m));return new Do(C,R=>zg(T,R))})).apply(this,arguments)}function Vd(){return(Vd=(0,y.Z)(function*(v,p,m){const T=(0,j.m9)(v);yield wo(!1,T,"phone");const C=yield rs(T.auth,p,(0,j.m9)(m));return new Do(C,R=>Gu(T,R))})).apply(this,arguments)}function Jo(){return(Jo=(0,y.Z)(function*(v,p,m){const T=(0,j.m9)(v),C=yield rs(T.auth,p,(0,j.m9)(m));return new Do(C,R=>Id(T,R))})).apply(this,arguments)}function rs(v,p,m){return Ll.apply(this,arguments)}function Ll(){return Ll=(0,y.Z)(function*(v,p,m){var T;const C=yield m.verify();try{let R;if(xe("string"==typeof C,v,"argument-error"),xe(m.type===a_,v,"argument-error"),R="string"==typeof p?{phoneNumber:p}:p,"session"in R){const L=R.session;if("phoneNumber"in R)return xe("enroll"===L.type,v,"internal-error"),(yield function Qs(v,p){return Yt(v,"POST","/v2/accounts/mfaEnrollment:start",Ct(v,p))}(v,{idToken:L.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:C}})).phoneSessionInfo.sessionInfo;{xe("signin"===L.type,v,"internal-error");const q=(null===(T=R.multiFactorHint)||void 0===T?void 0:T.uid)||R.multiFactorUid;return xe(q,v,"missing-multi-factor-info"),(yield function ap(v,p){return Yt(v,"POST","/v2/accounts/mfaSignIn:start",Ct(v,p))}(v,{mfaPendingCredential:L.credential,mfaEnrollmentId:q,phoneSignInInfo:{recaptchaToken:C}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:L}=yield function xa(v,p){return bl.apply(this,arguments)}(v,{phoneNumber:R.phoneNumber,recaptchaToken:C});return L}}finally{m._reset()}}),Ll.apply(this,arguments)}function ea(){return(ea=(0,y.Z)(function*(v,p){yield Cl((0,j.m9)(v),p)})).apply(this,arguments)}let is=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=ze(m)}verifyPhoneNumber(m,T){return rs(this.auth,m,(0,j.m9)(T))}static credential(m,T){return Al._fromVerification(m,T)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:T,temporaryProof:C}=m;return T&&C?Al._fromTokenResponse(T,C):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function mi(v,p){return p?pr(p):(xe(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class or extends Pi{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Sa(p,this._buildIdpRequest())}_linkToIdToken(p,m){return Sa(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return Sa(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function ta(v){return xl(v.auth,new or(v),v.bypassAuthState)}function eo(v){const{auth:p,user:m}=v;return xe(m,p,"internal-error"),Hf(m,new or(v),v.bypassAuthState)}function ss(v){return br.apply(this,arguments)}function br(){return(br=(0,y.Z)(function*(v){const{auth:p,user:m}=v;return xe(m,p,"internal-error"),Cl(m,new or(v),v.bypassAuthState)})).apply(this,arguments)}class Fa{constructor(p,m,T,C,R=!1){this.auth=p,this.resolver=T,this.user=C,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,y.Z)(function*(T,C){p.pendingPromise={resolve:T,reject:C};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(R){p.reject(R)}});return function(T,C){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,y.Z)(function*(){const{urlResponse:T,sessionId:C,postBody:R,tenantId:L,error:q,type:ve}=p;if(q)return void m.reject(q);const pe={auth:m.auth,requestUri:T,sessionId:C,tenantId:L||void 0,postBody:R||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(ve)(pe))}catch(We){m.reject(We)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return ta;case"linkViaPopup":case"linkViaRedirect":return ss;case"reauthViaPopup":case"reauthViaRedirect":return eo;default:ct(this.auth,"internal-error")}}resolve(p){Pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const c_=new ft(2e3,1e4);function os(){return(os=(0,y.Z)(function*(v,p,m){const T=ze(v);Hn(v,p,Ko);const C=mi(T,m);return new na(T,"signInViaPopup",p,C).executeNotNull()})).apply(this,arguments)}function On(){return(On=(0,y.Z)(function*(v,p,m){const T=(0,j.m9)(v);Hn(T.auth,p,Ko);const C=mi(T.auth,m);return new na(T.auth,"reauthViaPopup",p,C,T).executeNotNull()})).apply(this,arguments)}function Ud(){return(Ud=(0,y.Z)(function*(v,p,m){const T=(0,j.m9)(v);Hn(T.auth,p,Ko);const C=mi(T.auth,m);return new na(T.auth,"linkViaPopup",p,C,T).executeNotNull()})).apply(this,arguments)}let na=(()=>{class v extends Fa{constructor(m,T,C,R,L){super(m,T,R,L),this.provider=C,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,y.Z)(function*(){const T=yield m.execute();return xe(T,m.auth,"internal-error"),T})()}onExecution(){var m=this;return(0,y.Z)(function*(){Pr(1===m.filter.length,"Popup operations only handle one event");const T=kl();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],T),m.authWindow.associatedEvent=T,m.resolver._originValidation(m.auth).catch(C=>{m.reject(C)}),m.resolver._isIframeWebStorageSupported(m.auth,C=>{C||m.reject(Qt(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Qt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var T,C;this.pollId=null!==(C=null===(T=this.authWindow)||void 0===T?void 0:T.window)&&void 0!==C&&C.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Qt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(m,c_.get())};m()}}return v.currentPopupAction=null,v})();const ra="pendingRedirect",Bd=new Map;class FI extends Fa{constructor(p,m,T=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,T),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,y.Z)(function*(){let T=Bd.get(m.auth._key());if(!T){try{const R=(yield function h_(v,p){return jt.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;T=()=>Promise.resolve(R)}catch(C){T=()=>Promise.reject(C)}Bd.set(m.auth._key(),T)}return m.bypassAuthState||Bd.set(m.auth._key(),()=>Promise.resolve(null)),T()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,T=this;return(0,y.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(T,p);if("unknown"!==p.type){if(p.eventId){const C=yield T.auth._redirectUserForId(p.eventId);if(C)return T.user=C,m().call(T,p);T.resolve(null)}}else T.resolve(null)})()}onExecution(){return(0,y.Z)(function*(){})()}cleanUp(){}}function jt(){return(jt=(0,y.Z)(function*(v,p){const m=no(p),T=Ul(v);if(!(yield T._isAvailable()))return!1;const C="true"===(yield T._get(m));return yield T._remove(m),C})).apply(this,arguments)}function Vl(v,p){return f_.apply(this,arguments)}function f_(){return(f_=(0,y.Z)(function*(v,p){return Ul(v)._set(no(p),"true")})).apply(this,arguments)}function p_(v,p){Bd.set(v._key(),p)}function Ul(v){return pr(v._redirectPersistence)}function no(v){return ml(ra,v.config.apiKey,v.name)}function LI(v,p,m){return function ar(v,p,m){return ro.apply(this,arguments)}(v,p,m)}function ro(){return(ro=(0,y.Z)(function*(v,p,m){const T=ze(v);Hn(v,p,Ko),yield T._initializationPromise;const C=mi(T,m);return yield Vl(C,T),C._openRedirect(T,p,"signInViaRedirect")})).apply(this,arguments)}function Ju(v,p,m){return function m_(v,p,m){return oi.apply(this,arguments)}(v,p,m)}function oi(){return(oi=(0,y.Z)(function*(v,p,m){const T=(0,j.m9)(v);Hn(T.auth,p,Ko),yield T.auth._initializationPromise;const C=mi(T.auth,m);yield Vl(C,T.auth);const R=yield vn(T);return C._openRedirect(T.auth,p,"reauthViaRedirect",R)})).apply(this,arguments)}function ec(v,p,m){return function lp(v,p,m){return Bl.apply(this,arguments)}(v,p,m)}function Bl(){return(Bl=(0,y.Z)(function*(v,p,m){const T=(0,j.m9)(v);Hn(T.auth,p,Ko),yield T.auth._initializationPromise;const C=mi(T.auth,m);yield wo(!1,T,p.providerId),yield Vl(C,T.auth);const R=yield vn(T);return C._openRedirect(T.auth,p,"linkViaRedirect",R)})).apply(this,arguments)}function jd(){return(jd=(0,y.Z)(function*(v,p){return yield ze(v)._initializationPromise,$l(v,p,!1)})).apply(this,arguments)}function $l(v,p){return ia.apply(this,arguments)}function ia(){return(ia=(0,y.Z)(function*(v,p,m=!1){const T=ze(v),C=mi(T,p),L=yield new FI(T,C,m).execute();return L&&!m&&(delete L.user._redirectEventId,yield T._persistUserIfCurrent(L.user),yield T._setRedirectUser(null,p)),L})).apply(this,arguments)}function vn(v){return _r.apply(this,arguments)}function _r(){return(_r=(0,y.Z)(function*(v){const p=kl(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class Fi{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(T=>{this.isEventForConsumer(p,T)&&(m=!0,this.sendToConsumer(p,T),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function cp(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return La(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var T;if(p.error&&!La(p)){const C=(null===(T=p.error.code)||void 0===T?void 0:T.split("auth/")[1])||"internal-error";m.onError(Qt(this.auth,C))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const T=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&T}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(VI(p))}saveEventToCache(p){this.cachedEventUids.add(VI(p)),this.lastProcessedEventTime=Date.now()}}function VI(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function La({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===p?.code}function g_(v){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,y.Z)(function*(v,p={}){return Yt(v,"GET","/v1/projects",p)})).apply(this,arguments)}const tc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,__=/^https?/;function nc(){return(nc=(0,y.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield g_(v);for(const m of p)try{if(Hl(m))return}catch{}ct(v,"unauthorized-domain")})).apply(this,arguments)}function Hl(v){const p=Kr(),{protocol:m,hostname:T}=new URL(p);if(v.startsWith("chrome-extension://")){const L=new URL(v);return""===L.hostname&&""===T?"chrome-extension:"===m&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&L.hostname===T}if(!__.test(m))return!1;if(tc.test(v))return T===v;const C=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+C+"|"+C+")$","i").test(T)}const Gd=new ft(3e4,6e4);function zl(){const v=gr().___jsl;if(v?.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let Va=null;const v_=new ft(5e3,15e3),rc="__/auth/iframe",Hd="emulator/auth/iframe",E_={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},BI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jI(v){const p=v.config;xe(p.authDomain,v,"auth-domain-config-required");const m=p.emulator?St(p,Hd):`https://${v.config.authDomain}/${rc}`,T={apiKey:p.apiKey,appName:v.name,v:se.SDK_VERSION},C=BI.get(v.config.apiHost);C&&(T.eid=C);const R=v._getFrameworks();return R.length&&(T.fw=R.join(",")),`${m}?${(0,j.xO)(T).slice(1)}`}function Ua(){return Ua=(0,y.Z)(function*(v){const p=yield function UI(v){return Va=Va||function y_(v){return new Promise((p,m)=>{var T,C,R;function L(){zl(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{zl(),m(Qt(v,"network-request-failed"))},timeout:Gd.get()})}if(null!==(C=null===(T=gr().gapi)||void 0===T?void 0:T.iframes)&&void 0!==C&&C.Iframe)p(gapi.iframes.getContext());else{if(null===(R=gr().gapi)||void 0===R||!R.load){const q=ni("iframefcb");return gr()[q]=()=>{gapi.load?L():m(Qt(v,"network-request-failed"))},wr(`https://apis.google.com/js/api.js?onload=${q}`).catch(ve=>m(ve))}L()}}).catch(p=>{throw Va=null,p})}(v),Va}(v),m=gr().gapi;return xe(m,v,"internal-error"),p.open({where:document.body,url:jI(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:E_,dontclear:!0},T=>new Promise(function(){var C=(0,y.Z)(function*(R,L){yield T.restyle({setHideOnLeave:!1});const q=Qt(v,"network-request-failed"),ve=gr().setTimeout(()=>{L(q)},v_.get());function pe(){gr().clearTimeout(ve),R(T)}T.ping(pe).then(pe,()=>{L(q)})});return function(R,L){return C.apply(this,arguments)}}()))}),Ua.apply(this,arguments)}const $I={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class I_{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Ba="__/auth/handler",Kl="emulator/auth/handler",hp=encodeURIComponent("fac");function ic(v,p,m,T,C,R){return fp.apply(this,arguments)}function fp(){return(fp=(0,y.Z)(function*(v,p,m,T,C,R){xe(v.config.authDomain,v,"auth-domain-config-required"),xe(v.config.apiKey,v,"invalid-api-key");const L={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:T,v:se.SDK_VERSION,eventId:C};if(p instanceof Ko){p.setDefaultLanguage(v.languageCode),L.providerId=p.providerId||"",(0,j.xb)(p.getCustomParameters())||(L.customParameters=JSON.stringify(p.getCustomParameters()));for(const[We,Qe]of Object.entries(R||{}))L[We]=Qe}if(p instanceof $u){const We=p.getScopes().filter(Qe=>""!==Qe);We.length>0&&(L.scopes=We.join(","))}v.tenantId&&(L.tid=v.tenantId);const q=L;for(const We of Object.keys(q))void 0===q[We]&&delete q[We];const ve=yield v._getAppCheckToken(),pe=ve?`#${hp}=${encodeURIComponent(ve)}`:"";return`${function b_({config:v}){return v.emulator?St(v,Kl):`https://${v.authDomain}/${Ba}`}(v)}?${(0,j.xO)(q).slice(1)}${pe}`})).apply(this,arguments)}const sc="webStorageSupport",A_=class zI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Xs,this._completeRedirectFn=$l,this._overrideRedirectResult=p_}_openPopup(p,m,T,C){var R=this;return(0,y.Z)(function*(){var L;Pr(null===(L=R.eventManagers[p._key()])||void 0===L?void 0:L.manager,"_initialize() not called before _openPopup()");const q=yield ic(p,m,T,Kr(),C);return function T_(v,p,m,T=500,C=600){const R=Math.max((window.screen.availHeight-C)/2,0).toString(),L=Math.max((window.screen.availWidth-T)/2,0).toString();let q="";const ve=Object.assign(Object.assign({},$I),{width:T.toString(),height:C.toString(),top:R,left:L}),pe=(0,j.z$)().toLowerCase();m&&(q=xg(pe)?"_blank":m),Pf(pe)&&(p=p||"http://localhost",ve.scrollbars="yes");const We=Object.entries(ve).reduce((Zt,[yr,za])=>`${Zt}${yr}=${za},`,"");if(function oI(v=(0,j.z$)()){var p;return Uu(v)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(pe)&&"_self"!==q)return function w_(v,p){const m=document.createElement("a");m.href=v,m.target=p;const T=document.createEvent("MouseEvent");T.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(T)}(p||"",q),new I_(null);const Qe=window.open(p||"",q,We);xe(Qe,v,"popup-blocked");try{Qe.focus()}catch{}return new I_(Qe)}(p,q,kl())})()}_openRedirect(p,m,T,C){var R=this;return(0,y.Z)(function*(){return yield R._originValidation(p),function fi(v){gr().location.href=v}(yield ic(p,m,T,Kr(),C)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:C,promise:R}=this.eventManagers[m];return C?Promise.resolve(C):(Pr(R,"If manager is not set, promise should be"),R)}const T=this.initAndGetManager(p);return this.eventManagers[m]={promise:T},T.catch(()=>{delete this.eventManagers[m]}),T}initAndGetManager(p){var m=this;return(0,y.Z)(function*(){const T=yield function ql(v){return Ua.apply(this,arguments)}(p),C=new Fi(p);return T.register("authEvent",R=>(xe(R?.authEvent,p,"invalid-auth-event"),{status:C.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:C},m.iframes[p._key()]=T,C})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(sc,{type:sc},C=>{var R;const L=null===(R=C?.[0])||void 0===R?void 0:R[sc];void 0!==L&&m(!!L),ct(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function $d(v){return nc.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return md()||Ri()||Uu()}};class pp{constructor(p){this.factorId=p}_process(p,m,T){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,T);case"signin":return this._finalizeSignIn(p,m.credential);default:return rr("unexpected MultiFactorSessionType")}}}class mp extends pp{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new mp(p)}_finalizeEnroll(p,m,T){return function Jg(v,p){return Yt(v,"POST","/v2/accounts/mfaEnrollment:finalize",Ct(v,p))}(p,{idToken:m,displayName:T,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function SD(v,p){return Yt(v,"POST","/v2/accounts/mfaSignIn:finalize",Ct(v,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let zd=(()=>{class v{constructor(){}static assertion(m){return mp._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var C_="@firebase/auth";class io{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,y.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(T=>{p(T?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);m&&(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function sa(){return window}(0,j.Pz)("authIdTokenMaxAge"),function Co(v){(0,se._registerComponent)(new Rn.wA("auth",(p,{options:m})=>{const T=p.getProvider("app").getImmediate(),C=p.getProvider("heartbeat"),R=p.getProvider("app-check-internal"),{apiKey:L,authDomain:q}=T.options;xe(L&&!L.includes(":"),"invalid-api-key",{appName:T.name});const ve={apiKey:L,authDomain:q,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Pg(v)},pe=new mr(T,C,R,ve);return function ws(v,p){const m=p?.persistence||[],T=(Array.isArray(m)?m:[m]).map(pr);p?.errorMap&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(T,p?.popupRedirectResolver)}(pe,m),pe},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,T)=>{p.getProvider("auth-internal").initialize()})),(0,se._registerComponent)(new Rn.wA("auth-internal",p=>{const m=ze(p.getProvider("auth").getImmediate());return new io(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,se.registerVersion)(C_,"0.23.2",function Zl(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,se.registerVersion)(C_,"0.23.2","esm2017")}("Browser");function ls(){return ls=(0,y.Z)(function*(v,p,m){var T;const{BuildInfo:C}=sa();Pr(p.sessionId,"AuthEvent did not contain a session ID");const R=yield function RD(v){return _p.apply(this,arguments)}(p.sessionId),L={};return Uu()?L.ibi=C.packageName:Vu()?L.apn=C.packageName:ct(v,"operation-not-supported-in-this-environment"),C.displayName&&(L.appDisplayName=C.displayName),L.sessionId=R,ic(v,m,p.type,void 0,null!==(T=p.eventId)&&void 0!==T?T:void 0,L)}),ls.apply(this,arguments)}function gp(){return(gp=(0,y.Z)(function*(v){const{BuildInfo:p}=sa(),m={};Uu()?m.iosBundleId=p.packageName:Vu()?m.androidPackageName=p.packageName:ct(v,"operation-not-supported-in-this-environment"),yield g_(v,m)})).apply(this,arguments)}function uc(){return(uc=(0,y.Z)(function*(v,p,m){const{cordova:T}=sa();let C=()=>{};try{yield new Promise((R,L)=>{let q=null;function ve(){var Qe;R();const Zt=null===(Qe=T.plugins.browsertab)||void 0===Qe?void 0:Qe.close;"function"==typeof Zt&&Zt(),"function"==typeof m?.close&&m.close()}function pe(){q||(q=window.setTimeout(()=>{L(Qt(v,"redirect-cancelled-by-user"))},2e3))}function We(){"visible"===document?.visibilityState&&pe()}p.addPassiveListener(ve),document.addEventListener("resume",pe,!1),Vu()&&document.addEventListener("visibilitychange",We,!1),C=()=>{p.removePassiveListener(ve),document.removeEventListener("resume",pe,!1),document.removeEventListener("visibilitychange",We,!1),q&&window.clearTimeout(q)}})}finally{C()}})).apply(this,arguments)}function _p(){return(_p=(0,y.Z)(function*(v){const p=function Xl(v){if(Pr(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const p=new ArrayBuffer(v.length),m=new Uint8Array(p);for(let T=0;T<v.length;T++)m[T]=v.charCodeAt(T);return m}(v),m=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(m)).map(C=>C.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class yp extends Fi{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(p)),super.onEvent(p)}initialized(){var p=this;return(0,y.Z)(function*(){yield p.initPromise})()}}function oa(v){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,y.Z)(function*(v){const p=yield so()._get(dc(v));return p&&(yield so()._remove(dc(v))),p})).apply(this,arguments)}function cc(){const v=[];for(let m=0;m<20;m++){const T=Math.floor(62*Math.random());v.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(T))}return v.join("")}function so(){return pr(Nl)}function dc(v){return ml("authEvent",v.config.apiKey,v.name)}function fc(v){if(!v?.includes("?"))return{};const[p,...m]=v.split("?");return(0,j.zd)(m.join("?"))}const Yd=class M_{constructor(){this._redirectPersistence=Xs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=$l,this._overrideRedirectResult=p_}_initialize(p){var m=this;return(0,y.Z)(function*(){const T=p._key();let C=m.eventManagers.get(T);return C||(C=new yp(p),m.eventManagers.set(T,C),m.attachCallbackListeners(p,C)),C})()}_openPopup(p){ct(p,"operation-not-supported-in-this-environment")}_openRedirect(p,m,T,C){var R=this;return(0,y.Z)(function*(){!function x_(v){var p,m,T,C,R,L,q,ve,pe,We;const Qe=sa();xe("function"==typeof(null===(p=Qe?.universalLinks)||void 0===p?void 0:p.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),xe(typeof(null===(m=Qe?.BuildInfo)||void 0===m?void 0:m.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),xe("function"==typeof(null===(R=null===(C=null===(T=Qe?.cordova)||void 0===T?void 0:T.plugins)||void 0===C?void 0:C.browsertab)||void 0===R?void 0:R.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),xe("function"==typeof(null===(ve=null===(q=null===(L=Qe?.cordova)||void 0===L?void 0:L.plugins)||void 0===q?void 0:q.browsertab)||void 0===ve?void 0:ve.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),xe("function"==typeof(null===(We=null===(pe=Qe?.cordova)||void 0===pe?void 0:pe.InAppBrowser)||void 0===We?void 0:We.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const L=yield R._initialize(p);yield L.initialized(),L.resetRedirect(),function Xu(){Bd.clear()}(),yield R._originValidation(p);const q=function Qr(v,p,m=null){return{type:p,eventId:m,urlResponse:null,sessionId:cc(),postBody:null,tenantId:v.tenantId,error:Qt(v,"no-auth-event")}}(p,T,C);yield function Rs(v,p){return so()._set(dc(v),p)}(p,q);const ve=yield function Zd(v,p,m){return ls.apply(this,arguments)}(p,q,m),pe=yield function ZI(v){const{cordova:p}=sa();return new Promise(m=>{p.plugins.browsertab.isAvailable(T=>{let C=null;T?p.plugins.browsertab.openUrl(v):C=p.InAppBrowser.open(v,function kf(v=(0,j.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),m(C)})})}(ve);return function S_(v,p,m){return uc.apply(this,arguments)}(p,L,pe)})()}_isIframeWebStorageSupported(p,m){throw new Error("Method not implemented.")}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function KI(v){return gp.apply(this,arguments)}(p)),this.originValidationPromises[m]}attachCallbackListeners(p,m){const{universalLinks:T,handleOpenURL:C,BuildInfo:R}=sa(),L=setTimeout((0,y.Z)(function*(){yield oa(p),m.onEvent(Xd())}),500),q=function(){var We=(0,y.Z)(function*(Qe){clearTimeout(L);const Zt=yield oa(p);let yr=null;Zt&&Qe?.url&&(yr=function Fr(v,p){var m,T;const C=function hc(v){const p=fc(v),m=p.link?decodeURIComponent(p.link):void 0,T=fc(m).link,C=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return fc(C).link||C||T||m||v}(p);if(C.includes("/__/auth/callback")){const R=fc(C),L=R.firebaseError?function QI(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(R.firebaseError)):null,q=null===(T=null===(m=L?.code)||void 0===m?void 0:m.split("auth/"))||void 0===T?void 0:T[1],ve=q?Qt(q):null;return ve?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:ve,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:C,postBody:null}}return null}(Zt,Qe.url)),m.onEvent(yr||Xd())});return function(Zt){return We.apply(this,arguments)}}();typeof T<"u"&&"function"==typeof T.subscribe&&T.subscribe(null,q);const ve=C,pe=`${R.packageName.toLowerCase()}://`;sa().handleOpenURL=function(){var We=(0,y.Z)(function*(Qe){if(Qe.toLowerCase().startsWith(pe)&&q({url:Qe}),"function"==typeof ve)try{ve(Qe)}catch(Zt){console.error(Zt)}});return function(Qe){return We.apply(this,arguments)}}()}};function Xd(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Qt("no-auth-event")}}function So(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function N_(v=(0,j.z$)()){return!("file:"!==So()&&"ionic:"!==So()&&"capacitor:"!==So()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function tu(){try{const v=self.localStorage,p=kl();if(v)return v.setItem(p,"1"),v.removeItem(p),!function ja(v=(0,j.z$)()){return function Jd(){return(0,j.w1)()&&11===document?.documentMode}()||function Ip(v=(0,j.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,j.hl)()}catch{return mc()&&(0,j.hl)()}return!1}function mc(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function nu(){return(function pc(){return"http:"===So()||"https:"===So()}()||(0,j.ru)()||N_())&&!function k_(){return(0,j.b$)()||(0,j.UG)()}()&&tu()&&!mc()}function gc(){return N_()&&typeof document<"u"}function O_(){return(O_=(0,y.Z)(function*(){return!!gc()&&new Promise(v=>{const p=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),v(!0)})})})).apply(this,arguments)}const us={LOCAL:"local",NONE:"none",SESSION:"session"},_c=xe,YI="persistence";function yc(v){return ru.apply(this,arguments)}function ru(){return(ru=(0,y.Z)(function*(v){yield v._initializationPromise;const p=L_(),m=ml(YI,v.config.apiKey,v.name);p&&p.setItem(m,v._getPersistence())})).apply(this,arguments)}function L_(){var v;try{return(null===(v=function PD(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const vc=xe;class xo{constructor(){this.browserResolver=pr(A_),this.cordovaResolver=pr(Yd),this.underlyingResolver=null,this._redirectPersistence=Xs,this._completeRedirectFn=$l,this._overrideRedirectResult=p_}_initialize(p){var m=this;return(0,y.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,m,T,C){var R=this;return(0,y.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(p,m,T,C)})()}_openRedirect(p,m,T,C){var R=this;return(0,y.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(p,m,T,C)})()}_isIframeWebStorageSupported(p,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,m)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return gc()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return vc(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,y.Z)(function*(){if(p.underlyingResolver)return;const m=yield function MD(){return O_.apply(this,arguments)}();p.underlyingResolver=m?p.cordovaResolver:p.browserResolver})()}}function Tp(v){return v.unwrap()}function wp(v){return V_(v)}function V_(v){const{_tokenResponse:p}=v instanceof j.ZR?v.customData:v;if(!p)return null;if(!(v instanceof j.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return is.credentialFromResult(v);const m=p.providerId;if(!m||m===Mn.PASSWORD)return null;let T;switch(m){case Mn.GOOGLE:T=cI;break;case Mn.FACEBOOK:T=vD;break;case Mn.GITHUB:T=dI;break;case Mn.TWITTER:T=ED;break;default:const{oauthIdToken:C,oauthAccessToken:R,oauthTokenSecret:L,pendingToken:q,nonce:ve}=p;return R||L||C||q?q?m.startsWith("saml.")?Dl._create(m,q):ts._fromParams({providerId:m,signInMethod:m,pendingToken:q,idToken:C,accessToken:R}):new vd(m).credential({idToken:C,accessToken:R,rawNonce:ve}):null}return v instanceof j.ZR?T.credentialFromError(v):T.credentialFromResult(v)}function Vi(v,p){return p.catch(m=>{throw m instanceof j.ZR&&function Ec(v,p){var m;const T=null===(m=p.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===p?.code)p.resolver=new U_(v,function ii(v,p){var m;const T=(0,j.m9)(v),C=p;return xe(p.customData.operationType,T,"argument-error"),xe(null===(m=C.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,T,"argument-error"),Md._fromError(T,C)}(v,p));else if(T){const C=V_(p),R=p;C&&(R.credential=C,R.tenantId=T.tenantId||void 0,R.email=T.email||void 0,R.phoneNumber=T.phoneNumber||void 0)}}(v,m),m}).then(m=>{const C=m.user;return{operationType:m.operationType,credential:wp(m),additionalUserInfo:we(m),user:oo.getOrCreate(C)}})}function Ms(v,p){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,y.Z)(function*(v,p){const m=yield p;return{verificationId:m.verificationId,confirm:T=>Vi(v,m.confirm(T))}})).apply(this,arguments)}class U_{constructor(p,m){this.resolver=m,this.auth=function $a(v){return v.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return Vi(Tp(this.auth),this.resolver.resolveSignIn(p))}}class oo{constructor(p){this._delegate=p,this.multiFactor=function CI(v){const p=(0,j.m9)(v);return t_.has(p)||t_.set(p,qu._fromUser(p)),t_.get(p)}(p)}static getOrCreate(p){return oo.USER_MAP.has(p)||oo.USER_MAP.set(p,new oo(p)),oo.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var m=this;return(0,y.Z)(function*(){return Vi(m.auth,Gu(m._delegate,p))})()}linkWithPhoneNumber(p,m){var T=this;return(0,y.Z)(function*(){return Ms(T.auth,function Fl(v,p,m){return Vd.apply(this,arguments)}(T._delegate,p,m))})()}linkWithPopup(p){var m=this;return(0,y.Z)(function*(){return Vi(m.auth,function as(v,p,m){return Ud.apply(this,arguments)}(m._delegate,p,xo))})()}linkWithRedirect(p){var m=this;return(0,y.Z)(function*(){return yield yc(ze(m.auth)),ec(m._delegate,p,xo)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var m=this;return(0,y.Z)(function*(){return Vi(m.auth,Id(m._delegate,p))})()}reauthenticateWithPhoneNumber(p,m){return Ms(this.auth,function u_(v,p,m){return Jo.apply(this,arguments)}(this._delegate,p,m))}reauthenticateWithPopup(p){return Vi(this.auth,function to(v,p,m){return On.apply(this,arguments)}(this._delegate,p,xo))}reauthenticateWithRedirect(p){var m=this;return(0,y.Z)(function*(){return yield yc(ze(m.auth)),Ju(m._delegate,p,xo)})()}sendEmailVerification(p){return function Yf(v,p){return Hu.apply(this,arguments)}(this._delegate,p)}unlink(p){var m=this;return(0,y.Z)(function*(){return yield function Gg(v,p){return ns.apply(this,arguments)}(m._delegate,p),m})()}updateEmail(p){return function bD(v,p){return Qg((0,j.m9)(v),p,null)}(this._delegate,p)}updatePassword(p){return function II(v,p){return Qg((0,j.m9)(v),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function si(v,p){return ea.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function Pt(v,p){return Sd.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,m){return function Xf(v,p,m){return Ml.apply(this,arguments)}(this._delegate,p,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}oo.USER_MAP=new WeakMap;const ao=xe;let aa=(()=>{class v{constructor(m,T){if(this.app=m,T.isInitialized())return this._delegate=T.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:C}=m.options;ao(C,"invalid-api-key",{appName:m.name}),ao(C,"invalid-api-key",{appName:m.name});const R=typeof window<"u"?xo:void 0;this._delegate=T.initialize({options:{persistence:eh(C,m.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(Fe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?oo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,T){!function _l(v,p,m){const T=ze(v);xe(T._canInitEmulator,T,"emulator-config-failed"),xe(/^https?:\/\//.test(p),T,"invalid-emulator-scheme");const C=!!m?.disableWarnings,R=Nr(p),{host:L,port:q}=function yl(v){const p=Nr(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!m)return{host:"",port:null};const T=m[2].split("@").pop()||"",C=/^(\[[^\]]+\])(:|$)/.exec(T);if(C){const R=C[1];return{host:R,port:zn(T.substr(R.length+1))}}{const[R,L]=T.split(":");return{host:R,port:zn(L)}}}(p);T.config.emulator={url:`${R}//${L}${null===q?"":`:${q}`}/`},T.settings.appVerificationDisabledForTesting=!0,T.emulatorConfig=Object.freeze({host:L,port:q,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:C})}),C||function vl(){function v(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,m,T)}applyActionCode(m){return function wD(v,p){return bd.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return yI(this._delegate,m)}confirmPasswordReset(m,T){return function _I(v,p,m){return Wf.apply(this,arguments)}(this._delegate,m,T)}createUserWithEmailAndPassword(m,T){var C=this;return(0,y.Z)(function*(){return Vi(C._delegate,function Pn(v,p,m){return Rl.apply(this,arguments)}(C._delegate,m,T))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function Qf(v,p){return Ds.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function Zg(v,p){const m=Uf.parseLink(p);return"EMAIL_SIGNIN"===m?.operation}(0,m)}getRedirectResult(){var m=this;return(0,y.Z)(function*(){ao(nu(),m._delegate,"operation-not-supported-in-this-environment");const T=yield function jl(v,p){return jd.apply(this,arguments)}(m._delegate,xo);return T?Vi(m._delegate,Promise.resolve(T)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function vp(v,p){ze(v)._logFramework(p)}(this._delegate,m)}onAuthStateChanged(m,T,C){const{next:R,error:L,complete:q}=bp(m,T,C);return this._delegate.onAuthStateChanged(R,L,q)}onIdTokenChanged(m,T,C){const{next:R,error:L,complete:q}=bp(m,T,C);return this._delegate.onIdTokenChanged(R,L,q)}sendSignInLinkToEmail(m,T){return function Zr(v,p,m){return Ma.apply(this,arguments)}(this._delegate,m,T)}sendPasswordResetEmail(m,T){return function gI(v,p,m){return Kg.apply(this,arguments)}(this._delegate,m,T||void 0)}setPersistence(m){var T=this;return(0,y.Z)(function*(){let C;switch(function F_(v,p){_c(Object.values(us).includes(p),v,"invalid-persistence-type"),(0,j.b$)()?_c(p!==us.SESSION,v,"unsupported-persistence-type"):(0,j.UG)()?_c(p===us.NONE,v,"unsupported-persistence-type"):mc()?_c(p===us.NONE||p===us.LOCAL&&(0,j.hl)(),v,"unsupported-persistence-type"):_c(p===us.NONE||tu(),v,"unsupported-persistence-type")}(T._delegate,m),m){case us.SESSION:C=Xs;break;case us.LOCAL:C=(yield pr(Zu)._isAvailable())?Zu:Nl;break;case us.NONE:C=wa;break;default:return ct("argument-error",{appName:T._delegate.name})}return T._delegate.setPersistence(C)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return Vi(this._delegate,function hI(v){return $f.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return Vi(this._delegate,zg(this._delegate,m))}signInWithCustomToken(m){return Vi(this._delegate,function TD(v,p){return zf.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,T){return Vi(this._delegate,function Ad(v,p,m){return zg((0,j.m9)(v),jg.credential(p,m))}(this._delegate,m,T))}signInWithEmailLink(m,T){return Vi(this._delegate,function bo(v,p,m){return ri.apply(this,arguments)}(this._delegate,m,T))}signInWithPhoneNumber(m,T){return Ms(this._delegate,function l_(v,p,m){return Xo.apply(this,arguments)}(this._delegate,m,T))}signInWithPopup(m){var T=this;return(0,y.Z)(function*(){return ao(nu(),T._delegate,"operation-not-supported-in-this-environment"),Vi(T._delegate,function d_(v,p,m){return os.apply(this,arguments)}(T._delegate,m,xo))})()}signInWithRedirect(m){var T=this;return(0,y.Z)(function*(){return ao(nu(),T._delegate,"operation-not-supported-in-this-environment"),yield yc(T._delegate),LI(T._delegate,m,xo)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function vI(v,p){return Kf.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=us,v})();function bp(v,p,m){let T=v;"function"!=typeof v&&({next:T,error:p,complete:m}=v);const C=T;return{next:L=>C(L&&oo.getOrCreate(L)),error:p,complete:m}}function eh(v,p){const m=function Li(v,p){const m=L_();if(!m)return[];const T=ml(YI,v,p);switch(m.getItem(T)){case us.NONE:return[wa];case us.LOCAL:return[Zu,Xs];case us.SESSION:return[Xs];default:return[]}}(v,p);if(typeof self<"u"&&!m.includes(Zu)&&m.push(Zu),typeof window<"u")for(const T of[Nl,Xs])m.includes(T)||m.push(T);return m.includes(wa)||m.push(wa),m}class Ha{constructor(){this.providerId="phone",this._delegate=new is(Tp(Q.Z.auth()))}static credential(p,m){return is.credential(p,m)}verifyPhoneNumber(p,m){return this._delegate.verifyPhoneNumber(p,m)}unwrap(){return this._delegate}}Ha.PHONE_SIGN_IN_METHOD=is.PHONE_SIGN_IN_METHOD,Ha.PROVIDER_ID=is.PROVIDER_ID;const B_=xe;class Ap{constructor(p,m,T=Q.Z.app()){var C;B_(null===(C=T.options)||void 0===C?void 0:C.apiKey,"invalid-api-key",{appName:T.name}),this._delegate=new OI(p,m,T.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function XI(v){v.INTERNAL.registerComponent(new Rn.wA("auth-compat",p=>{const m=p.getProvider("app-compat").getImmediate(),T=p.getProvider("auth");return new aa(m,T)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:jg,FacebookAuthProvider:vD,GithubAuthProvider:dI,GoogleAuthProvider:cI,OAuthProvider:vd,SAMLAuthProvider:kn,PhoneAuthProvider:Ha,PhoneMultiFactorGenerator:zd,RecaptchaVerifier:Ap,TwitterAuthProvider:ED,Auth:aa,AuthCredential:Pi,Error:j.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.4.2")}(Q.Z)},4537:(vt,Re,F)=>{F.d(Re,{H0:()=>Ke,wA:()=>j});var y=F(5861),Q=F(9058);class j{constructor(B,H,Y){this.name=B,this.instanceFactory=H,this.type=Y,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const se="[DEFAULT]";class _e{constructor(B,H){this.name=B,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const H=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has(H)){const Y=new Q.BH;if(this.instancesDeferred.set(H,Y),this.isInitialized(H)||this.shouldAutoInitialize())try{const qe=this.getOrInitializeService({instanceIdentifier:H});qe&&Y.resolve(qe)}catch{}}return this.instancesDeferred.get(H).promise}getImmediate(B){var H;const Y=this.normalizeInstanceIdentifier(B?.identifier),qe=null!==(H=B?.optional)&&void 0!==H&&H;if(!this.isInitialized(Y)&&!this.shouldAutoInitialize()){if(qe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Y})}catch(Be){if(qe)return null;throw Be}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function Ue(Oe){return"EAGER"===Oe.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:se})}catch{}for(const[H,Y]of this.instancesDeferred.entries()){const qe=this.normalizeInstanceIdentifier(H);try{const Be=this.getOrInitializeService({instanceIdentifier:qe});Y.resolve(Be)}catch{}}}}clearInstance(B=se){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,y.Z)(function*(){const H=Array.from(B.instances.values());yield Promise.all([...H.filter(Y=>"INTERNAL"in Y).map(Y=>Y.INTERNAL.delete()),...H.filter(Y=>"_delete"in Y).map(Y=>Y._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=se){return this.instances.has(B)}getOptions(B=se){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:H={}}=B,Y=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(Y))throw Error(`${this.name}(${Y}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const qe=this.getOrInitializeService({instanceIdentifier:Y,options:H});for(const[Be,ut]of this.instancesDeferred.entries())Y===this.normalizeInstanceIdentifier(Be)&&ut.resolve(qe);return qe}onInit(B,H){var Y;const qe=this.normalizeInstanceIdentifier(H),Be=null!==(Y=this.onInitCallbacks.get(qe))&&void 0!==Y?Y:new Set;Be.add(B),this.onInitCallbacks.set(qe,Be);const ut=this.instances.get(qe);return ut&&B(ut,qe),()=>{Be.delete(B)}}invokeOnInitCallbacks(B,H){const Y=this.onInitCallbacks.get(H);if(Y)for(const qe of Y)try{qe(B,H)}catch{}}getOrInitializeService({instanceIdentifier:B,options:H={}}){let Y=this.instances.get(B);if(!Y&&this.component&&(Y=this.component.instanceFactory(this.container,{instanceIdentifier:(Oe=B,Oe===se?void 0:Oe),options:H}),this.instances.set(B,Y),this.instancesOptions.set(B,H),this.invokeOnInitCallbacks(Y,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,Y)}catch{}var Oe;return Y||null}normalizeInstanceIdentifier(B=se){return this.component?this.component.multipleInstances?B:se:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ke{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const H=this.getProvider(B.name);if(H.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);H.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const H=new _e(B,this);return this.providers.set(B,H),H}getProviders(){return Array.from(this.providers.values())}}},7879:(vt,Re,F)=>{F.d(Re,{Am:()=>Oe,Ub:()=>Ke,Yd:()=>Ue,in:()=>Q});const y=[];var Q=(()=>((Q=Q||{})[Q.DEBUG=0]="DEBUG",Q[Q.VERBOSE=1]="VERBOSE",Q[Q.INFO=2]="INFO",Q[Q.WARN=3]="WARN",Q[Q.ERROR=4]="ERROR",Q[Q.SILENT=5]="SILENT",Q))();const j={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},se=Q.INFO,_e={[Q.DEBUG]:"log",[Q.VERBOSE]:"log",[Q.INFO]:"info",[Q.WARN]:"warn",[Q.ERROR]:"error"},Te=(B,H,...Y)=>{if(H<B.logLevel)return;const qe=(new Date).toISOString(),Be=_e[H];if(!Be)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[Be](`[${qe}]  ${B.name}:`,...Y)};class Ue{constructor(H){this.name=H,this._logLevel=se,this._logHandler=Te,this._userLogHandler=null,y.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in Q))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?j[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,Q.DEBUG,...H),this._logHandler(this,Q.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,Q.VERBOSE,...H),this._logHandler(this,Q.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,Q.INFO,...H),this._logHandler(this,Q.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,Q.WARN,...H),this._logHandler(this,Q.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,Q.ERROR,...H),this._logHandler(this,Q.ERROR,...H)}}function Ke(B){y.forEach(H=>{H.setLogLevel(B)})}function Oe(B,H){for(const Y of y){let qe=null;H&&H.level&&(qe=j[H.level]),Y.userLogHandler=null===B?null:(Be,ut,...Me)=>{const Le=Me.map(je=>{if(null==je)return null;if("string"==typeof je)return je;if("number"==typeof je||"boolean"==typeof je)return je.toString();if(je instanceof Error)return je.message;try{return JSON.stringify(je)}catch{return null}}).filter(je=>je).join(" ");ut>=(qe??Be.logLevel)&&B({level:Q[ut].toLowerCase(),message:Le,args:Me,type:Be.name})}}}},1878:(vt,Re,F)=>{F.d(Re,{X3:()=>Dt});var y=F(5861);const Q=(X,be)=>be.some(Se=>X instanceof Se);let j,se;const Ue=new WeakMap,Ke=new WeakMap,Oe=new WeakMap,B=new WeakMap,H=new WeakMap;let Be={get(X,be,Se){if(X instanceof IDBTransaction){if("done"===be)return Ke.get(X);if("objectStoreNames"===be)return X.objectStoreNames||Oe.get(X);if("store"===be)return Se.objectStoreNames[1]?void 0:Se.objectStore(Se.objectStoreNames[0])}return je(X[be])},set:(X,be,Se)=>(X[be]=Se,!0),has:(X,be)=>X instanceof IDBTransaction&&("done"===be||"store"===be)||be in X};function Le(X){return"function"==typeof X?function Me(X){return X!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Te(){return se||(se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(X)?function(...be){return X.apply(gt(this),be),je(Ue.get(this))}:function(...be){return je(X.apply(gt(this),be))}:function(be,...Se){const Ot=X.call(gt(this),be,...Se);return Oe.set(Ot,be.sort?be.sort():[be]),je(Ot)}}(X):(X instanceof IDBTransaction&&function qe(X){if(Ke.has(X))return;const be=new Promise((Se,Ot)=>{const Fn=()=>{X.removeEventListener("complete",tr),X.removeEventListener("error",Rn),X.removeEventListener("abort",Rn)},tr=()=>{Se(),Fn()},Rn=()=>{Ot(X.error||new DOMException("AbortError","AbortError")),Fn()};X.addEventListener("complete",tr),X.addEventListener("error",Rn),X.addEventListener("abort",Rn)});Ke.set(X,be)}(X),Q(X,function _e(){return j||(j=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(X,Be):X)}function je(X){if(X instanceof IDBRequest)return function Y(X){const be=new Promise((Se,Ot)=>{const Fn=()=>{X.removeEventListener("success",tr),X.removeEventListener("error",Rn)},tr=()=>{Se(je(X.result)),Fn()},Rn=()=>{Ot(X.error),Fn()};X.addEventListener("success",tr),X.addEventListener("error",Rn)});return be.then(Se=>{Se instanceof IDBCursor&&Ue.set(Se,X)}).catch(()=>{}),H.set(be,X),be}(X);if(B.has(X))return B.get(X);const be=Le(X);return be!==X&&(B.set(X,be),H.set(be,X)),be}const gt=X=>H.get(X);function Dt(X,be,{blocked:Se,upgrade:Ot,blocking:Fn,terminated:tr}={}){const Rn=indexedDB.open(X,be),Tr=je(Rn);return Ot&&Rn.addEventListener("upgradeneeded",Mn=>{Ot(je(Rn.result),Mn.oldVersion,Mn.newVersion,je(Rn.transaction),Mn)}),Se&&Rn.addEventListener("blocked",Mn=>Se(Mn.oldVersion,Mn.newVersion,Mn)),Tr.then(Mn=>{tr&&Mn.addEventListener("close",()=>tr()),Fn&&Mn.addEventListener("versionchange",js=>Fn(js.oldVersion,js.newVersion,js))}).catch(()=>{}),Tr}const De=["get","getKey","getAll","getAllKeys","count"],J=["put","add","delete","clear"],he=new Map;function Ge(X,be){if(!(X instanceof IDBDatabase)||be in X||"string"!=typeof be)return;if(he.get(be))return he.get(be);const Se=be.replace(/FromIndex$/,""),Ot=be!==Se,Fn=J.includes(Se);if(!(Se in(Ot?IDBIndex:IDBObjectStore).prototype)||!Fn&&!De.includes(Se))return;const tr=function(){var Rn=(0,y.Z)(function*(Tr,...Mn){const js=this.transaction(Tr,Fn?"readwrite":"readonly");let ie=js.store;return Ot&&(ie=ie.index(Mn.shift())),(yield Promise.all([ie[Se](...Mn),Fn&&js.done]))[0]});return function(Mn){return Rn.apply(this,arguments)}}();return he.set(be,tr),tr}!function ut(X){Be=X(Be)}(X=>({...X,get:(be,Se,Ot)=>Ge(be,Se)||X.get(be,Se,Ot),has:(be,Se)=>!!Ge(be,Se)||X.has(be,Se)}))},5861:(vt,Re,F)=>{function y(j,se,_e,Te,Ue,Ke,Oe){try{var B=j[Ke](Oe),H=B.value}catch(Y){return void _e(Y)}B.done?se(H):Promise.resolve(H).then(Te,Ue)}function Q(j){return function(){var se=this,_e=arguments;return new Promise(function(Te,Ue){var Ke=j.apply(se,_e);function Oe(H){y(Ke,Te,Ue,Oe,B,"next",H)}function B(H){y(Ke,Te,Ue,Oe,B,"throw",H)}Oe(void 0)})}}F.d(Re,{Z:()=>Q})},7582:(vt,Re,F)=>{function se(ie,ue){var de={};for(var fe in ie)Object.prototype.hasOwnProperty.call(ie,fe)&&ue.indexOf(fe)<0&&(de[fe]=ie[fe]);if(null!=ie&&"function"==typeof Object.getOwnPropertySymbols){var Fe=0;for(fe=Object.getOwnPropertySymbols(ie);Fe<fe.length;Fe++)ue.indexOf(fe[Fe])<0&&Object.prototype.propertyIsEnumerable.call(ie,fe[Fe])&&(de[fe[Fe]]=ie[fe[Fe]])}return de}function Y(ie,ue,de,fe){return new(de||(de=Promise))(function(He,ht){function mt(un){try{Ft(fe.next(un))}catch(ct){ht(ct)}}function nr(un){try{Ft(fe.throw(un))}catch(ct){ht(ct)}}function Ft(un){un.done?He(un.value):function Fe(He){return He instanceof de?He:new de(function(ht){ht(He)})}(un.value).then(mt,nr)}Ft((fe=fe.apply(ie,ue||[])).next())})}function oe(ie){return this instanceof oe?(this.v=ie,this):new oe(ie)}function De(ie,ue,de){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Fe,fe=de.apply(ie,ue||[]),He=[];return Fe={},ht("next"),ht("throw"),ht("return"),Fe[Symbol.asyncIterator]=function(){return this},Fe;function ht(Qt){fe[Qt]&&(Fe[Qt]=function(fr){return new Promise(function(Hn,Tn){He.push([Qt,fr,Hn,Tn])>1||mt(Qt,fr)})})}function mt(Qt,fr){try{!function nr(Qt){Qt.value instanceof oe?Promise.resolve(Qt.value.v).then(Ft,un):ct(He[0][2],Qt)}(fe[Qt](fr))}catch(Hn){ct(He[0][3],Hn)}}function Ft(Qt){mt("next",Qt)}function un(Qt){mt("throw",Qt)}function ct(Qt,fr){Qt(fr),He.shift(),He.length&&mt(He[0][0],He[0][1])}}function he(ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var de,ue=ie[Symbol.asyncIterator];return ue?ue.call(ie):(ie=function Me(ie){var ue="function"==typeof Symbol&&Symbol.iterator,de=ue&&ie[ue],fe=0;if(de)return de.call(ie);if(ie&&"number"==typeof ie.length)return{next:function(){return ie&&fe>=ie.length&&(ie=void 0),{value:ie&&ie[fe++],done:!ie}}};throw new TypeError(ue?"Object is not iterable.":"Symbol.iterator is not defined.")}(ie),de={},fe("next"),fe("throw"),fe("return"),de[Symbol.asyncIterator]=function(){return this},de);function fe(He){de[He]=ie[He]&&function(ht){return new Promise(function(mt,nr){!function Fe(He,ht,mt,nr){Promise.resolve(nr).then(function(Ft){He({value:Ft,done:mt})},ht)}(mt,nr,(ht=ie[He](ht)).done,ht.value)})}}}F.d(Re,{FC:()=>De,KL:()=>he,_T:()=>se,mG:()=>Y,qq:()=>oe}),"function"==typeof SuppressedError&&SuppressedError}},vt=>{vt(vt.s=8170)}]);